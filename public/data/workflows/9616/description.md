# Classify YouTube Trends and Generate Email Summaries with GPT-4 and Gmail

![YouTube Trend Detector](https://img.shields.io/badge/Template-YouTube_Trend_Detector-blue?logo=n8n)
![YouTube](https://img.shields.io/badge/YouTube-FF0000?logo=youtube&logoColor=white)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4-black?logo=openai)
![n8n](https://img.shields.io/badge/Workflow-n8n-12BEB4?logo=n8n&logoColor=white)
![Gmail](https://img.shields.io/badge/Email-Gmail_OAuth2-D14836?logo=gmail&logoColor=white)
![SMTP](https://img.shields.io/badge/Email-SMTP-6E6E6E)

Monitor YouTube channels, fetch stats, classify videos as viral (â‰¥ 1000 likes) or normal, and autoâ€‘generate LinkedIn/email summaries with GPTâ€‘4. Deliver via Gmail or SMTP. Clear node names, examples, and auditable fields.

---

## ğŸ¯ Overview
This template monitors YouTube channels via **RSS** or the **YouTube Data API**, retrieves video stats, classifies each video as **viral** (â‰¥ 1000 likes) or **normal**, and produces concise LinkedIn/email summaries with **OpenAI (GPTâ€‘4 family)**. It can send a compact weekly briefing via **Gmail (OAuth2)** or **SMTP**. Built for creators, marketing teams, and agencies who want automated trend alerts and readyâ€‘toâ€‘use content.

<a href="https://postimg.cc/cKsrVC7x" target="_blank"><img src="https://i.postimg.cc/cKsrVC7x/Screenshot-2025-10-16-085219.png" alt="Screenshot-2025-10-16-085219" /></a>

This screenshot shows the Gmail-ready weekly briefing generated by the **Generate Weekly Briefing (HTML)** node in my YouTube Trend Detector workflow, confirming the end-to-end pipeline: RSS/API â†’ stats â†’ like-based classification (â‰¥ 1000 = viral) â†’ LLM summaries â†’ HTML email.



---

## ğŸ§­ How It Works (Node Map)
1. **Manual Run** â€“ adâ€‘hoc execution  
2. **Set Channel IDs** â€“ provide one or more YouTube `channelId` values  
3. **Split Channels** â€“ process channels one by one  
4. **Fetch Latest Videos (RSS)** â€“ pull recent uploads via channel RSS  
5. **Filter: Published in Last 72h** â€“ only recent items are kept  
6. **Get Video Stats (YouTube API)** â€“ request `snippet,statistics` for likes and details  
7. **Classify by Likes (Code)** â€“ sets `classification` to `viral` or `normal`  
8. **Branch: Normal / Branch: Viral** â€“ separate LLM prompts per relevance  
9. **Write Post (Normal / Viral)** â€“ generate LinkedInâ€‘style notes via OpenAI  
10. **Aggregate Posts for Briefing** â€“ merge all texts into one block  
11. **Generate Weekly Briefing (HTML)** â€“ produce a Gmailâ€‘robust HTML email via GPT  
12. **Send Weekly Briefing (Gmail/SMTP)** â€“ deliver briefing (you set recipients)

---

## âš™ï¸ Quick Start (â‰ˆ 3 minutes)
1. **Import** the sanitized JSON into n8n (Menu â†’ Import).  
2. **Create credentials** (use exact names):  
   - `YouTube_API_Key` â€” Generic credential (field: `apiKey`)  
   - `OpenAi account` â€” OpenAI API Key  
   - `Gmail account` (OAuth2) **or** `SMTP_Default` (SMTP)  
3. **Configure channels:** In **Set Channel IDs**, list your YouTube `channelId` values (e.g., `UCâ€¦`).  
4. **Set recipients:** In **Send Weekly Briefing**, add your target email(s).  
5. **Test:** Run **Execute Workflow** and review outputs from the LLM and send nodes.

---

## ğŸ”‘ Required Credentials
- **YouTube_API_Key** â€” YouTube Data API v3 key (field `apiKey`)  
- **OpenAi account** â€” OpenAI API key for LLM nodes  
- **Gmail account** (OAuth2, recommended) **or** **SMTP_Default** (server/port/TLS + app password if 2FA)

---

## ğŸ§© Key Parameters & Adjustments
- **Viral threshold:** In `Classify by Likes (Code)` â†’ `const THRESHOLD = 1000;`  
- **YouTube API parts:** Use `part=snippet,statistics` to obtain `likeCount`  
- **Time window:** The filter keeps videos from the **last 72 hours**

---

## ğŸ§ª Troubleshooting
- **Missing `likeCount` / `classification = "unknown"`** â†’ ensure `part=statistics` and a valid API key credential.  
- **Gmail OAuth `redirect_mismatch` / `access_denied`** â†’ redirect must be `https://&lt;your-n8n-host&gt;/rest/oauth2-credential/callback` and test users added if restricted.  
- **SMTP auth issues** â†’ set correct server/port/TLS and use an app password when 2FA is enabled.  
- **Empty LLM output** â†’ verify OpenAI key/quota and inspect node logs.

---

## ğŸ§¾ Example Outputs

**1) Classification (single video)**
```json
{
  "videoId": "abc123XYZ",
  "title": "How to Ship an n8n Workflow with OpenAI",
  "likeCount": 1587,
  "classification": "viral",
  "needsStatsFetch": false
}
```

**2) LinkedIn draft (viral)**
```
Did you know how much faster prompt workflows get with structured inputs?
â€¢ Setup: n8n + YouTube API + OpenAI for auto-briefs
â€¢ Tip: include `part=statistics` for reliable like counts
Useful for teams tracking trending how-to content.
Whatâ€™s your best â€œviralâ€ signal besides likes?
#n8n #YouTubeAPI #OpenAI #Automation #Growth
```

**3) Plainâ€‘text email preview**
```
Subject: Weekly AI Briefing â€” YouTube Trend Highlights

Hi team,
Highlights from our tracked channels:
â€¢ Viral: â€œHow to Ship an n8n Workflow with OpenAIâ€ (1.6k likes)
â€¢ Normal: â€œRSS vs API: Whatâ€™s Best for Monitoring?â€
Generated via n8n + GPTâ€‘4.
```

---

## âœ… Submission Checklist (meets the guidelines)
- **Title clarity:** Mentions **GPTâ€‘4** and **Gmail**  
- **Language:** Entire document in **English**  
- **Node naming:** Descriptive, nonâ€‘generic labels  
- **HTML â†’ Markdown:** No HTML in this description; badges are **Markdown images**  
- **Examples:** Included (JSON, LinkedIn draft, email)  
- **Security:** No secrets in JSON; uses credentials by name

---

## ğŸ“¸ Suggested Screenshots (optional)
1. Full canvas overview (entire workflow)  
2. LLM output (expanded) showing generated summary  
3. Sendâ€‘node result with messageId/status  
4. Optional: aggregated briefing preview

---

## ğŸ“œ License & Support
**License:** MIT  
**Support/Contact:** kaihoelters@yahoo.de
