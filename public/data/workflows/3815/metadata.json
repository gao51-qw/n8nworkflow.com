{
  "id": 3815,
  "slug": "3815",
  "title": "Upload & rename videos to Google Drive via Apps Script from URL",
  "description": "## üìÑ Google Script Workflow: Upload File from URL to Google Drive (via n8n)\n\n### üîß Purpose:\nThis lightweight Google Apps Script acts as a server endpoint that receives a file URL (from `n8n`), downloads the file, uploads it to your specified Google Drive folder, and responds with the file‚Äôs metadata (like Drive file ID and URL). This is useful for large video/audio files that `n8n` cannot handle directly via HTTP Download nodes.\n\n---\n\n## üöÄ Setup Steps:\n\n### 1. **Create a New Script Project**\n\n- Go to [https://script.google.com](https://script.google.com)\n- Click **‚ÄúNew Project‚Äù**\n- Rename the project to something like: `DriveUploader`\n\n---\n\n### 2. **Paste the Script Code**\n\nReplace the default `Code.gs` content with the following (your custom script):\n\n```javascript\nfunction doPost(e) {\n  const SECRET_KEY = 'your-strong-secret-here'; // Set your secret key here\n\n  try {\n    const data = JSON.parse(e.postData.contents);\n\n    // üîí Check for correct secret key\n    if (!data.secret || data.secret !== SECRET_KEY) {\n      return ContentService.createTextOutput(\"Unauthorized\")\n        .setMimeType(ContentService.MimeType.TEXT);\n    }\n\n    const videoUrl = data.videoUrl;\n    const folderId = 'YOUR_FOLDER_ID_HERE'; // Replace with your target folder ID\n    const folder = DriveApp.getFolderById(folderId);\n\n    const response = UrlFetchApp.fetch(videoUrl);\n    const blob = response.getBlob();\n    const file = folder.createFile(blob);\n    file.setName('uploaded_video.mp4'); // You can customize the name\n\n    return ContentService.createTextOutput(file.getUrl())\n      .setMimeType(ContentService.MimeType.TEXT);\n  } catch (err) {\n    return ContentService.createTextOutput(\"Error: \" + err.message)\n      .setMimeType(ContentService.MimeType.TEXT);\n  }\n}\n\n```\n---\n\n### 3. Generate & Set Up Secret Key\nTo allow authorized post requests to your script only, we need to generate a secret key from aany reliable key generator. \n- You can head over to [acte](https://acte.ltd/utils/randomkeygen), click generate and copy the \"Encryption key 256\". \n- Paste it in the 'your-strong-secret-here' placeholder in your script then click save\n\n```js\n  const SECRET_KEY = 'your-strong-secret-here'; // Set your secret key here;\n  ```\n\n### 4. **Replace Folder ID in Code**\n\n- Open the target Drive folder in your browser  \n- The folder ID is the part of the URL after `/folders/`  \n  Example:  \n  ```\n  https://drive.google.com/drive/u/0/folders/1Xabc12345678defGHIJklmn\n  ```\n- Paste that ID in the script:  \n  ```js\n  var folderId = \"1Xabc12345678defGHIJklmn\";\n  ```\n---\n### 5. **Set Up Deployment as Web App**\n\n- Click **‚ÄúDeploy‚Äù &gt; ‚ÄúManage Deployments‚Äù &gt; ‚ÄúNew Deployment‚Äù**\n- Under **Select type**, choose **Web app**\n- Description: `Upload from URL to Drive`\n- Execute as: **Me**\n- Who has access: **Anyone**\n- Click **Deploy**\n- Authorize the script when prompted\n- Copy the **Web App URL**\n\n\n\n\n---\n\n## üì§ How to Use in n8n\n\n### 1. **HTTP Request Node**\n\n- Method: `POST`\n- URL: (your web app URL)\n- Secret Key: (Secret Key set in script)\n- Body Content Type: `JSON`\n- Paste code:\n```json\n{\n  \"videoUrl\": \"https://example.com/path/to/your.mp4\",\n  \"secret\": \"your-strong-secret-here\"\n}\n```\n  - `videoUrl`: The file download URL\n  - `secret`: The generated and set up secret key \n\n\n### 2. **Rename Node**\n\n- A simple drive update node to rename the file using the file drive url returned from the script.\n\n---",
  "featuredImage": "/data/workflows/3815/3815.webp",
  "author": {
    "id": 101,
    "slug": "mjomba",
    "name": "Joseph",
    "avatar": ""
  },
  "categories": [
    "File Management"
  ],
  "complexityLevel": "beginner",
  "price": 0,
  "visitors": 750,
  "downloads": 75,
  "createdAt": "2025-05-01T07:57:29.410Z",
  "updatedAt": "2026-01-16T08:31:35.974Z",
  "publishedAt": "2025-05-01T07:57:29.410Z",
  "nodes": 3,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3815"
}