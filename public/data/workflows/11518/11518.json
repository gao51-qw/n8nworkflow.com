{
  "workflow": {
    "id": 11518,
    "name": "Smart Gmail auto-labeler with Gemini AI & sender history",
    "views": 100,
    "recentViews": 1,
    "totalViews": 100,
    "createdAt": "2025-12-05T06:14:38.421Z",
    "description": "# n8n Gmail AI Auto-Labeler\n\n&gt; An intelligent **n8n workflow** that automatically classifies and labels Gmail emails using **Google Gemini AI**, keeping your inbox organized with zero manual effort.\n\nThis workflow uses AI-powered classification to analyze email content, learn from sender patterns, and automatically apply appropriate labels while archiving processed emails.\n\n---\n\n## How It Works\n\n1. **Trigger**: The workflow runs automatically every minute to check for new unread emails (or manually for bulk processing).\n2. **Check for Existing Labels**: Before processing, it verifies if the email already has an AI-assigned label to avoid duplicate processing.\n3. **AI Classification**: If unlabeled, the AI agent analyzes the email using:\n   * **Sender History Tool** - Fetches up to 10 previous emails from the same sender to identify patterns\n   * **80% Majority Rule** - If 80%+ of sender's past emails have the same label, strongly prefers that category\n   * **Label Examples Tool** - When uncertain, compares the email with existing examples from suspected categories\n4. **Smart Decision**: The AI returns a structured JSON response:\n   ```json\n   {\n     \"label\": \"Category Name\"\n   }\n   ```\n   Or `\"None\"` if no category fits.\n5. **Apply & Archive**:\n   * **Label Applied** ‚Üí The workflow adds the appropriate Gmail label to the thread.\n   * **Auto-Archive** ‚Üí Removes the email from INBOX (archives it) to maintain zero-inbox.\n6. **Loop**: Processes the next email in the batch, ensuring all new emails are classified.\n\n---\n\n## Requirements\n\n* **Gmail OAuth2 Credentials** - Connected Gmail account with API access.\n* **Google Gemini API Key** - [Get it here](https://ai.google.dev/)\n  * Free tier: 15 requests/minute\n* **Gmail Labels** - Must be created in Gmail exactly as listed:\n  * Meetings\n  * Income\n  * Inquiries\n  * Notify / Verify\n  * Expenses\n  * Orders / Deliveries\n  * Trash Likely\n\n---\n\n## How to Use\n\n1. **Import the Workflow**:\n   * Copy the provided JSON file.\n   * In your n8n instance ‚Üí click **Import Workflow** ‚Üí select the JSON file.\n\n2. **Create Gmail Labels**:\n   * Open Gmail ‚Üí Settings ‚Üí Labels ‚Üí Create new labels.\n   * Use the exact names listed above (case-sensitive).\n\n3. **Get Your Label IDs**:\n   * In the workflow, click **\"When clicking 'Execute workflow'\"** manual trigger.\n   * Execute the **\"Get Labels Info\"** node only.\n   * Copy each label's ID (format: `Label_1234567890123456789`).\n\n4. **Update Code Nodes with Your Label IDs**:\n   \n   **Node 1: \"Check Label Existence\"**\n   ```javascript\n   const labelMap = {\n     \"Label_YOUR_ID_HERE\": \"Meetings\",\n     \"Label_YOUR_ID_HERE\": \"Inquiries\",\n     \"Label_YOUR_ID_HERE\": \"Notify / Verify\",\n     \"Label_YOUR_ID_HERE\": \"Expenses\",\n     \"Label_YOUR_ID_HERE\": \"Orders / Deliveries\",\n     \"Label_YOUR_ID_HERE\": \"Trash Likely\"\n   };\n   ```\n\n   **Node 2: \"Convert Label to Label ID\"**\n   ```javascript\n   const labelToId = {\n     \"Meetings\": \"Label_YOUR_ID_HERE\",\n     \"Inquiries\": \"Label_YOUR_ID_HERE\",\n     \"Notify / Verify\": \"Label_YOUR_ID_HERE\",\n     \"Expenses\": \"Label_YOUR_ID_HERE\",\n     \"Orders / Deliveries\": \"Label_YOUR_ID_HERE\",\n     \"Trash Likely\": \"Label_YOUR_ID_HERE\"\n   };\n   ```\n\n5. **Set Up Credentials**:\n   * **Gmail OAuth2** ‚Üí Authorize your Gmail account in n8n.\n   * **Google Gemini API** ‚Üí Add your API key in n8n credentials.\n\n6. **Test the Workflow**:\n   * Send yourself test emails with clear content (e.g., invoice, meeting invite).\n   * Use the manual trigger to process them.\n   * Verify labels are applied correctly.\n\n7. **Activate for Auto Mode**:\n   * Toggle the workflow to **Active**.\n   * New unread emails will be processed automatically every minute.\n\n---\n\n## Notes\n\n* **Dual Execution Modes**:\n  * **Auto Mode** - Gmail Trigger polls inbox every minute for unread emails (real-time processing).\n  * **Manual Mode** - Use the manual trigger to bulk process existing emails (adjust limit in \"Get many messages\" node).\n\n* **AI Learning from Patterns**:\n  * The workflow applies an **80% majority rule** - if 80% or more of a sender's historical emails share the same label, the AI strongly prefers that category for new emails from that sender.\n  * This creates intelligent sender-based routing over time.\n\n* **Skip Already Labeled Emails**:\n  * The \"Check Label Existence\" node prevents re-processing emails that already have an AI-assigned label.\n  * Ensures efficient execution and avoids duplicate work.\n\n* **Structured AI Output**:\n  * Uses a **Structured Output Parser** to ensure the AI always returns valid JSON: `{ \"label\": \"Category\" }`.\n  * If uncertain, returns `{ \"label\": \"None\" }` and the email stays in inbox.\n\n* **Background Archiving**:\n  * After labeling, emails are automatically removed from INBOX (archived).\n  * Maintains a zero-inbox workflow while preserving emails under their labels.\n\n* **Rate Limits**:\n  * Google Gemini free tier: 15 requests/minute.\n  * Adjust polling frequency if hitting limits.\n\n---\n\n## Example Behavior\n\n* **Minute 1**: New invoice email arrives ‚Üí AI fetches sender history ‚Üí 85% were labeled \"Expenses\" ‚Üí applies \"Expenses\" label ‚Üí archives email.\n* **Minute 2**: Meeting invite arrives ‚Üí No sender history ‚Üí AI analyzes content (Zoom link, time) ‚Üí applies \"Meetings\" label ‚Üí archives email.\n* **Minute 3**: Promotional email arrives ‚Üí AI compares with \"Trash Likely\" examples ‚Üí applies label ‚Üí archives email.\n* **Minute 4**: Already-labeled email detected ‚Üí skipped silently.\n\n---\n\n## Label Categories\n\n| Label | Description |\n|-------|-------------|\n| **Meetings** | Calendar invites, Zoom/Meet links, appointments, scheduled events |\n| **Expenses** | Bills, invoices, receipts, payment reminders, subscription renewals |\n| **Income** | Payments received, payouts, deposits, earnings notifications |\n| **Notify / Verify** | Verification codes, login alerts, 2FA codes, account notifications |\n| **Orders / Deliveries** | Order confirmations, shipping updates, tracking numbers, deliveries |\n| **Inquiries** | Business outreach, sales proposals, partnerships, cold emails |\n| **Trash Likely** | Spam, newsletters, promotions, marketing blasts, ads |\n\n&gt; If no category fits clearly, the email returns `\"None\"` and remains in the inbox.\n\n---\n\n## Customization\n\n* **Change Polling Frequency**: Edit the \"Gmail Trigger\" node ‚Üí `pollTimes` ‚Üí `mode` (e.g., `every5Minutes`).\n* **Adjust Email Limit**: Modify `limit: 10` in \"Get many messages\" node for manual bulk processing.\n* **Add Custom Labels**: Create in Gmail ‚Üí Get ID ‚Üí Update both Code nodes + AI system prompt.\n* **Modify 80% Rule**: Edit the AI agent's system message to adjust the majority threshold.\n* **Increase Tool Limits**: Change `limit: 10` in Gmail tool nodes to fetch more historical data.\n\n---\n\n**Author:** Muhammad Anas Farooq\n",
    "workflow": {
      "meta": {
        "instanceId": "0cf1013c00750bfab7ca7f6a76bf0e8c2407d7a4a9a4e66c4888ec456837f043",
        "templateCredsSetupCompleted": true
      },
      "nodes": [
        {
          "id": "2edf070f-9e4b-46eb-9b78-77a9bc05ea55",
          "name": "Gmail Trigger",
          "type": "n8n-nodes-base.gmailTrigger",
          "position": [
            -896,
            208
          ],
          "parameters": {
            "simple": false,
            "filters": {
              "readStatus": "unread"
            },
            "options": {},
            "pollTimes": {
              "item": [
                {
                  "mode": "everyMinute"
                }
              ]
            }
          },
          "credentials": {
            "gmailOAuth2": {
              "id": "credential-id",
              "name": "gmailOAuth2 Credential"
            }
          },
          "typeVersion": 1.2
        },
        {
          "id": "8aa5c340-cff7-4714-ac66-90f1b6df2560",
          "name": "Loop Over Items",
          "type": "n8n-nodes-base.splitInBatches",
          "position": [
            -656,
            64
          ],
          "parameters": {
            "options": {}
          },
          "typeVersion": 3
        },
        {
          "id": "5e9c9bd9-b9a7-4635-91ab-f7a021128c11",
          "name": "Google Gemini Chat Model",
          "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
          "position": [
            -48,
            336
          ],
          "parameters": {
            "options": {}
          },
          "credentials": {
            "googlePalmApi": {
              "id": "credential-id",
              "name": "googlePalmApi Credential"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "f3503d1c-03b7-4204-8b90-34cc9b58d1d8",
          "name": "Get Emails By Sender Email",
          "type": "n8n-nodes-base.gmailTool",
          "position": [
            144,
            336
          ],
          "webhookId": "c33dfdbc-62dd-4414-a5d4-ec93b5be88f8",
          "parameters": {
            "limit": 10,
            "filters": {
              "sender": "={{ $('Loop Over Items').item.json.from.value[0].address }}",
              "receivedBefore": "={{ $('Loop Over Items').item.json.date }}",
              "includeSpamTrash": false
            },
            "operation": "getAll",
            "descriptionType": "manual",
            "toolDescription": "=Fetches previous emails sent by this sender. Always use this tool first. Returned items include subject, body, and previously assigned label."
          },
          "credentials": {
            "gmailOAuth2": {
              "id": "credential-id",
              "name": "gmailOAuth2 Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "4cd2fddd-e18a-4388-ac8f-9b69d73c172c",
          "name": "Get Emails By Label",
          "type": "n8n-nodes-base.gmailTool",
          "position": [
            304,
            336
          ],
          "webhookId": "c33dfdbc-62dd-4414-a5d4-ec93b5be88f8",
          "parameters": {
            "limit": 10,
            "filters": {
              "q": "=label:{{ $fromAI('Label_Names', ``, 'string', 'The Label Name') }}",
              "includeSpamTrash": false
            },
            "operation": "getAll",
            "descriptionType": "manual",
            "toolDescription": "=Fetches previously labeled emails for a given label. Use only if sender history is insufficient or unclear. Compare content to confirm label matching."
          },
          "credentials": {
            "gmailOAuth2": {
              "id": "credential-id",
              "name": "gmailOAuth2 Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "795a9f38-d015-45d8-bcd8-425fc6b5e004",
          "name": "Email Classifier Agent",
          "type": "@n8n/n8n-nodes-langchain.agent",
          "position": [
            112,
            64
          ],
          "parameters": {
            "text": "=You have received a new email. Label it correctly following all system rules.\n\nSubject: {{ $('Loop Over Items').item.json.headers.subject }}\nEmail Body: {{ $('Loop Over Items').item.json.text }}\n\nProcess:\n1. First call \"Get Emails By Sender Email\".\n2. Analyze past labels from this sender (if any).\n3. If needed, call \"Get Emails By Label\" to compare with category examples.\n4. Assign the most appropriate label based on rules.\n5. If none clearly fit, return \"None\".\n\nReturn output ONLY as:\n{\n  \"label\": \"...\"\n}\n",
            "options": {
              "systemMessage": "=You are an Email Classification AI Agent. Your job is to assign the correct label to incoming emails based on their subject and body, while optionally using tools to retrieve contextual history.\n\nYour final output MUST ALWAYS be in this format:\n{\n  \"label\": \"...\"\n}\n\nOnly choose one label, or return \"None\" if no label logically fits.\n---------------------------------------\nLABEL DEFINITIONS\n---------------------------------------\nMeetings:\nEmails containing virtual meetings, appointment scheduling, event details, Zoom/Meet links, or anything referencing a scheduled time.\n\nExpenses:\nBills, invoices, receipts, payment reminders, fees, subscription renewals, upcoming payments.\n\nIncome:\nPayment received, payouts, transfer confirmations, deposit notifications, earnings from platforms.\n\nNotify / Verify:\nAccount notifications, verification codes, login alerts, confirmations, 2FA codes, system alerts (non-promotional).\n\nOrders / Deliveries:\nOrder confirmations, shipping updates, tracking numbers, package delivery notifications.\n\nInquiries:\nGeneral questions, outreach emails, sales proposals, partnership requests, sponsorships, cold emails.\n\nTrash Likely:\nSpam, newsletters, promotions, ads, marketing blasts, unnecessary subscription emails.\n\nNone:\nUse only when absolutely none of the above categories correctly fit.\n\n---------------------------------------\nCLASSIFICATION LOGIC RULES\n---------------------------------------\n1. **ALWAYS start by calling ‚ÄúGet Emails By Sender Email‚Äù.**\n   - Fetch all historical emails from this sender.\n   - Read their subjects, bodies, and **previously assigned labels**.\n\n2. **Apply Majority Rule Bias (80% Rule).**\n   - If 80% or more of historical emails from this sender have the same label,\n     strongly prefer that label *if the new email is even loosely consistent.*\n   - If the new email drastically contradicts that label, ignore the bias.\n\n3. **If the sender has NO prior emails:**\n   - Skip sender-based logic.\n   - Classify purely based on subject + body content.\n\n4. **If sender history is not enough to make a confident classification:**\n   - Make a *best guess* label candidate.\n   - Then call ‚ÄúGet Emails By Label‚Äù using that candidate to fetch known examples.\n   - Compare and refine your decision.\n\n5. **If still uncertain after comparisons:**\n   - Return:\n     {\n       \"label\": \"None\"\n     }\n\n6. **The final output must ONLY be the JSON label.**\n   No explanations, no tool thoughts, no reasoning.\n\n---------------------------------------\nGENERAL BEHAVIOR\n---------------------------------------\n- Think step-by-step, but only output JSON at the end.\n- Prefer precision over guessing.\n- Never return more than one label.\n"
            },
            "promptType": "define",
            "hasOutputParser": true
          },
          "typeVersion": 3
        },
        {
          "id": "e6acfbf9-5306-4091-8dee-dd0916cf0819",
          "name": "Structured Output Parser",
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "position": [
            480,
            336
          ],
          "parameters": {
            "jsonSchemaExample": "{\n  \"label\": \"The Selected Label Name\"\n}"
          },
          "typeVersion": 1.3
        },
        {
          "id": "9169d5e2-109a-4a43-bbab-0323450e976f",
          "name": "Add label to thread",
          "type": "n8n-nodes-base.gmail",
          "position": [
            928,
            48
          ],
          "webhookId": "5d9551c6-c3e7-41af-a8a7-b076d6126560",
          "parameters": {
            "labelIds": "={{ [$json.gmailLabelId] }}",
            "resource": "thread",
            "threadId": "={{ $('Loop Over Items').item.json.threadId }}",
            "operation": "addLabels"
          },
          "credentials": {
            "gmailOAuth2": {
              "id": "credential-id",
              "name": "gmailOAuth2 Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "311ca8a2-3c7b-46f2-aa89-8c6f8e40beca",
          "name": "Check Label Existence",
          "type": "n8n-nodes-base.code",
          "position": [
            -400,
            80
          ],
          "parameters": {
            "jsCode": "const labelMap = {\n  \"Label_2420158633459891270\": \"Meetings\",\n  \"Label_2793806992005255116\": \"Inquiries\",\n  \"Label_4191442057272125729\": \"Notify / Verify\",\n  \"Label_4895303893849157619\": \"Expenses\",\n  \"Label_670736358532545568\": \"Orders / Deliveries\",\n  \"Label_6828+1234567890\": \"Trash Likely\"\n};\n\nconst matchedLabel = ($input.first().json.labelIds ?? [])\n  .find(id => labelMap[id]) \n  ? labelMap[($input.first().json.labelIds ?? []).find(id => labelMap[id])]\n  : null;\n\nreturn [{ json: { hasAILabelAssigned: !!matchedLabel, matchedLabel } }];\n"
          },
          "typeVersion": 2
        },
        {
          "id": "4bd26bec-57f3-45ce-a224-1c776bc8b60a",
          "name": "If Not Assigned",
          "type": "n8n-nodes-base.if",
          "position": [
            -192,
            80
          ],
          "parameters": {
            "options": {},
            "conditions": {
              "options": {
                "version": 2,
                "leftValue": "",
                "caseSensitive": true,
                "typeValidation": "strict"
              },
              "combinator": "and",
              "conditions": [
                {
                  "id": "01b63305-1a36-4800-b450-4aea118e6e30",
                  "operator": {
                    "type": "boolean",
                    "operation": "false",
                    "singleValue": true
                  },
                  "leftValue": "={{ $json.hasAILabelAssigned }}",
                  "rightValue": false
                }
              ]
            }
          },
          "typeVersion": 2.2
        },
        {
          "id": "8bc95c18-b697-4710-9b79-86023a9c58f6",
          "name": "If not None",
          "type": "n8n-nodes-base.if",
          "position": [
            464,
            64
          ],
          "parameters": {
            "options": {},
            "conditions": {
              "options": {
                "version": 2,
                "leftValue": "",
                "caseSensitive": true,
                "typeValidation": "strict"
              },
              "combinator": "and",
              "conditions": [
                {
                  "id": "1bfd81e3-921c-4e4a-a1a2-70ac049a333b",
                  "operator": {
                    "type": "string",
                    "operation": "notEquals"
                  },
                  "leftValue": "={{ $json.output.label }}",
                  "rightValue": "None"
                }
              ]
            }
          },
          "typeVersion": 2.2
        },
        {
          "id": "49ab9a45-b23d-4a81-a4da-f5afca5dd84d",
          "name": "Get many messages",
          "type": "n8n-nodes-base.gmail",
          "position": [
            -896,
            -48
          ],
          "webhookId": "9364cf75-0514-4a4c-949d-0ee540a6246a",
          "parameters": {
            "limit": 10,
            "simple": false,
            "filters": {},
            "options": {},
            "operation": "getAll"
          },
          "credentials": {
            "gmailOAuth2": {
              "id": "credential-id",
              "name": "gmailOAuth2 Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "f7c194b0-a74b-4252-b418-4c9ebc936800",
          "name": "When clicking ‚ÄòExecute workflow‚Äô",
          "type": "n8n-nodes-base.manualTrigger",
          "position": [
            -1104,
            -48
          ],
          "parameters": {},
          "typeVersion": 1
        },
        {
          "id": "2e244f4c-2b4e-41bb-a453-132e1bb0e5ab",
          "name": "Get Labels Info",
          "type": "n8n-nodes-base.gmail",
          "position": [
            -656,
            608
          ],
          "webhookId": "fa2198ac-76ac-4c87-8929-54d0f18b7585",
          "parameters": {
            "resource": "label",
            "returnAll": true
          },
          "credentials": {
            "gmailOAuth2": {
              "id": "credential-id",
              "name": "gmailOAuth2 Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "6de8b305-9f91-420e-9186-21c3b542e18e",
          "name": "Convert Label to Label ID",
          "type": "n8n-nodes-base.code",
          "position": [
            704,
            48
          ],
          "parameters": {
            "jsCode": "const aiLabel = $input.first().json.output.label; // e.g. \"Meetings\"\n\n// Mapping of AI labels ‚Üí Gmail label IDs\nconst labelToId = {\n  \"Meetings\": \"Label_2420158633459891270\",\n  \"Inquiries\": \"Label_2793806992005255116\",\n  \"Notify / Verify\": \"Label_4191442057272125729\",\n  \"Expenses\": \"Label_4895303893849157619\",\n  \"Orders / Deliveries\": \"Label_670736358532545568\",\n  \"Trash Likely\": \"Label_6828+1234567890\"\n};\n\nreturn [\n  {\n    json: {\n      gmailLabelId: labelToId[aiLabel] || null\n    }\n  }\n];\n"
          },
          "typeVersion": 2
        },
        {
          "id": "90961646-64c4-4328-80f3-d8f39a5dc656",
          "name": "Remove Inbox label from thread",
          "type": "n8n-nodes-base.gmail",
          "position": [
            1136,
            48
          ],
          "webhookId": "d981990d-9a55-4dc8-9753-96bb6e76b934",
          "parameters": {
            "labelIds": [
              "INBOX"
            ],
            "resource": "thread",
            "threadId": "={{ $json.messages[0].threadId }}",
            "operation": "removeLabels"
          },
          "credentials": {
            "gmailOAuth2": {
              "id": "credential-id",
              "name": "gmailOAuth2 Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "dda08ae5-40a6-45cc-990c-1a0e5204e998",
          "name": "Workflow Overview",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -1664,
            -224
          ],
          "parameters": {
            "color": 4,
            "width": 372,
            "height": 290,
            "content": "## üéØ WORKFLOW OVERVIEW\n\n**Auto-classifies & labels Gmail using AI**\n\n‚úÖ Checks inbox every minute for unread emails\n‚úÖ Uses Google Gemini AI to classify emails\n‚úÖ Applies labels based on content + sender history\n‚úÖ Archives emails (removes from INBOX)\n‚úÖ Skips already-labeled emails\n\n**Result:** Zero-inbox email management system"
          },
          "typeVersion": 1
        },
        {
          "id": "0e73909d-025c-4020-97d3-3f96ddaddcb3",
          "name": "Setup Instructions",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -1664,
            112
          ],
          "parameters": {
            "color": 2,
            "width": 400,
            "height": 684,
            "content": "## üîß SETUP STEPS (DO THIS FIRST!)\n\n### 1Ô∏è‚É£ Create Gmail Labels\nCreate these exact labels in Gmail:\n- Meetings\n- Inquiries  \n- Notify / Verify\n- Expenses\n- Orders / Deliveries\n- Trash Likely\n\n### 2Ô∏è‚É£ Get Your Label IDs\n- Click the Manual Trigger below\n- Run \"Get Labels Info\" node\n- Copy the ID for each label\n- Update the two Code nodes\n\n### 3Ô∏è‚É£ Configure Credentials\n- Gmail OAuth2 (for email access)\n- Google Gemini API (for AI)\n\n### 4Ô∏è‚É£ Test Before Activating\n- Send yourself test emails\n- Run manually\n- Verify labels applied correctly"
          },
          "typeVersion": 1
        },
        {
          "id": "6ab0101b-b93d-4332-842d-f1ab764c7632",
          "name": "Gmail Trigger Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -1216,
            144
          ],
          "parameters": {
            "color": 3,
            "width": 280,
            "height": 220,
            "content": "## ‚ö° TRIGGER\n\nPolls Gmail every 1 minute\nOnly fetches UNREAD emails\n\n‚öôÔ∏è To change frequency:\nEdit pollTimes ‚Üí mode"
          },
          "typeVersion": 1
        },
        {
          "id": "061329fd-d9b1-4316-90af-003b201e3a5b",
          "name": "Label Check Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -448,
            -304
          ],
          "parameters": {
            "color": 6,
            "width": 380,
            "height": 340,
            "content": "## üõ°Ô∏è SKIP IF ALREADY LABELED\n\n**Check Label Existence** node:\n- Looks at email's current labels\n- Checks if any AI label already exists\n- Returns hasAILabelAssigned: true/false\n\n**If Not Assigned** node:\n- Only continues if hasAILabelAssigned = false\n- Prevents re-processing same email\n\n‚ö†Ô∏è **IMPORTANT:** Update labelMap in this Code node with YOUR label IDs!"
          },
          "typeVersion": 1
        },
        {
          "id": "c1b365b3-792f-4739-b5df-498d74788665",
          "name": "AI Agent Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            32,
            -624
          ],
          "parameters": {
            "color": 4,
            "width": 420,
            "height": 632,
            "content": "## üß† AI CLASSIFICATION ENGINE\n\n**How it works:**\n\n1Ô∏è‚É£ **Get Emails By Sender** (always called first)\n   - Fetches sender's email history\n   - Checks previously assigned labels\n   \n2Ô∏è‚É£ **80% RULE** (Majority Bias)\n   - If 80%+ of sender's emails = same label\n   - Strongly prefer that label (if email matches)\n   \n3Ô∏è‚É£ **Get Emails By Label** (if uncertain)\n   - Fetches examples from suspected category\n   - Compares current email to examples\n   \n4Ô∏è‚É£ **Returns JSON:**\n   ```json\n   { \"label\": \"Category Name\" }\n   ```\n   or\n   ```json\n   { \"label\": \"None\" }\n   ```\n\nüí° **Pro Tip:** The AI learns from sender patterns!\nIf someone always sends invoices, future emails\nfrom them will likely be labeled \"Expenses\""
          },
          "typeVersion": 1
        },
        {
          "id": "15599558-75c6-4717-803e-468b0161f405",
          "name": "Sender Tool Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -80,
            528
          ],
          "parameters": {
            "color": 5,
            "width": 300,
            "height": 272,
            "content": "## üîç TOOL: Get Sender History\n\nFetches up to 10 previous emails\nfrom the same sender address\n\nFilters:\n- Received BEFORE current email\n- From same sender\n- Includes subject, body, labels"
          },
          "typeVersion": 1
        },
        {
          "id": "34cf4327-bbfa-4b9b-afff-a1e9f2b60c11",
          "name": "Label Tool Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            240,
            512
          ],
          "parameters": {
            "color": 5,
            "width": 300,
            "height": 288,
            "content": "## üîç TOOL: Get Label Examples\n\nFetches up to 10 emails\nfrom a specific label category\n\nUse when:\n- Sender has no history\n- Need to compare examples\n- Uncertain about classification"
          },
          "typeVersion": 1
        },
        {
          "id": "5c914b27-389e-4c75-aae8-588324780722",
          "name": "Label Application Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            576,
            -336
          ],
          "parameters": {
            "color": 2,
            "width": 564,
            "height": 360,
            "content": "## ‚úÖ LABEL APPLICATION\n\n**If not None** ‚Üí Only continues if AI returned a category\n\n**Convert Label to Label ID:**\n- Maps AI label name ‚Üí Gmail label ID\n- Example: \"Meetings\" ‚Üí \"Label_2420158633459891270\"\n\n‚ö†Ô∏è **CRITICAL:** Update labelToId mapping with YOUR label IDs!\n\n**Add label to thread** ‚Üí Applies the label\n\n**Remove label from thread** ‚Üí Archives (removes INBOX)"
          },
          "typeVersion": 1
        },
        {
          "id": "44109984-8de2-495b-85f5-7c3e27b8d2b0",
          "name": "Get Label IDs",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -928,
            800
          ],
          "parameters": {
            "color": 7,
            "width": 400,
            "height": 444,
            "content": "## üîë HOW TO GET YOUR LABEL IDs\n\n### Use Manual Trigger\n1. Click \"When clicking 'Execute workflow'\"\n2. Click \"Execute Node\" on \"Get Labels Info\"\n3. View output - copy each label's ID\n\n### Label ID Format:\n```\nLabel_1234567890123456789\n```\n\n### Update These Nodes:\n1. **Check Label Existence** (line 5)\n2. **Convert Label to Label ID** (line 5)"
          },
          "typeVersion": 1
        }
      ],
      "pinData": {},
      "connections": {
        "If not None": {
          "main": [
            [
              {
                "node": "Convert Label to Label ID",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Gmail Trigger": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "If Not Assigned": {
          "main": [
            [
              {
                "node": "Email Classifier Agent",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Loop Over Items": {
          "main": [
            [],
            [
              {
                "node": "Check Label Existence",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get many messages": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Add label to thread": {
          "main": [
            [
              {
                "node": "Remove Inbox label from thread",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get Emails By Label": {
          "ai_tool": [
            [
              {
                "node": "Email Classifier Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        },
        "Check Label Existence": {
          "main": [
            [
              {
                "node": "If Not Assigned",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Email Classifier Agent": {
          "main": [
            [
              {
                "node": "If not None",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Google Gemini Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Email Classifier Agent",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser": {
          "ai_outputParser": [
            [
              {
                "node": "Email Classifier Agent",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Convert Label to Label ID": {
          "main": [
            [
              {
                "node": "Add label to thread",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get Emails By Sender Email": {
          "ai_tool": [
            [
              {
                "node": "Email Classifier Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        },
        "Remove Inbox label from thread": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "When clicking ‚ÄòExecute workflow‚Äô": {
          "main": [
            [
              {
                "node": "Get many messages",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      }
    },
    "lastUpdatedBy": 29,
    "workflowInfo": {
      "nodeCount": 25,
      "nodeTypes": {
        "n8n-nodes-base.if": {
          "count": 2
        },
        "n8n-nodes-base.code": {
          "count": 2
        },
        "n8n-nodes-base.gmail": {
          "count": 4
        },
        "n8n-nodes-base.gmailTool": {
          "count": 2
        },
        "n8n-nodes-base.stickyNote": {
          "count": 9
        },
        "n8n-nodes-base.gmailTrigger": {
          "count": 1
        },
        "n8n-nodes-base.manualTrigger": {
          "count": 1
        },
        "n8n-nodes-base.splitInBatches": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.agent": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.lmChatGoogleGemini": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.outputParserStructured": {
          "count": 1
        }
      }
    },
    "status": "published",
    "user": {
      "name": "Muhammad Anas Farooq",
      "username": "anasn-farooq",
      "bio": "",
      "verified": false,
      "links": [
        "https://github.com/anas-farooq8"
      ],
      "avatar": "https://gravatar.com/avatar/8b14b291d9ae7f24b8f8bb4b44848fc9cd1221754372f8f82bfd121cfbb845ad?r=pg&d=retro&size=200"
    },
    "nodes": [
      {
        "id": 20,
        "icon": "fa:map-signs",
        "name": "n8n-nodes-base.if",
        "codex": {
          "data": {
            "alias": [
              "Router",
              "Filter",
              "Condition",
              "Logic",
              "Boolean",
              "Branch"
            ],
            "details": "The IF node can be used to implement binary conditional logic in your workflow. You can set up one-to-many conditions to evaluate each item of data being inputted into the node. That data will either evaluate to TRUE or FALSE and route out of the node accordingly.\n\nThis node has multiple types of conditions: Bool, String, Number, and Date & Time.",
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                  "icon": "üè≠",
                  "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
                },
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "‚òÄÔ∏è",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "üß¨",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/create-a-toxic-language-detector-for-telegram/",
                  "icon": "ü§¨",
                  "label": "Create a toxic language detector for Telegram in 4 step"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                  "icon": "üîó",
                  "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
                },
                {
                  "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                  "icon": "‚öôÔ∏è",
                  "label": "Automate your data processing pipeline in 9 steps"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "üë•",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "‚ö°Ô∏è",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "üí°",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/automation-for-maintainers-of-open-source-projects/",
                  "icon": "üè∑Ô∏è",
                  "label": "How to automatically manage contributions to open-source projects"
                },
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " üï∏Ô∏è",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ü§ñ",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                  "icon": "üß†",
                  "label": "Why this Product Manager loves workflow automation with n8n"
                },
                {
                  "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                  "icon": "üôå",
                  "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "üé°",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                  "icon": "üéñ",
                  "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.if/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Flow"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "If",
          "color": "#408000"
        },
        "iconData": {
          "icon": "map-signs",
          "type": "icon"
        },
        "displayName": "If",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 39,
        "icon": "fa:sync",
        "name": "n8n-nodes-base.splitInBatches",
        "codex": {
          "data": {
            "alias": [
              "Loop",
              "Concatenate",
              "Batch",
              "Split",
              "Split In Batches"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " üï∏Ô∏è",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                  "icon": "üéñ",
                  "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.splitinbatches/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Flow"
              ]
            }
          }
        },
        "group": "[\"organization\"]",
        "defaults": {
          "name": "Loop Over Items",
          "color": "#007755"
        },
        "iconData": {
          "icon": "sync",
          "type": "icon"
        },
        "displayName": "Loop Over Items (Split in Batches)",
        "typeVersion": 3,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 356,
        "icon": "file:gmail.svg",
        "name": "n8n-nodes-base.gmail",
        "codex": {
          "data": {
            "alias": [
              "email",
              "human",
              "form",
              "wait",
              "hitl",
              "approval"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "üß¨",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                  "icon": "üé´",
                  "label": "Supercharging your conference registration process with n8n"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "üë•",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "üí°",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/your-business-doesnt-need-you-to-operate/",
                  "icon": " üñ•Ô∏è",
                  "label": "Hey founders! Your business doesn't need you to operate"
                },
                {
                  "url": "https://n8n.io/blog/using-automation-to-boost-productivity-in-the-workplace/",
                  "icon": "üí™",
                  "label": "Using Automation to Boost Productivity in the Workplace"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.gmail/"
                }
              ],
              "credentialDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
                }
              ]
            },
            "categories": [
              "Communication",
              "HITL"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "HITL": [
                "Human in the Loop"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Gmail"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMTkzIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZmlsbD0iIzQyODVGNCIgZD0iTTU4LjE4MiAxOTIuMDVWOTMuMTRMMjcuNTA3IDY1LjA3NyAwIDQ5LjUwNHYxMjUuMDkxYzAgOS42NTggNy44MjUgMTcuNDU1IDE3LjQ1NSAxNy40NTV6Ii8+PHBhdGggZmlsbD0iIzM0QTg1MyIgZD0iTTE5Ny44MTggMTkyLjA1aDQwLjcyN2M5LjY1OSAwIDE3LjQ1NS03LjgyNiAxNy40NTUtMTcuNDU1VjQ5LjUwNWwtMzEuMTU2IDE3LjgzNy0yNy4wMjYgMjUuNzk4eiIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im01OC4xODIgOTMuMTQtNC4xNzQtMzguNjQ3IDQuMTc0LTM2Ljk4OUwxMjggNjkuODY4bDY5LjgxOC01Mi4zNjQgNC42NyAzNC45OTItNC42NyA0MC42NDRMMTI4IDE0NS41MDR6Ii8+PHBhdGggZmlsbD0iI0ZCQkMwNCIgZD0iTTE5Ny44MTggMTcuNTA0VjkzLjE0TDI1NiA0OS41MDRWMjYuMjMxYzAtMjEuNTg1LTI0LjY0LTMzLjg5LTQxLjg5LTIwLjk0NXoiLz48cGF0aCBmaWxsPSIjQzUyMjFGIiBkPSJtMCA0OS41MDQgMjYuNzU5IDIwLjA3TDU4LjE4MiA5My4xNFYxNy41MDRMNDEuODkgNS4yODZDMjQuNjEtNy42NiAwIDQuNjQ2IDAgMjYuMjN6Ii8+PC9zdmc+"
        },
        "displayName": "Gmail",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 6,
            "name": "Communication"
          },
          {
            "id": 28,
            "name": "HITL"
          }
        ]
      },
      {
        "id": 565,
        "icon": "fa:sticky-note",
        "name": "n8n-nodes-base.stickyNote",
        "codex": {
          "data": {
            "alias": [
              "Comments",
              "Notes",
              "Sticky"
            ],
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Sticky Note",
          "color": "#FFD233"
        },
        "iconData": {
          "icon": "sticky-note",
          "type": "icon"
        },
        "displayName": "Sticky Note",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 824,
        "icon": "file:gmail.svg",
        "name": "n8n-nodes-base.gmailTrigger",
        "codex": {
          "data": {
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "üß¨",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                  "icon": "üé´",
                  "label": "Supercharging your conference registration process with n8n"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "üë•",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "üí°",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/your-business-doesnt-need-you-to-operate/",
                  "icon": " üñ•Ô∏è",
                  "label": "Hey founders! Your business doesn't need you to operate"
                },
                {
                  "url": "https://n8n.io/blog/using-automation-to-boost-productivity-in-the-workplace/",
                  "icon": "üí™",
                  "label": "Using Automation to Boost Productivity in the Workplace"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/trigger-nodes/n8n-nodes-base.gmailtrigger/"
                }
              ],
              "credentialDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
                }
              ]
            },
            "categories": [
              "Communication"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0"
          }
        },
        "group": "[\"trigger\"]",
        "defaults": {
          "name": "Gmail Trigger"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMTkzIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZmlsbD0iIzQyODVGNCIgZD0iTTU4LjE4MiAxOTIuMDVWOTMuMTRMMjcuNTA3IDY1LjA3NyAwIDQ5LjUwNHYxMjUuMDkxYzAgOS42NTggNy44MjUgMTcuNDU1IDE3LjQ1NSAxNy40NTV6Ii8+PHBhdGggZmlsbD0iIzM0QTg1MyIgZD0iTTE5Ny44MTggMTkyLjA1aDQwLjcyN2M5LjY1OSAwIDE3LjQ1NS03LjgyNiAxNy40NTUtMTcuNDU1VjQ5LjUwNWwtMzEuMTU2IDE3LjgzNy0yNy4wMjYgMjUuNzk4eiIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im01OC4xODIgOTMuMTQtNC4xNzQtMzguNjQ3IDQuMTc0LTM2Ljk4OUwxMjggNjkuODY4bDY5LjgxOC01Mi4zNjQgNC42NyAzNC45OTItNC42NyA0MC42NDRMMTI4IDE0NS41MDR6Ii8+PHBhdGggZmlsbD0iI0ZCQkMwNCIgZD0iTTE5Ny44MTggMTcuNTA0VjkzLjE0TDI1NiA0OS41MDRWMjYuMjMxYzAtMjEuNTg1LTI0LjY0LTMzLjg5LTQxLjg5LTIwLjk0NXoiLz48cGF0aCBmaWxsPSIjQzUyMjFGIiBkPSJtMCA0OS41MDQgMjYuNzU5IDIwLjA3TDU4LjE4MiA5My4xNFYxNy41MDRMNDEuODkgNS4yODZDMjQuNjEtNy42NiAwIDQuNjQ2IDAgMjYuMjN6Ii8+PC9zdmc+"
        },
        "displayName": "Gmail Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 6,
            "name": "Communication"
          }
        ]
      },
      {
        "id": 834,
        "icon": "file:code.svg",
        "name": "n8n-nodes-base.code",
        "codex": {
          "data": {
            "alias": [
              "cpde",
              "Javascript",
              "JS",
              "Python",
              "Script",
              "Custom Code",
              "Function"
            ],
            "details": "The Code node allows you to execute JavaScript in your workflow.",
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
                }
              ]
            },
            "categories": [
              "Development",
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers",
                "Data Transformation"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Code"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
        },
        "displayName": "Code",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 838,
        "icon": "fa:mouse-pointer",
        "name": "n8n-nodes-base.manualTrigger",
        "codex": {
          "data": {
            "resources": {
              "generic": [],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.manualworkflowtrigger/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0"
          }
        },
        "group": "[\"trigger\"]",
        "defaults": {
          "name": "When clicking ‚ÄòExecute workflow‚Äô",
          "color": "#909298"
        },
        "iconData": {
          "icon": "mouse-pointer",
          "type": "icon"
        },
        "displayName": "Manual Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 1119,
        "icon": "fa:robot",
        "name": "@n8n/n8n-nodes-langchain.agent",
        "codex": {
          "data": {
            "alias": [
              "LangChain",
              "Chat",
              "Conversational",
              "Plan and Execute",
              "ReAct",
              "Tools"
            ],
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Agents",
                "Root Nodes"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "AI Agent",
          "color": "#404040"
        },
        "iconData": {
          "icon": "robot",
          "type": "icon"
        },
        "displayName": "AI Agent",
        "typeVersion": 3,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1179,
        "icon": "fa:code",
        "name": "@n8n/n8n-nodes-langchain.outputParserStructured",
        "codex": {
          "data": {
            "alias": [
              "json",
              "zod"
            ],
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.outputparserstructured/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Output Parsers"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Structured Output Parser"
        },
        "iconData": {
          "icon": "code",
          "type": "icon"
        },
        "displayName": "Structured Output Parser",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1262,
        "icon": "file:google.svg",
        "name": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatgooglegemini/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Language Models",
                "Root Nodes"
              ],
              "Language Models": [
                "Chat Models (Recommended)"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Google Gemini Chat Model"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNDggNDgiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNNDQuNSAyMEgyNHY4LjVoMTEuOEMzNC43IDMzLjkgMzAuMSAzNyAyNCAzN2MtNy4yIDAtMTMtNS44LTEzLTEzczUuOC0xMyAxMy0xM2MzLjEgMCA1LjkgMS4xIDguMSAyLjlsNi40LTYuNEMzNC42IDQuMSAyOS42IDIgMjQgMiAxMS44IDIgMiAxMS44IDIgMjRzOS44IDIyIDIyIDIyYzExIDAgMjEtOCAyMS0yMiAwLTEuMy0uMi0yLjctLjUtNCIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBmaWxsPSIjRkJCQzA1IiBkPSJNMCAzN1YxMWwxNyAxM3oiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im0wIDExIDE3IDEzIDctNi4xTDQ4IDE0VjBIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiMzNEE4NTMiIGQ9Im0wIDM3IDMwLTIzIDcuOSAxTDQ4IDB2NDhIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiM0Mjg1RjQiIGQ9Ik00OCA0OCAxNyAyNGwtNC0zIDM1LTEweiIgY2xpcC1wYXRoPSJ1cmwoI2IpIi8+PC9zdmc+"
        },
        "displayName": "Google Gemini Chat Model",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      }
    ],
    "categories": [
      {
        "id": 41,
        "name": "Ticket Management"
      },
      {
        "id": 49,
        "name": "AI Summarization"
      }
    ],
    "image": []
  }
}