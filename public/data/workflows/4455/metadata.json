{
  "id": 4455,
  "slug": "4455",
  "title": "Shopify multi-module automation with GPT-4o, Langchain agents & integrations",
  "description": "**This n8n workflow orchestrates a powerful suite of AI Agents and automations to manage and optimize various aspects of an e-commerce operation, particularly for platforms like Shopify. It leverages Langchain AI Agents powered by OpenAI, along with a variety of integrated services, to handle customer support, product recommendations, abandoned cart recovery, inventory management, post-purchase engagement, review monitoring, marketing campaigns, and operational alerts.**\n\n# Tools & Services Used\n-   **n8n:** Core automation and orchestration platform.\n-   **Langchain AI Agents:** For intelligent decision-making, task execution, and natural language processing across multiple modules.\n-   **OpenAI (e.g., GPT-4o Mini):** Powers the AI Agents and direct LLM calls for tasks like sentiment analysis and content generation.\n-   **Shopify (Conceptual - requires specific API/Webhook setup):** For triggers (abandoned cart, order delivered) and actions (fetching products/inventory, creating discounts).\n-   **Google Sheets:** Used as a data store for FAQs, logging low stock, review databases, and campaign outcomes.\n-   **Slack:** For internal team notifications (escalations, low stock, negative reviews).\n-   **Twilio (or similar SMS service):** For sending SMS alerts (cart recovery, restock notifications).\n-   **Email (Generic SMTP/API):** For sending various emails (AI responses, recovery emails, review requests, campaign emails).\n-   **Notion:** For logging customer interactions.\n-   **HTTP Request Nodes:** For generic API interactions (fetching customer info, product search, CRM, campaign tracking).\n-   **Webhook Nodes:** For receiving external triggers (incoming messages, product inquiries, review submissions, restock signals).\n-   **Cron Nodes:** For scheduled tasks (hourly inventory checks, daily campaigns).\n\n# Workflow Overview\nThis workflow is a collection of interconnected sub-workflows, each designed to automate a specific e-commerce process:\n\n## 1. Customer Support & Escalation\nHandles incoming customer messages, attempts to answer with FAQs or order status using an AI Agent, and escalates to a human agent via Slack if necessary. Logs interactions to Notion.\n\n## 2. Product Inquiry & Recommendation\nProcesses product inquiries, searches a product catalog, filters/sorts results, uses an AI Agent for selection refinement, and can build a product carousel for user response.\n\n## 3. Abandoned Cart Recovery\nDetects abandoned carts, fetches customer data, uses an AI Agent to strategize recovery (e.g., offer discounts), and sends follow-up communications via email/SMS.\n\n## 4. Inventory Management (Low Stock Alert)\nPeriodically checks inventory levels, identifies low-stock items, uses an AI Agent to format reports, and notifies relevant teams via Slack/email, logging to Google Sheets.\n\n## 5. Post-Purchase Review Request\nAfter a set period post-delivery, an AI Agent drafts and initiates sending a personalized product review request email to the customer.\n\n## 6. Review Monitoring & Flagging\nListens for new product reviews, uses an AI model for sentiment analysis, alerts a support team for negative reviews via Slack, and logs all reviews.\n\n## 7. Scheduled Marketing Campaigns\nFetches target audiences, segments them, uses AI Agents to generate tailored email content, sends campaigns, tracks basic metrics, and employs another AI Agent to suggest campaign adjustments.\n\n## 8. Manual Restock Alert & Logging\nAllows triggering a restock notification via webhook, sends an SMS alert, and uses an LLM to log the event.\n\n# Prerequisites\nEnsure you have active accounts and necessary API keys/credentials for:\n\n-   OpenAI\n-   Shopify (or your e-commerce platform API)\n-   Google Cloud (for Google Sheets API)\n-   Slack (Bot Token)\n-   Twilio (Account SID, Auth Token, From Number)\n-   Your Email Sending Service (SMTP details or API key)\n-   Notion (Integration Token)\n-   Any other external APIs used (e.g., CRM, Product Search, Customer Info, Campaign Tracking)\n\n# How to Use This Template\n\n## Step 1: Import the Template\n-   Open your n8n instance.\n-   Go to “Workflows” &gt; “Create Workflow”.\n-   Click the three dots (…) &gt; “Import from File”.\n-   Upload the downloaded JSON file of this workflow.\n\n## Step 2: Configure Critical Nodes & Credentials\nThis is the most crucial step. Systematically go through each of the 8 sections outlined in the Sticky Notes within the workflow and configure the relevant nodes:\n\n-   **SECTION 1 (Customer Support):**\n    -   `Get FAQs Data` (Google Sheets): Set `sheetId` to **YOUR_SHEET_ID_HERE** and configure Google API credentials.\n    -   `Lookup Order API` (HTTP Request): Set `url` to **YOUR_ORDER_LOOKUP_API_ENDPOINT_HERE**.\n    -   `Notify Human Agent` (Slack): Configure Slack API credentials and `channel`.\n    -   `Send AI Response to Customer` (HTTP Request): Set `url` to **YOUR_CUSTOMER_RESPONSE_API_ENDPOINT_HERE**.\n    -   `Store to Notion` (Notion): Set `pageId` (Database ID) to **YOUR_NOTION_DATABASE_URL_OR_ID_HERE** and Notion API credentials.\n-   **SECTION 2 (Product Inquiry):**\n    -   `Search Products API` (HTTP Request): Set `url` to **YOUR_PRODUCT_SEARCH_API_ENDPOINT_HERE**.\n    -   `Build Product Carousel` (Function): Update **YOUR_DEFAULT_PRODUCT_IMAGE_URL_HERE** and **YOUR_FALLBACK_PRODUCT_URL_HERE**.\n    -   `Respond to User with Carousel` (HTTP Request): Set `url` for sending carousel data.\n-   **SECTION 3 (Abandoned Cart):**\n    -   `Detect Abandoned Cart` (Shopify Trigger): Configure Shopify credentials and ensure the correct trigger event.\n    -   `Fetch Customer Info` (HTTP Request): Set `url` to **YOUR_CUSTOMER_INFO_API_ENDPOINT_HERE**.\n    -   `Create Discount (if applicable)` (Shopify): Configure Shopify credentials and review discount creation parameters.\n    -   `Send Recovery Email` (HTTP Request/Email Send): Set email API endpoint or SMTP credentials.\n    -   `Send SMS Reminder` (Twilio): Configure Twilio credentials and `from` number (**YOUR_TWILIO_PHONE_NUMBER_HERE**).\n-   **SECTION 4 (Low Stock Alerts):**\n    -   `Fetch Inventory` (Shopify): Configure Shopify credentials.\n    -   `Notify Slack (Low Stock)` (Slack): Configure Slack API credentials and `channel`.\n    -   `Generate Email Report (Low Stock)` (Email Send): Configure SMTP/email credentials and `to` address.\n    -   `Export to Sheets (Low Stock Log)` (Google Sheets): Set `sheetId` to **YOUR_INVENTORY_LOG_SHEET_ID_HERE** and Google API credentials.\n-   **SECTION 5 (Review Request):**\n    -   `Order Delivered Trigger` (Shopify Trigger): Configure Shopify credentials.\n    -   `Fetch Customer Data (for Review)` (HTTP Request): Set `url` to **YOUR_CUSTOMER_INFO_API_ENDPOINT_HERE**.\n    -   `DraftReviewRequestEmail` (Tool): Update **YOUR_PRODUCT_PAGE_URL_BASE_HERE** and **YOUR_WEBSITE_URL_HERE**.\n    -   `Send Review Request Email` (Email Send): Configure SMTP/email credentials.\n-   **SECTION 6 (Review Monitoring):**\n    -   `OpenAI` node (currently Assistant Create): **IMPORTANT:** For sentiment analysis, **change this node type to `@n8n/n8n-nodes-langchain.lmChatOpenAi`**. Then configure its prompt for sentiment analysis (e.g., System: \"Analyze sentiment. Respond with positive, negative, or neutral.\" User: \"Review: {{ $('Listen for Review Webhook').first().json.body.review_text }}\"). Set OpenAI credentials.\n    -   `Notify Support Team (Negative Review)` (Slack): Configure Slack API credentials and `channel`.\n    -   `Add Review to Database` (Google Sheets): Set `sheetId` to **YOUR_REVIEWS_DATABASE_SHEET_ID_HERE** and Google API credentials.\n-   **SECTION 7 (Marketing Campaigns):**\n    -   `Fetch Target Audience API` (HTTP Request): Set `url` to **YOUR_CRM_API_FOR_AUDIENCE_HERE**.\n    -   `GenerateCampaignEmailVariant` (Tool): Update **YOUR_CAMPAIGN_LANDING_PAGE_HERE**.\n    -   `Send Campaign Email` (Email Send): Configure SMTP/email credentials.\n    -   `Track Campaign Metrics API` (HTTP Request): Set `url` for **YOUR_CAMPAIGN_TRACKING_API_ENDPOINT_HERE**.\n    -   `Log Campaign Outcome & Adjustments` (Google Sheets): Set `sheetId` to **YOUR_CAMPAIGN_LOG_SHEET_ID_HERE** and Google API credentials.\n-   **SECTION 8 (Manual Restock):**\n    -   `Send SMS Alert (Restock)` (Twilio): Configure Twilio credentials, `from` number (**YOUR_TWILIO_PHONE_NUMBER_HERE**), and `to` (**WAREHOUSE_MANAGER_PHONE_NUMBER_HERE**).\n    -   `OpenAI Chat Model` (for Basic LLM Chain): Configure OpenAI credentials.\n    -   `Send restock Request Email1` (Email Send): Configure SMTP/email credentials and `to` address.\n\n## Step 3: Implement Tool Logic\n-   Go into each `@n8n/n8n-nodes-langchain.toolCode` node (e.g., `SearchFAQs`, `RefineProductSelection`, `DetermineDiscount`, etc.).\n-   The current JavaScript is placeholder. **You MUST replace this with actual JavaScript logic** that performs the intended action for each tool, often by making API calls or processing data based on the agent's input.\n\n## Step 4: Review AI Agent Prompts & Tool Connections\n-   Carefully review the `systemMessage` for each AI Agent node to ensure it accurately reflects its role and how it should use its tools.\n-   **CRITICAL:** Verify the `index` for tools connected to each AI Agent. Each tool connected to a single agent must have a unique, sequential index (0, 1, 2, ...).\n    -   **AI Agent (*ID `cd71629d-...`* in your JSON):** `SearchFAQs` tool should be `index: 0`, `LookupOrderStatus` tool should be `index: 1`. *(Please double-check and correct the connection indices in your actual workflow file if they are still both pointing to index 0).*\n    -   **AI Agent6 (*ID `4c24879b-...`* in your JSON):** `AnalyzeCampaignPerformance` tool should be `index: 0`, `SuggestCampaignAdjustments` tool should be `index: 1`. *(Please double-check and correct the connection indices in your actual workflow file if they are still both pointing to index 0).*\n\n# Initial Test Run\n-   Disable most of the workflow sections initially.\n-   Focus on one section at a time (e.g., Section 1: Customer Support).\n-   Manually trigger the first node (e.g., simulate an incoming webhook).\n-   Execute node by node, checking the output and debugging configurations and tool logic.\n-   For time-based triggers (Cron, Wait nodes), temporarily shorten the durations for faster testing.\n-   Once a section is working, move to the next.\n\n# Use Cases\n-   **E-commerce Businesses (Shopify, etc.):** To automate customer service, marketing, sales recovery, and operations.\n-   **Digital Marketing Agencies:** To offer advanced automation services to e-commerce clients.\n-   **Freelancers & Consultants:** To build and deploy sophisticated AI-driven e-commerce solutions.\n-   **n8n Developers:** As a comprehensive template and learning resource for building complex multi-agent systems.",
  "featuredImage": "/data/workflows/4455/4455.webp",
  "author": {
    "id": 101,
    "slug": "samyassine",
    "name": "Sam Yassine",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 2220,
  "downloads": 222,
  "createdAt": "2025-05-28T12:02:18.101Z",
  "updatedAt": "2026-01-16T08:34:28.498Z",
  "publishedAt": "2025-05-28T12:02:18.101Z",
  "nodes": 86,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4455"
}