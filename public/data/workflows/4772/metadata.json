{
  "id": 4772,
  "slug": "4772",
  "title": "Automated Airtable to Postgres migration with n8n",
  "description": "\n\n##  Overview\n\nThis ETL system automates the process of migrating data from **Airtable** to **PostgreSQL** with a single API request.\n\n* It maps your Airtable schema into a Postgres-compatible structure.\n* Automatically creates new tables in your Postgres database.\n* Migrates all the data while preserving formats and relationships.\n\n&gt; ‚öôÔ∏è Originally built in-house to help us migrate off Airtable after exceeding usage limits.\n\n---\n\n## üîß How It Works\n\n1. Accepts **Airtable** and **Postgres** credentials via HTTP requests.\n2. Authenticates both services and validates schema compatibility.\n3. Fetches data from Airtable and maps each table and field to PostgreSQL equivalents.\n4. Creates the necessary tables in your Postgres database.\n5. Inserts all records in batches.\n6. Returns a success response with summary stats.\n\n&gt; **Bonus operations:** You can list or delete created tables using API endpoints.\n\n---\n\n## Setup Instructions (n8n Workflow)\n\n### Step 1: Airtable Configuration\n\n* Generate an **Airtable access token** from the [Airtable developer hub](https://airtable.com/developers/web/api).\n* Copy your **Base ID** or URL.\n\n### Step 2: PostgreSQL Configuration\n\n* Gather your PostgreSQL connection details:\n\n  * Host\n  * Port\n  * Database name\n  * Username\n  * Password\n\n### Step 3: Deploy in n8n\n\n* Import the workflow into your n8n instance.\n* Use a simple HTTP request tool like `curl` or Postman to trigger migration actions.\n\n---\n\n##  API Endpoints & Payloads\n\nHere are the available HTTP endpoints and how to use them.\n\n---\n\n### 1. Test Airtable Credentials\n\n```bash\ncurl -X POST \"https://n8n.com/webhook/123/validate-airtable\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"airtable\": {\n      \"airtableId\": \"app12345\",\n      \"airtableToken\": \"pjhy.iyhhs\"\n    }\n  }'\n```\n\n### 2. Test PostgreSQL Credentials\n\n```bash\ncurl -X POST \"https://n8n.com/webhook/123/validate-postgres\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"postgres\": {\n      \"host\": \"aws-0-us-west-1.pooler.supabase.com\",\n      \"port\": \"6543\",\n      \"user\": \"postgres.username\",\n      \"password\": \"gamjgnrkxetb\",\n      \"database\": \"postgres\"\n    }\n  }'\n```\n\n---\n\n### 3. Sync Airtable Data to Postgres\n\n```bash\ncurl -X POST \"https://n8n.com/webhook/123/sync\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"host\": \"aws-0-us-west-1.pooler.supabase.com\",\n    \"port\": \"6543\",\n    \"user\": \"postgres.username\",\n    \"password\": \"gamjgnrkxetb\",\n    \"database\": \"postgres\",\n    \"airtableId\": \"app73PqALbM3AM0xN\",\n    \"airtableToken\": \"patNCueRkrLI98fEq.9ae7f9786e9ad73ac21ca26d8046f08ad77e135ae950a6e2ff3760d85aca3db4\",\n    \"action\": \"Move\"\n  }'\n```\n\n#### Expected Response:\n\n```json\n[\n  {\n    \"statusCode\": 200,\n    \"statusMessage\": \"Data migration successful\",\n    \"recordsProcessed\": 152,\n    \"tablesProcessed\": 3\n  }\n]\n```\n\n---\n\n### 4.List All Created Tables\n\n```bash\ncurl -X POST \"https://n8n.com/webhook/123/list-tables\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"postgres\": {\n      \"host\": \"aws-0-us-west-1.pooler.supabase.com\",\n      \"port\": \"6543\",\n      \"user\": \"postgres.username\",\n      \"password\": \"gamjgnrkxetb\",\n      \"database\": \"postgres\"\n    }\n  }'\n```\n\n---\n\n### 5. Delete Migrated Tables\n\n```bash\ncurl -X POST \"https://n8n.com/webhook/123/delete-tables\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"postgres\": {\n      \"host\": \"aws-0-us-west-1.pooler.supabase.com\",\n      \"port\": \"6543\",\n      \"user\": \"postgres.username\",\n      \"password\": \"gamjgnrkxetb\",\n      \"database\": \"postgres\"\n    }\n  }'\n```\n\n---\n\n## Technical Notes\n\n* **Schema Mapping**: Field types from Airtable are mapped to PostgreSQL equivalents (e.g. `singleLineText ‚Üí VARCHAR`, `number ‚Üí INTEGER`, `checkbox ‚Üí BOOLEAN`, etc.).\n* **Linked Records**: Relationships in Airtable bases are resolved and converted into foreign key-friendly formats.\n* **Batch Inserts**: Records are inserted in optimized chunks to improve performance and avoid payload limits.\n* **Error Handling**: Invalid credentials, schema mismatches, or connection issues will return proper HTTP status codes and error messages.\n\n---\n\n##  Usage Scenarios\n\n* Airtable to Postgres migration during scale-up.\n* Backup or sync Airtable records to a SQL environment.\n* Use Postgres-powered dashboards while editing in Airtable.\n\n---\n\n## Requirements\n\n* Airtable Pro/Developer Account\n* PostgreSQL database (e.g. Supabase, Render, or local instance)\n* n8n instance with webhook exposure\n* Basic familiarity with HTTP requests (`curl`, Postman, or integrations)\n\n---\n\n## Need Help?\n\nFeel free to reach out via **LinkedIn** or **Email** if you need help adapting this workflow for your organization or extending it with extra transformations.\n\n**Happy productivity!**\n\n\n",
  "featuredImage": "/data/workflows/4772/4772.webp",
  "author": {
    "id": 101,
    "slug": "imperolq",
    "name": "Zacharia Kimotho",
    "avatar": ""
  },
  "categories": [
    "Engineering"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 162,
  "downloads": 16,
  "createdAt": "2025-06-08T06:31:28.007Z",
  "updatedAt": "2026-01-16T08:36:07.393Z",
  "publishedAt": "2025-06-08T06:31:28.007Z",
  "nodes": 66,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4772"
}