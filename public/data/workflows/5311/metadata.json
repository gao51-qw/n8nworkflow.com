{
  "id": 5311,
  "slug": "5311",
  "title": "AI-powered Telegram & WhatsApp business agent workflow",
  "description": "*This workflow contains community nodes that are only compatible with the self-hosted version of n8n.* \n\n**Deliver seamless, AI-driven customer support on Telegram and WhatsApp‚Äîpowered by GPT-4 Turbo and n8n.**\n\n---\n\n## üåü Key Features\n- **Unified Messaging:** Receive and normalize messages from both Telegram (via Bot Trigger) and WhatsApp (via Webhook).  \n- **Contextual AI Responses:** Build customer context from Google Sheets, then craft personalized replies with GPT-4 Turbo.  \n- **Smart Routing:** Automatically detect platform and send replies with platform-appropriate formatting (HTML for Telegram, plain for WhatsApp).  \n- **Intent Detection & Escalation:** Flag orders, appointments or complex queries and trigger Slack notifications for human handoff.  \n- **Comprehensive Logging:** Append every interaction to a ‚Äúconversations‚Äù sheet and upsert customer profiles in a ‚Äúcustomers‚Äù sheet.  \n\n## üìã Prerequisites\n1. **n8n instance** (self-hosted or n8n Cloud)  \n2. **Credentials**:\n   - OpenAI API key  \n   - Telegram Bot Token  \n   - WhatsApp Business API credentials (`WHATSAPP_PHONE_ID`)  \n   - Google Sheets service-account credentials  \n   - Slack Incoming Webhook URL  \n3. **Google Sheets Setup**:\n   - **customers** sheet with columns: `user_id`, `user_name`, `previousOrders`, `lastInteraction`, `preferences`, `conversationHistory`  \n   - **conversations** sheet with columns: `user_id`, `user_name`, `platform`, `message`, `ai_response`, `timestamp`, `needs_escalation`, `is_order`, `is_appointment`  \n\n## üöÄ Setup & Usage\n1. **Import** the provided JSON into your n8n editor.  \n2. **Configure** each node‚Äôs credentials in n8n‚Äôs Credentials panel.  \n3. **Set** the following Workflow Variables:\n   - `GOOGLE_SHEET_ID`  \n   - `WHATSAPP_PHONE_ID`  \n4. **Activate** the Telegram Bot Trigger and WhatsApp Webhook nodes.  \n5. **Test** by messaging your bot on Telegram and WhatsApp.  \n\n## üîç How It Works\n1. **Trigger:** Listens for new Telegram updates or WhatsApp webhook calls.  \n2. **Normalize Message:** Standardizes payload into `{ user_id, user_name, message_text, platform, chat_id, timestamp }`.  \n3. **Get Customer Data:** Reads from ‚Äúcustomers‚Äù sheet to fetch past history and order count.  \n4. **Build AI Context:** Merges incoming message with customer info and history.  \n5. **AI Assistant:** Sends context to GPT-4 Turbo (temperature 0.8, maxTokens 800).  \n6. **Process Response:** Cleans formatting, identifies intents (order, appointment), and sets escalation flags.  \n7. **Platform Router:** Routes reply to the appropriate ‚ÄúSend Telegram‚Äù or ‚ÄúSend WhatsApp‚Äù node.  \n8. **Log Conversation:** Appends each message and response to the ‚Äúconversations‚Äù sheet.  \n9. **Update Customer:** Increments `previousOrders`, updates last interaction timestamp, and saves a snippet of the latest message.  \n10. **Escalation:** If flagged, posts a formatted alert to your Slack channel for immediate attention.  \n\n---\nEmpower your business with 24/7 AI-powered support‚Äîsave time, increase conversions, and ensure no customer inquiry goes unanswered.",
  "featuredImage": "/data/workflows/5311/5311.webp",
  "author": {
    "id": 101,
    "slug": "amanda",
    "name": "Amanda Benks",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1132,
  "downloads": 113,
  "createdAt": "2025-06-25T18:51:37.067Z",
  "updatedAt": "2026-01-16T08:38:55.745Z",
  "publishedAt": "2025-06-25T18:51:37.067Z",
  "nodes": 21,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5311"
}