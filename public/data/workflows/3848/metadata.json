{
  "id": 3848,
  "slug": "3848",
  "title": "Build a document QA system with RAG using Milvus, Cohere, and OpenAI for Google Drive",
  "description": "\n\n### Template Description\n\nThis template creates a powerful Retrieval Augmented Generation (RAG) AI agent workflow in [n8n](https://n8n.partnerlinks.io/5xf5bs8y3ruv). It monitors a specified Google Drive folder for new PDF files, extracts their content, generates vector embeddings using Cohere, and stores these embeddings in a Milvus vector database. Subsequently, it enables a RAG agent that can retrieve relevant information from the Milvus database based on user queries and generate responses using OpenAI, enhanced by the retrieved context.\n\n### Functionality\n\nThe workflow automates the process of ingesting documents into a vector database for use with a RAG system.\n\n 1. **Watch New Files:** Triggers when a new file (specifically targeting PDFs) is added to a designated Google Drive folder.\n\n 2. **Download New:** Downloads the newly added file from Google Drive.\n\n 3. **Extract from File:** Extracts text content from the downloaded PDF file.\n\n 4. **Default Data Loader / Set Chunks:** Processes the extracted text, splitting it into manageable chunks for embedding.\n\n 5. **Embeddings Cohere:** Generates vector embeddings for each text chunk using the Cohere API.\n\n 6. **Insert into Milvus:** Inserts the generated vector embeddings and associated metadata into a Milvus vector database.\n\n 7. **When chat message received:** Adapt the trigger tool to fit your needs. \n 8. **RAG Agent:** Orchestrates the RAG process.\n\n 9. **Retrieve from Milvus:** Queries the Milvus database with the user's chat query to find the most relevant chunks.\n\n10. **Memory:** Manages conversation history for the RAG agent to optimize cost and response speed.\n\n11. **OpenAI / Cohere embeddings:** Uses ChatGPT 4o for text generation.\n\n### Requirements\n\nTo use this template, you will need:\n\n* An [n8n instance](https://n8n.partnerlinks.io/5xf5bs8y3ruv) (cloud or self-hosted).\n\n* Access to a Google Drive account to monitor a folder.\n\n* A Milvus instance or access to a Milvus cloud service like [Zilliz](https://zilliz.com). \n\n* A [Cohere](https://cohere.com) API key for generating embeddings.\n\n* An OpenAI API key for the RAG agent's text generation.\n\n### Usage\n\n1. Set up the required credentials in n8n for Google Drive, Milvus, Cohere, and OpenAI.\n\n2. Configure the \"Watch New Files\" node to point to the Google Drive folder you want to monitor for PDFs.\n\n3. Ensure your Milvus instance is running and the target cluster is set up correctly.\n\n4. Activate the workflow.\n\n5. Add PDF files to the monitored Google Drive folder. The workflow will automatically process them and insert their embeddings into Milvus.\n\n6. Interact with the RAG agent. The agent will use the data in Milvus to provide context-aware answers.\n\n### Benefits\n\n* Automates document ingestion for RAG applications.\n\n* Leverages Milvus for high-performance vector storage and search.\n\n* Uses Cohere for generating high-quality text embeddings.\n\n* Enables building a context-aware AI agent using your own documents.\n\n### Suggested improvements\n* **Support for More File Types:** Extend the \"Watch New Files\" node and subsequent extraction steps to handle various document types (e.g., .docx, .txt, .csv, web pages) in addition to PDFs.\n\n* **Error Handling and Notifications:** Implement robust error handling for each step of the workflow (e.g., failed downloads, extraction errors, Milvus insertion failures) and add notification mechanisms (e.g., email, Slack) to alert the user.\n\n### Get in touch with us\n\nContact us at [https://1node.ai](https://1node.ai) ",
  "featuredImage": "/data/workflows/3848/3848.webp",
  "author": {
    "id": 101,
    "slug": "aitoralonso",
    "name": "Aitor | 1Node",
    "avatar": ""
  },
  "categories": [
    "Internal Wiki",
    "AI RAG"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 3393,
  "downloads": 339,
  "createdAt": "2025-05-03T17:38:37.716Z",
  "updatedAt": "2026-01-16T08:31:45.408Z",
  "publishedAt": "2025-05-03T17:38:37.716Z",
  "nodes": 14,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3848"
}