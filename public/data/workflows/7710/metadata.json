{
  "id": 7710,
  "slug": "7710",
  "title": "Tracking cold email engagement metrics using Smartlead and Google Sheets",
  "description": "## Workflow: Track Email Campaign Engagement Analytics with Smartlead and Google Sheets\n\nAutomatically fetch **lead-level email engagement analytics** (opens, clicks, replies, unsubscribes, bounces) from **Smartlead** and update them in **Google Sheets**.  \nUse this to keep a single, always-fresh source of truth for campaign performance and sequence effectiveness.\n\n---\n\n## Summary\n\nPull Smartlead campaign analytics on a schedule and write them to a Google Sheet (append or update).  \nWorks with pagination, avoids duplicates via a stable key, and is ready for dashboards, pivots, or BI tools.\n\n---\n\n## What This Workflow Does\n\n- Collects campaign stats from Smartlead (per-lead, per-sequence).\n- Handles pagination safely (offset/limit).\n- Writes to Google Sheets using **appendOrUpdate** with a **matching column** to prevent duplicates.\n- Can run on a schedule for near real-time analytics.\n\n---\n\n## Node Structure Overview\n\n| Step | Node | Purpose |\n|---|---|---|\n| 1️⃣ | Schedule Trigger | Starts the workflow on a cadence (e.g., hourly) |\n| 2️⃣ | Code (Pagination Generator) | Emits `{offset, limit}` pairs (e.g., 0..9900, step 100) |\n| 3️⃣ | Split in Batches | Sends each pagination pair to the API sequentially |\n| 4️⃣ | HTTP Request (Smartlead) | `GET /campaigns/{campaign_id}/statistics` with `offset/limit` |\n| 5️⃣ | Split Out | Turns the API `data[]` array into one item per lead record |\n| 6️⃣ | Google Sheets (appendOrUpdate) | Upserts rows by `stats_id` into `EngagedLeads` tab |\n| 7️⃣ | Loop Back | Continues until all batches have been processed |\n\n---\n\n## Step-by-Step Setup\n\n1. **Prerequisites**\n   - Smartlead account + **API key** with access to campaign statistics.\n   - Google account + **Google Sheets OAuth** connected in n8n.\n\n2. **Create the Google Sheet**\n   - Spreadsheet name: **Email Analytics** (can be anything).\n   - Tab name: **EngagedLeads**.\n   - Add these exact headers (first row):\n     ```\n     lead_name, lead_email, lead_category,\n     sequence_number, stats_id,\n     email_subject, sent_time, open_time, click_time, reply_time,\n     open_count, click_count, is_unsubscribed, is_bounced\n     ```\n\n3. **Configure the Schedule Trigger**\n   - Choose a frequency (e.g., every 2 hours).  \n   - If you’re testing, set a single run or a short cadence.\n\n4. **Configure the Code Node (Pagination)**\n   - Emit N items like:\n     ```json\n     { \"offset\": 0, \"limit\": 100 }\n     { \"offset\": 100, \"limit\": 100 }\n     ...\n     ```\n   - 100 is a good default `limit`. For up to 10,000 records, generate 100 offsets.\n\n5. **Configure the Smartlead API Node**\n   - Method: **GET**  \n   - URL:\n     ```\n     https://server.smartlead.ai/api/v1/campaigns/{campaign_id}/statistics\n     ```\n   - Query parameters:\n     - `api_key` = `&lt;YOUR_SMARTLEAD_API_KEY&gt;`\n     - `offset` = `{{ $json.offset }}`\n     - `limit`  = `{{ $json.limit }}`\n   - Map response to JSON.\n\n6. **Split Out the Response**\n   - Use a Split Out (or similar) to iterate over `data[]` so each lead record is one item.\n\n7. **Google Sheets Node (Append or Update)**\n   - Operation: **appendOrUpdate**.\n   - Document: Your **Email Analytics** sheet.\n   - Sheet/Tab: **EngagedLeads**.\n   - **Matching Column:** `stats_id`.\n   - Map fields from Smartlead response to sheet columns:\n     - `lead_name` ← lead name (or composed from first/last if provided)\n     - `lead_email` ← email\n     - `lead_category` ← category/type if available\n     - `sequence_number` ← sequence step number\n     - `stats_id` ← stable identifier (e.g., Smartlead `stats_id` or message id)\n     - `email_subject` ← subject\n     - `sent_time`, `open_time`, `click_time`, `reply_time` ← timestamps\n     - `open_count`, `click_count` ← integers\n     - `is_unsubscribed`, `is_bounced` ← booleans\n   - If the same `stats_id` arrives again, the row is **updated**, not appended.\n\n8. **Test and Activate**\n   - Run once manually to verify API and sheet mapping.\n   - Check the sheet for new/updated rows.\n   - Activate the workflow to run automatically.\n\n---\n\n## Smartlead API Reference (Used by This Workflow)\n\n- **Endpoint**\nGET https://server.smartlead.ai/api/v1/campaigns/{campaign_id}/statistics\n- **Required query parameters**\n- `api_key` (string)\n- `offset` (number)\n- `limit`  (number)\n- **Typical response (trimmed example)**\n```json\n{\n  \"data\": [\n    {\n      \"lead_name\": \"Jane Doe\",\n      \"lead_email\": \"jane@example.com\",\n      \"sequence_number\": 2,\n      \"stats_id\": \"15b6ff3a-...-b2b9f343c2e1\",\n      \"email_subject\": \"Quick intro\",\n      \"sent_time\": \"2025-10-08T10:18:55.496Z\",\n      \"open_time\": \"2025-10-08T10:20:10.000Z\",\n      \"click_time\": null,\n      \"reply_time\": null,\n      \"open_count\": 1,\n      \"click_count\": 0,\n      \"is_unsubscribed\": false,\n      \"is_bounced\": false\n    }\n  ],\n  \"total\": 1234\n}\n```\n## Google Sheets Structure (Recommended)\n\n**Spreadsheet**: `Email Analytics`\n\n**Tab**: `EngagedLeads`\n\n**Columns**:`lead_name`, `lead_email`, `lead_category`,\n`sequence_number`, `stats_id`,\n`email_subject`, `sent_time`, `open_time`, `click_time`, `reply_time`,\n`open_count`, `click_count`, `is_unsubscribed`, `is_bounced`\n\n**Matching Column**: `stats_id` (prevents duplicates and allows updates)\n\n##  Customization Tips\n\n- **Multiple Campaigns**  \n  Duplicate the workflow and set a different `{campaign_id}` and/or write results to a separate tab in your Google Sheet.  \n\n- **Batch Size**  \n  Increase or decrease the `limit` value (e.g., `200`) in your Code node if you want fewer or more API calls.  \n\n- **Filtering**  \n  Add a **Code** or **IF** node to skip rows where `is_bounced = true` or `is_unsubscribed = true`.  \n\n- **Dashboards**  \n  Create a new tab named **Dashboard** in Google Sheets and visualize your data using built-in charts or connect it to **Looker Studio** for advanced visualization.  \n\n- **Enrichment**  \n  Join this dataset with your **CRM data** (e.g., HubSpot or Salesforce) using `lead_email` as a key to gain deeper customer insights.\n\n---\n\n##  Security and Publishing Notes\n\n-  **Do not hardcode** your Smartlead API key in the workflow export.  \n  Use **n8n credentials** or **environment variables** instead.  \n\n- When sharing the template publicly, replace sensitive values with placeholders like:  \n  `&lt;YOUR_SMARTLEAD_API_KEY&gt;` and `&lt;YOUR_GOOGLE_SHEET_ID&gt;`.  \n\n-  Keep your **Google Sheet private** unless you intentionally want to share it publicly.\n\n---\n\n##  Troubleshooting\n\n- **No rows in Sheets**  \n  Verify that the API response includes `data[]`, confirm that the **Split Out** node is configured correctly, and check field mappings.  \n\n- **Duplicates**  \n  Ensure the **Google Sheets node** has its **matching column** set to `stats_id`.  \n\n- **Rate Limits**  \n  Increase the schedule interval, add a short **Wait** node between batches, or reduce the `limit` size.  \n\n- **Mapping Errors**  \n  Ensure that column names in Sheets exactly match your field mappings — they are **case-sensitive**.  \n\n- **Timezone Differences**  \n  Smartlead timestamps are in **UTC**. Convert them downstream if your local timezone is different.\n\n---\n\n##  Example Use Case\n\nRun this workflow **hourly** to maintain a live, company-wide **Email Engagement Sheet**.  \n- **Sales teams** can monitor replies and active leads.  \n- **Marketing teams** can track open and click rates by sequence.  \n- **Operations** can export monthly summaries — no Smartlead login required.\n\n---\n\n##  Tags\n\n`Smartlead` `EmailMarketing` `Automation` `GoogleSheets` `Analytics` `CRM` `MarketingOps`\n",
  "featuredImage": "/data/workflows/7710/7710.webp",
  "author": {
    "id": 101,
    "slug": "rahiuppal",
    "name": "Rahi Uppal",
    "avatar": ""
  },
  "categories": [
    "Social Media"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 85,
  "downloads": 8,
  "createdAt": "2025-08-21T16:43:29.478Z",
  "updatedAt": "2026-01-16T08:51:57.793Z",
  "publishedAt": "2025-08-21T16:43:29.478Z",
  "nodes": 7,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7710"
}