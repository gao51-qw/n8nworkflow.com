# Automatically replace and relight the background of any image using APImage

> This workflow takes an **image URL** and a description of the desired background, then uses the APImage AI API to produce a high-quality image, **preserving the subject** and applying a natural-looking **new background**.

## Example Result

Here you can see a before-and-after image, generated by APImage, using this workflow.

![APImage Replace Background Example.png](fileId:2636)

---

## Who This Workflow is For

This workflow is perfect for anyone looking to generate polished, professional images quickly:

- **E-commerce Teams**: Ensure consistent product images with uniform, professional backdrops to reinforce brand identity and trust.  
- **Content Creators**: Generate eye-catching visuals for social media, blogs, or marketing campaigns quickly.  
- **Designers**: Produce realistic mockups and conceptual designs without hours of manual editing.  
- **Businesses of All Sizes**: Automate large-scale image pipelines efficiently without expanding staff or budget.  
- **Anyone Needing AI Imaging**: Personal or professional projects can benefit from this automated, high-quality workflow.

---

## How the Workflow Works

![Replace and Relight image background for product images  APImage n8n workflow.jpg](fileId:2637)

This n8n workflow leverages a **Form Trigger** and APImageâ€™s AI endpoint to automate background replacement:

```text
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   Input Image â”‚
       â”‚ (URL / source)â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  Background Replacement  â”‚
       â”‚   + Lighting Optimizationâ”‚
       â”‚      (APImage AI)        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   Download Image     â”‚
       â”‚ (default name: data) â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚        Output Nodes        â”‚
       â”‚  (DBs, Cloud, CMS, APIs)  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


````
- **Form Trigger:** Collects the image URL and descriptive prompt. Can be swapped with any data source node (databases, cloud storage, APIs).

- **APImage Integration:** Processes the image, separates the subject, generates the new background, and preserves realistic lighting and shadows.

- **Download Node:** Retrieves the processed image for storage or further use.

- **Output Options:** Automatically upload images to Google Drive, Dropbox, Airtable, Notion, Amazon S3, or any other database, creating a fully automated pipeline.

## How to Set Up the Workflow
1. Add Your APImage API Key

2. Open the APImage API node.

3. Replace **Bearer _YOUR_API_KEY_** with your API key from the [APImage Dashboard ğŸ¡¥](https://apimage.org/dashboard).

## Test the Workflow

1. Enter a valid image URL and a descriptive prompt in the Replace Background form.

2. Click Run Workflow to see the processed image downloaded locally.

3. Optional: Customize Output Storage

4. Add nodes after the Download step to automatically save images to your preferred storage service or database.

## Requirements
- n8n instance: Cloud or self-hosted instance.

- APImage account and API key: Required to access the AI API.

## How to Customize the Workflow
- **Change Background Prompts:** Modify the form or connect to dynamic sources like databases, CMS, or cloud storage.

- **Adjust AI Settings:** Customize preserve_subject, light_direction, and light_strength in the APImage node for perfect results.

- **Extend Outputs:** Connect to additional platforms for automatic sharing with teams, clients, or CMS systems.

- **Automate Input:** Replace manual form triggers with automated triggers from Google Sheets, Airtable, Shopify, or product databases to handle bulk processing without manual intervention.

## Example Use Cases
- **E-commerce:** Consistent product images with professional backgrounds.

- **Marketing & Social Media:** Quickly generate visuals adapted to multiple themes.

- **Photography & Design:** Produce mockups, portraits, and conceptual images with realistic lighting.

- **Business Automation:** Scale image pipelines efficiently for large volumes.

## FAQ
**Q: What types of images are supported?**
A: JPG, PNG, and WebP are supported.

**Q: Can I choose a custom background?**
A: Yes. Provide a text description or integrate with other nodes supplying pre-defined backgrounds.

**Q: What is the default filename for processed images?**
A: The default filename is data, unless renamed in the workflow.

**Q: Do I need to store images locally?**
A: No. Connect output nodes to databases, cloud storage, or CMS platforms to store images automatically.

**Q: Can APImage be used in automated workflows?**
A: Absolutely. Integrate with n8n to process images automatically from various sources.

**Q: Does it enhance image quality?**
A: APImage adjusts lighting and contrast for natural, realistic results.

**Q: How is background replacement different from background removal?**
A: Background removal makes the background transparent. Background replacement swaps it with a new one and adjusts lighting for a natural look.

**Q: Are there limits to the number of images processed?**
A: Limits depend on your subscription plan and allocated credits

## ğŸ“Š Basic Information

- **Workflow ID:** 8619
- **Complexity:** intermediate
- **Node Count:** 10
- **Views:** 241
- **Downloads:** 24
- **Created:** 2025/9/16
- **Last Updated:** 2026/1/16
- **Source:** [View on n8n.io](https://n8n.io/workflows/8619)

## ğŸ‘¤ Author

- **Name:** Gegenfeld
- **Username:** @gegenfeld

## ğŸ·ï¸ Categories

- Content Creation
- Multimodal AI

## ğŸ”— Nodes Used

- **stickyNote** (Ã—6)
- **httpRequest** (Ã—2)
- **formTrigger** 
- **googleDrive** 

## ğŸš€ How to Use

1. Download the workflow JSON file
2. Import it into your n8n instance
3. Configure the credentials for the nodes
4. Activate and test the workflow

## ğŸ”€ Workflow Structure

This workflow contains 10 nodes with 3 node connections.

---

*This workflow was sourced from [n8n.io](https://n8n.io) community templates.*
