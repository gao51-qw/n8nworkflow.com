{
  "workflow": {
    "id": 12246,
    "name": "Monitor hotel competitor rates and answer WhatsApp Q&A using OpenAI GPT-4.1",
    "views": 47,
    "recentViews": 6,
    "totalViews": 47,
    "createdAt": "2025-12-29T02:58:58.642Z",
    "description": "## How It Works\n***Top Branch Workflow A***\n\n**1. The Market Intelligence:** \n- **Patrols the Market:** Runs hourly to scrape competitor rates for future days.\n- **Gathers Intel:** If prices spike, it instantly checks event announcements to see if a major event is driving demand.\n- **Crunches Numbers:** Calculates the exact price gap and filters out noise.\n\n**2. The Revenue Manager:** \n- **Sets Strategy:** The AI Agent reviews the price gaps, competitor moves, and event signals.\n- **Reports:** Writes a strategic Executive Summary and sends it to your WhatsApp.\n\n\n***Bottom Branch Workflow B***\n\n**3. The Consultant:** \n - **Recall:** When you ask a question via WhatsApp, the bot retrieves the saved analysis, historical rates, and event schedule.\n  - **Answer:** It acts as an on-demand analyst, conducting further analysis to give an informed answer to questions\n\n\n## Setup Steps\n**1. Config:** Add your hotel + competitor hotels (IDs/names) in the Config node.\n\n**2. Monitor Window:** Set how far ahead you want to monitor (e.g., daysAhead = 30) in the Config node.\n\n**3. Sensitivity:** Set how sensitive alerts should be (e.g., alert only if competitor moves &gt; 10%) in the Significant Competitor Change node.\n\n**4. Connect Credentials:**\n\n- Amadeus (to fetch hotel prices)\n- WhatsApp (to send alerts)\n- Postgres/SQL (to store price snapshots, history, summary)\n- OpenAI (for the AI Agents)\n\n**5. Event Source:** Update the Fetch VCC nodes to scrape your local convention center or event site.\n\n**6. Run a test:**\n\nTrigger Workflow A manually and confirm you receive a WhatsApp alert.\n\nReply to that WhatsApp message to test Workflow B (Q&A).\n\n## Use Cases & Benefits\n**For Revenue Managers:** Automate the \"rate shop\" routine and catch competitor moves without opening a spreadsheet.\n\n**For Sales & Marketing Teams:** Go beyond raw data. Pairing \"what changed\" with \"why changed\" instantly.\n\n**For Hotel Leadership:** Perfect for GMs and division leaders who need instant, decision-ready alerts via WhatsApp.\n\nâš¡ ***Zero-Touch Efficiency:*** Eliminates hours of manual searching by automating rate checks 3x daily. \nðŸ§  ***Contextual Intelligence:*** Tracks price AND explains why it moved by cross-referencing local events. \nðŸ¤– ***Actionable Strategy:*** AI doesn't just report numbers; it recommends specific pricing tactics. \nðŸ“‰ ***Long-Term Vision:*** Builds a permanent database of rate history, enabling the AI to answer complex trend questions over time.\n\n## ðŸ“¬ Want to Customize This?\n[leelin.business@gmail.com](leelin.business@gmail.com)",
    "workflow": {
      "id": "CsBvM49DLYRa5tMJ",
      "meta": {
        "instanceId": "1b4c8d9827a80dede90e083e5a812614ddcbbdef0d68589a29ddb4aa2486340a",
        "templateCredsSetupCompleted": true
      },
      "name": "Automate hotel pricing strategy with Q&A on WhatsApp using OpenAI Agent",
      "tags": [],
      "nodes": [
        {
          "id": "148c7c8b-2c56-4a85-8c9a-43e0938eea6c",
          "name": "Config",
          "type": "n8n-nodes-base.set",
          "position": [
            240,
            -112
          ],
          "parameters": {
            "options": {},
            "assignments": {
              "assignments": [
                {
                  "id": "d7c1e6b2-ada9-4449-b2b1-1da10950bc69",
                  "name": "currency",
                  "type": "string",
                  "value": "CAD"
                },
                {
                  "id": "fb2eb3b9-f977-4abb-b9fa-bb70368dd53e",
                  "name": "adults",
                  "type": "number",
                  "value": 2
                },
                {
                  "id": "ac39d14a-78fe-4c53-aba6-fc48674c82c5",
                  "name": "roomQuantity",
                  "type": "number",
                  "value": 1
                },
                {
                  "id": "69b1699d-5318-453f-808b-832faada0468",
                  "name": "thresholdPct",
                  "type": "number",
                  "value": 0.1
                },
                {
                  "id": "70a48f58-48f5-4c8d-9a77-9e590eba83c7",
                  "name": "daysAhead",
                  "type": "number",
                  "value": 30
                },
                {
                  "id": "79982c4f-6200-4b93-818e-22888187ab61",
                  "name": "competitors",
                  "type": "array",
                  "value": "=[\n  { \"name\": \"VANCOUVER MARRIOTT PINNACLE\", \"hotelId\": \"MCYVRDTM\" }\n]\n"
                },
                {
                  "id": "2f21f1cb-1f00-434f-932a-e5510f65d83a",
                  "name": "ourHotel",
                  "type": "object",
                  "value": "={ \"name\": \"WESTIN BAYSHORE VANCOUVER\", \"hotelId\": \"WIYVRBAY\" }\n"
                }
              ]
            }
          },
          "typeVersion": 3.4
        },
        {
          "id": "af6fd0df-1be7-4fca-a576-e1f3cda511e9",
          "name": "Generate 30 night windows",
          "type": "n8n-nodes-base.code",
          "position": [
            528,
            -112
          ],
          "parameters": {
            "jsCode": "// Generate N one-night windows starting \"today\" in America/Vancouver\n// Output = hotel x date items (competitors + ourHotel), each item carries hotelRole + token + cfg fields\n\n// --- FIX START ---\n// Access the FIRST item of the previous nodes securely\nconst cfg = $('Config').first().json; \nconst token = $('Amadeus OAuth').first().json.access_token;\n// --- FIX END ---\n\nconst daysAhead = Number(cfg.daysAhead ?? 30);\nconst tz = cfg.timezone ?? \"America/Vancouver\";\n\n// Format a Date into YYYY-MM-DD in the target timezone\nfunction fmtInTZ(date, timeZone) {\n  const parts = new Intl.DateTimeFormat(\"en-CA\", {\n    timeZone,\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n  }).formatToParts(date);\n\n  const y = parts.find(p => p.type === \"year\")?.value;\n  const m = parts.find(p => p.type === \"month\")?.value;\n  const d = parts.find(p => p.type === \"day\")?.value;\n  return `${y}-${m}-${d}`;\n}\n\n// Add N days to a YYYY-MM-DD string (treat as UTC midnight to avoid local TZ drift)\nfunction addDays(yyyyMmDd, days) {\n  const [y, m, d] = yyyyMmDd.split(\"-\").map(Number);\n  const dt = new Date(Date.UTC(y, m - 1, d));\n  dt.setUTCDate(dt.getUTCDate() + days);\n  return dt.toISOString().slice(0, 10);\n}\n\n// Build hotel list (competitors + ourHotel), each with hotelRole\nconst hotels = [];\n\n// Competitors (array)\nconst competitors = Array.isArray(cfg.competitors) ? cfg.competitors : [];\nfor (const c of competitors) {\n  if (!c?.hotelId) continue;\n  hotels.push({\n    hotelRole: \"competitor\",\n    hotelId: c.hotelId,\n    hotelName: c.name ?? c.hotelId,\n  });\n}\n\n// Our hotel (object)\nif (cfg.ourHotel?.hotelId) {\n  hotels.push({\n    hotelRole: \"ourHotel\",\n    hotelId: cfg.ourHotel.hotelId,\n    hotelName: cfg.ourHotel.name ?? cfg.ourHotel.hotelId,\n  });\n}\n\n// \"Today\" as YYYY-MM-DD in Vancouver time\nconst todayYMD = fmtInTZ(new Date(), tz);\n\nconst out = [];\nfor (let i = 0; i < daysAhead; i++) {\n  const checkInDate = addDays(todayYMD, i);\n  const checkOutDate = addDays(todayYMD, i + 1);\n\n  for (const h of hotels) {\n    out.push({\n      json: {\n        // hotel identity + role (CRITICAL for alert + AI)\n        hotelRole: h.hotelRole,\n        hotelId: h.hotelId,\n        hotelName: h.hotelName,\n\n        // date window\n        checkInDate,\n        checkOutDate,\n\n        // cfg fields used downstream\n        currency: cfg.currency,\n        adults: cfg.adults,\n        roomQuantity: cfg.roomQuantity,\n        thresholdPct: cfg.thresholdPct,\n\n        // token for Amadeus call\n        access_token: token,\n      },\n    });\n  }\n}\n\nreturn out;"
          },
          "typeVersion": 2
        },
        {
          "id": "ae083efe-c987-41a2-8004-bfea3caabf5d",
          "name": "Amadeus OAuth",
          "type": "n8n-nodes-base.httpRequest",
          "position": [
            384,
            -112
          ],
          "parameters": {
            "url": "https://test.api.amadeus.com/v1/security/oauth2/token",
            "method": "POST",
            "options": {},
            "sendBody": true,
            "contentType": "form-urlencoded",
            "bodyParameters": {
              "parameters": [
                {
                  "name": "grant_type",
                  "value": "client_credentials"
                },
                {
                  "name": "client_id"
                },
                {
                  "name": "client_secret"
                }
              ]
            }
          },
          "typeVersion": 4.3
        },
        {
          "id": "75c62008-dc34-4193-9559-abc4b327f863",
          "name": "Amadeus Hotel Offers",
          "type": "n8n-nodes-base.httpRequest",
          "onError": "continueRegularOutput",
          "position": [
            704,
            -48
          ],
          "parameters": {
            "url": "https://test.api.amadeus.com/v3/shopping/hotel-offers",
            "options": {
              "batching": {
                "batch": {
                  "batchSize": 1,
                  "batchInterval": 1200
                }
              },
              "response": {
                "response": {
                  "responseFormat": "json"
                }
              }
            },
            "sendQuery": true,
            "sendHeaders": true,
            "queryParameters": {
              "parameters": [
                {
                  "name": "hotelIds",
                  "value": "={{ $json.hotelId }}"
                },
                {
                  "name": "checkInDate",
                  "value": "={{$json.checkInDate}}"
                },
                {
                  "name": "checkOutDate",
                  "value": "={{$json.checkOutDate}}"
                },
                {
                  "name": "adults",
                  "value": "={{$json.adults}}"
                },
                {
                  "name": "roomQuantity",
                  "value": "={{$json.roomQuantity}}"
                },
                {
                  "name": "currency",
                  "value": "={{$json.currency}}"
                },
                {
                  "name": "paymentPolicy",
                  "value": "NONE"
                }
              ]
            },
            "headerParameters": {
              "parameters": [
                {
                  "name": "Authorization",
                  "value": "=Bearer {{$json.access_token}}"
                }
              ]
            }
          },
          "typeVersion": 4.3
        },
        {
          "id": "13fd9cc9-d9e5-4613-9014-a621268901dd",
          "name": "Prev Snapshot",
          "type": "n8n-nodes-base.code",
          "position": [
            1824,
            -48
          ],
          "parameters": {
            "mode": "runOnceForEachItem",
            "jsCode": "// Prev Snapshot\n// Purpose: Attach \"previous snapshot\" fields from Hotel_Rates to the current item.\n// Input expectations (from Get Prev Rates):\n// - If a match exists, $json contains the row fields: id, bestTotal, currency, updatedAt, rateKey, etc.\n// - If no match exists, node may output an \"empty\" item (no id). We handle that safely.\n//\n// Output fields added:\n// - prevExists (boolean)\n// - prevId (number|null)\n// - prevBestTotal (number|null)\n// - prevCurrency (string|null)\n// - prevUpdatedAt (string|null)\n// - prevRateKey (string|null)\n\nconst row = $json;\n\n// Determine whether a previous row exists\nconst prevExists = row.id !== undefined && row.id !== null;\n\n// Normalize bestTotal to a number if present\nconst prevBestTotal =\n  prevExists && row.bestTotal !== undefined && row.bestTotal !== null\n    ? Number(row.bestTotal)\n    : null;\n\nreturn {\n  ...row,\n\n  prevExists,\n  prevId: prevExists ? row.id : null,\n  prevBestTotal,\n  prevCurrency: prevExists ? (row.currency ?? null) : null,\n  prevUpdatedAt: prevExists ? (row.updatedAt ?? null) : null,\n  prevRateKey: prevExists ? (row.rateKey ?? null) : null,\n};\n"
          },
          "typeVersion": 2
        },
        {
          "id": "f8f52b3a-d4e0-4a71-96df-cddb41cc41b6",
          "name": "New Snapshot",
          "type": "n8n-nodes-base.code",
          "position": [
            1488,
            -96
          ],
          "parameters": {
            "mode": "runOnceForEachItem",
            "jsCode": "// New Snapshot: compute stable keys + timeSlot + timestamps for each hotel x date item\n// - snapshotKey: hotelId|checkInDate (stable per date)\n// - rateKey: same as snapshotKey (for Hotel_Rates latest snapshot table)\n// - historyKey: hotelId|checkInDate|timeSlot (for Hotel_Rates_History append-only table)\n\nconst item = $json;\n\n// Use Vancouver time for timeSlot bucketing\nconst tz = \"America/Vancouver\";\nconst now = new Date();\n\n// Extract Vancouver local time via Intl (works in n8n without luxon)\nconst parts = new Intl.DateTimeFormat(\"en-CA\", {\n  timeZone: tz,\n  hour: \"2-digit\",\n  hour12: false,\n  year: \"numeric\",\n  month: \"2-digit\",\n  day: \"2-digit\",\n  minute: \"2-digit\",\n  second: \"2-digit\",\n}).formatToParts(now);\n\nconst getPart = (type) => parts.find(p => p.type === type)?.value;\n\nconst localHour = Number(getPart(\"hour\")); // 0-23 in Vancouver\nconst localDate = `${getPart(\"year\")}-${getPart(\"month\")}-${getPart(\"day\")}`;\nconst localTime = `${getPart(\"hour\")}:${getPart(\"minute\")}:${getPart(\"second\")}`;\nconst observedAtLocal = `${localDate}T${localTime} (${tz})`;\n\n// Time slot based on Vancouver hour\nlet timeSlot = \"09\";\nif (localHour >= 21) timeSlot = \"21\";\nelse if (localHour >= 15) timeSlot = \"15\";\n\n// bestTotal = minRate (normalized field)\nconst bestTotal =\n  item.minRate !== null && item.minRate !== undefined\n    ? Number(item.minRate)\n    : null;\n\n// Keys\nconst snapshotKey = `${item.hotelId}|${item.checkInDate}`;\nconst rateKey = snapshotKey; // latest table key (no timeSlot)\nconst historyKey = `${snapshotKey}|${timeSlot}`; // history table key (with timeSlot)\n\nreturn {\n  ...item,\n\n  timeSlot,\n  bestTotal,\n\n  snapshotKey,\n  rateKey,\n  historyKey,\n\n  observedAtUtc: now.toISOString(),\n  observedAtLocal,\n};\n"
          },
          "typeVersion": 2
        },
        {
          "id": "5f6d09f7-4d6f-4459-95f1-0307d827859e",
          "name": "Compute Change",
          "type": "n8n-nodes-base.code",
          "position": [
            -224,
            384
          ],
          "parameters": {
            "mode": "runOnceForEachItem",
            "jsCode": "// Compute Change Flags\n// Computes absChange, pctChange, isSignificant, isCompetitor\n// Handles missing prev values safely.\n\nconst item = $json;\n\nconst thresholdPct = Number(item.thresholdPct ?? 0.10);\n\n// Current (new) bestTotal\nconst bestTotal =\n  item.bestTotal !== undefined && item.bestTotal !== null\n    ? Number(item.bestTotal)\n    : null;\n\n// Previous bestTotal\nconst prevBestTotal =\n  item.prevBestTotal !== undefined && item.prevBestTotal !== null\n    ? Number(item.prevBestTotal)\n    : null;\n\nconst prevExists = Boolean(item.prevExists);\n\n// Role flags\nconst isCompetitor = item.hotelRole === \"competitor\";\nconst isOurHotel = item.hotelRole === \"ourHotel\";\n\n// Changes\nlet absChange = null;\nlet pctChange = null;\nlet pctChangePct = null;\n\nif (bestTotal !== null && prevExists && prevBestTotal !== null && prevBestTotal !== 0) {\n  absChange = bestTotal - prevBestTotal;\n  pctChange = absChange / prevBestTotal;      // e.g., 0.10 = 10%\n  pctChangePct = pctChange * 100;             // e.g., 10 = 10%\n}\n\n// Significant change rule (competitors only; uses absolute change)\nconst isSignificant =\n  isCompetitor &&\n  pctChange !== null &&\n  Math.abs(pctChange) >= thresholdPct;\n\nreturn {\n  ...item,\n  thresholdPct,\n  absChange,\n  pctChange,\n  pctChangePct,\n  isSignificant,\n  isCompetitor,\n  isOurHotel,\n};\n"
          },
          "typeVersion": 2
        },
        {
          "id": "778472bb-1e24-45ed-8282-025132d50f4e",
          "name": "Significant Competitor Change",
          "type": "n8n-nodes-base.if",
          "position": [
            -16,
            384
          ],
          "parameters": {
            "options": {},
            "conditions": {
              "options": {
                "version": 3,
                "leftValue": "",
                "caseSensitive": true,
                "typeValidation": "strict"
              },
              "combinator": "and",
              "conditions": [
                {
                  "id": "02b560c8-8054-4630-b97e-647de32f66e2",
                  "operator": {
                    "type": "string",
                    "operation": "equals"
                  },
                  "leftValue": "={{ $json.hotelRole }}",
                  "rightValue": "competitor"
                },
                {
                  "id": "91a3040d-b0a8-4fe2-b00e-fb083d34fa44",
                  "operator": {
                    "type": "boolean",
                    "operation": "equals"
                  },
                  "leftValue": "={{ $json.isSignificant }}",
                  "rightValue": true
                },
                {
                  "id": "0116b668-9bb6-40d5-8f23-3bc7328582f9",
                  "operator": {
                    "type": "boolean",
                    "operation": "equals"
                  },
                  "leftValue": "={{ $json.prevExists }}",
                  "rightValue": true
                },
                {
                  "id": "81f76849-6d3c-45d8-9a27-fb15b50e91b3",
                  "operator": {
                    "type": "string",
                    "operation": "equals"
                  },
                  "leftValue": "={{ $json.outcome }}",
                  "rightValue": "OK"
                }
              ]
            }
          },
          "typeVersion": 2.3
        },
        {
          "id": "a35561a3-f6e5-465e-9a75-85f68a9ada22",
          "name": "Get Our Hotel Rates",
          "type": "n8n-nodes-base.dataTable",
          "position": [
            192,
            464
          ],
          "parameters": {
            "filters": {
              "conditions": [
                {
                  "keyName": "rateKey",
                  "keyValue": "={{$node[\"Config\"].json.ourHotel.hotelId}}|{{$json.checkInDate}}"
                }
              ]
            },
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "mode": "list",
              "value": "qjXbEPpv1X8ECf6N",
              "cachedResultUrl": "/projects/HgU76KeJzQXHrABf/datatables/qjXbEPpv1X8ECf6N",
              "cachedResultName": "#2 Hotel_Rates"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "c618b644-7349-4c28-917a-8ac06ae91fee",
          "name": "Prefix Our Hotel Fields",
          "type": "n8n-nodes-base.set",
          "position": [
            368,
            464
          ],
          "parameters": {
            "options": {},
            "assignments": {
              "assignments": [
                {
                  "id": "b0369e36-f9bd-41bf-adf2-934815a09018",
                  "name": "ourHotelID",
                  "type": "string",
                  "value": "={{ $json.hotelId }}"
                },
                {
                  "id": "1fbcd5b1-9c85-40d8-8893-a84259bc11f7",
                  "name": "ourHotelName",
                  "type": "string",
                  "value": "={{ $json.hotelName }}"
                },
                {
                  "id": "61487e87-1db2-4016-b2a5-e2ca0a448703",
                  "name": "ourHotelRateKey",
                  "type": "string",
                  "value": "={{ $json.rateKey }}"
                },
                {
                  "id": "cad6d9ca-2cfb-484c-a5c7-dafb9b45b480",
                  "name": "ourHotelCheckInDate",
                  "type": "string",
                  "value": "={{ $json.checkInDate }}"
                },
                {
                  "id": "8b489b14-2823-4376-b541-2636a870bf81",
                  "name": "ourHotelTimeSlot",
                  "type": "string",
                  "value": "={{ $json.timeSlot }}"
                },
                {
                  "id": "c15fe73c-decf-4867-8eee-81c4ec5cea0d",
                  "name": "ourHotelBestTotal",
                  "type": "number",
                  "value": "={{ $json.bestTotal }}"
                },
                {
                  "id": "aeff0a4f-4c5a-4d55-8279-7a6149c404a3",
                  "name": "ourHotelCurrency",
                  "type": "string",
                  "value": "={{ $json.currency }}"
                },
                {
                  "id": "c202c5b2-b622-47da-8225-4b95e6681e4b",
                  "name": "ourHotelUpdatedAt",
                  "type": "string",
                  "value": "={{ $json.updatedAt }}"
                }
              ]
            }
          },
          "typeVersion": 3.4
        },
        {
          "id": "c26bbbf2-4096-4399-b9d2-206b917f5fe5",
          "name": "Build VCC URLs",
          "type": "n8n-nodes-base.code",
          "position": [
            816,
            480
          ],
          "parameters": {
            "jsCode": "// Build UNIQUE Vancouver Convention Centre monthly URLs needed for all significant items\n// Output: 1 item per unique month URL\n// Each output includes alertItems[] so downstream parsing/AI still has full context\n\nconst items = $input.all().map(i => i.json);\n\n// Helper: \"YYYY-MM\"\nfunction ym(dateObj) {\n  const y = dateObj.getFullYear();\n  const m = String(dateObj.getMonth() + 1).padStart(2, \"0\");\n  return `${y}-${m}`;\n}\n\n// Helper: VCC URL\nfunction vccUrlFromYM(yyyyMm) {\n  const [y, m] = yyyyMm.split(\"-\").map(Number);\n  return `https://www.vancouverconventioncentre.com/events/${y}/${m}`;\n}\n\n// Collect months needed (current + next) for every significant item\nconst monthSet = new Set();\n\nfor (const it of items) {\n  const d = new Date(`${it.checkInDate}T00:00:00`);\n  monthSet.add(ym(d));\n\n  const d2 = new Date(d);\n  d2.setMonth(d2.getMonth() + 1);\n  monthSet.add(ym(d2));\n}\n\n// Build output: one request per unique month\nconst months = Array.from(monthSet).sort();\nreturn months.map(m => ({\n  json: {\n    vccMonth: m,\n    vccUrl: vccUrlFromYM(m),\n    alertItems: items, // keep all significant changes for downstream AI/message composition\n  },\n}));\n"
          },
          "typeVersion": 2
        },
        {
          "id": "c33c9db9-5763-4ef7-a4fb-98e634618ac8",
          "name": "Fetch VCC Month HTML",
          "type": "n8n-nodes-base.httpRequest",
          "onError": "continueRegularOutput",
          "position": [
            992,
            480
          ],
          "parameters": {
            "url": "={{$json.vccUrl}}",
            "options": {
              "response": {
                "response": {
                  "responseFormat": "text",
                  "outputPropertyName": "events"
                }
              }
            }
          },
          "retryOnFail": false,
          "typeVersion": 4.3
        },
        {
          "id": "5e2b3b9c-3065-4708-9e6c-d126cdc737d9",
          "name": "Events Extract",
          "type": "n8n-nodes-base.code",
          "position": [
            1344,
            480
          ],
          "parameters": {
            "jsCode": "/**\n * n8n Code node (JavaScript) â€” Run Once for All Items\n * Fixes: startISO null / sortKey 99999999 by inferring year from title/url + Dec/Jan heuristic.\n */\n\nconst BASE_URL = 'https://www.vancouverconventioncentre.com';\n\nconst monthMap = {\n  Jan: 1, Feb: 2, Mar: 3, Apr: 4, May: 5, Jun: 6,\n  Jul: 7, Aug: 8, Sep: 9, Oct: 10, Nov: 11, Dec: 12,\n};\n\nconst clean = (v) =>\n  (v ?? '')\n    .toString()\n    .replace(/\\s+/g, ' ')\n    .trim();\n\nconst toAbsUrl = (href) => {\n  const h = clean(href);\n  if (!h) return '';\n  if (h.startsWith('http://') || h.startsWith('https://')) return h;\n  if (h.startsWith('/')) return `${BASE_URL}${h}`;\n  return `${BASE_URL}/${h}`;\n};\n\nconst pad2 = (n) => String(n).padStart(2, '0');\n\nconst toISO = (year, monNum, dayNum) => {\n  if (!year || !monNum || !dayNum) return null;\n  return `${year}-${pad2(monNum)}-${pad2(dayNum)}`;\n};\n\nconst detectYearFromText = (text) => {\n  const s = clean(text);\n  const m = s.match(/\\b(20\\d{2})\\b/);\n  return m ? parseInt(m[1], 10) : undefined;\n};\n\nconst detectYearFromUrl = (url) => {\n  const s = clean(url);\n  // matches ...-2026 or .../2026/... (slug patterns)\n  const m = s.match(/(?:-|\\/)(20\\d{2})(?:\\b|\\/|$)/);\n  return m ? parseInt(m[1], 10) : undefined;\n};\n\nconst formatRange = (e) => {\n  const sMon = clean(e.startMonth);\n  const sDay = clean(e.startDay);\n  const eMon = clean(e.endMonth);\n  const eDay = clean(e.endDay);\n\n  if (!eMon && !eDay) return `${sMon} ${sDay}`.trim();\n\n  if (sMon === eMon && sDay === eDay) return `${sMon} ${sDay}`.trim();\n\n  if (sMon && eMon && sMon === eMon && sDay && eDay) return `${sMon} ${sDay}â€“${eDay}`;\n\n  if (sMon && sDay && eMon && eDay) return `${sMon} ${sDay}â€“${eMon} ${eDay}`;\n\n  return [sMon, sDay, '-', eMon, eDay].filter(Boolean).join(' ').replace(/\\s+/g, ' ').trim();\n};\n\n// --------------------\n// 1) Collect raw events from all input items\n// --------------------\nconst inputs = $input.all();\nconst rawEvents = [];\n\nfor (const item of inputs) {\n  const j = item.json || {};\n\n  // Arrays from HTML Extract node\n  const titles = Array.isArray(j.title) ? j.title : [];\n  const hrefs = Array.isArray(j.href) ? j.href : [];\n  const startDays = Array.isArray(j.startDay) ? j.startDay : [];\n  const startMonths = Array.isArray(j.startMonth) ? j.startMonth : [];\n  const endDays = Array.isArray(j.endDay) ? j.endDay : [];\n  const endMonths = Array.isArray(j.endMonth) ? j.endMonth : [];\n\n  const n = Math.max(\n    titles.length,\n    hrefs.length,\n    startDays.length,\n    startMonths.length,\n    endDays.length,\n    endMonths.length\n  );\n\n  for (let i = 0; i < n; i++) {\n    const title = clean(titles[i]);\n    const url = toAbsUrl(hrefs[i]);\n\n    const startDay = clean(startDays[i]);\n    const startMonth = clean(startMonths[i]);\n    const endDay = clean(endDays[i]);\n    const endMonth = clean(endMonths[i]);\n\n    if (!title && !url) continue;\n\n    const startMonthNum = monthMap[startMonth] || undefined;\n\n    const yearFromTitle = detectYearFromText(title);\n    const yearFromUrl = detectYearFromUrl(url);\n    const detectedYear = yearFromTitle || yearFromUrl;\n\n    rawEvents.push({\n      title,\n      url,\n      startDay,\n      startMonth,\n      endDay,\n      endMonth,\n      startMonthNum,\n      detectedYear,\n    });\n  }\n}\n\n// --------------------\n// 2) Determine an \"anchor\" year for the batch\n//    - Prefer the smallest detected year among Jan events (perfect for Dec+Jan scrape)\n//    - Else: smallest detected year overall\n//    - Else: current year\n// --------------------\nconst nowYear = new Date().getFullYear();\n\nconst janYears = rawEvents\n  .filter(e => e.startMonthNum === 1 && e.detectedYear)\n  .map(e => e.detectedYear);\n\nconst allYears = rawEvents\n  .filter(e => e.detectedYear)\n  .map(e => e.detectedYear);\n\nconst anchorYear =\n  (janYears.length ? Math.min(...janYears) : undefined) ??\n  (allYears.length ? Math.min(...allYears) : undefined) ??\n  nowYear;\n\n// --------------------\n// 3) Assign final year per event\n//    - if detectedYear exists, use it\n//    - else if month is Nov/Dec, assume anchorYear - 1 (Dec preceding Jan anchor)\n//    - else assume anchorYear\n// --------------------\nconst withYear = rawEvents.map(e => {\n  let year = e.detectedYear;\n\n  if (!year) {\n    if (e.startMonthNum === 11 || e.startMonthNum === 12) year = anchorYear - 1;\n    else year = anchorYear;\n  }\n\n  const startDayNum = parseInt(e.startDay, 10);\n  const startISO =\n    Number.isFinite(startDayNum) && e.startMonthNum && year\n      ? toISO(year, e.startMonthNum, startDayNum)\n      : null;\n\n  const sortKey = startISO ? parseInt(startISO.replace(/-/g, ''), 10) : 99999999;\n\n  return {\n    ...e,\n    year,\n    startISO,\n    sortKey,\n  };\n});\n\n// --------------------\n// 4) De-dupe by URL (fallback key if missing)\n// --------------------\nconst seen = new Set();\nconst events = [];\n\nfor (const e of withYear) {\n  const key = e.url || `${e.title}|${e.startDay}|${e.startMonth}`;\n  if (seen.has(key)) continue;\n  seen.add(key);\n  events.push(e);\n}\n\n// --------------------\n// 5) Sort chronologically\n// --------------------\nevents.sort((a, b) => {\n  if (a.sortKey !== b.sortKey) return a.sortKey - b.sortKey;\n  return (a.title || '').localeCompare(b.title || '');\n});\n\n// --------------------\n// 6) Build summary (chronological)\n// --------------------\nconst eventsSummary = events\n  .map(e => `- ${formatRange(e)}: ${clean(e.title)} (${e.url})`)\n  .join('\\n');\n\nreturn [\n  {\n    json: {\n      eventsCount: events.length,\n      anchorYear,\n      events: events.map(e => ({\n        title: e.title,\n        url: e.url,\n        startDay: e.startDay,\n        startMonth: e.startMonth,\n        endDay: e.endDay,\n        endMonth: e.endMonth,\n        year: e.year,\n        startISO: e.startISO,\n        sortKey: e.sortKey,\n      })),\n      eventsSummary,\n    },\n  },\n];\n"
          },
          "typeVersion": 2
        },
        {
          "id": "77115dfc-75c9-4966-ae34-b1ec6234a014",
          "name": "Combine 30-Day Rates",
          "type": "n8n-nodes-base.merge",
          "position": [
            912,
            -96
          ],
          "parameters": {
            "mode": "combine",
            "options": {},
            "combineBy": "combineByPosition"
          },
          "typeVersion": 3.2
        },
        {
          "id": "5f436d25-091c-4b4e-9eb7-15f90f402a64",
          "name": "Get Prev Rates",
          "type": "n8n-nodes-base.dataTable",
          "position": [
            1664,
            -48
          ],
          "parameters": {
            "limit": 1,
            "filters": {
              "conditions": [
                {
                  "keyName": "rateKey",
                  "keyValue": "={{$json.rateKey}}"
                }
              ]
            },
            "matchType": "allConditions",
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "mode": "list",
              "value": "qjXbEPpv1X8ECf6N",
              "cachedResultUrl": "/projects/HgU76KeJzQXHrABf/datatables/qjXbEPpv1X8ECf6N",
              "cachedResultName": "Hotel_Rates"
            }
          },
          "typeVersion": 1,
          "alwaysOutputData": true
        },
        {
          "id": "92e54bf4-dd04-4813-a83c-bd4db6e868ca",
          "name": "Upsert Latest Rates",
          "type": "n8n-nodes-base.dataTable",
          "position": [
            2256,
            -224
          ],
          "parameters": {
            "columns": {
              "value": {
                "hotelId": "={{ $json.hotelId }}",
                "rateKey": "={{ $json.rateKey }}",
                "currency": "={{ $json.currency }}",
                "timeSlot": "={{ $json.timeSlot }}",
                "bestTotal": "={{ $json.bestTotal }}",
                "hotelName": "={{ $json.hotelName }}",
                "checkInDate": "={{ $json.checkInDate }}"
              },
              "schema": [
                {
                  "id": "rateKey",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "rateKey",
                  "defaultMatch": false
                },
                {
                  "id": "hotelId",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "hotelId",
                  "defaultMatch": false
                },
                {
                  "id": "hotelName",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "hotelName",
                  "defaultMatch": false
                },
                {
                  "id": "checkInDate",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "checkInDate",
                  "defaultMatch": false
                },
                {
                  "id": "timeSlot",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "timeSlot",
                  "defaultMatch": false
                },
                {
                  "id": "bestTotal",
                  "type": "number",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "bestTotal",
                  "defaultMatch": false
                },
                {
                  "id": "currency",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "currency",
                  "defaultMatch": false
                }
              ],
              "mappingMode": "defineBelow",
              "matchingColumns": [],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "filters": {
              "conditions": [
                {
                  "keyName": "rateKey",
                  "keyValue": "={{ $json.rateKey }}"
                }
              ]
            },
            "options": {},
            "matchType": "allConditions",
            "operation": "upsert",
            "dataTableId": {
              "__rl": true,
              "mode": "list",
              "value": "qjXbEPpv1X8ECf6N",
              "cachedResultUrl": "/projects/HgU76KeJzQXHrABf/datatables/qjXbEPpv1X8ECf6N",
              "cachedResultName": "Hotel_Rates"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "556269b7-e938-419e-9984-843abe76a9f8",
          "name": "Insert History Rates",
          "type": "n8n-nodes-base.dataTable",
          "position": [
            2256,
            -80
          ],
          "parameters": {
            "columns": {
              "value": {
                "hotelID": "={{ $json.hotelId }}",
                "currency": "={{ $json.currency }}",
                "timeSlot": "={{ $json.timeSlot }}",
                "bestTotal": "={{ $json.bestTotal }}",
                "hotelName": "={{ $json.hotelName }}",
                "historyKey": "={{ $json.historyKey }}",
                "checkInDate": "={{ $json.checkInDate }}",
                "observedAtUtc": "={{ $json.observedAtUtc }}",
                "observedAtLocal": "={{ $json.observedAtLocal }}"
              },
              "schema": [
                {
                  "id": "historyKey",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "historyKey",
                  "defaultMatch": false
                },
                {
                  "id": "hotelID",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "hotelID",
                  "defaultMatch": false
                },
                {
                  "id": "hotelName",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "hotelName",
                  "defaultMatch": false
                },
                {
                  "id": "checkInDate",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "checkInDate",
                  "defaultMatch": false
                },
                {
                  "id": "bestTotal",
                  "type": "number",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "bestTotal",
                  "defaultMatch": false
                },
                {
                  "id": "currency",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "currency",
                  "defaultMatch": false
                },
                {
                  "id": "timeSlot",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "timeSlot",
                  "defaultMatch": false
                },
                {
                  "id": "observedAtUtc",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "observedAtUtc",
                  "defaultMatch": false
                },
                {
                  "id": "observedAtLocal",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "observedAtLocal",
                  "defaultMatch": false
                }
              ],
              "mappingMode": "defineBelow",
              "matchingColumns": [],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "options": {},
            "dataTableId": {
              "__rl": true,
              "mode": "list",
              "value": "62p7j641jAbn46lU",
              "cachedResultUrl": "/projects/HgU76KeJzQXHrABf/datatables/62p7j641jAbn46lU",
              "cachedResultName": "Hotel_Rates_History"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "d97aba48-4dd9-407c-84d0-97341d4dfbcf",
          "name": "Combine New Rates vs Prev Rates",
          "type": "n8n-nodes-base.merge",
          "position": [
            2016,
            -80
          ],
          "parameters": {
            "mode": "combine",
            "options": {
              "clashHandling": {
                "values": {
                  "mergeMode": "shallowMerge",
                  "resolveClash": "preferInput1"
                }
              }
            },
            "joinMode": "enrichInput1",
            "fieldsToMatchString": "rateKey"
          },
          "typeVersion": 3.2
        },
        {
          "id": "9284f26f-e218-4418-8898-82bebcd5f004",
          "name": "Combine Competitor Rates vs Our Rates",
          "type": "n8n-nodes-base.merge",
          "position": [
            544,
            384
          ],
          "parameters": {
            "mode": "combine",
            "options": {
              "clashHandling": {
                "values": {
                  "resolveClash": "preferInput1"
                }
              }
            },
            "combineBy": "combineByPosition"
          },
          "typeVersion": 3.2
        },
        {
          "id": "c7f2f0e4-e767-40ef-8d69-a3296b44ae8a",
          "name": "Structured Output Parser",
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "position": [
            2128,
            592
          ],
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"RevenueManagerAlertAnalysis\",\n  \"type\": \"object\",\n  \"additionalProperties\": false,\n  \"required\": [\n    \"executiveSummary\",\n    \"alertsReviewed\",\n    \"findings\",\n    \"vccEventsUsedSummary\"\n  ],\n  \"properties\": {\n    \"executiveSummary\": {\n      \"type\": \"string\",\n      \"minLength\": 1\n    },\n    \"alertsReviewed\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"findings\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"additionalProperties\": false,\n        \"required\": [\n          \"hotelName\",\n          \"checkInDate\",\n          \"competitorNow\",\n          \"competitorPrev\",\n          \"competitorAbsChange\",\n          \"competitorPctChangePct\",\n          \"ourHotelRate\",\n          \"priceGapOurMinusCompetitor\",\n          \"priceGapPct\",\n          \"vccEventOverlaps\",\n          \"interpretation\",\n          \"recommendation\"\n        ],\n        \"properties\": {\n          \"hotelName\": {\n            \"type\": \"string\",\n            \"minLength\": 1\n          },\n          \"checkInDate\": {\n            \"type\": \"string\",\n            \"pattern\": \"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\"\n          },\n          \"competitorNow\": {\n            \"type\": [\"number\", \"null\"]\n          },\n          \"competitorPrev\": {\n            \"type\": [\"number\", \"null\"]\n          },\n          \"competitorAbsChange\": {\n            \"type\": [\"number\", \"null\"]\n          },\n          \"competitorPctChangePct\": {\n            \"type\": [\"number\", \"null\"]\n          },\n          \"ourHotelRate\": {\n            \"type\": [\"number\", \"null\"]\n          },\n          \"priceGapOurMinusCompetitor\": {\n            \"type\": [\"number\", \"null\"]\n          },\n          \"priceGapPct\": {\n            \"type\": [\"number\", \"null\"]\n          },\n          \"vccEventOverlaps\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"object\",\n              \"additionalProperties\": false,\n              \"required\": [\"title\", \"url\", \"startISO\"],\n              \"properties\": {\n                \"title\": {\n                  \"type\": \"string\",\n                  \"minLength\": 1\n                },\n                \"url\": {\n                  \"type\": \"string\",\n                  \"minLength\": 1\n                },\n                \"startISO\": {\n                  \"type\": \"string\",\n                  \"pattern\": \"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\"\n                }\n              }\n            }\n          },\n          \"interpretation\": {\n            \"type\": \"string\",\n            \"minLength\": 1\n          },\n          \"recommendation\": {\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n            \"required\": [\"priceAction\", \"targetRange\", \"tactics\", \"monitoring\"],\n            \"properties\": {\n              \"priceAction\": {\n                \"type\": \"string\",\n                \"enum\": [\"increase\", \"decrease\", \"hold\"]\n              },\n              \"targetRange\": {\n                \"type\": \"object\",\n                \"additionalProperties\": false,\n                \"required\": [\"min\", \"max\"],\n                \"properties\": {\n                  \"min\": { \"type\": \"number\" },\n                  \"max\": { \"type\": \"number\" }\n                }\n              },\n              \"tactics\": {\n                \"type\": \"array\",\n                \"items\": { \"type\": \"string\" }\n              },\n              \"monitoring\": {\n                \"type\": \"array\",\n                \"items\": { \"type\": \"string\" }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"vccEventsUsedSummary\": {\n      \"type\": \"string\",\n      \"minLength\": 1\n    }\n  }\n}\n"
          },
          "typeVersion": 1.3
        },
        {
          "id": "3e29025d-940a-46db-bc92-6f10b688ba75",
          "name": "Normalize Whatsapp Input",
          "type": "n8n-nodes-base.set",
          "position": [
            960,
            880
          ],
          "parameters": {
            "options": {},
            "assignments": {
              "assignments": [
                {
                  "id": "6814165f-1ff0-4654-8ec5-0fad100c3c95",
                  "name": "chatInput",
                  "type": "string",
                  "value": "={{\n  (\n    ($json.messages && $json.messages[0] && $json.messages[0].text && $json.messages[0].text.body) ||\n    ($json.value && $json.value.messages && $json.value.messages[0] && $json.value.messages[0].text && $json.value.messages[0].text.body) ||\n    ($json.entry && $json.entry[0] && $json.entry[0].changes && $json.entry[0].changes[0] && $json.entry[0].changes[0].value &&\n      $json.entry[0].changes[0].value.messages && $json.entry[0].changes[0].value.messages[0] &&\n      $json.entry[0].changes[0].value.messages[0].text && $json.entry[0].changes[0].value.messages[0].text.body) ||\n    \"\"\n  )\n}}\n"
                }
              ]
            }
          },
          "typeVersion": 3.4
        },
        {
          "id": "d99ca3f4-3c38-4240-8cb5-19c582b84df2",
          "name": "Prepare AI Agent Input",
          "type": "n8n-nodes-base.code",
          "position": [
            1824,
            400
          ],
          "parameters": {
            "jsCode": "// n8n Code node\n// Mode: Run Once for All Items\n// Input: items from a Merge(Append) node that outputs:\n//  - one or more \"alert\" items (hotel pricing change rows), and\n//  - one \"events bundle\" item (eventsCount/anchorYear/events/eventsSummary)\n\nfunction pad2(n) {\n  return String(n).padStart(2, '0');\n}\n\nconst monthMap = {\n  Jan: 1, Feb: 2, Mar: 3, Apr: 4, May: 5, Jun: 6,\n  Jul: 7, Aug: 8, Sep: 9, Oct: 10, Nov: 11, Dec: 12,\n};\n\nfunction toISODate(year, monAbbr, dayStr) {\n  const m = monthMap[monAbbr];\n  if (!year || !m || !dayStr) return null;\n  const d = Number(dayStr);\n  if (!Number.isFinite(d)) return null;\n  return `${year}-${pad2(m)}-${pad2(d)}`;\n}\n\nfunction safeDate(s) {\n  const d = new Date(s);\n  return isNaN(d.getTime()) ? null : d;\n}\n\nconst all = $input.all().map(i => i.json);\n\n// Identify events bundle vs alerts\nlet vccBundle = null;\nconst alertItems = [];\n\nfor (const obj of all) {\n  const looksLikeEventsBundle =\n    typeof obj?.eventsCount === 'number' &&\n    Array.isArray(obj?.events) &&\n    typeof obj?.eventsSummary === 'string';\n\n  const looksLikeAlertRow =\n    typeof obj?.bestTotal === 'number' &&\n    typeof obj?.hotelName === 'string' &&\n    typeof obj?.checkInDate === 'string';\n\n  const looksLikePreparedBundle =\n    typeof obj?.alertsCount === 'number' &&\n    Array.isArray(obj?.alerts);\n\n  if (looksLikeEventsBundle) {\n    vccBundle = obj;\n  } else if (looksLikePreparedBundle) {\n    // If an upstream node already bundled alerts, unpack them\n    for (const a of obj.alerts) alertItems.push(a);\n    // and also allow vcc fields if present\n    if (!vccBundle && Array.isArray(obj?.vccEvents) && typeof obj?.vccEventsSummary === 'string') {\n      // not expected here, but kept for resilience\n      vccBundle = {\n        eventsCount: obj.vccEventsCount ?? obj.vccEvents?.length ?? 0,\n        anchorYear: obj.vccAnchorYear ?? null,\n        events: obj.vccEvents ?? [],\n        eventsSummary: obj.vccEventsSummary ?? '',\n      };\n    }\n  } else if (looksLikeAlertRow) {\n    alertItems.push(obj);\n  }\n}\n\n// Slim alerts to only what the agent needs (keeps prompt small and consistent)\nconst alerts = alertItems.map(a => ({\n  rateKey: a.rateKey ?? null,\n  hotelId: a.hotelId ?? null,\n  hotelName: a.hotelName ?? null,\n  hotelRole: a.hotelRole ?? null,\n  checkInDate: a.checkInDate ?? null,\n  checkOutDate: a.checkOutDate ?? null,\n  timeSlot: a.timeSlot ?? null,\n  bestTotal: a.bestTotal ?? null,\n  currency: a.currency ?? null,\n  prevBestTotal: a.prevBestTotal ?? null,\n  prevCurrency: a.prevCurrency ?? null,\n  absChange: a.absChange ?? null,\n  pctChangePct: a.pctChangePct ?? null,\n  isSignificant: a.isSignificant ?? null,\n  ourHotelID: a.ourHotelID ?? null,\n  ourHotelName: a.ourHotelName ?? null,\n  ourHotelBestTotal: a.ourHotelBestTotal ?? null,\n  ourHotelCurrency: a.ourHotelCurrency ?? null,\n  observedAtLocal: a.observedAtLocal ?? null,\n}));\n\n// Optional: compute relevant events for each alert check-in date (still small)\n// We will NOT pass the full vcc events array downstream, only the overlaps.\nlet relevantEventsByAlert = [];\n\nif (vccBundle?.events?.length && alerts.length) {\n  const events = vccBundle.events.map(e => {\n    // Ensure we have startISO\n    const startISO = e.startISO ?? toISODate(e.year, e.startMonth, e.startDay);\n\n    // Compute endISO (handles \"Jan 31 â€“ Feb 1\" by rolling year if month goes backwards)\n    const startMonthNum = monthMap[e.startMonth];\n    const endMonthNum = monthMap[e.endMonth];\n\n    let endYear = e.year ?? vccBundle.anchorYear ?? null;\n    if (endYear && startMonthNum && endMonthNum && endMonthNum < startMonthNum) {\n      endYear = endYear + 1;\n    }\n    const endISO = e.endISO ?? toISODate(endYear, e.endMonth, e.endDay);\n\n    return {\n      title: e.title ?? null,\n      url: e.url ?? null,\n      startISO,\n      endISO,\n    };\n  });\n\n  relevantEventsByAlert = alerts.map(a => {\n    const inD = safeDate(a.checkInDate);\n    if (!inD) return { checkInDate: a.checkInDate ?? null, relevantEvents: [] };\n\n    const hits = [];\n    for (const ev of events) {\n      const s = safeDate(ev.startISO);\n      const ed = safeDate(ev.endISO ?? ev.startISO);\n      if (!s || !ed) continue;\n\n      // inclusive overlap check: check-in falls within event date window\n      if (inD >= s && inD <= ed) {\n        hits.push({ title: ev.title, url: ev.url, startISO: ev.startISO, endISO: ev.endISO ?? ev.startISO });\n      }\n    }\n\n    return { checkInDate: a.checkInDate ?? null, relevantEvents: hits };\n  });\n}\n\nconst out = {\n  alertsCount: alerts.length,\n  alerts,\n  vccEventsCount: vccBundle?.eventsCount ?? 0,\n  vccAnchorYear: vccBundle?.anchorYear ?? null,\n  // Keep ONLY the summary to avoid prompt bloat/truncation:\n  vccEventsSummary: vccBundle?.eventsSummary ?? '',\n  // Optional but useful, and still compact:\n  relevantEventsByAlert,\n  // Convenience context for the agent:\n  context: {\n    checkInDate: alerts?.[0]?.checkInDate ?? null,\n    timeSlot: alerts?.[0]?.timeSlot ?? null,\n    observedAtLocal: alerts?.[0]?.observedAtLocal ?? null,\n    ourHotelName: alerts?.[0]?.ourHotelName ?? null,\n  },\n};\n\nreturn [{ json: out }];\n"
          },
          "typeVersion": 2
        },
        {
          "id": "1c659f17-e275-47e4-a8fa-888ba3f4e9d1",
          "name": "Get Hotel_Rates_History",
          "type": "n8n-nodes-base.dataTableTool",
          "position": [
            1584,
            1072
          ],
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "mode": "list",
              "value": "62p7j641jAbn46lU",
              "cachedResultUrl": "/projects/HgU76KeJzQXHrABf/datatables/62p7j641jAbn46lU",
              "cachedResultName": "#2 Hotel_Rates_History"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "3c88e845-7589-4b8c-bf66-a0b271098d20",
          "name": "WhatsApp Trigger",
          "type": "n8n-nodes-base.whatsAppTrigger",
          "position": [
            544,
            896
          ],
          "webhookId": "ea3e5d8d-9a61-419a-af22-d405131141d2",
          "parameters": {
            "options": {},
            "updates": [
              "messages"
            ]
          },
          "credentials": {
            "whatsAppTriggerApi": {
              "id": "ohqlXUZQsNM5IKeg",
              "name": "Empty API: For Template"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "8d395a5f-7f59-4e91-892b-041bf8af8223",
          "name": "Upsert Hotel Price Alerts",
          "type": "n8n-nodes-base.dataTable",
          "position": [
            2496,
            576
          ],
          "parameters": {
            "columns": {
              "value": {
                "key": "latest",
                "alertSummary": "={{ $json.output.executiveSummary }}",
                "eventSummary": "={{ $json.vccEventsSummary }}",
                "alertStrategy": "={{ $json.output.findings[0].recommendation.tactics }}{{ $json.output.findings[0].recommendation.monitoring }}"
              },
              "schema": [
                {
                  "id": "key",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "key",
                  "defaultMatch": false
                },
                {
                  "id": "alertSummary",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "alertSummary",
                  "defaultMatch": false
                },
                {
                  "id": "eventSummary",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "eventSummary",
                  "defaultMatch": false
                },
                {
                  "id": "alertStrategy",
                  "type": "string",
                  "display": true,
                  "removed": false,
                  "readOnly": false,
                  "required": false,
                  "displayName": "alertStrategy",
                  "defaultMatch": false
                }
              ],
              "mappingMode": "defineBelow",
              "matchingColumns": [],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "filters": {
              "conditions": [
                {
                  "keyName": "key",
                  "keyValue": "latest"
                }
              ]
            },
            "options": {},
            "operation": "upsert",
            "dataTableId": {
              "__rl": true,
              "mode": "list",
              "value": "YW03LGk1RjI01ihc",
              "cachedResultUrl": "/projects/HgU76KeJzQXHrABf/datatables/YW03LGk1RjI01ihc",
              "cachedResultName": "#2 Hotel_Price_Alert"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "263bd8c2-7db7-4ada-a955-994aa9e89c0c",
          "name": "Get Alert Summary",
          "type": "n8n-nodes-base.dataTable",
          "position": [
            1168,
            880
          ],
          "parameters": {
            "filters": {
              "conditions": [
                {
                  "keyName": "key",
                  "keyValue": "latest"
                }
              ]
            },
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "mode": "list",
              "value": "YW03LGk1RjI01ihc",
              "cachedResultUrl": "/projects/HgU76KeJzQXHrABf/datatables/YW03LGk1RjI01ihc",
              "cachedResultName": "#2 Hotel_Price_Alert"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "7c3561e8-f3bc-4d8b-a610-258c033717a7",
          "name": "Q&A",
          "type": "n8n-nodes-base.whatsApp",
          "position": [
            1712,
            880
          ],
          "webhookId": "565d61cb-c354-4aa7-82fa-d3a5d0fb7f8e",
          "parameters": {
            "textBody": "={{ $json.output }}",
            "operation": "send",
            "phoneNumberId": "=1234",
            "additionalFields": {},
            "recipientPhoneNumber": "x"
          },
          "credentials": {
            "whatsAppApi": {
              "id": "pBJxgRkm6D56d8qj",
              "name": "Empty API: For Template"
            }
          },
          "typeVersion": 1.1
        },
        {
          "id": "7148c03e-8074-4ffb-b44c-57b9bad6a9c0",
          "name": "AI Agent: Q&A",
          "type": "@n8n/n8n-nodes-langchain.agent",
          "position": [
            1360,
            880
          ],
          "parameters": {
            "text": "={{ $('Normalize Whatsapp Input').item.json.chatInput }}",
            "options": {
              "systemMessage": "=You are the Revenue Manager and Market Intelligence lead for WESTIN BAYSHORE VANCOUVER.\n\nThe user is provided with an executive summary of the analysis on competitor pricing alerts versus our hotel.\nExecutive Summary: {{ $json.alertSummary }}\nEvent Summary: {{ $json.eventSummary }}\nAlert Strategy: {{ $json.alertStrategy }}\n\nAnswer user's follow up question with your tool access to the Hotel_Rates_History if needed when observing rate changes in other dates. "
            },
            "promptType": "define"
          },
          "typeVersion": 3
        },
        {
          "id": "cdd7cedb-b58c-429e-a7b4-f4e4e910c12a",
          "name": "OpenAI Chat Model2",
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "position": [
            1264,
            1088
          ],
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4.1-mini"
            },
            "options": {},
            "builtInTools": {}
          },
          "credentials": {
            "openAiApi": {
              "id": "cF1YuhM4ZgVMjI7F",
              "name": "Empty API: For Template"
            }
          },
          "typeVersion": 1.3
        },
        {
          "id": "5b413733-d683-4f16-8479-a93c6167c29c",
          "name": "Combine Rates & Events",
          "type": "n8n-nodes-base.merge",
          "position": [
            1520,
            400
          ],
          "parameters": {},
          "typeVersion": 3.2
        },
        {
          "id": "43e07862-01f2-4c98-8c75-d366c8c97094",
          "name": "Combine Summary & Alert",
          "type": "n8n-nodes-base.merge",
          "position": [
            2304,
            576
          ],
          "parameters": {
            "mode": "combine",
            "options": {},
            "combineBy": "combineByPosition"
          },
          "typeVersion": 3.2
        },
        {
          "id": "0328da70-92cb-4864-b958-99a0a5c52f40",
          "name": "Sticky Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -192,
            -1088
          ],
          "parameters": {
            "width": 1712,
            "height": 768,
            "content": "## How It Works \n***Top Branch Workflow***\n\n**1. Intraday Monitoring:** Runs on schedule to catch competitor hotel's price shifts throughout the day. It fetches rates for the next 30 days via Amadeus and compares them against the previous run's data.\n\n**2. Context Enrichment:** If a significant change is found, the workflow:\n   - Retrieves our own hotel's rates for comparison.\n   - Scrapes for event data that might explain demand spikes.\n\n\n**3. AI Analysis & Alerting:** AI Agent acts as a Revenue Manager. It reviews the price gaps, competitor moves, and event signals to draft a strategic Executive Summary. This summary is sent immediately via WhatsApp and saved to the database.\n\n\n***Bottom Branch Workflow***\n\n**Interactive Analyst:** AI Agent 2 handles the follow-up questions. It pulls the latest analysis context and checks historical rate data to give an informed answer.\n\n\n\n## Setup Steps\n1) Add your hotel + competitor hotels (IDs/names) in the Config node.\n2) Set how far ahead you want to monitor (e.g., next 30 nights).\n3) Set how sensitive alerts should be (e.g., alert only if competitor moves > 10%).\n4) Connect:\n   - Amadeus (to fetch hotel prices)\n   - WhatsApp (to send alerts)\n   - Data tables (to store price snapshots, history, summary)\n   - Event Sites (to web scrape local events)\n5) Run a test:\n   - Trigger Workflow A once and confirm you receive a WhatsApp alert.\n   - Send a WhatsApp message to test Workflow B (Q&A).\n"
          },
          "typeVersion": 1
        },
        {
          "id": "b18a26fa-7335-44a7-a39f-0a3018f184aa",
          "name": "Sticky Note2",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            1584,
            -544
          ],
          "parameters": {
            "color": 3,
            "width": 496,
            "height": 176,
            "content": "## Prerequisites\n- OTA Platform API Key (e.g. Amadeus, Expedia)\n- LLM AI Model API Key (e.g. OpenAI, Gemini)\n- Database (e.g. n8n cloud, PostgreSQL)\n- Message Tool API Key (e.g. WhatsApp, Gmail)"
          },
          "typeVersion": 1
        },
        {
          "id": "fe1731dc-6b7d-426f-8630-5deede6e872f",
          "name": "Simple Memory",
          "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
          "position": [
            1424,
            1088
          ],
          "parameters": {
            "sessionKey": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "sessionIdType": "customKey"
          },
          "typeVersion": 1.3
        },
        {
          "id": "691e46ad-822e-46e7-88e8-0eb66269d2a1",
          "name": "Sticky Note3",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            1584,
            -1024
          ],
          "parameters": {
            "color": 5,
            "width": 992,
            "height": 416,
            "content": "## Use Cases & Benefits\n**Revenue Managers:** \nAutomate the \"rate shop\" routine and catch competitor moves without opening a spreadsheet.\n\n**Sales & Marketing Teams:** \nGo beyond raw data. Pairing \"what changed\" with \"why changed\" instantly.\n\n**Hotel Leadership:** \nPerfect for GMs and division leaders who need instant, decision-ready alerts via WhatsApp.\n\n\nâš¡ ***Zero-Touch Efficiency:*** Eliminates hours of manual searching by automating rate checks hourly.\n\nðŸ§  ***Contextual Intelligence:*** Track price AND explains why it moved by cross-referencing local events.\n\nðŸ¤– ***Actionable Strategy:*** AI doesn't just report numbers; it recommends specific pricing tactics.\n\nðŸ“‰ ***Long-Term Vision:*** Builds a permanent database of rate history, enabling the AI to answer complex trend questions over time."
          },
          "typeVersion": 1
        },
        {
          "id": "bf602fee-c0a4-4e73-96d9-7ea621804607",
          "name": "Sticky Note6",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            1248,
            -288
          ],
          "parameters": {
            "color": 7,
            "width": 1440,
            "height": 480,
            "content": "## Data Consolidation & Archiving\nConsolidates the results with the previous pricing snapshot into a single dataset for further processing and archives into the data bases."
          },
          "typeVersion": 1
        },
        {
          "id": "c8fa37bf-c5df-43ee-8cb1-e0e8061845a1",
          "name": "Sticky Note7",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -272,
            -288
          ],
          "parameters": {
            "color": 7,
            "width": 1440,
            "height": 480,
            "content": "## Data Collection Engine\nThis section triggers on a schedule (09:00, 15:00, 21:00) to ensure intraday coverage. It generates 30 individual date windows and queries the Amadeus API to fetch live pricing for competitor hotels."
          },
          "typeVersion": 1
        },
        {
          "id": "4f7fc126-6624-4b3e-a0be-5369495bb0c2",
          "name": "Sticky Note8",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -272,
            256
          ],
          "parameters": {
            "color": 7,
            "width": 1008,
            "height": 480,
            "content": "## Change Detection & Comparison\nFilters for competitor's significant price changes (>10%) and fetch our hotel's prices for further analysis."
          },
          "typeVersion": 1
        },
        {
          "id": "80c6449d-728b-4d38-860b-1f242d0c337c",
          "name": "Sticky Note9",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            768,
            256
          ],
          "parameters": {
            "color": 7,
            "width": 928,
            "height": 480,
            "content": "## Market Context\nScrapes the Vancouver Convention Centre (VCC) website for the specific alert dates to identify if a conference or event is driving the competitor's price surge."
          },
          "typeVersion": 1
        },
        {
          "id": "0f63fdd0-10ee-429e-a990-6ac9f6733ca1",
          "name": "Sticky Note10",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            1728,
            256
          ],
          "parameters": {
            "color": 7,
            "width": 960,
            "height": 480,
            "content": "## Analysis by Revenue AI Agent\nConducts analysis to generate a strategic \"Executive Summary\" recommending specific revenue actions. Delivers the result and archives into the data base."
          },
          "typeVersion": 1
        },
        {
          "id": "dd8d2e47-140d-463b-aceb-81e275d38331",
          "name": "Sticky Note11",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            496,
            768
          ],
          "parameters": {
            "color": 7,
            "width": 1440,
            "height": 480,
            "content": "## Follow-Up Q&A with Revenue AI Agent\nRetrieves the latest alert context and uses database tools to answer our follow-up questions with historical trend data."
          },
          "typeVersion": 1
        },
        {
          "id": "46e9f99c-22fb-4f5c-8810-435d8e3b3c96",
          "name": "AI Agent: Analyze",
          "type": "@n8n/n8n-nodes-langchain.agent",
          "position": [
            2064,
            400
          ],
          "parameters": {
            "text": "={{ \"Analyze this JSON bundle and return ONLY valid JSON in the required schema.\\n\\nINPUT:\\n\" + JSON.stringify($json) }}\n",
            "options": {
              "systemMessage": "You are the Revenue Manager and Market Intelligence lead for WESTIN BAYSHORE VANCOUVER.\n\nObjective\nAnalyze competitor pricing alerts versus our hotel, then use Vancouver Convention Centre (VCC) events as contextual demand signals to support (not dictate) pricing recommendations.\n\nImportant guidance\n- Events are NOT guaranteed causes of price movement. Competitor changes may be driven by sell-outs, room-type inventory shifts, holiday/leisure demand, group blocks, channel strategy, or revenue management tactics.\n- Use VCC events ONLY as supplementary context when forming hypotheses and recommendations.\n- Provide operationally feasible actions: price moves, rate fences, restrictions, channel actions, and monitoring steps.\n- Be explicit about assumptions and uncertainty.\n\n\nHow to analyze\nFor each alert item:\n1) Summarize competitor movement: bestTotal vs prevBestTotal (absChange, pctChangePct).\n2) Compare to our hotel: use ourHotelBestTotal vs competitor bestTotal.\n   - priceGapOurMinusCompetitor = ourHotelBestTotal - bestTotal\n   - priceGapPct = (priceGapOurMinusCompetitor / bestTotal) * 100  (if bestTotal > 0)\n3) VCC event context:\n   - Identify notable events whose date ranges plausibly overlap the stay date (checkInDate). Use the provided VCC list as context only.\n4) Provide a recommendation:\n   - priceAction: \"increase\" | \"decrease\" | \"hold\"\n   - targetRange: min/max numeric suggestions (CAD)\n   - tactics: concrete actions (rate fences, LOS, CTA/CTD, channel controls, packages, BAR positioning)\n   - monitoring: what to watch and when (next 24â€“72h, pickup, competitor recheck cadence)\n\nOUTPUT REQUIREMENT\nReturn ONLY a valid JSON object (no markdown, no code fences, no commentary) matching this schema:\n\n{\n  \"executiveSummary\": string,\n  \"alertsReviewed\": number,\n  \"findings\": [\n    {\n      \"hotelName\": string,\n      \"checkInDate\": string,\n      \"competitorNow\": number | null,\n      \"competitorPrev\": number | null,\n      \"competitorAbsChange\": number | null,\n      \"competitorPctChangePct\": number | null,\n      \"ourHotelRate\": number | null,\n      \"priceGapOurMinusCompetitor\": number | null,\n      \"priceGapPct\": number | null,\n      \"vccEventOverlaps\": [\n        { \"title\": string, \"url\": string, \"startISO\": string }\n      ],\n      \"interpretation\": string,\n      \"recommendation\": {\n        \"priceAction\": \"increase\" | \"decrease\" | \"hold\",\n        \"targetRange\": { \"min\": number, \"max\": number },\n        \"tactics\": string[],\n        \"monitoring\": string[]\n      }\n    }\n  ],\n  \"vccEventsUsedSummary\": string\n}\n"
            },
            "promptType": "define",
            "hasOutputParser": true
          },
          "typeVersion": 3
        },
        {
          "id": "0bf6f56b-ebb6-4851-ae7b-e11046d3c005",
          "name": "OpenAI Chat Model",
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "position": [
            1920,
            608
          ],
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4.1-mini"
            },
            "options": {},
            "builtInTools": {}
          },
          "credentials": {
            "openAiApi": {
              "id": "cF1YuhM4ZgVMjI7F",
              "name": "Empty API: For Template"
            }
          },
          "typeVersion": 1.3
        },
        {
          "id": "a391a7ef-8129-48bb-84d7-44cdd48112d5",
          "name": "Daily Market Check",
          "type": "n8n-nodes-base.scheduleTrigger",
          "position": [
            96,
            -112
          ],
          "parameters": {
            "rule": {
              "interval": [
                {
                  "field": "cronExpression",
                  "expression": "0 0 9 * * *"
                },
                {
                  "field": "cronExpression",
                  "expression": "0 0 15 * * *"
                },
                {
                  "field": "cronExpression",
                  "expression": "0 0 21 * * *"
                }
              ]
            }
          },
          "typeVersion": 1.3
        },
        {
          "id": "4e185c90-5a0a-4c1d-989b-6309cf263111",
          "name": "Extract Event Details",
          "type": "n8n-nodes-base.html",
          "position": [
            1184,
            480
          ],
          "parameters": {
            "options": {},
            "operation": "extractHtmlContent",
            "dataPropertyName": "events",
            "extractionValues": {
              "values": [
                {
                  "key": "title",
                  "cssSelector": "=a.event-item .event-details h2",
                  "returnArray": true
                },
                {
                  "key": "href",
                  "attribute": "href",
                  "cssSelector": "=a.event-item",
                  "returnArray": true,
                  "returnValue": "attribute"
                },
                {
                  "key": "startDay",
                  "cssSelector": "=a.event-item .event-date .day:first-of-type span:first-child",
                  "returnArray": true
                },
                {
                  "key": "startMonth",
                  "cssSelector": "=a.event-item .event-date .day:first-of-type span.month",
                  "returnArray": true
                },
                {
                  "key": "endDay",
                  "cssSelector": "=a.event-item .event-date .day:last-of-type span:first-child",
                  "returnArray": true
                },
                {
                  "key": "endMonth",
                  "cssSelector": "=a.event-item .event-date .day:last-of-type span.month",
                  "returnArray": true
                }
              ]
            }
          },
          "typeVersion": 1.2
        },
        {
          "id": "d8fc6f9e-ac02-44d8-9bac-d0554fe62925",
          "name": "Clean Amadeus Data",
          "type": "n8n-nodes-base.code",
          "position": [
            1312,
            -96
          ],
          "parameters": {
            "mode": "runOnceForEachItem",
            "jsCode": "// Normalize Amadeus hotel-offers response into a consistent schema\n// Preserves request context (hotelRole/hotelId/hotelName/dates/cfg fields) for downstream logic.\n\nfunction tryParseJson(x) {\n  if (typeof x !== \"string\") return x;\n  try { return JSON.parse(x); } catch { return x; }\n}\n\nconst rawItem = $json;\n\n// If HTTP Request is set to \"Full Response\", body is at rawItem.body\n// Otherwise, rawItem itself is the payload\nlet resp = rawItem.body ?? rawItem;\n\n// Sometimes the HTTP node returns: { data: \"{\\\"data\\\":[...]}\" }\nresp = tryParseJson(resp);\nif (resp && typeof resp === \"object\" && typeof resp.data === \"string\") {\n  resp = { ...resp, data: tryParseJson(resp.data) };\n}\n\n// Extract HTTP status (success or error-output)\nconst httpStatus =\n  rawItem.statusCode ??\n  resp?.statusCode ??\n  rawItem.error?.status ??\n  rawItem.error?.httpCode ??\n  200;\n\n// Extract Amadeus error details\nlet amadeusCode = resp?.errors?.[0]?.code ?? null;\nlet errorTitle = resp?.errors?.[0]?.title ?? null;\n\nif (!amadeusCode && rawItem.error?.message) {\n  const msg = rawItem.error.message;\n  const firstBrace = msg.indexOf(\"{\");\n  const lastBrace = msg.lastIndexOf(\"}\");\n  if (firstBrace !== -1 && lastBrace !== -1 && lastBrace > firstBrace) {\n    const jsonChunk = msg.slice(firstBrace, lastBrace + 1);\n    const parsed = tryParseJson(jsonChunk);\n    if (parsed?.errors?.[0]) {\n      amadeusCode = parsed.errors[0].code ?? null;\n      errorTitle = parsed.errors[0].title ?? null;\n    }\n  }\n}\n\n// Extract hotel + offers\nconst hotelBlock = resp?.data?.[0] ?? null;\nconst offers = hotelBlock?.offers ?? [];\n\n// Prefer request context hotelId/hotelName (because we intentionally set them in generator)\nconst hotelId = rawItem.hotelId ?? hotelBlock?.hotel?.hotelId ?? null;\nconst hotelName = rawItem.hotelName ?? hotelBlock?.hotel?.name ?? null;\n\n// Compute minRate\nlet minRate = null;\nif (Array.isArray(offers) && offers.length) {\n  const totals = offers\n    .map(o => Number(o?.price?.total ?? o?.price?.base ?? NaN))\n    .filter(n => Number.isFinite(n));\n  if (totals.length) minRate = Math.min(...totals);\n}\n\n// Outcome logic\nlet outcome = \"ERROR\";\n\nif (httpStatus === 200) {\n  outcome = (minRate !== null) ? \"OK\" : \"NO_OFFERS\";\n} else if (httpStatus === 400 && amadeusCode === 3664) {\n  outcome = \"NO_OFFERS\";\n} else if (httpStatus === 429) {\n  outcome = \"RATE_LIMIT\";\n} else if (httpStatus === 401) {\n  outcome = \"AUTH_ERROR\";\n}\n\n// Return: preserve important request context + normalized response fields\nreturn {\n  // preserved context\n  hotelRole: rawItem.hotelRole ?? null,\n  hotelId,\n  hotelName,\n  checkInDate: rawItem.checkInDate ?? offers?.[0]?.checkInDate ?? null,\n  checkOutDate: rawItem.checkOutDate ?? offers?.[0]?.checkOutDate ?? null,\n\n  currency: offers?.[0]?.price?.currency ?? rawItem.currency ?? null,\n  adults: rawItem.adults ?? null,\n  roomQuantity: rawItem.roomQuantity ?? null,\n  thresholdPct: rawItem.thresholdPct ?? null,\n\n  // normalized results\n  hasOffer: minRate !== null,\n  minRate,\n  outcome,\n  httpStatus,\n  amadeusCode,\n  errorTitle,\n};\n"
          },
          "typeVersion": 2
        },
        {
          "id": "9214aa2f-f21a-4f9c-b5df-c00591d772e2",
          "name": "Send WhatsApp Alert",
          "type": "n8n-nodes-base.whatsApp",
          "position": [
            2496,
            400
          ],
          "webhookId": "3c409336-a356-488c-80c4-8c25f4ffd7bd",
          "parameters": {
            "textBody": "={{ $json.output.executiveSummary }}",
            "operation": "send",
            "phoneNumberId": "978279622026190",
            "additionalFields": {},
            "recipientPhoneNumber": "x"
          },
          "credentials": {
            "whatsAppApi": {
              "id": "pBJxgRkm6D56d8qj",
              "name": "Empty API: For Template"
            }
          },
          "typeVersion": 1.1
        },
        {
          "id": "579fe539-4359-44b7-9cd9-c4aa7b14ee40",
          "name": "Filter Text Messages",
          "type": "n8n-nodes-base.if",
          "position": [
            736,
            896
          ],
          "parameters": {
            "options": {},
            "conditions": {
              "options": {
                "version": 3,
                "leftValue": "",
                "caseSensitive": true,
                "typeValidation": "strict"
              },
              "combinator": "and",
              "conditions": [
                {
                  "id": "be96ecef-2db9-48a8-b178-3d48112eae7b",
                  "operator": {
                    "type": "string",
                    "operation": "equals"
                  },
                  "leftValue": "={{ $json.messages[0].from}}",
                  "rightValue": "16727551224"
                }
              ]
            }
          },
          "typeVersion": 2.3
        }
      ],
      "active": false,
      "pinData": {},
      "settings": {
        "availableInMCP": false,
        "executionOrder": "v1"
      },
      "versionId": "eb9e0422-ff67-45ad-8684-c123e72b1e37",
      "connections": {
        "Config": {
          "main": [
            [
              {
                "node": "Amadeus OAuth",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "New Snapshot": {
          "main": [
            [
              {
                "node": "Combine New Rates vs Prev Rates",
                "type": "main",
                "index": 0
              },
              {
                "node": "Get Prev Rates",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "AI Agent: Q&A": {
          "main": [
            [
              {
                "node": "Q&A",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Amadeus OAuth": {
          "main": [
            [
              {
                "node": "Generate 30 night windows",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Prev Snapshot": {
          "main": [
            [
              {
                "node": "Combine New Rates vs Prev Rates",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Simple Memory": {
          "ai_memory": [
            [
              {
                "node": "AI Agent: Q&A",
                "type": "ai_memory",
                "index": 0
              }
            ]
          ]
        },
        "Build VCC URLs": {
          "main": [
            [
              {
                "node": "Fetch VCC Month HTML",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Compute Change": {
          "main": [
            [
              {
                "node": "Significant Competitor Change",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Events Extract": {
          "main": [
            [
              {
                "node": "Combine Rates & Events",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Get Prev Rates": {
          "main": [
            [
              {
                "node": "Prev Snapshot",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "WhatsApp Trigger": {
          "main": [
            [
              {
                "node": "Filter Text Messages",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "AI Agent: Analyze": {
          "main": [
            [
              {
                "node": "Send WhatsApp Alert",
                "type": "main",
                "index": 0
              },
              {
                "node": "Combine Summary & Alert",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get Alert Summary": {
          "main": [
            [
              {
                "node": "AI Agent: Q&A",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "AI Agent: Analyze",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Clean Amadeus Data": {
          "main": [
            [
              {
                "node": "New Snapshot",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Daily Market Check": {
          "main": [
            [
              {
                "node": "Config",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model2": {
          "ai_languageModel": [
            [
              {
                "node": "AI Agent: Q&A",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Get Our Hotel Rates": {
          "main": [
            [
              {
                "node": "Prefix Our Hotel Fields",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upsert Latest Rates": {
          "main": [
            []
          ]
        },
        "Amadeus Hotel Offers": {
          "main": [
            [
              {
                "node": "Combine 30-Day Rates",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Combine 30-Day Rates": {
          "main": [
            [
              {
                "node": "Clean Amadeus Data",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Fetch VCC Month HTML": {
          "main": [
            [
              {
                "node": "Extract Event Details",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Filter Text Messages": {
          "main": [
            [
              {
                "node": "Normalize Whatsapp Input",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract Event Details": {
          "main": [
            [
              {
                "node": "Events Extract",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Combine Rates & Events": {
          "main": [
            [
              {
                "node": "Prepare AI Agent Input",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Prepare AI Agent Input": {
          "main": [
            [
              {
                "node": "AI Agent: Analyze",
                "type": "main",
                "index": 0
              },
              {
                "node": "Combine Summary & Alert",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Combine Summary & Alert": {
          "main": [
            [
              {
                "node": "Upsert Hotel Price Alerts",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get Hotel_Rates_History": {
          "ai_tool": [
            [
              {
                "node": "AI Agent: Q&A",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        },
        "Prefix Our Hotel Fields": {
          "main": [
            [
              {
                "node": "Combine Competitor Rates vs Our Rates",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Normalize Whatsapp Input": {
          "main": [
            [
              {
                "node": "Get Alert Summary",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser": {
          "ai_outputParser": [
            [
              {
                "node": "AI Agent: Analyze",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Generate 30 night windows": {
          "main": [
            [
              {
                "node": "Combine 30-Day Rates",
                "type": "main",
                "index": 0
              },
              {
                "node": "Amadeus Hotel Offers",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Significant Competitor Change": {
          "main": [
            [
              {
                "node": "Get Our Hotel Rates",
                "type": "main",
                "index": 0
              },
              {
                "node": "Combine Competitor Rates vs Our Rates",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Combine New Rates vs Prev Rates": {
          "main": [
            [
              {
                "node": "Upsert Latest Rates",
                "type": "main",
                "index": 0
              },
              {
                "node": "Compute Change",
                "type": "main",
                "index": 0
              },
              {
                "node": "Insert History Rates",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Combine Competitor Rates vs Our Rates": {
          "main": [
            [
              {
                "node": "Build VCC URLs",
                "type": "main",
                "index": 0
              },
              {
                "node": "Combine Rates & Events",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      }
    },
    "lastUpdatedBy": 1,
    "workflowInfo": {
      "nodeCount": 48,
      "nodeTypes": {
        "n8n-nodes-base.if": {
          "count": 2
        },
        "n8n-nodes-base.set": {
          "count": 3
        },
        "n8n-nodes-base.code": {
          "count": 8
        },
        "n8n-nodes-base.html": {
          "count": 1
        },
        "n8n-nodes-base.merge": {
          "count": 5
        },
        "n8n-nodes-base.whatsApp": {
          "count": 2
        },
        "n8n-nodes-base.dataTable": {
          "count": 6
        },
        "n8n-nodes-base.stickyNote": {
          "count": 9
        },
        "n8n-nodes-base.httpRequest": {
          "count": 3
        },
        "n8n-nodes-base.dataTableTool": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.agent": {
          "count": 2
        },
        "n8n-nodes-base.scheduleTrigger": {
          "count": 1
        },
        "n8n-nodes-base.whatsAppTrigger": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.lmChatOpenAi": {
          "count": 2
        },
        "@n8n/n8n-nodes-langchain.memoryBufferWindow": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.outputParserStructured": {
          "count": 1
        }
      }
    },
    "status": "published",
    "user": {
      "name": "Lee Lin",
      "username": "l2l",
      "bio": "",
      "verified": false,
      "links": [
        ""
      ],
      "avatar": "https://gravatar.com/avatar/2e3d278746a229599d68038d1870f79582b35bfea9c01a238ce3a7c86ee131b6?r=pg&d=retro&size=200"
    },
    "nodes": [
      {
        "id": 19,
        "icon": "file:httprequest.svg",
        "name": "n8n-nodes-base.httpRequest",
        "codex": {
          "data": {
            "alias": [
              "API",
              "Request",
              "URL",
              "Build",
              "cURL"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "â˜€ï¸",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "ðŸ§¬",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/automatically-pulling-and-visualizing-data-with-n8n/",
                  "icon": "ðŸ“ˆ",
                  "label": "Automatically pulling and visualizing data with n8n"
                },
                {
                  "url": "https://n8n.io/blog/learn-how-to-automatically-cross-post-your-content-with-n8n/",
                  "icon": "âœï¸",
                  "label": "Learn how to automatically cross-post your content with n8n"
                },
                {
                  "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                  "icon": "ðŸ§¾",
                  "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
                },
                {
                  "url": "https://n8n.io/blog/running-n8n-on-ships-an-interview-with-maranics/",
                  "icon": "ðŸ›³",
                  "label": "Running n8n on ships: An interview with Maranics"
                },
                {
                  "url": "https://n8n.io/blog/what-are-apis-how-to-use-them-with-no-code/",
                  "icon": " ðŸª¢",
                  "label": "What are APIs and how to use them with no code"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "âš¡ï¸",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/world-poetry-day-workflow/",
                  "icon": "ðŸ“œ",
                  "label": "Celebrating World Poetry Day with a daily poem in Telegram"
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "ðŸ’¡",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/automate-designs-with-bannerbear-and-n8n/",
                  "icon": "ðŸŽ¨",
                  "label": "Automate Designs with Bannerbear and n8n"
                },
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " ðŸ•¸ï¸",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/building-an-expense-tracking-app-in-10-minutes/",
                  "icon": "ðŸ“±",
                  "label": "Building an expense tracking app in 10 minutes"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ðŸ¤–",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/how-to-use-the-http-request-node-the-swiss-army-knife-for-workflow-automation/",
                  "icon": "ðŸ§°",
                  "label": "How to use the HTTP Request Node - The Swiss Army Knife for Workflow Automation"
                },
                {
                  "url": "https://n8n.io/blog/learn-how-to-use-webhooks-with-mattermost-slash-commands/",
                  "icon": "ðŸ¦„",
                  "label": "Learn how to use webhooks with Mattermost slash commands"
                },
                {
                  "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                  "icon": "ðŸ“ˆ",
                  "label": "How a Membership Development Manager automates his work and investments"
                },
                {
                  "url": "https://n8n.io/blog/a-low-code-bitcoin-ticker-built-with-questdb-and-n8n-io/",
                  "icon": "ðŸ“ˆ",
                  "label": "A low-code bitcoin ticker built with QuestDB and n8n.io"
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "ðŸŽ¡",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/automations-for-activists/",
                  "icon": "âœ¨",
                  "label": "How Common Knowledge use workflow automation for activism"
                },
                {
                  "url": "https://n8n.io/blog/creating-scheduled-text-affirmations-with-n8n/",
                  "icon": "ðŸ¤Ÿ",
                  "label": "Creating scheduled text affirmations with n8n"
                },
                {
                  "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                  "icon": "ðŸ›µ",
                  "label": "How Goomer automated their operations with over 200 n8n workflows"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest/"
                }
              ]
            },
            "categories": [
              "Development",
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"output\"]",
        "defaults": {
          "name": "HTTP Request",
          "color": "#0004F5"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MCAyMEM0MCA4Ljk1MzE0IDMxLjA0NjkgMCAyMCAwQzguOTUzMTQgMCAwIDguOTUzMTQgMCAyMEMwIDMxLjA0NjkgOC45NTMxNCA0MCAyMCA0MEMzMS4wNDY5IDQwIDQwIDMxLjA0NjkgNDAgMjBaTTIwIDM2Ljk0NThDMTguODg1MiAzNi45NDU4IDE3LjEzNzggMzUuOTY3IDE1LjQ5OTggMzIuNjk4NUMxNC43OTY0IDMxLjI5MTggMTQuMTk2MSAyOS41NDMxIDEzLjc1MjYgMjcuNjg0N0gyNi4xODk4QzI1LjgwNDUgMjkuNTQwMyAyNS4yMDQ0IDMxLjI5MDEgMjQuNTAwMiAzMi42OTg1QzIyLjg2MjIgMzUuOTY3IDIxLjExNDggMzYuOTQ1OCAyMCAzNi45NDU4Wk0xMi45MDY0IDIwQzEyLjkwNjQgMjEuNjA5NyAxMy4wMDg3IDIzLjE2NCAxMy4yMDAzIDI0LjYzMDVIMjYuNzk5N0MyNi45OTEzIDIzLjE2NCAyNy4wOTM2IDIxLjYwOTcgMjcuMDkzNiAyMEMyNy4wOTM2IDE4LjM5MDMgMjYuOTkxMyAxNi44MzYgMjYuNzk5NyAxNS4zNjk1SDEzLjIwMDNDMTMuMDA4NyAxNi44MzYgMTIuOTA2NCAxOC4zOTAzIDEyLjkwNjQgMjBaTTIwIDMuMDU0MTlDMjEuMTE0OSAzLjA1NDE5IDIyLjg2MjIgNC4wMzA3OCAyNC41MDAxIDcuMzAwMzlDMjUuMjA2NiA4LjcxNDA4IDI1LjgwNzIgMTAuNDA2NyAyNi4xOTIgMTIuMzE1M0gxMy43NTAxQzE0LjE5MzMgMTAuNDA0NyAxNC43OTQyIDguNzEyNTQgMTUuNDk5OCA3LjMwMDY0QzE3LjEzNzcgNC4wMzA4MyAxOC44ODUxIDMuMDU0MTkgMjAgMy4wNTQxOVpNMzAuMTQ3OCAyMEMzMC4xNDc4IDE4LjQwOTkgMzAuMDU0MyAxNi44NjE3IDI5LjgyMjcgMTUuMzY5NUgzNi4zMDQyQzM2LjcyNTIgMTYuODQyIDM2Ljk0NTggMTguMzk2NCAzNi45NDU4IDIwQzM2Ljk0NTggMjEuNjAzNiAzNi43MjUyIDIzLjE1OCAzNi4zMDQyIDI0LjYzMDVIMjkuODIyN0MzMC4wNTQzIDIzLjEzODMgMzAuMTQ3OCAyMS41OTAxIDMwLjE0NzggMjBaTTI2LjI3NjcgNC4yNTUxMkMyNy42MzY1IDYuMzYwMTkgMjguNzExIDkuMTMyIDI5LjM3NzQgMTIuMzE1M0gzNS4xMDQ2QzMzLjI1MTEgOC42NjggMzAuMTA3IDUuNzgzNDYgMjYuMjc2NyA0LjI1NTEyWk0xMC42MjI2IDEyLjMxNTNINC44OTI5M0M2Ljc1MTQ3IDguNjY3ODQgOS44OTM1MSA1Ljc4MzQxIDEzLjcyMzIgNC4yNTUxM0MxMi4zNjM1IDYuMzYwMjEgMTEuMjg5IDkuMTMyMDEgMTAuNjIyNiAxMi4zMTUzWk0zLjA1NDE5IDIwQzMuMDU0MTkgMjEuNjAzIDMuMjc3NDMgMjMuMTU3NSAzLjY5NDg0IDI0LjYzMDVIMTAuMTIxN0M5Ljk0NjE5IDIzLjE0MiA5Ljg1MjIyIDIxLjU5NDMgOS44NTIyMiAyMEM5Ljg1MjIyIDE4LjQwNTcgOS45NDYxOSAxNi44NTggMTAuMTIxNyAxNS4zNjk1SDMuNjk0ODRDMy4yNzc0MyAxNi44NDI1IDMuMDU0MTkgMTguMzk3IDMuMDU0MTkgMjBaTTI2LjI3NjYgMzUuNzQyN0MyNy42MzY1IDMzLjYzOTMgMjguNzExIDMwLjg2OCAyOS4zNzc0IDI3LjY4NDdIMzUuMTA0NkMzMy4yNTEgMzEuMzMyMiAzMC4xMDY4IDM0LjIxNzkgMjYuMjc2NiAzNS43NDI3Wk0xMy43MjM0IDM1Ljc0MjdDOS44OTM2OSAzNC4yMTc5IDYuNzUxNTUgMzEuMzMyNCA0Ljg5MjkzIDI3LjY4NDdIMTAuNjIyNkMxMS4yODkgMzAuODY4IDEyLjM2MzUgMzMuNjM5MyAxMy43MjM0IDM1Ljc0MjdaIiBmaWxsPSIjM0E0MkU5Ii8+Cjwvc3ZnPgo="
        },
        "displayName": "HTTP Request",
        "typeVersion": 4,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 20,
        "icon": "fa:map-signs",
        "name": "n8n-nodes-base.if",
        "codex": {
          "data": {
            "alias": [
              "Router",
              "Filter",
              "Condition",
              "Logic",
              "Boolean",
              "Branch"
            ],
            "details": "The IF node can be used to implement binary conditional logic in your workflow. You can set up one-to-many conditions to evaluate each item of data being inputted into the node. That data will either evaluate to TRUE or FALSE and route out of the node accordingly.\n\nThis node has multiple types of conditions: Bool, String, Number, and Date & Time.",
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                  "icon": "ðŸ­",
                  "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
                },
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "â˜€ï¸",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "ðŸ§¬",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/create-a-toxic-language-detector-for-telegram/",
                  "icon": "ðŸ¤¬",
                  "label": "Create a toxic language detector for Telegram in 4 step"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                  "icon": "ðŸ”—",
                  "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
                },
                {
                  "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                  "icon": "âš™ï¸",
                  "label": "Automate your data processing pipeline in 9 steps"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "ðŸ‘¥",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "âš¡ï¸",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "ðŸ’¡",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/automation-for-maintainers-of-open-source-projects/",
                  "icon": "ðŸ·ï¸",
                  "label": "How to automatically manage contributions to open-source projects"
                },
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " ðŸ•¸ï¸",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ðŸ¤–",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                  "icon": "ðŸ§ ",
                  "label": "Why this Product Manager loves workflow automation with n8n"
                },
                {
                  "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                  "icon": "ðŸ™Œ",
                  "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "ðŸŽ¡",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                  "icon": "ðŸŽ–",
                  "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.if/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Flow"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "If",
          "color": "#408000"
        },
        "iconData": {
          "icon": "map-signs",
          "type": "icon"
        },
        "displayName": "If",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 24,
        "icon": "file:merge.svg",
        "name": "n8n-nodes-base.merge",
        "codex": {
          "data": {
            "alias": [
              "Join",
              "Concatenate",
              "Wait"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/how-to-sync-data-between-two-systems/",
                  "icon": "ðŸ¬",
                  "label": "How to synchronize data between two systems (one-way vs. two-way sync"
                },
                {
                  "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                  "icon": "ðŸŽ«",
                  "label": "Supercharging your conference registration process with n8n"
                },
                {
                  "url": "https://n8n.io/blog/migrating-community-metrics-to-orbit-using-n8n/",
                  "icon": "ðŸ“ˆ",
                  "label": "Migrating Community Metrics to Orbit using n8n"
                },
                {
                  "url": "https://n8n.io/blog/build-your-own-virtual-assistant-with-n8n-a-step-by-step-guide/",
                  "icon": "ðŸ‘¦",
                  "label": "Build your own virtual assistant with n8n: A step by step guide"
                },
                {
                  "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                  "icon": "ðŸ™Œ",
                  "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.merge/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Flow",
                "Data Transformation"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Merge"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTc3XzUxOCkiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTAgNDhDMCAyMS40OTAzIDIxLjQ5MDMgMCA0OCAwSDExMkMxMzguNTEgMCAxNjAgMjEuNDkwMyAxNjAgNDhWNTZIMTk2LjI1MkMyNDAuNDM1IDU2IDI3Ni4yNTIgOTEuODE3MiAyNzYuMjUyIDEzNlYxOTJDMjc2LjI1MiAyMTQuMDkxIDI5NC4xNjEgMjMyIDMxNi4yNTIgMjMySDM1MlYyMjRDMzUyIDE5Ny40OSAzNzMuNDkgMTc2IDQwMCAxNzZINDY0QzQ5MC41MSAxNzYgNTEyIDE5Ny40OSA1MTIgMjI0VjI4OEM1MTIgMzE0LjUxIDQ5MC41MSAzMzYgNDY0IDMzNkg0MDBDMzczLjQ5IDMzNiAzNTIgMzE0LjUxIDM1MiAyODhWMjgwSDMxNi4yNTJDMjk0LjE2MSAyODAgMjc2LjI1MiAyOTcuOTA5IDI3Ni4yNTIgMzIwVjM3NkMyNzYuMjUyIDQyMC4xODMgMjQwLjQzNSA0NTYgMTk2LjI1MiA0NTZIMTYwVjQ2NEMxNjAgNDkwLjUxIDEzOC41MSA1MTIgMTEyIDUxMkg0OEMyMS40OTAzIDUxMiAwIDQ5MC41MSAwIDQ2NFY0MDBDMCAzNzMuNDkgMjEuNDkwMyAzNTIgNDggMzUySDExMkMxMzguNTEgMzUyIDE2MCAzNzMuNDkgMTYwIDQwMFY0MDhIMTk2LjI1MkMyMTMuOTI1IDQwOCAyMjguMjUyIDM5My42NzMgMjI4LjI1MiAzNzZWMzIwQzIyOC4yNTIgMjk0Ljc4NCAyMzguODU5IDI3Mi4wNDQgMjU1Ljg1MyAyNTZDMjM4Ljg1OSAyMzkuOTU2IDIyOC4yNTIgMjE3LjIxNiAyMjguMjUyIDE5MlYxMzZDMjI4LjI1MiAxMTguMzI3IDIxMy45MjUgMTA0IDE5Ni4yNTIgMTA0SDE2MFYxMTJDMTYwIDEzOC41MSAxMzguNTEgMTYwIDExMiAxNjBINDhDMjEuNDkwMyAxNjAgMCAxMzguNTEgMCAxMTJWNDhaTTEwNCA0OEMxMDguNDE4IDQ4IDExMiA1MS41ODE3IDExMiA1NlYxMDRDMTEyIDEwOC40MTggMTA4LjQxOCAxMTIgMTA0IDExMkg1NkM1MS41ODE3IDExMiA0OCAxMDguNDE4IDQ4IDEwNFY1NkM0OCA1MS41ODE3IDUxLjU4MTcgNDggNTYgNDhIMTA0Wk00NTYgMjI0QzQ2MC40MTggMjI0IDQ2NCAyMjcuNTgyIDQ2NCAyMzJWMjgwQzQ2NCAyODQuNDE4IDQ2MC40MTggMjg4IDQ1NiAyODhINDA4QzQwMy41ODIgMjg4IDQwMCAyODQuNDE4IDQwMCAyODBWMjMyQzQwMCAyMjcuNTgyIDQwMy41ODIgMjI0IDQwOCAyMjRINDU2Wk0xMTIgNDA4QzExMiA0MDMuNTgyIDEwOC40MTggNDAwIDEwNCA0MDBINTZDNTEuNTgxNyA0MDAgNDggNDAzLjU4MiA0OCA0MDhWNDU2QzQ4IDQ2MC40MTggNTEuNTgxNyA0NjQgNTYgNDY0SDEwNEMxMDguNDE4IDQ2NCAxMTIgNDYwLjQxOCAxMTIgNDU2VjQwOFoiIGZpbGw9IiM1NEI4QzkiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTc3XzUxOCI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
        },
        "displayName": "Merge",
        "typeVersion": 3,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 38,
        "icon": "fa:pen",
        "name": "n8n-nodes-base.set",
        "codex": {
          "data": {
            "alias": [
              "Set",
              "JS",
              "JSON",
              "Filter",
              "Transform",
              "Map"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                  "icon": "ðŸ­",
                  "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
                },
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "â˜€ï¸",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/automatically-pulling-and-visualizing-data-with-n8n/",
                  "icon": "ðŸ“ˆ",
                  "label": "Automatically pulling and visualizing data with n8n"
                },
                {
                  "url": "https://n8n.io/blog/database-monitoring-and-alerting-with-n8n/",
                  "icon": "ðŸ“¡",
                  "label": "Database Monitoring and Alerting with n8n"
                },
                {
                  "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                  "icon": "ðŸ§¾",
                  "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                  "icon": "ðŸ”—",
                  "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
                },
                {
                  "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                  "icon": "âš™ï¸",
                  "label": "Automate your data processing pipeline in 9 steps"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "ðŸ‘¥",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "âš¡ï¸",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "ðŸ’¡",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " ðŸ•¸ï¸",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/building-an-expense-tracking-app-in-10-minutes/",
                  "icon": "ðŸ“±",
                  "label": "Building an expense tracking app in 10 minutes"
                },
                {
                  "url": "https://n8n.io/blog/the-ultimate-guide-to-automate-your-video-collaboration-with-whereby-mattermost-and-n8n/",
                  "icon": "ðŸ“¹",
                  "label": "The ultimate guide to automate your video collaboration with Whereby, Mattermost, and n8n"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ðŸ¤–",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/learn-to-build-powerful-api-endpoints-using-webhooks/",
                  "icon": "ðŸ§°",
                  "label": "Learn to Build Powerful API Endpoints Using Webhooks"
                },
                {
                  "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                  "icon": "ðŸ“ˆ",
                  "label": "How a Membership Development Manager automates his work and investments"
                },
                {
                  "url": "https://n8n.io/blog/a-low-code-bitcoin-ticker-built-with-questdb-and-n8n-io/",
                  "icon": "ðŸ“ˆ",
                  "label": "A low-code bitcoin ticker built with QuestDB and n8n.io"
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "ðŸŽ¡",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                  "icon": "ðŸŽ–",
                  "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
                },
                {
                  "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                  "icon": "ðŸ›µ",
                  "label": "How Goomer automated their operations with over 200 n8n workflows"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.set/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Data Transformation"
              ]
            }
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Edit Fields"
        },
        "iconData": {
          "icon": "pen",
          "type": "icon"
        },
        "displayName": "Edit Fields (Set)",
        "typeVersion": 3,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 565,
        "icon": "fa:sticky-note",
        "name": "n8n-nodes-base.stickyNote",
        "codex": {
          "data": {
            "alias": [
              "Comments",
              "Notes",
              "Sticky"
            ],
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Sticky Note",
          "color": "#FFD233"
        },
        "iconData": {
          "icon": "sticky-note",
          "type": "icon"
        },
        "displayName": "Sticky Note",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 827,
        "icon": "file:whatsapp.svg",
        "name": "n8n-nodes-base.whatsApp",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.whatsapp/"
                }
              ],
              "credentialDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/credentials/whatsapp/"
                }
              ]
            },
            "categories": [
              "Communication",
              "HITL"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "HITL": [
                "Human in the Loop"
              ]
            }
          }
        },
        "group": "[\"output\"]",
        "defaults": {
          "name": "WhatsApp Business Cloud"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTQuODY4IDQzLjMwMyAyLjY5NC05LjgzNWExOC45NCAxOC45NCAwIDAgMS0yLjUzNS05LjQ4OUM1LjAzMiAxMy41MTQgMTMuNTQ4IDUgMjQuMDE0IDVhMTguODcgMTguODcgMCAwIDEgMTMuNDMgNS41NjZBMTguODcgMTguODcgMCAwIDEgNDMgMjMuOTk0Yy0uMDA0IDEwLjQ2NS04LjUyMiAxOC45OC0xOC45ODYgMTguOThoLS4wMDhhMTkgMTkgMCAwIDEtOS4wNzMtMi4zMTF6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQuODY4IDQzLjgwM2EuNS41IDAgMCAxLS40ODItLjYzMWwyLjYzOS05LjYzNmExOS41IDE5LjUgMCAwIDEtMi40OTctOS41NTZDNC41MzIgMTMuMjM4IDEzLjI3MyA0LjUgMjQuMDE0IDQuNWExOS4zNyAxOS4zNyAwIDAgMSAxMy43ODQgNS43MTNBMTkuMzYgMTkuMzYgMCAwIDEgNDMuNSAyMy45OTRjLS4wMDQgMTAuNzQxLTguNzQ2IDE5LjQ4LTE5LjQ4NiAxOS40OGExOS41NCAxOS41NCAwIDAgMS05LjE0NC0yLjI3N2wtOS44NzUgMi41ODlhLjUuNSAwIDAgMS0uMTI3LjAxNyIvPjxwYXRoIGZpbGw9IiNjZmQ4ZGMiIGQ9Ik0yNC4wMTQgNWExOC44NyAxOC44NyAwIDAgMSAxMy40MyA1LjU2NkExOC44NyAxOC44NyAwIDAgMSA0MyAyMy45OTRjLS4wMDQgMTAuNDY1LTguNTIyIDE4Ljk4LTE4Ljk4NiAxOC45OGgtLjAwOGExOSAxOSAwIDAgMS05LjA3My0yLjMxMWwtMTAuMDY1IDIuNjQgMi42OTQtOS44MzVhMTguOTQgMTguOTQgMCAwIDEtMi41MzUtOS40ODlDNS4wMzIgMTMuNTE0IDEzLjU0OCA1IDI0LjAxNCA1bTAtMUMxMi45OTggNCA0LjAzMiAxMi45NjIgNC4wMjcgMjMuOTc5YTIwIDIwIDAgMCAwIDIuNDYxIDkuNjIyTDMuOTAzIDQzLjA0YS45OTguOTk4IDAgMCAwIDEuMjE5IDEuMjMxbDkuNjg3LTIuNTRhMjAgMjAgMCAwIDAgOS4xOTcgMi4yNDRjMTEuMDI0IDAgMTkuOTktOC45NjMgMTkuOTk1LTE5Ljk4QTE5Ljg2IDE5Ljg2IDAgMCAwIDM4LjE1MyA5Ljg2IDE5Ljg3IDE5Ljg3IDAgMCAwIDI0LjAxNCA0Ii8+PHBhdGggZmlsbD0iIzQwYzM1MSIgZD0iTTM1LjE3NiAxMi44MzJhMTUuNjcgMTUuNjcgMCAwIDAtMTEuMTU3LTQuNjI2Yy04LjcwNCAwLTE1Ljc4MyA3LjA3Ni0xNS43ODcgMTUuNzc0YTE1Ljc0IDE1Ljc0IDAgMCAwIDIuNDEzIDguMzk2bC4zNzYuNTk3LTEuNTk1IDUuODIxIDUuOTczLTEuNTY2LjU3Ny4zNDJhMTUuNzUgMTUuNzUgMCAwIDAgOC4wMzIgMi4xOTloLjAwNmM4LjY5OCAwIDE1Ljc3Ny03LjA3NyAxNS43OC0xNS43NzZhMTUuNjggMTUuNjggMCAwIDAtNC42MTgtMTEuMTYxIi8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE5LjI2OCAxNi4wNDVjLS4zNTUtLjc5LS43MjktLjgwNi0xLjA2OC0uODItLjI3Ny0uMDEyLS41OTMtLjAxMS0uOTA5LS4wMTFzLS44My4xMTktMS4yNjUuNTk0LTEuNjYxIDEuNjIyLTEuNjYxIDMuOTU2IDEuNyA0LjU5IDEuOTM3IDQuOTA2IDMuMjgyIDUuMjU5IDguMTA0IDcuMTYxYzQuMDA3IDEuNTggNC44MjMgMS4yNjYgNS42OTMgMS4xODdzMi44MDctMS4xNDcgMy4yMDItMi4yNTUuMzk1LTIuMDU3LjI3Ny0yLjI1NWMtLjExOS0uMTk4LS40MzUtLjMxNi0uOTA5LS41NTRzLTIuODA3LTEuMzg1LTMuMjQyLTEuNTQzLS43NTEtLjIzNy0xLjA2OC4yMzhjLS4zMTYuNDc0LTEuMjI1IDEuNTQzLTEuNTAyIDEuODU5cy0uNTU0LjM1Ny0xLjAyOC4xMTktMi4wMDItLjczOC0zLjgxNS0yLjM1NGMtMS40MS0xLjI1Ny0yLjM2Mi0yLjgxLTIuNjM5LTMuMjg1LS4yNzctLjQ3NC0uMDMtLjczMS4yMDgtLjk2OC4yMTMtLjIxMy40NzQtLjU1NC43MTItLjgzMS4yMzctLjI3Ny4zMTYtLjQ3NS40NzQtLjc5MXMuMDc5LS41OTQtLjA0LS44MzFjLS4xMTctLjIzOC0xLjAzOS0yLjU4NC0xLjQ2MS0zLjUyMiIvPjwvc3ZnPg=="
        },
        "displayName": "WhatsApp Business Cloud",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 6,
            "name": "Communication"
          },
          {
            "id": 28,
            "name": "HITL"
          }
        ]
      },
      {
        "id": 834,
        "icon": "file:code.svg",
        "name": "n8n-nodes-base.code",
        "codex": {
          "data": {
            "alias": [
              "cpde",
              "Javascript",
              "JS",
              "Python",
              "Script",
              "Custom Code",
              "Function"
            ],
            "details": "The Code node allows you to execute JavaScript in your workflow.",
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
                }
              ]
            },
            "categories": [
              "Development",
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers",
                "Data Transformation"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Code"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
        },
        "displayName": "Code",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 839,
        "icon": "fa:clock",
        "name": "n8n-nodes-base.scheduleTrigger",
        "codex": {
          "data": {
            "alias": [
              "Time",
              "Scheduler",
              "Polling",
              "Cron",
              "Interval"
            ],
            "resources": {
              "generic": [],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0"
          }
        },
        "group": "[\"trigger\",\"schedule\"]",
        "defaults": {
          "name": "Schedule Trigger",
          "color": "#31C49F"
        },
        "iconData": {
          "icon": "clock",
          "type": "icon"
        },
        "displayName": "Schedule Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 842,
        "icon": "file:html.svg",
        "name": "n8n-nodes-base.html",
        "codex": {
          "data": {
            "alias": [
              "extract",
              "template",
              "table"
            ],
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.html/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Data Transformation"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "HTML"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTguNjQwNjIgMEgxMC40Mzc1VjEuNzgxMjVIMTIuMDkzN1YwSDEzLjg5MDZWNS4zOTA2MkgxMi4wOTM3VjMuNTkzNzVIMTAuNDUzMVY1LjM5MDYySDguNjQwNjJNMTYuMjY1NiAxLjc5Njg3SDE0LjY3OTdWMEgxOS42NTYyVjEuNzk2ODdIMTguMDYyNVY1LjM5MDYySDE2LjI2NTZNMjAuNDQ1MyAwSDIyLjMyODFMMjMuNDg0NCAxLjg5ODQ0TDI0LjY0MDYgMEgyNi41MjM0VjUuMzkwNjJIMjQuNzI2NlYyLjcxODc1TDIzLjQ2ODcgNC42NTYyNUwyMi4yMTA5IDIuNzE4NzVWNS4zOTA2MkgyMC40NDUzTTI3LjQxNDEgMEgyOS4yMTA5VjMuNjA5MzdIMzEuNzU3OFY1LjM5MDYySDI3LjQxNDEiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik04LjU3ODEyIDM2Ljc5NjlMNiA3Ljg1OTM4SDM0LjM0MzdMMzEuNzY1NiAzNi43ODEyTDIwLjE0ODQgNDAiIGZpbGw9IiNFNDREMjYiLz4KPHBhdGggZD0iTTIwLjE3MTkgMzcuNTM5MVYxMC4yMzQ0SDMxLjc1NzhMMjkuNTQ2OSAzNC45MjE5IiBmaWxsPSIjRjE2NTI5Ii8+CjxwYXRoIGQ9Ik0xMS4yNjU2IDEzLjc3MzRIMjAuMTcxOVYxNy4zMjAzSDE1LjE1NjJMMTUuNDg0NCAyMC45NTMxSDIwLjE3MTlWMjQuNDkyMkgxMi4yMzQ0TTEyLjM5MDYgMjYuMjczNEgxNS45NTMxTDE2LjIwMzEgMjkuMTA5NEwyMC4xNzE5IDMwLjE3MTlWMzMuODc1TDEyLjg5MDYgMzEuODQzNyIgZmlsbD0iI0VCRUJFQiIvPgo8cGF0aCBkPSJNMjkuMDQ2OSAxMy43NzM0SDIwLjE1NjJWMTcuMzIwM0gyOC43MTg3TTI4LjM5ODQgMjAuOTUzMUgyMC4xNTYyVjI0LjVIMjQuNTMxMkwyNC4xMTcyIDI5LjEwOTRMMjAuMTU2MiAzMC4xNzE5VjMzLjg1OTRMMjcuNDIxOSAzMS44NDM3IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"
        },
        "displayName": "HTML",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 1119,
        "icon": "fa:robot",
        "name": "@n8n/n8n-nodes-langchain.agent",
        "codex": {
          "data": {
            "alias": [
              "LangChain",
              "Chat",
              "Conversational",
              "Plan and Execute",
              "ReAct",
              "Tools"
            ],
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Agents",
                "Root Nodes"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "AI Agent",
          "color": "#404040"
        },
        "iconData": {
          "icon": "robot",
          "type": "icon"
        },
        "displayName": "AI Agent",
        "typeVersion": 3,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1153,
        "icon": "file:openAiLight.svg",
        "name": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatopenai/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Language Models",
                "Root Nodes"
              ],
              "Language Models": [
                "Chat Models (Recommended)"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "OpenAI Chat Model"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTM2Ljg2NzEgMTYuMzcxOEMzNy43NzQ2IDEzLjY0OCAzNy40NjIxIDEwLjY2NDIgMzYuMDEwOCA4LjE4NjYxQzMzLjgyODIgNC4zODY1MyAyOS40NDA3IDIuNDMxNDkgMjUuMTU1NiAzLjM1MTUxQzIzLjI0OTMgMS4yMDM5NiAyMC41MTA1IC0wLjAxNzMxNDggMTcuNjM5MiAwLjAwMDE4NTUzM0MxMy4yNTkxIC0wLjAwOTgxNDY4IDkuMzcyNzMgMi44MTAyNSA4LjAyNTIgNi45Nzc4M0M1LjIxMTM5IDcuNTU0MSAyLjc4MjU4IDkuMzE1MzggMS4zNjEzIDExLjgxMTdDLTAuODM3NDkzIDE1LjYwMTggLTAuMzM2MjMyIDIwLjM3OTQgMi42MDEzMyAyMy42Mjk0QzEuNjkzODEgMjYuMzUzMiAyLjAwNjMyIDI5LjMzNzEgMy40NTc2IDMxLjgxNDZDNS42NDAxNSAzNS42MTQ3IDEwLjAyNzcgMzcuNTY5NyAxNC4zMTI4IDM2LjY0OTdDMTYuMjE3OSAzOC43OTczIDE4Ljk1NzkgNDAuMDE4NSAyMS44MjkyIDM5Ljk5OThDMjYuMjExOCA0MC4wMTEgMzAuMDk5NCAzNy4xODg1IDMxLjQ0NjkgMzMuMDE3MUMzNC4yNjA4IDMyLjQ0MDkgMzYuNjg5NiAzMC42Nzk2IDM4LjExMDggMjguMTgzM0M0MC4zMDcxIDI0LjM5MzIgMzkuODA0NiAxOS42MTk0IDM2Ljg2ODMgMTYuMzY5M0wzNi44NjcxIDE2LjM3MThaTTIxLjgzMTcgMzcuMzg2QzIwLjA3OCAzNy4zODg1IDE4LjM3OTIgMzYuNzc0NyAxNy4wMzI5IDM1LjY1MDlDMTcuMDk0MSAzNS42MTg0IDE3LjIwMDQgMzUuNTU5NyAxNy4yNjkxIDM1LjUxNzJMMjUuMjM0MyAzMC45MTcxQzI1LjY0MTggMzAuNjg1OCAyNS44OTE4IDMwLjI1MjEgMjUuODg5MyAyOS43ODMzVjE4LjU1NDNMMjkuMjU1NyAyMC40OTgxQzI5LjI5MTkgMjAuNTE1NiAyOS4zMTU3IDIwLjU1MDYgMjkuMzIwNyAyMC41OTA2VjI5Ljg4OTZDMjkuMzE1NyAzNC4wMjQ3IDI1Ljk2NjggMzcuMzc3MiAyMS44MzE3IDM3LjM4NlpNNS43MjY0IDMwLjUwNzFDNC44NDc2MyAyOC45ODk2IDQuNTMxMzcgMjcuMjEwOCA0LjgzMjYzIDI1LjQ4NDVDNC44OTEzOCAyNS41MTk1IDQuOTk1MTMgMjUuNTgzMiA1LjA2ODg4IDI1LjYyNTdMMTMuMDM0MSAzMC4yMjU4QzEzLjQzNzggMzAuNDYyMSAxMy45Mzc4IDMwLjQ2MjEgMTQuMzQyOCAzMC4yMjU4TDI0LjA2NjggMjQuNjEwN1YyOC40OTgzQzI0LjA2OTMgMjguNTM4MyAyNC4wNTA1IDI4LjU3NyAyNC4wMTkzIDI4LjYwMkwxNS45Njc5IDMzLjI1MDlDMTIuMzgxNSAzNS4zMTU5IDcuODAxNDQgMzQuMDg4NCA1LjcyNzY1IDMwLjUwNzFINS43MjY0Wk0zLjYzMDEgMTMuMTIwNUM0LjUwNTEyIDExLjYwMDQgNS44ODY0IDEwLjQzNzkgNy41MzE0NCA5LjgzNDE1QzcuNTMxNDQgOS45MDI5IDcuNTI3NjkgMTAuMDI0MiA3LjUyNzY5IDEwLjEwOTJWMTkuMzEwNkM3LjUyNTE5IDE5Ljc3ODEgNy43NzUxOSAyMC4yMTE5IDguMTgxNDUgMjAuNDQzMUwxNy45MDU0IDI2LjA1N0wxNC41MzkxIDI4LjAwMDhDMTQuNTA1MyAyOC4wMjMzIDE0LjQ2MjggMjguMDI3IDE0LjQyNTMgMjguMDEwOEw2LjM3MjY2IDIzLjM1ODJDMi43OTM4MyAyMS4yODU2IDEuNTY2MzEgMTYuNzA2OCAzLjYyODg1IDEzLjEyMTdMMy42MzAxIDEzLjEyMDVaTTMxLjI4ODIgMTkuNTU2OUwyMS41NjQyIDEzLjk0MTdMMjQuOTMwNiAxMS45OTkyQzI0Ljk2NDMgMTEuOTc2NyAyNS4wMDY4IDExLjk3MjkgMjUuMDQ0MyAxMS45ODkyTDMzLjA5NyAxNi42MzhDMzYuNjgyMSAxOC43MDkzIDM3LjkxMDggMjMuMjk1NyAzNS44Mzk1IDI2Ljg4MDhDMzQuOTYzMyAyOC4zOTgzIDMzLjU4MzIgMjkuNTYwOCAzMS45Mzk1IDMwLjE2NThWMjAuNjg5NEMzMS45NDMyIDIwLjIyMTkgMzEuNjk0NSAxOS43ODk0IDMxLjI4OTQgMTkuNTU2OUgzMS4yODgyWk0zNC42MzgzIDE0LjUxNDJDMzQuNTc5NSAxNC40NzggMzQuNDc1OCAxNC40MTU1IDM0LjQwMiAxNC4zNzNMMjYuNDM2OCA5Ljc3Mjg5QzI2LjAzMzEgOS41MzY2NCAyNS41MzMxIDkuNTM2NjQgMjUuMTI4MSA5Ljc3Mjg5TDE1LjQwNDEgMTUuMzg4VjExLjUwMDRDMTUuNDAxNiAxMS40NjA0IDE1LjQyMDQgMTEuNDIxNyAxNS40NTE2IDExLjM5NjdMMjMuNTAzIDYuNzUxNThDMjcuMDg5NCA0LjY4Mjc5IDMxLjY3NDUgNS45MTQwNiAzMy43NDIgOS41MDE2NEMzNC42MTU4IDExLjAxNjcgMzQuOTMyIDEyLjc5MDUgMzQuNjM1OCAxNC41MTQySDM0LjYzODNaTTEzLjU3NDEgMjEuNDQzMUwxMC4yMDY1IDE5LjQ5OTRDMTAuMTcwMiAxOS40ODE5IDEwLjE0NjUgMTkuNDQ2OCAxMC4xNDE1IDE5LjQwNjhWMTAuMTA3OUMxMC4xNDQgNS45Njc4MSAxMy41MDI4IDIuNjEyNzQgMTcuNjQyOSAyLjYxNTI0QzE5LjM5NDIgMi42MTUyNCAyMS4wODkyIDMuMjMwMjUgMjIuNDM1NSA0LjM1MDI4QzIyLjM3NDMgNC4zODI3OCAyMi4yNjkzIDQuNDQxNTMgMjIuMTk5MiA0LjQ4NDAzTDE0LjIzNDEgOS4wODQxM0MxMy44MjY2IDkuMzE1MzggMTMuNTc2NiA5Ljc0Nzg5IDEzLjU3OTEgMTAuMjE2N0wxMy41NzQxIDIxLjQ0MDZWMjEuNDQzMVpNMTUuNDAyOSAxNy41MDA2TDE5LjczNDIgMTQuOTk5M0wyNC4wNjU1IDE3LjQ5OTNWMjIuNTAwN0wxOS43MzQyIDI1LjAwMDdMMTUuNDAyOSAyMi41MDA3VjE3LjUwMDZaIiBmaWxsPSIjN0Q3RDg3Ii8+Cjwvc3ZnPgo="
        },
        "displayName": "OpenAI Chat Model",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1163,
        "icon": "fa:database",
        "name": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.memorybufferwindow/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Memory"
              ],
              "Memory": [
                "For beginners"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Simple Memory"
        },
        "iconData": {
          "icon": "database",
          "type": "icon"
        },
        "displayName": "Simple Memory",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1179,
        "icon": "fa:code",
        "name": "@n8n/n8n-nodes-langchain.outputParserStructured",
        "codex": {
          "data": {
            "alias": [
              "json",
              "zod"
            ],
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.outputparserstructured/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Output Parsers"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Structured Output Parser"
        },
        "iconData": {
          "icon": "code",
          "type": "icon"
        },
        "displayName": "Structured Output Parser",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1260,
        "icon": "file:whatsapp.svg",
        "name": "n8n-nodes-base.whatsAppTrigger",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/trigger-nodes/n8n-nodes-base.whatsapptrigger/"
                }
              ],
              "credentialDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/credentials/whatsapp/"
                }
              ]
            },
            "categories": [
              "Communication"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0"
          }
        },
        "group": "[\"trigger\"]",
        "defaults": {
          "name": "WhatsApp Trigger"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTQuODY4IDQzLjMwMyAyLjY5NC05LjgzNWExOC45NCAxOC45NCAwIDAgMS0yLjUzNS05LjQ4OUM1LjAzMiAxMy41MTQgMTMuNTQ4IDUgMjQuMDE0IDVhMTguODcgMTguODcgMCAwIDEgMTMuNDMgNS41NjZBMTguODcgMTguODcgMCAwIDEgNDMgMjMuOTk0Yy0uMDA0IDEwLjQ2NS04LjUyMiAxOC45OC0xOC45ODYgMTguOThoLS4wMDhhMTkgMTkgMCAwIDEtOS4wNzMtMi4zMTF6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQuODY4IDQzLjgwM2EuNS41IDAgMCAxLS40ODItLjYzMWwyLjYzOS05LjYzNmExOS41IDE5LjUgMCAwIDEtMi40OTctOS41NTZDNC41MzIgMTMuMjM4IDEzLjI3MyA0LjUgMjQuMDE0IDQuNWExOS4zNyAxOS4zNyAwIDAgMSAxMy43ODQgNS43MTNBMTkuMzYgMTkuMzYgMCAwIDEgNDMuNSAyMy45OTRjLS4wMDQgMTAuNzQxLTguNzQ2IDE5LjQ4LTE5LjQ4NiAxOS40OGExOS41NCAxOS41NCAwIDAgMS05LjE0NC0yLjI3N2wtOS44NzUgMi41ODlhLjUuNSAwIDAgMS0uMTI3LjAxNyIvPjxwYXRoIGZpbGw9IiNjZmQ4ZGMiIGQ9Ik0yNC4wMTQgNWExOC44NyAxOC44NyAwIDAgMSAxMy40MyA1LjU2NkExOC44NyAxOC44NyAwIDAgMSA0MyAyMy45OTRjLS4wMDQgMTAuNDY1LTguNTIyIDE4Ljk4LTE4Ljk4NiAxOC45OGgtLjAwOGExOSAxOSAwIDAgMS05LjA3My0yLjMxMWwtMTAuMDY1IDIuNjQgMi42OTQtOS44MzVhMTguOTQgMTguOTQgMCAwIDEtMi41MzUtOS40ODlDNS4wMzIgMTMuNTE0IDEzLjU0OCA1IDI0LjAxNCA1bTAtMUMxMi45OTggNCA0LjAzMiAxMi45NjIgNC4wMjcgMjMuOTc5YTIwIDIwIDAgMCAwIDIuNDYxIDkuNjIyTDMuOTAzIDQzLjA0YS45OTguOTk4IDAgMCAwIDEuMjE5IDEuMjMxbDkuNjg3LTIuNTRhMjAgMjAgMCAwIDAgOS4xOTcgMi4yNDRjMTEuMDI0IDAgMTkuOTktOC45NjMgMTkuOTk1LTE5Ljk4QTE5Ljg2IDE5Ljg2IDAgMCAwIDM4LjE1MyA5Ljg2IDE5Ljg3IDE5Ljg3IDAgMCAwIDI0LjAxNCA0Ii8+PHBhdGggZmlsbD0iIzQwYzM1MSIgZD0iTTM1LjE3NiAxMi44MzJhMTUuNjcgMTUuNjcgMCAwIDAtMTEuMTU3LTQuNjI2Yy04LjcwNCAwLTE1Ljc4MyA3LjA3Ni0xNS43ODcgMTUuNzc0YTE1Ljc0IDE1Ljc0IDAgMCAwIDIuNDEzIDguMzk2bC4zNzYuNTk3LTEuNTk1IDUuODIxIDUuOTczLTEuNTY2LjU3Ny4zNDJhMTUuNzUgMTUuNzUgMCAwIDAgOC4wMzIgMi4xOTloLjAwNmM4LjY5OCAwIDE1Ljc3Ny03LjA3NyAxNS43OC0xNS43NzZhMTUuNjggMTUuNjggMCAwIDAtNC42MTgtMTEuMTYxIi8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE5LjI2OCAxNi4wNDVjLS4zNTUtLjc5LS43MjktLjgwNi0xLjA2OC0uODItLjI3Ny0uMDEyLS41OTMtLjAxMS0uOTA5LS4wMTFzLS44My4xMTktMS4yNjUuNTk0LTEuNjYxIDEuNjIyLTEuNjYxIDMuOTU2IDEuNyA0LjU5IDEuOTM3IDQuOTA2IDMuMjgyIDUuMjU5IDguMTA0IDcuMTYxYzQuMDA3IDEuNTggNC44MjMgMS4yNjYgNS42OTMgMS4xODdzMi44MDctMS4xNDcgMy4yMDItMi4yNTUuMzk1LTIuMDU3LjI3Ny0yLjI1NWMtLjExOS0uMTk4LS40MzUtLjMxNi0uOTA5LS41NTRzLTIuODA3LTEuMzg1LTMuMjQyLTEuNTQzLS43NTEtLjIzNy0xLjA2OC4yMzhjLS4zMTYuNDc0LTEuMjI1IDEuNTQzLTEuNTAyIDEuODU5cy0uNTU0LjM1Ny0xLjAyOC4xMTktMi4wMDItLjczOC0zLjgxNS0yLjM1NGMtMS40MS0xLjI1Ny0yLjM2Mi0yLjgxLTIuNjM5LTMuMjg1LS4yNzctLjQ3NC0uMDMtLjczMS4yMDgtLjk2OC4yMTMtLjIxMy40NzQtLjU1NC43MTItLjgzMS4yMzctLjI3Ny4zMTYtLjQ3NS40NzQtLjc5MXMuMDc5LS41OTQtLjA0LS44MzFjLS4xMTctLjIzOC0xLjAzOS0yLjU4NC0xLjQ2MS0zLjUyMiIvPjwvc3ZnPg=="
        },
        "displayName": "WhatsApp Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 6,
            "name": "Communication"
          }
        ]
      },
      {
        "id": 1315,
        "icon": "fa:table",
        "name": "n8n-nodes-base.dataTable",
        "codex": {
          "data": {
            "alias": [
              "data",
              "table",
              "knowledge",
              "data table",
              "table",
              "sheet",
              "database",
              "data base",
              "mysql",
              "postgres",
              "postgresql",
              "airtable",
              "supabase",
              "noco",
              "notion"
            ],
            "details": "Data table",
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.datatable/"
                }
              ]
            },
            "categories": [
              "Core Nodes",
              "Development"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"input\",\"transform\"]",
        "defaults": {
          "name": "Data table"
        },
        "iconData": {
          "icon": "table",
          "type": "icon"
        },
        "displayName": "Data table",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      }
    ],
    "categories": [
      {
        "id": 32,
        "name": "Market Research"
      },
      {
        "id": 48,
        "name": "AI RAG"
      }
    ],
    "image": []
  }
}