{
  "id": 11157,
  "slug": "11157",
  "title": "Automate stale deal follow-ups in Salesforce with GPT-5.1, email, Slack & tasks",
  "description": "## How it works\n- Runs every morning at 8:00 using the Schedule Trigger.  \n- Sets a `stale_days` value and queries Salesforce for Opportunities where `Stage_Unchanged_Days__c` equals that value and the stage is not Closed Won / Closed Lost.  \n- For each “stale” Opportunity, loads full deal details and sends them to an OpenAI model.  \n- The model uses the `query_soql` tool to pull recent Notes, the primary Contact, and the Opportunity Owner, then returns a single JSON object with:  \n  - a personalized follow-up **email** for the client,  \n  - a short **SMS** template,  \n  - a concise **Slack** summary for the sales team,  \n  - and a ready-to-use **Task** payload for Salesforce.  \n- n8n parses that JSON, sends the email via SMTP, posts the Slack message to your chosen channel, and creates a Salesforce Task assigned to the Opportunity Owner so every stalled deal has a clear next step.\n\n## Setup steps\nEstimated setup time: ~30–45 minutes if your Salesforce, OpenAI, SMTP and Slack credentials are ready.\n\n1. **Create `Stage_Unchanged_Days__c` on Opportunity (Salesforce)**  \n   - Field Type: Formula (Number, 0 decimal places)  \n   - Formula:  \n     ```text\n     IF(\n       ISBLANK(LastStageChangeDate),\n       TODAY() - DATEVALUE(CreatedDate),\n       TODAY() - DATEVALUE(LastStageChangeDate)\n     )\n     ```  \n   - This field tracks how many days the Opportunity has been in the current stage.\n\n2. **Connect credentials in n8n**  \n   - Salesforce OAuth2 for the Salesforce nodes and the `query_soql` HTTP Tool.  \n   - OpenAI (or compatible) credential for the “Message a model” node.  \n   - SMTP credential for the customer email node.  \n   - Slack credential for the internal notification node.\n\n3. **Configure your follow-up rules**  \n   - In **Edit Fields (Set)**, set `stale_days` to the threshold that defines a stalled deal (e.g. 7, 14, 30).  \n   - In **Perform a query**, optionally refine the SOQL (record types, owners, minimum amount, etc.) to match your pipeline.  \n   - Update the **Send Email SMTP Customer** node with your real “from” address and tweak the wording if needed.  \n   - Point **Send Message To Internal Team (Slack)** to the right channel or user.\n\n4. **Test safely**  \n   - Turn off the Schedule Trigger and run the workflow manually with a few test Opportunities.  \n   - Inspect the AI output in **Message a model** and **Parse JSON** to confirm the structure (`email`, `sms`, `slack`, `task.api_body`).  \n   - Check that the email and Slack messages look good and that Salesforce Tasks are created, assigned to the right Owner, and linked to the correct Opportunity.\n\n5. **Go live**  \n   - Re-enable the Schedule Trigger.  \n   - Monitor the first few days to confirm that follow-ups, Slack alerts, and Tasks all behave as expected, then let the automation quietly keep your pipeline clean and moving.",
  "featuredImage": "/data/workflows/11157/11157.webp",
  "author": {
    "id": 101,
    "slug": "leeseifer",
    "name": "Le Nguyen",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 132,
  "downloads": 13,
  "createdAt": "2025-11-23T13:33:51.831Z",
  "updatedAt": "2026-01-16T09:07:46.870Z",
  "publishedAt": "2025-11-23T13:33:51.831Z",
  "nodes": 16,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11157"
}