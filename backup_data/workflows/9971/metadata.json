{
  "id": 9971,
  "slug": "9971",
  "title": "Track AI model executions with LangFuse observability for better performance insights",
  "description": "## About this template\nThis template is to demonstrate how to  trace the observations per execution ID in Langfuse via ingestion API.\n\n## Good to know\n* Endpoint: `https://cloud.langfuse.com/api/public/ingestion`\n* Auth is a `Generic Credential Type` with a `Basic Auth`: `username` = `you_public_key`, `password` = `your_secret_key`.\n\n## How it works\n* **Trigger**: the workflow is executed by another workflow after an AI run finishes (input parameter `execution_id`).\n\n* **Remove duplicates**\nEnsures we only process each `execution_id` once (optional but recommended).\n\n* **Wait to get execution data**\nDelay (60-80 secs) so totals and per-step metrics are available.\n\n* **Get execution**\nFetches workflow metadata and token totals.\n\n* **Code: structure execution data**\nNormalizes your run into an array of `perModelRuns` with model, tokens, latency, and text previews.\n\n* **Split Out** → **Loop Over Items**\nIterates each run step.\n\n* **Code: prepare JSON for Langfuse**\n  Builds a batch with:\n    * trace-create (stable id trace-&lt;executionId&gt;, grouped into session-&lt;workflowId&gt;) \n    * generation-create (model, input/output, usage, timings from latency)\n\n\n* **HTTP Request to Langfuse**\nPosts the batch. Optional short Wait between sends.\n\n## Requirements\n1. Langfuse Cloud project and API keys\n2. n8n instance with the HTTP node\n\n## Customizing\n1. Add span-create and set `parentObservationId` on the generation to nest under spans.\n2. Add scores or feedback later via score-create.\n3. Replace `sessionId` strategy (per workflow, per user, etc.). If some steps don’t produce tokens, compute and set usage yourself before sending.",
  "featuredImage": "/data/workflows/9971/9971.webp",
  "author": {
    "id": 101,
    "slug": "makarovartyom",
    "name": "Artem Makarov",
    "avatar": ""
  },
  "categories": [
    "Engineering",
    "AI RAG"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 60,
  "downloads": 6,
  "createdAt": "2025-10-21T07:48:53.582Z",
  "updatedAt": "2026-01-16T09:02:49.920Z",
  "publishedAt": "2025-10-21T07:48:53.582Z",
  "nodes": 12,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9971"
}