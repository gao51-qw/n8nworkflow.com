{
  "id": 11927,
  "slug": "11927",
  "title": "Automate commercial real estate monitoring with ScrapeGraphAI, Notion and Mailchimp",
  "description": "# Property Listing Aggregator with Mailchimp and Notion\n\n**⚠️ COMMUNITY TEMPLATE DISCLAIMER: This is a community-contributed template that uses ScrapeGraphAI (a community node). Please ensure you have the ScrapeGraphAI community node installed in your n8n instance before using this template.**\n\nThis workflow scrapes multiple commercial-real-estate websites, consolidates new property listings into Notion, and emails weekly availability updates or immediate space alerts to a Mailchimp audience. It automates the end-to-end process so business owners can stay on top of the latest spaces without manual searching.\n\n## Pre-conditions/Requirements\n\n### Prerequisites\n- n8n instance (self-hosted or n8n.cloud)\n- ScrapeGraphAI community node installed\n- Active Notion workspace with permission to create/read databases\n- Mailchimp account with at least one Audience list\n- Basic understanding of JSON; ability to add API credentials in n8n\n\n### Required Credentials\n- **ScrapeGraphAI API Key** – Enables web scraping functionality\n- **Notion OAuth2 / Integration Token** – Writes data into Notion database\n- **Mailchimp API Key** – Sends campaigns and individual emails\n- *(Optional)* **Proxy credentials** – If target real-estate sites block your IP\n\n### Specific Setup Requirements\n| Resource | Requirement | Example |\n|----------|-------------|---------|\n| Notion   | Database with property fields (Address, Price, SqFt, URL, Availability) | Database ID: `abcd1234efgh` |\n| Mailchimp | Audience list where alerts are sent | Audience ID: `f3a2b6c7d8` |\n| ScrapeGraphAI | YAML/JSON config per site | Stored inside the ScrapeGraphAI node |\n\n## How it works\n\nThis workflow scrapes multiple commercial-real-estate websites, consolidates new property listings into Notion, and emails weekly availability updates or immediate space alerts to a Mailchimp audience. It automates the end-to-end process so business owners can stay on top of the latest spaces without manual searching.\n\n## Key Steps:\n- **Manual Trigger / CRON**: Starts the workflow weekly or on-demand.\n- **Code (Site List Builder)**: Generates an array of target URLs for ScrapeGraphAI.\n- **Split In Batches**: Processes URLs in manageable groups to avoid rate limits.\n- **ScrapeGraphAI**: Extracts property details from each site.\n- **IF (New vs Existing)**: Checks whether the listing already exists in Notion.\n- **Notion**: Inserts new listings or updates existing records.\n- **Set**: Formats email content (HTML & plaintext).\n- **Mailchimp**: Sends a campaign or automated alert to subscribers.\n- **Sticky Notes**: Provide documentation and future-enhancement pointers.\n\n## Set up steps\n\n**Setup Time: 15-25 minutes**\n\n1. **Install Community Node**  \n   Navigate to *Settings → Community Nodes* and install “ScrapeGraphAI”.\n2. **Create Notion Integration**  \n   - Go to Notion *Settings → Integrations → Develop your own integration*.  \n   - Copy the integration token and share your target database with the integration.\n3. **Add Mailchimp API Key**  \n   - In Mailchimp: *Account → Extras → API keys*.  \n   - Copy an existing key or create a new one, then add it to n8n credentials.\n4. **Build Scrape Config**  \n   In the ScrapeGraphAI node, paste a YAML/JSON selector config for each website (address, price, sqft, url, availability).\n5. **Configure the URL List**  \n   Open the first Code node. Replace the placeholder array with your target listing URLs.\n6. **Map Notion Fields**  \n   Open the Notion node and map scraped fields to your database properties. Save.\n7. **Design Email Template**  \n   In the Set node, tweak the HTML and plaintext blocks to match your brand.\n8. **Test the Workflow**  \n   Trigger manually, check that Notion rows are created and Mailchimp sends the message.\n9. **Schedule**  \n   Add a CRON node (weekly) or leave the Manual Trigger for ad-hoc runs.\n\n## Node Descriptions\n\n### Core Workflow Nodes:\n- **Manual Trigger / CRON** – Kicks off the workflow either on demand or on a schedule.\n- **Code (Site List Builder)** – Holds an array of commercial real-estate URLs and outputs one item per URL.\n- **Split In Batches** – Prevents hitting anti-bot limits by processing URLs in groups (default: 5).\n- **ScrapeGraphAI** – Crawls each URL, parses DOM with CSS/XPath selectors, returns structured JSON.\n- **IF (New Listing?)** – Compares scraped listing IDs against existing Notion database rows.\n- **Notion** – Creates or updates pages representing property listings.\n- **Set (Email Composer)** – Builds dynamic email subject, body, and merge tags for Mailchimp.\n- **Mailchimp** – Uses the *Send Campaign* endpoint to email your audience.\n- **Sticky Note** – Contains inline documentation and customization reminders.\n\n### Data Flow:\n1. **Manual Trigger/CRON** → **Code (URLs)** → **Split In Batches** → **ScrapeGraphAI** → **IF (New?)**  \n2. True path → **Notion (Create)** → **Set (Email)** → **Mailchimp**  \n3. False path → *(skip)*\n\n## Customization Examples\n\n### Filter Listings by Maximum Budget\n```javascript\n// Inside the IF node (custom expression)\n{{$json[\"price\"] &lt;= 3500}}\n```\n\n### Change Email Frequency to Daily Digests\n```json\n{\n  \"nodes\": [\n    {\n      \"name\": \"Daily CRON\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"parameters\": {\n        \"triggerTimes\": [\n          {\n            \"hour\": 8,\n            \"minute\": 0\n          }\n        ]\n      }\n    }\n  ]\n}\n```\n\n## Data Output Format\n\nThe workflow outputs structured JSON data:\n\n```json\n{\n  \"address\": \"123 Market St, Suite 400\",\n  \"price\": 3200,\n  \"sqft\": 950,\n  \"url\": \"https://examplebroker.com/listing/123\",\n  \"availability\": \"Immediate\",\n  \"new\": true\n}\n```\n\n## Troubleshooting\n\n### Common Issues\n1. **Scraper returns empty objects** – Verify selectors in ScrapeGraphAI config; inspect the site’s HTML for changes.\n2. **Duplicate entries in Notion** – Ensure the “IF” node checks a unique ID (e.g., listing URL) before creating a page.\n\n### Performance Tips\n- Reduce batch size or add delays in ScrapeGraphAI to avoid site blocking.\n- Cache previously scraped URLs in an external file or database for faster runs.\n\n**Pro Tips:**\n- Rotate proxies in ScrapeGraphAI for heavily protected sites.\n- Use Notion rollups to calculate total available square footage automatically.\n- Leverage Mailchimp merge tags (`*|FNAME|*`) in the Set node for personalized alerts.",
  "featuredImage": "/data/workflows/11927/11927.webp",
  "author": {
    "id": 101,
    "slug": "vinci-king-01",
    "name": "vinci-king-01",
    "avatar": ""
  },
  "categories": [
    "Market Research",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 35,
  "downloads": 3,
  "createdAt": "2025-12-18T13:55:37.989Z",
  "updatedAt": "2026-01-16T09:10:42.646Z",
  "publishedAt": "2025-12-18T13:55:37.989Z",
  "nodes": 20,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11927"
}