{
  "id": 11866,
  "slug": "11866",
  "title": "Job post to sales lead pipeline with Scrape.do, Apollo.io & OpenAI",
  "description": "# Lead Sourcing by Job Posts For Outreach With Scrape.do API & Open AI & Google Sheets \n\n## Overview\n\nThis n8n workflow automates the complete lead generation process by scraping job postings from Indeed, enriching company data via Apollo.io, identifying decision-makers, and generating personalized LinkedIn outreach messages using OpenAI. It integrates with Scrape.do for reliable web scraping, Apollo.io for B2B data enrichment, OpenAI for AI-powered personalization, and Google Sheets for centralized data storage.\n\n**Perfect for:** Sales teams, recruiters, business development professionals, and marketing agencies looking to automate their outbound prospecting pipeline.\n\n---\n\n## Workflow Components\n\n### 1. ‚è∞ Schedule Trigger\n\n| Property | Value |\n|----------|-------|\n| Type | Schedule Trigger |\n| Purpose | Automatically initiates workflow on a recurring schedule |\n| Frequency | Weekly (Every Monday) |\n| Time | 00:00 UTC |\n\n**Function:** Ensures consistent, hands-off lead generation by running the pipeline automatically without manual intervention.\n\n---\n\n### 2. üîç Scrape.do Indeed API\n\n| Property | Value |\n|----------|-------|\n| Type | HTTP Request (GET) |\n| Purpose | Scrapes job listings from Indeed via Scrape.do proxy API |\n| Endpoint | `https://api.scrape.do` |\n| Output Format | Markdown |\n\n**Request Parameters:**\n\n| Parameter | Value | Description |\n|-----------|-------|-------------|\n| token | API Token | Scrape.do authentication |\n| url | Indeed Search URL | Target job search page |\n| super | true | Uses residential proxies |\n| geoCode | us | US-based content |\n| render | true | JavaScript rendering enabled |\n| device | mobile | Mobile viewport for cleaner HTML |\n| output | markdown | Lightweight text output |\n\n**Function:** Fetches Indeed job listings with anti-bot bypass, returning clean markdown for easy parsing.\n\n---\n\n### 3. üìã Parse Indeed Jobs\n\n| Property | Value |\n|----------|-------|\n| Type | Code Node (JavaScript) |\n| Purpose | Extracts structured job data from markdown |\n| Mode | Run once for all items |\n\n**Extracted Fields:**\n\n| Field | Description | Example |\n|-------|-------------|---------|\n| jobTitle | Position title | \"Senior Data Engineer\" |\n| jobUrl | Indeed job link | \"https://indeed.com/viewjob?jk=abc123\" |\n| jobId | Indeed job identifier | \"abc123\" |\n| companyName | Hiring company | \"Acme Corporation\" |\n| location | City, State | \"San Francisco, CA\" |\n| salary | Pay range | \"$120,000 - $150,000\" |\n| jobType | Employment type | \"Full-time\" |\n| source | Data source | \"Indeed\" |\n| dateFound | Scrape date | \"2025-01-15\" |\n\n**Function:** Parses markdown using regex patterns, filters invalid entries, and deduplicates by company name.\n\n---\n\n### 4. üìä Add New Company (Google Sheets)\n\n| Property | Value |\n|----------|-------|\n| Type | Google Sheets Node |\n| Purpose | Stores parsed job postings for tracking |\n| Operation | Append rows |\n| Target Sheet | \"Add New Company\" |\n\n**Function:** Creates a historical record of all discovered job postings and companies for pipeline tracking.\n\n---\n\n### 5. üè¢ Apollo Organization Search\n\n| Property | Value |\n|----------|-------|\n| Type | HTTP Request (POST) |\n| Purpose | Enriches company data via Apollo.io API |\n| Endpoint | `https://api.apollo.io/v1/organizations/search` |\n| Authentication | HTTP Header Auth (x-api-key) |\n\n**Request Body:**\n```json\n{\n  \"q_organization_name\": \"Company Name\",\n  \"page\": 1,\n  \"per_page\": 1\n}\n```\n\n**Response Fields:**\n\n| Field | Description |\n|-------|-------------|\n| id | Apollo organization ID |\n| name | Official company name |\n| website_url | Company website |\n| linkedin_url | LinkedIn company page |\n| industry | Business sector |\n| estimated_num_employees | Company size |\n| founded_year | Year established |\n| city, state, country | Location details |\n| short_description | Company overview |\n\n**Function:** Retrieves comprehensive company intelligence including LinkedIn profiles, industry classification, and employee count.\n\n---\n\n### 6. üì§ Extract Apollo Org Data\n\n| Property | Value |\n|----------|-------|\n| Type | Code Node (JavaScript) |\n| Purpose | Parses Apollo response and merges with original data |\n| Mode | Run once for each item |\n\n**Function:** Extracts relevant fields from Apollo API response and combines with job posting data for downstream processing.\n\n---\n\n### 7. üë• Apollo People Search\n\n| Property | Value |\n|----------|-------|\n| Type | HTTP Request (POST) |\n| Purpose | Finds decision-makers at target companies |\n| Endpoint | `https://api.apollo.io/v1/mixed_people/search` |\n| Authentication | HTTP Header Auth (x-api-key) |\n\n**Request Body:**\n```json\n{\n  \"organization_ids\": [\"apollo_org_id\"],\n  \"person_titles\": [\n    \"CTO\",\n    \"Chief Technology Officer\",\n    \"VP Engineering\",\n    \"Head of Engineering\",\n    \"Engineering Manager\",\n    \"Technical Director\",\n    \"CEO\",\n    \"Founder\"\n  ],\n  \"page\": 1,\n  \"per_page\": 3\n}\n```\n\n**Response Fields:**\n\n| Field | Description |\n|-------|-------------|\n| first_name | Contact first name |\n| last_name | Contact last name |\n| title | Job title |\n| email | Email address |\n| linkedin_url | LinkedIn profile URL |\n| phone_number | Direct phone |\n\n**Function:** Identifies key stakeholders and decision-makers based on configurable title filters.\n\n---\n\n### 8. üìù Format Leads\n\n| Property | Value |\n|----------|-------|\n| Type | Code Node (JavaScript) |\n| Purpose | Structures lead data for outreach |\n| Mode | Run once for all items |\n\n**Function:** Combines person data with company context, creating comprehensive lead profiles ready for personalization.\n\n---\n\n### 9. ü§ñ Generate Personalized Message (OpenAI)\n\n| Property | Value |\n|----------|-------|\n| Type | OpenAI Node |\n| Purpose | Creates custom LinkedIn connection messages |\n| Model | gpt-4o-mini |\n| Max Tokens | 150 |\n| Temperature | 0.7 |\n\n**System Prompt:**\n```\nYou are a professional outreach specialist. Write personalized LinkedIn connection request messages. Keep messages under 300 characters. Be friendly, professional, and mention a specific reason for connecting based on their role and company.\n```\n\n**User Prompt Variables:**\n\n| Variable | Source |\n|----------|--------|\n| Name | `$json.fullName` |\n| Title | `$json.title` |\n| Company | `$json.companyName` |\n| Industry | `$json.industry` |\n| Job Context | `$json.jobTitle` |\n\n**Function:** Generates unique, contextual outreach messages that reference specific hiring activity and company details.\n\n---\n\n### 10. üîó Merge Lead + Message\n\n| Property | Value |\n|----------|-------|\n| Type | Code Node (JavaScript) |\n| Purpose | Combines lead data with generated message |\n| Mode | Run once for each item |\n\n**Function:** Merges OpenAI response with lead profile, creating the final enriched record.\n\n---\n\n### 11. üíæ Save Leads to Sheet\n\n| Property | Value |\n|----------|-------|\n| Type | Google Sheets Node |\n| Purpose | Stores final lead data with personalized messages |\n| Operation | Append rows |\n| Target Sheet | \"Leads\" |\n\n**Data Mapping:**\n\n| Column | Data |\n|--------|------|\n| First Name | Lead's first name |\n| Last Name | Lead's last name |\n| Title | Job title |\n| Company | Company name |\n| LinkedIn URL | Profile link |\n| Country | Location |\n| Industry | Business sector |\n| Date Added | Timestamp |\n| Source | \"Indeed + Apollo\" |\n| Personalized Message | AI-generated outreach text |\n\n**Function:** Creates actionable lead database ready for outreach campaigns.\n\n---\n\n## Workflow Flow\n\n```\n‚è∞ Schedule Trigger\n       ‚îÇ\n       ‚ñº\nüîç Scrape.do Indeed API ‚îÄ‚îÄ‚ñ∫ Fetches job listings with JS rendering\n       ‚îÇ\n       ‚ñº\nüìã Parse Indeed Jobs ‚îÄ‚îÄ‚ñ∫ Extracts company names, job details\n       ‚îÇ\n       ‚ñº\nüìä Add New Company ‚îÄ‚îÄ‚ñ∫ Saves to Google Sheets (Companies)\n       ‚îÇ\n       ‚ñº\nüè¢ Apollo Org Search ‚îÄ‚îÄ‚ñ∫ Enriches company data\n       ‚îÇ\n       ‚ñº\nüì§ Extract Apollo Org Data ‚îÄ‚îÄ‚ñ∫ Parses API response\n       ‚îÇ\n       ‚ñº\nüë• Apollo People Search ‚îÄ‚îÄ‚ñ∫ Finds decision-makers\n       ‚îÇ\n       ‚ñº\nüìù Format Leads ‚îÄ‚îÄ‚ñ∫ Structures lead profiles\n       ‚îÇ\n       ‚ñº\nü§ñ Generate Personalized Message ‚îÄ‚îÄ‚ñ∫ AI creates custom outreach\n       ‚îÇ\n       ‚ñº\nüîó Merge Lead + Message ‚îÄ‚îÄ‚ñ∫ Combines all data\n       ‚îÇ\n       ‚ñº\nüíæ Save Leads to Sheet ‚îÄ‚îÄ‚ñ∫ Final storage (Leads)\n```\n\n---\n\n## Configuration Requirements\n\n### API Keys & Credentials\n\n| Credential | Purpose | Where to Get |\n|------------|---------|--------------|\n| Scrape.do API Token | Web scraping with anti-bot bypass | [scrape.do/dashboard](https://scrape.do) |\n| Apollo.io API Key | B2B data enrichment | [apollo.io/settings/integrations](https://apollo.io) |\n| OpenAI API Key | AI message generation | [platform.openai.com](https://platform.openai.com) |\n| Google Sheets OAuth2 | Data storage | n8n Credentials Setup |\n\n### n8n Credential Setup\n\n| Credential Type | Configuration |\n|-----------------|---------------|\n| HTTP Header Auth (Apollo) | Header: `x-api-key`, Value: Your Apollo API key |\n| OpenAI API | API Key: Your OpenAI API key |\n| Google Sheets OAuth2 | Complete OAuth flow with Google |\n\n---\n\n## Key Features\n\n### üîç Intelligent Job Scraping\n\n- **Anti-Bot Bypass:** Residential proxy rotation via Scrape.do\n- **JavaScript Rendering:** Full headless browser for dynamic content\n- **Mobile Optimization:** Cleaner HTML with mobile viewport\n- **Markdown Output:** Lightweight, easy-to-parse format\n\n### üè¢ B2B Data Enrichment\n\n- **Company Intelligence:** Industry, size, location, LinkedIn\n- **Decision-Maker Discovery:** Title-based filtering\n- **Contact Information:** Email, phone, LinkedIn profiles\n- **Real-Time Data:** Fresh information from Apollo.io\n\n### ü§ñ AI-Powered Personalization\n\n- **Contextual Messages:** References specific hiring activity\n- **Character Limit:** Optimized for LinkedIn (300 chars)\n- **Variable Temperature:** Balanced creativity and consistency\n- **Role-Specific:** Tailored to recipient's title and company\n\n### üìä Automated Data Management\n\n- **Dual Sheet Storage:** Companies + Leads separation\n- **Timestamp Tracking:** Historical records\n- **Deduplication:** Prevents duplicate entries\n- **Ready for Export:** CSV-compatible format\n\n---\n\n## Use Cases\n\n### üéØ Sales Prospecting\n\n- Identify companies actively hiring in your target market\n- Find decision-makers at companies investing in growth\n- Generate personalized cold outreach at scale\n- Track pipeline from discovery to contact\n\n### üë• Recruiting & Talent Acquisition\n\n- Monitor competitor hiring patterns\n- Identify companies building specific teams\n- Connect with hiring managers directly\n- Build talent pipeline relationships\n\n### üìà Market Intelligence\n\n- Track industry hiring trends\n- Monitor competitor expansion signals\n- Identify emerging market opportunities\n- Benchmark salary ranges by role\n\n### ü§ù Partnership Development\n\n- Find companies investing in complementary areas\n- Identify potential integration partners\n- Connect with technical leadership\n- Build strategic relationship pipeline\n\n---\n\n## Technical Notes\n\n| Specification | Value |\n|---------------|-------|\n| Processing Time | 2-5 minutes per run (depending on job count) |\n| Jobs per Run | ~25 unique companies |\n| API Calls per Run | 1 Scrape.do + ~25 Apollo Org + ~25 Apollo People + ~75 OpenAI |\n| Data Accuracy | 90%+ for company matching |\n| Success Rate | 99%+ with proper error handling |\n\n### Rate Limits to Consider\n\n| Service | Free Tier Limit | Recommendation |\n|---------|-----------------|----------------|\n| Scrape.do | 1,000 credits/month | ~40 runs/month |\n| Apollo.io | 100 requests/day | Add Wait nodes if needed |\n| OpenAI | Based on usage | Monitor costs (~$0.01-0.05/run) |\n| Google Sheets | 300 requests/minute | No issues expected |\n\n---\n\n## Setup Instructions\n\n### Step 1: Import Workflow\n\n1. Copy the JSON workflow configuration\n2. In n8n: **Workflows ‚Üí Import from JSON**\n3. Paste configuration and save\n\n### Step 2: Configure Scrape.do\n\n1. Sign up at [scrape.do](https://scrape.do)\n2. Navigate to Dashboard ‚Üí API Token\n3. Copy your token\n4. Token is embedded in URL query parameter (already configured)\n\n**To customize search:**\n```\nChange the `url` parameter in \"Scrape.do Indeed API\" node:\n- q=data+engineer (search term)\n- l=Remote (location)\n- fromage=7 (last 7 days)\n```\n\n### Step 3: Configure Apollo.io\n\n1. Sign up at [apollo.io](https://apollo.io)\n2. Go to **Settings ‚Üí Integrations ‚Üí API Keys**\n3. Create new API key\n4. In n8n: **Credentials ‚Üí Add Credential ‚Üí Header Auth**\n   - Name: `x-api-key`\n   - Value: Your Apollo API key\n5. Select this credential in both Apollo HTTP nodes\n\n### Step 4: Configure OpenAI\n\n1. Go to [platform.openai.com](https://platform.openai.com)\n2. Create new API key\n3. In n8n: **Credentials ‚Üí Add Credential ‚Üí OpenAI**\n4. Paste API key\n5. Select credential in \"Generate Personalized Message\" node\n\n### Step 5: Configure Google Sheets\n\n1. Create new Google Spreadsheet\n2. Create two sheets:\n   - **Sheet 1:** \"Add New Company\"\n     - Columns: `companyName | jobTitle | jobUrl | location | salary | source | postedDate`\n   - **Sheet 2:** \"Leads\"\n     - Columns: `First Name | Last Name | Title | Company | LinkedIn URL | Country | Industry | Date Added | Source | Personalized Message`\n3. Copy Sheet ID from URL\n4. In n8n: **Credentials ‚Üí Add Credential ‚Üí Google Sheets OAuth2**\n5. Update both Google Sheets nodes with your Sheet ID\n\n### Step 6: Test and Activate\n\n1. **Manual Test:** Click \"Execute Workflow\" button\n2. **Verify Each Node:** Check outputs step by step\n3. **Review Data:** Confirm data appears in Google Sheets\n4. **Activate:** Toggle workflow to \"Active\"\n\n---\n\n## Error Handling\n\n### Common Issues\n\n| Issue | Cause | Solution |\n|-------|-------|----------|\n| \"Invalid character: [\" | Empty/malformed company name | Check Parse Indeed Jobs output |\n| \"Node does not have credentials\" | Credential not linked | Open node ‚Üí Select credential |\n| Empty Parse Results | Indeed HTML structure changed | Check Scrape.do raw output |\n| Apollo Rate Limit (429) | Too many requests | Add 5-10s Wait node between calls |\n| OpenAI Timeout | Too many tokens | Reduce batch size or max_tokens |\n| \"Your request is invalid\" | Malformed JSON body | Verify expression syntax in HTTP nodes |\n\n### Troubleshooting Steps\n\n1. **Verify Credentials:** Test each credential individually\n2. **Check Node Outputs:** Use \"Execute Node\" for debugging\n3. **Monitor API Usage:** Check Apollo and OpenAI dashboards\n4. **Review Logs:** Check n8n execution history for details\n5. **Test with Sample:** Use known company name to verify Apollo\n\n### Recommended Error Handling Additions\n\nFor production use, consider adding:\n\n```\n- IF node after Apollo Org Search to handle empty results\n- Error Workflow trigger for notifications\n- Wait nodes between API calls for rate limiting\n- Retry logic for transient failures\n```\n\n---\n\n## Performance Specifications\n\n| Metric | Value |\n|--------|-------|\n| Execution Time | 2-5 minutes per scheduled run |\n| Jobs Discovered | ~25 per Indeed page |\n| Leads Generated | 1-3 per company (based on title matches) |\n| Message Quality | Professional, contextual, &lt;300 chars |\n| Data Freshness | Real-time from Indeed + Apollo |\n| Storage Format | Google Sheets (unlimited rows) |\n\n---\n\n## API Reference\n\n### Scrape.do API\n\n| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `https://api.scrape.do` | GET | Direct URL scraping |\n\n**Documentation:** [scrape.do/documentation](https://scrape.do/documentation)\n\n### Apollo.io API\n\n| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `/v1/organizations/search` | POST | Company lookup |\n| `/v1/mixed_people/search` | POST | People search |\n\n**Documentation:** [apolloio.github.io/apollo-api-docs](https://apolloio.github.io/apollo-api-docs)\n\n### OpenAI API\n\n| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `/v1/chat/completions` | POST | Message generation |\n\n**Documentation:** [platform.openai.com",
  "featuredImage": "/data/workflows/11866/11866.webp",
  "author": {
    "id": 101,
    "slug": "onurpolat05",
    "name": "Onur",
    "avatar": ""
  },
  "categories": [
    "Lead Generation",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 35,
  "downloads": 3,
  "createdAt": "2025-12-16T15:02:42.692Z",
  "updatedAt": "2026-01-16T09:10:27.887Z",
  "publishedAt": "2025-12-16T15:02:42.692Z",
  "nodes": 18,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11866"
}