{
  "workflow": {
    "id": 8971,
    "name": "Chat with your HubSpot data",
    "views": 2849,
    "recentViews": 2,
    "totalViews": 2849,
    "createdAt": "2025-09-26T16:03:26.575Z",
    "description": "This n8n template gives you a chat-style assistant that can search your HubSpot CRM on demand. Ask natural-language questions like “show me leads in Germany” or “what deals close next month,” and the agent translates your request into precise HubSpot searches—then answers in plain English.\n\nGreat for founders, AEs, and ops folks who want quick answers without clicking through the CRM.\n\n---\n\n## How it works\n\n* **Chat trigger** starts a session from your n8n chat UI or embed.\n* **AI Agent (Gemini 2.5 Pro)** interprets the message and:\n\n  * Chooses the right **HubSpot search** (contacts or deals).\n  * Fills filter **property**, **operator** (EQ, NEQ, GT, GTE, LT, LTE, BETWEEN, IN, NOT\\_IN), and **value(s)**.\n  * Requests specific properties (email, name, lifecycle stage, owner, activity timestamps, etc.).\n* **HubSpot tools** execute live queries:\n\n  * **Contacts**: flexible property filter + free-text `query`.\n  * **Deals**: filters by owner and core deal fields (stage, amount, pipeline, close date).\n* **Memory buffer** keeps the last turns so you can say “now only show closed won over 10k” and the agent understands context.\n\n---\n\n## How to use\n\n1. **Connect credentials**\n\n   * HubSpot OAuth on both HubSpot Tool nodes.\n   * Google Gemini API key on the **Gemini Chat Model**.\n2. **Open the chat** (the “When chat message received” node).\n3. Ask questions like:\n\n   * “Find contacts named **Hans** created **after Sept 1**.”\n   * “Deals **owned by me** in **Proposal** with **amount &gt; 10,000**.”\n   * “Contacts with **lead status = New** and **no email reply** in the last 14 days.”\n4. Refine with follow-ups:\n\n   * “Sort by most recently contacted.”\n   * “Only Germany.”\n   * “Show top 5 with emails.”\n\n---\n\n## Requirements\n\n* **HubSpot** (OAuth2)\n* **Google Gemini** (API key)\n\n---\n\n## Notes & customization\n\n* **Property/operator control:** The contact search node lets the agent set both the property (e.g., `email`, `lifecyclestage`, `hs_lead_status`) and the operator (EQ, IN, BETWEEN in epoch ms for dates, etc.).\n* **Owner filtering for deals:** Uses `hs_all_owner_ids`; swap or extend to filter by pipeline/stage ranges.\n* **Guardrails:** Add allowlists for searchable properties or cap result counts to avoid noisy answers.\n* **Display format:** Have the agent return concise tables (name, email, stage, last activity, CTA).\n* **Handoffs:** Add Slack/Email actions—e.g., “post this list to #sales” or “export to CSV.”\n* **Telemetry:** Log queries for later dashboards (common searches, coverage gaps).\n\n---\n\n## Troubleshooting\n\n* **No results?** Loosen operators (use `IN` lists, broaden dates) or include a free-text `query`.\n* **Date filters:** Provide epoch ms for GT/GTE/LT/LTE/BETWEEN on time fields (the agent handles this; keep system time in UTC).\n* **Too chatty?** Reduce memory window or ask the agent to summarize to bullet points.\n",
    "workflow": {
      "meta": {
        "instanceId": "09423a3357ff64bdcc082268b9d577001317edbe377a3ccfb0b131ffb9554b30",
        "templateCredsSetupCompleted": true
      },
      "nodes": [
        {
          "id": "3be8d3e0-a672-4c85-95fb-9e21a1efe1b0",
          "name": "When chat message received",
          "type": "@n8n/n8n-nodes-langchain.chatTrigger",
          "position": [
            16,
            -32
          ],
          "webhookId": "2a0ed9f6-848a-4e48-ac72-4365da573b9f",
          "parameters": {
            "options": {}
          },
          "typeVersion": 1.3
        },
        {
          "id": "f81e185d-07b4-4cd5-8442-9bea79577e70",
          "name": "AI Agent",
          "type": "@n8n/n8n-nodes-langchain.agent",
          "position": [
            224,
            -32
          ],
          "parameters": {
            "options": {}
          },
          "typeVersion": 2.2
        },
        {
          "id": "308d44ba-3d87-4405-900e-f5c6fb41c919",
          "name": "Search contacts in HubSpot",
          "type": "n8n-nodes-base.hubspotTool",
          "position": [
            448,
            176
          ],
          "parameters": {
            "operation": "search",
            "authentication": "oAuth2",
            "filterGroupsUi": {
              "filterGroupsValues": [
                {
                  "filtersUi": {
                    "filterValues": [
                      {
                        "value": "={{ $fromAI('filterGroupsValues0_filterValues0_Value', ``, 'string') }}",
                        "operator": "={{ $fromAI('operator_0', `Choose a valid HubSpot CRM Search operator — EQ (equal; exact match), NEQ (not equal), GT (greater than; numbers/timestamps in ms), GTE (>=), LT (<), LTE (<=), IN (equals any; supply values: [\"A\",\"B\",...]), NOT_IN (not in list). Note: date/time filters use epoch ms (UTC)`, 'string') }}",
                        "propertyName": "={{ $fromAI('property_name', `Choose an appropirate hubspot contact property name - email,firstname,lastname,createdate,lifecyclestage,hs_lead_status,country,state,hs_email_last_open_date,hs_email_last_reply_date,hs_sequences_is_enrolled,hs_sequences_enrolled_count,jobtitle,hubspot_owner_id,hs_sa_first_engagement_date,hs_last_sales_activity_timestamp`, 'string') }}"
                      },
                      {
                        "value": "={{ $fromAI('filterGroupsValues1_filterValues1_Value', ``, 'string') }}",
                        "operator": "={{ $fromAI('operator_1', `Choose a valid HubSpot CRM Search operator — EQ (equal; exact match), NEQ (not equal), GT (greater than; numbers/timestamps in ms), GTE (>=), LT (<), LTE (<=), IN (equals any; supply values: [\"A\",\"B\",...]), NOT_IN (not in list). Note: date/time filters use epoch ms (UTC)`, 'string') }}",
                        "propertyName": "={{ $fromAI('property_name_1', `Optionally, choose another appropirate hubspot contact property name to filter by (useful for from - to date filtering in ms) - email,firstname,lastname,createdate,lifecyclestage,hs_lead_status,country,state,hs_email_last_open_date,hs_email_last_reply_date,hs_sequences_is_enrolled,hs_sequences_enrolled_count,jobtitle,hubspot_owner_id,hs_sa_first_engagement_date,hs_last_sales_activity_timestamp`, 'string') }}"
                      }
                    ]
                  }
                }
              ]
            },
            "additionalFields": {
              "properties": "={{ [\"email\",\"firstname\",\"lastname\",\"createdate\",\"lifecyclestage\",\"hs_lead_status\",\"country\",\"state\",\"hs_email_last_open_date\",\"hs_email_last_reply_date\",\"hs_sequences_is_enrolled\",\"hs_sequences_enrolled_count\",\"jobtitle\",\"hubspot_owner_id\",\"hs_sa_first_engagement_date\",\"hs_last_sales_activity_timestamp\"] }}"
            }
          },
          "credentials": {
            "hubspotOAuth2Api": {
              "id": "credential-id",
              "name": "hubspotOAuth2Api Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "f7fa3e15-296a-41d9-9e0c-4bf92d7cec1e",
          "name": "Search for deals in HubSpot",
          "type": "n8n-nodes-base.hubspotTool",
          "position": [
            624,
            176
          ],
          "parameters": {
            "resource": "deal",
            "operation": "search",
            "authentication": "oAuth2",
            "filterGroupsUi": {
              "filterGroupsValues": [
                {
                  "filtersUi": {
                    "filterValues": [
                      {
                        "value": "={{ $fromAI('filterGroupsValues0_filterValues0_Value', ``, 'string') }}",
                        "operator": "={{ $fromAI('operator_0', `Choose a valid HubSpot CRM Search operator — EQ (equal; exact match), NEQ (not equal), GT (greater than; numbers/timestamps in ms), GTE (>=), LT (<), LTE (<=), IN (equals any; supply values: [\"A\",\"B\",...]), NOT_IN (not in list). Note: date/time filters use epoch ms (UTC)`, 'string') }}",
                        "propertyName": "={{ $fromAI('property_name_0', `Choose an appropriate hubspot deal property name - dealname,amount,dealstage,pipeline,dealtype,closedate,createdate,hs_lastmodifieddate,hubspot_owner_id,deal_currency_code,hs_deal_stage_probability,hs_last_activity_date,hs_next_activity_date,hs_is_closed_won,num_associated_contacts,hs_object_id`, 'string') }}"
                      },
                      {
                        "value": "={{ $fromAI('filterGroupsValues1_filterValues1_Value', ``, 'string') }}",
                        "operator": "={{ $fromAI('operator_1', `Choose a valid HubSpot CRM Search operator — EQ (equal; exact match), NEQ (not equal), GT (greater than; numbers/timestamps in ms), GTE (>=), LT (<), LTE (<=), IN (equals any; supply values: [\"A\",\"B\",...]), NOT_IN (not in list). Note: date/time filters use epoch ms (UTC)`, 'string') }}",
                        "propertyName": "={{ $fromAI('property_name_1', `Optionally, choose another appropirate hubspot deal property name to filter by (useful for from - to date filtering in ms) - dealname,amount,dealstage,pipeline,dealtype,closedate,createdate,hs_lastmodifieddate,hubspot_owner_id,deal_currency_code,hs_deal_stage_probability,hs_last_activity_date,hs_next_activity_date,hs_is_closed_won,num_associated_contacts,hs_object_id`, 'string') }}"
                      }
                    ]
                  }
                }
              ]
            },
            "additionalFields": {
              "properties": [
                "dealname",
                "amount",
                "dealstage",
                "pipeline",
                "dealtype",
                "closedate",
                "createdate",
                "hs_lastmodifieddate",
                "hubspot_owner_id",
                "num_associated_contacts",
                "hs_deal_stage_probability"
              ]
            }
          },
          "credentials": {
            "hubspotOAuth2Api": {
              "id": "credential-id",
              "name": "hubspotOAuth2Api Credential"
            }
          },
          "typeVersion": 2.1
        },
        {
          "id": "7ce28fb1-809f-4d6b-be7d-2707dece9fed",
          "name": "Simple Memory",
          "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
          "position": [
            272,
            176
          ],
          "parameters": {},
          "typeVersion": 1.3
        },
        {
          "id": "5ffea926-84dc-48ad-a0d3-1b9c9967c7cd",
          "name": "Sticky Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -544,
            -128
          ],
          "parameters": {
            "color": 5,
            "width": 480,
            "height": 464,
            "content": "## Chat with HubSpot (Contacts + Deals)\n\n### How it works\n1. Start a chat (Chat Trigger).\n2. **AI Agent** (OpenAI) interprets your question.\n3. Runs live HubSpot **Contacts** and **Deals** searches via tool nodes (dynamic filters with `$fromAI`).\n4. Returns compact results; memory keeps follow-up context.\n\n### Setup\n* [ ] Connect **HubSpot** on both AI tool nodes\n* [ ] Add your **OpenAI** API key to the Chat Model\n* [ ] (Optional) Predefine common filters (stage, owner, date ranges)\n\n### Customize\n* **Guardrails:** allowlisted properties/operators, max results, safe defaults\n* **Output:** request a table (name, email, stage, owner) or export to CSV/Slack"
          },
          "typeVersion": 1
        },
        {
          "id": "1ab36139-3a8b-4cc3-9dd5-0af717b4b969",
          "name": "OpenAI Chat Model",
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "position": [
            96,
            176
          ],
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-5",
              "cachedResultName": "gpt-5"
            },
            "options": {}
          },
          "credentials": {
            "openAiApi": {
              "id": "credential-id",
              "name": "openAiApi Credential"
            }
          },
          "typeVersion": 1.2
        }
      ],
      "pinData": {},
      "connections": {
        "Simple Memory": {
          "ai_memory": [
            [
              {
                "node": "AI Agent",
                "type": "ai_memory",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "AI Agent",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Search contacts in HubSpot": {
          "ai_tool": [
            [
              {
                "node": "AI Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        },
        "When chat message received": {
          "main": [
            [
              {
                "node": "AI Agent",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Search for deals in HubSpot": {
          "ai_tool": [
            [
              {
                "node": "AI Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        }
      }
    },
    "lastUpdatedBy": 51,
    "workflowInfo": {
      "nodeCount": 6,
      "nodeTypes": {
        "n8n-nodes-base.hubspotTool": {
          "count": 2
        },
        "@n8n/n8n-nodes-langchain.agent": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.chatTrigger": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.lmChatGoogleGemini": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.memoryBufferWindow": {
          "count": 1
        }
      }
    },
    "status": "published",
    "user": {
      "name": "Miha",
      "username": "miha",
      "bio": "Template Engineer @ n8n",
      "verified": true,
      "links": [
        ""
      ],
      "avatar": "https://gravatar.com/avatar/5625246747ddc04957e7b87ec2ee8d90a9c5622762cbb9f5ac1a35fe24220dde?r=pg&d=retro&size=200"
    },
    "nodes": [
      {
        "id": 1119,
        "icon": "fa:robot",
        "name": "@n8n/n8n-nodes-langchain.agent",
        "codex": {
          "data": {
            "alias": [
              "LangChain",
              "Chat",
              "Conversational",
              "Plan and Execute",
              "ReAct",
              "Tools"
            ],
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Agents",
                "Root Nodes"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "AI Agent",
          "color": "#404040"
        },
        "iconData": {
          "icon": "robot",
          "type": "icon"
        },
        "displayName": "AI Agent",
        "typeVersion": 3,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1163,
        "icon": "fa:database",
        "name": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.memorybufferwindow/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Memory"
              ],
              "Memory": [
                "For beginners"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Simple Memory"
        },
        "iconData": {
          "icon": "database",
          "type": "icon"
        },
        "displayName": "Simple Memory",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1247,
        "icon": "fa:comments",
        "name": "@n8n/n8n-nodes-langchain.chatTrigger",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.chattrigger/"
                }
              ]
            },
            "categories": [
              "Core Nodes",
              "Langchain"
            ]
          }
        },
        "group": "[\"trigger\"]",
        "defaults": {
          "name": "When chat message received"
        },
        "iconData": {
          "icon": "comments",
          "type": "icon"
        },
        "displayName": "Chat Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1262,
        "icon": "file:google.svg",
        "name": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatgooglegemini/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Language Models",
                "Root Nodes"
              ],
              "Language Models": [
                "Chat Models (Recommended)"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Google Gemini Chat Model"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNDggNDgiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNNDQuNSAyMEgyNHY4LjVoMTEuOEMzNC43IDMzLjkgMzAuMSAzNyAyNCAzN2MtNy4yIDAtMTMtNS44LTEzLTEzczUuOC0xMyAxMy0xM2MzLjEgMCA1LjkgMS4xIDguMSAyLjlsNi40LTYuNEMzNC42IDQuMSAyOS42IDIgMjQgMiAxMS44IDIgMiAxMS44IDIgMjRzOS44IDIyIDIyIDIyYzExIDAgMjEtOCAyMS0yMiAwLTEuMy0uMi0yLjctLjUtNCIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBmaWxsPSIjRkJCQzA1IiBkPSJNMCAzN1YxMWwxNyAxM3oiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im0wIDExIDE3IDEzIDctNi4xTDQ4IDE0VjBIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiMzNEE4NTMiIGQ9Im0wIDM3IDMwLTIzIDcuOSAxTDQ4IDB2NDhIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiM0Mjg1RjQiIGQ9Ik00OCA0OCAxNyAyNGwtNC0zIDM1LTEweiIgY2xpcC1wYXRoPSJ1cmwoI2IpIi8+PC9zdmc+"
        },
        "displayName": "Google Gemini Chat Model",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      }
    ],
    "categories": [
      {
        "id": 39,
        "name": "CRM"
      }
    ],
    "image": []
  }
}