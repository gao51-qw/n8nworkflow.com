{
  "id": 9039,
  "slug": "9039",
  "title": "Create secure human-in-the-loop approval flows with Postgres and Telegram",
  "description": "## ğŸ” Human-in-the-Loop Approval Flow (n8n + Postgres + Telegram)\n\n### ğŸ‘¥ Whoâ€™s it for  \nTeams that need a **manager approval step** before a ticket or request can change status. Great for internal ops, IT requests, or any workflow where â€œa human must sign off.â€\n\n### âš¡ What it does  \n- ğŸ“¨ Manager receives approval/reject link  \n- ğŸ”‘ Link is signed with HMAC + expiry (secure & tamper-proof)  \n- ğŸ—„ï¸ Postgres updates the ticket status  \n- ğŸ“ Audit trail records every decision  \n- ğŸ“² Telegram notifies both manager and requester  \n- â° Expired or invalid links trigger alerts and logs  \n\n### ğŸ›  Requirements  \n- n8n instance (self-hosted)  \n- Postgres database (with `tickets`, `ticket_audit`, `workflow_errors`)  \n- Telegram bot token  \n- One environment variable set: `SECRET_KEY`  \n\n### âš™ï¸ How to set up  \n1. Set `SECRET_KEY` in `.env`  \n2. Create Postgres tables (SQL provided)  \n3. Add Telegram + Postgres credentials in n8n  \n4. Import the workflow JSON  \n5. Test by opening an approval/reject link in your browser  \n\n### ğŸ¨ How to customize  \n- Change who the â€œmanagerâ€ is (currently hardcoded in the Code node).  \n- Swap Telegram for Slack or email notifications.  \n- Extend the audit schema to include more metadata (IP, username).  \n",
  "featuredImage": "/data/workflows/9039/9039.webp",
  "author": {
    "id": 101,
    "slug": "mohammad-1378",
    "name": "Mohammad",
    "avatar": ""
  },
  "categories": [
    "Ticket Management"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 278,
  "downloads": 27,
  "createdAt": "2025-09-28T11:02:52.243Z",
  "updatedAt": "2026-01-16T08:58:48.566Z",
  "publishedAt": "2025-09-28T11:02:52.243Z",
  "nodes": 26,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9039"
}