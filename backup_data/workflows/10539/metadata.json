{
  "id": 10539,
  "slug": "10539",
  "title": "Generate empathetic customer replies with Claude AI and auto-escalation",
  "description": "\n## ğŸ§  Overview\nGenerate empathetic, professional reply drafts for customer or user messages.  \nThe workflow detects **sentiment**, **tone**, and **risk level**, drafts a concise response, sanitizes PII/links/emojis, and **auto-escalates** risky or low-confidence cases to human review.\n\n---\n\n## âš™ï¸ How It Works\n1. **Input** â€” Manual Test or Webhook Trigger  \n2. **AI Agent (Empathy)** â€” returns `{ sentiment, tone, reply, confidence, needs_handover }`  \n3. **Post-Process & Sanitize** â€” removes URLs/hashtags, masks PII, caps length  \n4. **Risk & Handover Rules** â€” checks confidence threshold, risk words, and negativity  \n5. **Routing** â€” auto-send safe replies or flag to **Needs Review**\n\n---\n\n## ğŸ§© Setup Instructions (3â€“5 min)\n- Open **Set Config1** and adjust:\n  - `MAX_LEN` (default 600)\n  - `ADD_FOLLOWUP_QUESTION` (true/false)\n  - `FORMALITY` (`auto | casual | polite`)\n  - `EMOJI_ALLOWED` (true/false), `BLOCK_LINKS` (true/false)\n  - `RISK_WORDS` (e.g., `refund, lawsuit, self-harm`)\n- Connect **Anthropic credential** to **Anthropic Chat Model**\n- *(Optional)* Replace **Manual Trigger** with **Webhook Trigger** for real-time use\n\n&gt; Tip: If you need to show literal angle brackets in messages, use backticks like ``&lt;example&gt;`` (no HTML entities needed).\n\n---\n\n## ğŸ“š Use Cases\n### 1) SaaS Billing Complaints\n- **Input:** â€œI was billed after canceling. This is unacceptable.â€  \n- **Output:** Calm, apologetic reply with refund steps; escalates if `refund` is in `RISK_WORDS` or `confidence &lt; 0.45`.\n\n### 2) Product Bug Reports\n- **Input:** â€œUpload fails on large files since yesterday.â€  \n- **Output:** Acknowledges impact, requests logs, offers workaround; routes to auto-send if low risk and high confidence.\n\n### 3) Delivery/Logistics Delays\n- **Input:** â€œMy order is late again. Should I file a complaint?â€  \n- **Output:** Empathetic apology, ETA guidance, partial credit policy note; escalates if language indicates legal action.\n\n### 4) Community Moderation / Abuse\n- **Input:** â€œSupport is uselessâ€”youâ€™re all scammers.â€  \n- **Output:** De-escalating, policy-aligned response; auto-flags due to negative sentiment + risk keyword match.\n\n### 5) Safety / Self-harm Mentions\n- **Input:** â€œI feel like hurting myself if this isnâ€™t fixed.â€  \n- **Output:** **Immediate escalation**, inserts approved resources; never auto-sends.\n\n---\n\n## ğŸš¨ Auto-Escalation Rules (defaults)\n- **Negative** sentiment\n- Message matches any `RISK_WORDS`\n- `confidence &lt; 0.45`\n- Mentions of **legal**, **harassment**, or **self-harm** context\n\n---\n\n## ğŸ§ª Notes & Best Practices\n- ğŸ” No hardcoded API keys â€” use **n8n Credentials**\n- ğŸ§­ Tune thresholds and `RISK_WORDS` to your org policy\n- ğŸ§© Works on self-hosted or cloud n8n\n- âœ… Treat outputs as **drafts**; ship after human/policy review\n\n---\n\n## ğŸ”— Resources\n- **GitHub (template JSON):** https://github.com/yskmtb0714/n8n-workflows/blob/main/empathy-reply-assistant.json",
  "featuredImage": "/data/workflows/10539/10539.webp",
  "author": {
    "id": 101,
    "slug": "yusuke-matsuba",
    "name": "Yusuke",
    "avatar": ""
  },
  "categories": [
    "Ticket Management",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 32,
  "downloads": 3,
  "createdAt": "2025-11-05T15:11:52.947Z",
  "updatedAt": "2026-01-16T09:05:24.348Z",
  "publishedAt": "2025-11-05T15:11:52.947Z",
  "nodes": 21,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10539"
}