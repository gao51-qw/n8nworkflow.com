{
  "id": 10141,
  "slug": "10141",
  "title": "Send WooCommerce cross-sell offers to customers via WhatsApp using Rapiwa API",
  "description": "## Who Is This For?\nThis n8n workflow enables **automated cross-selling** by identifying each **WooCommerce customer's** most frequently purchased product, **finding a related product to recommend**, and **sending a personalized WhatsApp message** using the **Rapiwa API**. It also verifies whether the user's number is WhatsApp-enabled before sending, and logs both successful and unsuccessful attempts to Google Sheets for tracking.\n\n\n## What This Workflow Does\n- Retrieves all paying customers from your WooCommerce store  \n- Identifies each customer's most purchased product  \n- Finds the latest product in the same category as their most purchased item  \n- Cleans and verifies customer phone numbers for WhatsApp compatibility  \n- Sends personalized WhatsApp messages with product recommendations  \n- Logs all activities to Google Sheets for tracking and analysis  \n- Handles both verified and unverified numbers appropriately  \n\n## Key Features\n- **Customer Segmentation:** Automatically identifies paying customers from your WooCommerce store  \n- **Product Analysis:** Determines each customer's most purchased product  \n- **Smart Recommendations:** Finds the latest products in the same category as customer favorites  \n- **WhatsApp Integration:** Uses Rapiwa API for message delivery  \n- **Phone Number Validation:** Verifies WhatsApp numbers before sending messages  \n- **Dual Logging System:** Tracks both successful and failed message attempts in Google Sheets  \n- **Rate Limiting:** Uses batching and wait nodes to prevent API overload  \n- **Personalized Messaging:** Includes customer name and product details in messages  \n\n## Requirements\n- WooCommerce store with API access  \n- Rapiwa account with API access for WhatsApp verification and messaging  \n- Google account with Sheets access  \n- Customer phone numbers in WooCommerce (stored in `billing.phone` field)  \n\n## How to Use — Step-by-Step Setup\n### 1. Credentials Setup\n - **WooCommerce API:** Configure WooCommerce API credentials in n8n (e.g., \"WooCommerce (get customer)\" and \"WooCommerce (get customer data)\")  \n - **Rapiwa Bearer Auth:** Create an HTTP Bearer credential with your Rapiwa API token  \n - **Google Sheets OAuth2:** Set up OAuth2 credentials for Google Sheets access  \n\n### 2. Configure Google Sheets\n - Ensure your sheet has the required columns as specified in the **Google Sheet Column Structure** section  \n\n### 3. Verify Code Nodes\n - **Code (get paying_customer):** Filters customers to include only those who have made purchases  \n - **Get most buy product id & Clear Number:** Identifies the most purchased product and cleans phone numbers  \n\n### 4. Configure HTTP Request Nodes\n - **Get customer data:** Verify the WooCommerce API endpoint for retrieving customer orders  \n - **Get specific product data:** Verify the WooCommerce API endpoint for product details  \n - **Get specific product recommend latest product:** Verify the WooCommerce API endpoint for finding latest products by category  \n - **Check valid WhatsApp number Using Rapiwa:** Verify the Rapiwa endpoint for WhatsApp number validation  \n - **Rapiwa Sender:** Verify the Rapiwa endpoint for sending messages  \n\n## Google Sheet Required Columns\nYou’ll need two Google Sheets (or two tabs in one spreadsheet):\n**A Google Sheet formatted like this** ➤ [sample](https://docs.google.com/spreadsheets/d/1yTxkAM1kq2udndvG5M2jUuQCY8SkvoLgrspQ100LvKs/edit?usp=sharing)\nThe workflow uses a Google Sheet with the following columns to track coupon distribution:\nBoth must have the following headers (match exactly):\n\n| name       | number      | email  | address1    | price | suk | title   | product link   | validity   | staus    |\n| ---------- | ------------- | ----------------------------------------------- | ----------- | ----- | --- | ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------- | -------- |\n| Abdul Mannan | 8801322827799 | [contact@spagreen.net](mailto:contact@spagreen.net) | mirpur dohs | 850   |     | Sharp Most Demanding Hoodie x Nike |  [https://your_shop_domain/p-img-nike](https:your_shop_domain/p-img-nike-3/)  | verified   | sent     |\n| Abdul Mannan | 8801322827799 | [contact@spagreen.net](mailto:contact@spagreen.net) | mirpur dohs | 850   |     | Sharp Most Demanding Hoodie x Nike | [https://your_shop_domain/p-img-nike](https:your_shop_domain/p-img-nike-3/) | unverified | not sent |\n| Abdul Mannan | 8801322827799 | [contact@spagreen.net](mailto:contact@spagreen.net) | mirpur dohs | 850   |     | Sharp Most Demanding Hoodie x Nike | [https://your_shop_domain/p-img-nike](https:your_shop_domain/p-img-nike-3/) | verified   | sent     |\n\n\n## Important Notes\n- **Phone Number Format:** The workflow cleans phone numbers by removing all non-digit characters. Ensure your WooCommerce phone numbers are in a compatible format.  \n- **API Rate Limits:** Rapiwa and WooCommerce APIs have rate limits. Adjust batch sizes and wait times accordingly.  \n- **Data Privacy:** Ensure compliance with data protection regulations when sending marketing messages.  \n- **Error Handling:** The workflow logs unverified numbers but doesn't have extensive error handling. Consider adding error notifications for failed API calls.  \n- **Product Availability:** The workflow recommends the latest product in a category, but doesn't check if it's in stock. Consider adding stock status verification.  \n- **Testing:** Always test with a small batch before running the workflow on your entire customer list.  \n\n## Useful Links\n- **Dashboard:** [https://app.rapiwa.com](https://app.rapiwa.com/login)\n- **Official Website:** [https://rapiwa.com](https://rapiwa.com/)\n- **Documentation:** [https://docs.rapiwa.com](https://docs.rapiwa.com/)\n\n## Support & Help\n- **WhatsApp**: [Chat on WhatsApp](https://wa.me/8801322827799)\n- **Discord**: [SpaGreen Community](https://discord.gg/SsCChWEP)\n- **Facebook Group**: [SpaGreen Support](https://www.facebook.com/groups/spagreenbd)\n- **Website**: [https://spagreen.net](https://spagreen.net)\n- **Developer Portfolio**: [Codecanyon SpaGreen](https://codecanyon.net/user/spagreen/portfolio)\n\n",
  "featuredImage": "/data/workflows/10141/10141.webp",
  "author": {
    "id": 101,
    "slug": "rapiwa",
    "name": "Rapiwa",
    "avatar": ""
  },
  "categories": [
    "Social Media"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 180,
  "downloads": 18,
  "createdAt": "2025-10-25T05:02:48.956Z",
  "updatedAt": "2026-01-16T09:03:39.153Z",
  "publishedAt": "2025-10-25T05:02:48.956Z",
  "nodes": 23,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10141"
}