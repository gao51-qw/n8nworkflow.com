{
  "id": 11197,
  "slug": "11197",
  "title": "Build a RAG system by uploading PDFs to the Google Gemini File Search Store",
  "description": "This workflow implements a **Retrieval-Augmented Generation (RAG)** system using **Google Gemini's File Search API**. It allows users to upload files to a dedicated search store and then ask questions about their content in a chat interface. \n\nThe system automatically retrieves relevant information from the uploaded files to provide accurate, context-aware answers.\n\n---\n\n### **Key Advantages**\n\n**1. ✅ Seamless Integration of File Upload + AI Context**\n\nThe workflow automates the entire lifecycle:\n\n* Upload file\n* Index file\n* Retrieve content for AI chat\n\nEverything happens inside one n8n automation, without manual actions.\n\n**2. ✅ Automatic Retrieval for Every User Query**\n\nThe AI agent is instructed to always query the Search Store.\nThis ensures:\n\n* More accurate answers\n* Context-aware responses\n* Ability to reference the exact content the user has uploaded\n\nPerfect for knowledge bases, documentation Q&A, internal tools, and support.\n\n**3. ✅ Reusable Search Store for Multiple Sessions**\n\nOnce created, the Search Store can be reused:\n\n* Multiple files can be imported\n* Many queries can leverage the same indexed data\n\nA sustainable foundation for scalable RAG operations.\n\n**4. ✅ Visual and Modular Workflow Design**\n\nThanks to n8n’s node-based flow:\n\n* Each step is clearly separated\n* Easy to debug\n* Easy to expand (e.g., adding authentication, connecting to a database, notifications, etc.)\n\n\n**5. ✅ Supports Both Form Submission and Chat Messages**\n\nThe workflow is built with two entry points:\n\n* A form for uploading files\n* A chat-triggered entry point for RAG conversations\n\nMeaning the system can be embedded in multiple user interfaces.\n\n**6. ✅ Compliant and Efficient Interaction With Gemini APIs**\n\nYour workflow respects the structure of Gemini’s File Search API:\n\n* `/fileSearchStores` (create store)\n* `upload` endpoint\n* `importFile` endpoint\n* `generateContent` with file search tools\n\nThis ensures compatibility and future expandability.\n\n\n**7. ✅ Memory-Aware Conversations**\n\nWith the **Memory Buffer** node, the chat session preserves context across messages—providing a more natural and sophisticated conversational experience.\n\n---\n\n### **How it Works**\n\n#### **STEP 1 - Create a new Search Store**\n\nTriggered manually via the *“Execute workflow”* node, this step sends a request to the Gemini API to create a **FileSearch Store**, which acts as a private vector index for your documents.\n\n* The store name is then saved using a *Set* node.\n* This store will later be used for file import and retrieval.\n\n#### **STEP 2 - Upload and import a file into the Search Store**\n\nWhen the form is submitted (through the *Form Trigger*), the workflow:\n\n1. **Accepts a file upload** via the form.\n2. **Uploads the file** to Gemini using the `/upload` endpoint.\n3. **Imports the uploaded file into the Search Store**, making it searchable.\n\nThis step ensures content is stored, chunked, and indexed so the AI model can retrieve relevant sections later.\n\n#### **STEP 3 -  RAG-enabled Chat with Google Gemini**\n\nWhen a chat message is received:\n\n* The workflow loads the Search Store identifier.\n* A *LangChain Agent* is used along with the **Google Gemini Chat Model**.\n* The model is configured to **always use the SearchStore tool**, so every user query is enriched by a search inside the indexed files.\n* The system retrieves relevant chunks from your documents and uses them as context for generating more accurate responses.\n\nThis creates a fully functioning **RAG chatbot** powered by Gemini.\n\n---\n\n### **Set up Steps**\n\nBefore activating this workflow, you must complete the following configuration:\n\n1.  **Google Gemini API Credentials:** Ensure you have a valid Google AI Studio API key. This key must be entered in all HTTP Request nodes (`Create Store`, `Upload File`, `Import to Store`, and `SearchStore`).\n\n2.  **Configure the Search Store:**\n    *   Manually trigger the \"Create Store\" node once via the \"Execute Workflow\" button. This will call the Gemini API to create a new File Search Store and return its resource name (e.g., `fileSearchStores/my-store-12345`).\n    *   Copy this resource name and update the **\"Get Store\"** and **\"Get Store1\"** Set nodes. Replace the placeholder value `fileSearchStores/my-store-XXX` in both nodes with the actual name of your newly created store.\n\n3.  **Deploy Triggers:** For production use, you should activate the workflow. This will generate public URLs for the **\"On form submission\"** node (for file uploads) and the **\"When chat message received\"** node (for the chat interface). These URLs can be embedded in your applications (e.g., a website or dashboard).\n\nOnce these steps are complete, the workflow is ready. Users can start uploading files via the form and then ask questions about them in the chat.\n\n---\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/). ",
  "featuredImage": "/data/workflows/11197/11197.webp",
  "author": {
    "id": 101,
    "slug": "n3witalia",
    "name": "Davide",
    "avatar": ""
  },
  "categories": [
    "Internal Wiki",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 2280,
  "downloads": 228,
  "createdAt": "2025-11-24T17:48:06.653Z",
  "updatedAt": "2026-01-16T09:07:53.086Z",
  "publishedAt": "2025-11-24T17:48:06.653Z",
  "nodes": 20,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11197"
}