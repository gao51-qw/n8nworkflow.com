{
  "workflow": {
    "id": 6502,
    "name": "Auto-send welcome messages to Vtiger CRM leads via Evolution API WhatsApp",
    "views": 965,
    "recentViews": 0,
    "totalViews": 965,
    "createdAt": "2025-07-26T23:33:23.239Z",
    "description": "## One of My Best! Send WhatsApp Greetings to New Vtiger Leads Automatically üí™üòç\n\n## ‚ö†Ô∏è This Workflow Requires a Community Nodes and a Self-Hosted n8n Instance\n\n&gt; This template uses two custom **community nodes**:\n&gt; * `n8n-nodes-vtiger-crm`\n&gt; * `n8n-nodes-evolution-api`\n&gt; You must be running **self-hosted n8n** with **Community Nodes enabled**.\n\n### üîß How to Install Community Nodes\n\n1. Go to `Settings` ‚Üí `Community Nodes`\n2. Click **Install Node**\n3. Add:\n\n```bash\nn8n-nodes-vtiger-crm\nn8n-nodes-evolution-api\n```\n\n4. Restart n8n if prompted.\n\n---\n\n## üí¨ Auto-Send WhatsApp Welcome Messages to New Leads in Vtiger CRM\n\n### Overview\n\nThis workflow sends a **personalized WhatsApp welcome message** to newly created leads in Vtiger CRM ‚Äî using **Evolution API** ‚Äî and updates the CRM record to ensure the message isn‚Äôt sent again.\n\nIt‚Äôs ideal for teams that want to **greet new leads instantly**, reduce manual effort, and automate the first touchpoint of the sales process.\n\n---\n\n### üîÑ What This Workflow Does\n\n* ‚è± Runs every 1 minute via schedule trigger\n* üì• Fetches the latest uncontacted lead from Vtiger (`cf_1090 != 1`)\n* üí¨ Sends a personalized WhatsApp message using Evolution API\n* ‚úÖ Marks the lead as ‚Äúmessaged‚Äù by updating a custom field\n\n---\n\n### üì∏ Visual Preview\n\n#### üß© Workflow Canvas\n\n![workflowwhatsapp.jpeg](fileId:1872)\n\n&gt; Full layout of the automation flow in n8n\n\n#### üí¨ Evolution API Server\n\n![EvolutionAPI server.jpeg](fileId:1873)\n\n&gt; Example of the greeting message the lead receives:\n\n```\nHi Ahmed Saadawi üòä,\n\nWe have received your interest with our services and we will contact you soon.\n\nHave a nice day üôèüíê\n```\n\n---\n\n## üõ†Ô∏è Setup Instructions\n\n### 1. Vtiger CRM Setup\n\n* Add a **custom field** (e.g. `cf_1090`) to track if a message was already sent\n* Ensure lead records contain:\n\n  * `firstname`, `lastname`, `phone`\n* Connect your **Vtiger CRM API credentials**\n\n### 2. Evolution API Setup\n\n* Install or connect to your **Evolution API instance**\n* Configure:\n\n  * `instanceName`\n  * `remoteJid` (from Vtiger lead phone)\n  * Message template (edit as needed)\n* Add your **Evolution API credentials**\n\n### 3. Customize Message\n\nEdit the message in the Evolution node to match your brand‚Äôs tone.\n\n---\n\n## üë• Who Is This For?\n\n* Sales teams needing instant CRM-to-WhatsApp follow-ups\n* Companies automating first contact with leads\n* Vtiger CRM users looking for WhatsApp engagement tools\n\n---\n\n## üîê Credentials Required\n\n* ‚úÖ Vtiger CRM API\n* ‚úÖ Evolution API (self-hosted or SaaS)\n\n---\n\n## üè∑ Tags\n\n```\nvtiger, whatsapp automation, evolution api, crm follow-up, sales automation, welcome message,\ncrm whatsapp integration, lead onboarding, no-code automation, n8n template, self-hosted n8n,\nvtiger crm automation, community nodes, whatsapp message workflow\n```\n",
    "workflow": {
      "id": "ykXuNTlTy4GTDjOE",
      "meta": {
        "instanceId": "ea2b41532677d34614d95d13d7d2ccb694657be482144baf71e7140df3b2a853",
        "templateCredsSetupCompleted": true
      },
      "name": "Auto-Send Welcome WhatsApp Message to new Vtiger Leads",
      "tags": [],
      "nodes": [
        {
          "id": "9eb3438a-721e-47b1-b05d-fbeb6e6a53f0",
          "name": "Schedule Trigger Every n Minutes",
          "type": "n8n-nodes-base.scheduleTrigger",
          "position": [
            -816,
            -208
          ],
          "parameters": {
            "rule": {
              "interval": [
                {
                  "field": "minutes",
                  "minutesInterval": 1
                }
              ]
            }
          },
          "typeVersion": 1.2
        },
        {
          "id": "7d90f8b4-a984-4532-8378-3188d80d4ebe",
          "name": "If there's a data returned",
          "type": "n8n-nodes-base.if",
          "position": [
            -368,
            -208
          ],
          "parameters": {
            "options": {},
            "conditions": {
              "options": {
                "version": 2,
                "leftValue": "",
                "caseSensitive": true,
                "typeValidation": "strict"
              },
              "combinator": "and",
              "conditions": [
                {
                  "id": "1a4121a1-3315-48c6-b319-be947242e291",
                  "operator": {
                    "type": "string",
                    "operation": "notEmpty",
                    "singleValue": true
                  },
                  "leftValue": "={{ $json.result[0].id }}",
                  "rightValue": ""
                }
              ]
            }
          },
          "typeVersion": 2.2
        },
        {
          "id": "48a1a508-3e84-4875-b34e-f5bc4a1ec6a3",
          "name": "No Operation, do nothing",
          "type": "n8n-nodes-base.noOp",
          "position": [
            -80,
            -16
          ],
          "parameters": {},
          "typeVersion": 1
        },
        {
          "id": "63514400-625b-4bd6-bbb3-8892e671d671",
          "name": "Enviar texto",
          "type": "n8n-nodes-evolution-api.evolutionApi",
          "position": [
            128,
            -352
          ],
          "parameters": {
            "resource": "messages-api",
            "remoteJid": "={{ $json.result[0].phone }}",
            "messageText": "=Hi {{ $json.result[0].firstname }} {{ $json.result[0].lastname }} üòä,\n\nWe have received your interest with our services and we well contact you soon.\n\nHave a nice day üôèüíê",
            "instanceName": "Ahmed560",
            "options_message": {}
          },
          "credentials": {
            "evolutionApi": {
              "id": "credential-id",
              "name": "evolutionApi Credential"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "7c73ab05-6c59-4f93-b354-940a2ad0e05d",
          "name": "VtigerCRM get Latest Lead",
          "type": "n8n-nodes-vtiger-crm.vtigerNode",
          "position": [
            -592,
            -208
          ],
          "parameters": {
            "query_field": "select * from Leads where cf_1090!=1 order by id desc limit 1;"
          },
          "credentials": {
            "vtigerApi": {
              "id": "credential-id",
              "name": "vtigerApi Credential"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "cecfb193-03b1-47ff-8849-d4c00a3f0bc6",
          "name": "VtigerCRM Update Lead to  Mark as Whatsapp Sent",
          "type": "n8n-nodes-vtiger-crm.vtigerNode",
          "position": [
            128,
            -176
          ],
          "parameters": {
            "operation": "update",
            "element_field": "={\n  \"cf_1090\": \"1\"\n}",
            "webservice_id_field": "={{ $json.result[0].id }}"
          },
          "credentials": {
            "vtigerApi": {
              "id": "credential-id",
              "name": "vtigerApi Credential"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "a68394bd-0580-4705-b8c8-0e5f0c033d78",
          "name": "Sticky Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -784,
            -528
          ],
          "parameters": {
            "width": 592,
            "height": 304,
            "content": "### ü§ñ Auto-Send Welcome WhatsApp Message to New Vtiger Leads  \n**(Vtiger CRM + Evolution API)**\nThis workflow runs **every 1 minute** to:\n- üì• Get the latest lead from Vtiger CRM (not yet marked as contacted)\n- üí¨ Send a **personalized welcome WhatsApp message** using Evolution API\n- ‚úÖ Update the lead record with a custom field to mark that the message was sent\n\n> üí° Requires:\n> - Evolution API (self-hosted or cloud)\n> - Community vtiger-crm and evolution-api nodes (install via Community Nodes)\n\n> üì≤ Ideal for sales or support teams who want to automatically greet new leads on WhatsApp and avoid duplicates."
          },
          "typeVersion": 1
        }
      ],
      "active": true,
      "pinData": {},
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "24911a81-1f5f-4358-af02-d6a399d9a5e0",
      "connections": {
        "VtigerCRM get Latest Lead": {
          "main": [
            [
              {
                "node": "If there's a data returned",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "If there's a data returned": {
          "main": [
            [
              {
                "node": "VtigerCRM Update Lead to  Mark as Whatsapp Sent",
                "type": "main",
                "index": 0
              },
              {
                "node": "Enviar texto",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "No Operation, do nothing",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Schedule Trigger Every n Minutes": {
          "main": [
            [
              {
                "node": "VtigerCRM get Latest Lead",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "VtigerCRM Update Lead to  Mark as Whatsapp Sent": {
          "main": [
            []
          ]
        }
      }
    },
    "lastUpdatedBy": 29,
    "workflowInfo": {
      "nodeCount": 7,
      "nodeTypes": {
        "n8n-nodes-base.if": {
          "count": 1
        },
        "n8n-nodes-base.noOp": {
          "count": 1
        },
        "n8n-nodes-base.stickyNote": {
          "count": 1
        },
        "n8n-nodes-base.scheduleTrigger": {
          "count": 1
        },
        "n8n-nodes-vtiger-crm.vtigerNode": {
          "count": 2
        },
        "n8n-nodes-evolution-api.evolutionApi": {
          "count": 1
        }
      }
    },
    "status": "published",
    "user": {
      "name": "Ahmed Saadawi",
      "username": "ahmedsaadawi",
      "bio": "CRM consultant and automation expert with 15+ years of experience building AI-powered, no-code workflows for sales, support, and operations. Open to collaboration or custom solutions ‚Äî let‚Äôs connect!",
      "verified": true,
      "links": [
        "https://www.linkedin.com/in/ahmed-saadawi13"
      ],
      "avatar": "https://gravatar.com/avatar/10c4e71b9e9fa82b438890cfd1593ba44d1a304b6dd5823720c781846364c66d?r=pg&d=retro&size=200"
    },
    "nodes": [
      {
        "id": 20,
        "icon": "fa:map-signs",
        "name": "n8n-nodes-base.if",
        "codex": {
          "data": {
            "alias": [
              "Router",
              "Filter",
              "Condition",
              "Logic",
              "Boolean",
              "Branch"
            ],
            "details": "The IF node can be used to implement binary conditional logic in your workflow. You can set up one-to-many conditions to evaluate each item of data being inputted into the node. That data will either evaluate to TRUE or FALSE and route out of the node accordingly.\n\nThis node has multiple types of conditions: Bool, String, Number, and Date & Time.",
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                  "icon": "üè≠",
                  "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
                },
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "‚òÄÔ∏è",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "üß¨",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/create-a-toxic-language-detector-for-telegram/",
                  "icon": "ü§¨",
                  "label": "Create a toxic language detector for Telegram in 4 step"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                  "icon": "üîó",
                  "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
                },
                {
                  "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                  "icon": "‚öôÔ∏è",
                  "label": "Automate your data processing pipeline in 9 steps"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "üë•",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "‚ö°Ô∏è",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "üí°",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/automation-for-maintainers-of-open-source-projects/",
                  "icon": "üè∑Ô∏è",
                  "label": "How to automatically manage contributions to open-source projects"
                },
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " üï∏Ô∏è",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ü§ñ",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                  "icon": "üß†",
                  "label": "Why this Product Manager loves workflow automation with n8n"
                },
                {
                  "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                  "icon": "üôå",
                  "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "üé°",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                  "icon": "üéñ",
                  "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.if/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Flow"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "If",
          "color": "#408000"
        },
        "iconData": {
          "icon": "map-signs",
          "type": "icon"
        },
        "displayName": "If",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 26,
        "icon": "fa:arrow-right",
        "name": "n8n-nodes-base.noOp",
        "codex": {
          "data": {
            "alias": [
              "nothing"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                  "icon": "üè≠",
                  "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
                },
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "‚òÄÔ∏è",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/create-a-toxic-language-detector-for-telegram/",
                  "icon": "ü§¨",
                  "label": "Create a toxic language detector for Telegram in 4 step"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                  "icon": "‚öôÔ∏è",
                  "label": "Automate your data processing pipeline in 9 steps"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "üë•",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "‚ö°Ô∏è",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ü§ñ",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                  "icon": "üôå",
                  "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "üé°",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                  "icon": "üéñ",
                  "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.noop/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"organization\"]",
        "defaults": {
          "name": "No Operation, do nothing",
          "color": "#b0b0b0"
        },
        "iconData": {
          "icon": "arrow-right",
          "type": "icon"
        },
        "displayName": "No Operation, do nothing",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 565,
        "icon": "fa:sticky-note",
        "name": "n8n-nodes-base.stickyNote",
        "codex": {
          "data": {
            "alias": [
              "Comments",
              "Notes",
              "Sticky"
            ],
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Sticky Note",
          "color": "#FFD233"
        },
        "iconData": {
          "icon": "sticky-note",
          "type": "icon"
        },
        "displayName": "Sticky Note",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 839,
        "icon": "fa:clock",
        "name": "n8n-nodes-base.scheduleTrigger",
        "codex": {
          "data": {
            "alias": [
              "Time",
              "Scheduler",
              "Polling",
              "Cron",
              "Interval"
            ],
            "resources": {
              "generic": [],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0"
          }
        },
        "group": "[\"trigger\",\"schedule\"]",
        "defaults": {
          "name": "Schedule Trigger",
          "color": "#31C49F"
        },
        "iconData": {
          "icon": "clock",
          "type": "icon"
        },
        "displayName": "Schedule Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      }
    ],
    "categories": [
      {
        "id": 38,
        "name": "Lead Nurturing"
      }
    ],
    "image": [
      {
        "id": 1872,
        "url": "https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/workflow_whatsapp_9c15e9c87c.jpeg"
      },
      {
        "id": 1873,
        "url": "https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Evolution_API_server_fc085d7ba0.jpeg"
      }
    ]
  }
}