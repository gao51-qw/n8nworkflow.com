{
  "workflow": {
    "id": 11653,
    "name": "Process OCR documents from Google Drive into searchable knowledge base with OpenAI & Pinecone",
    "views": 144,
    "recentViews": 1,
    "totalViews": 144,
    "createdAt": "2025-12-10T11:58:13.801Z",
    "description": "## How it works\nThis workflow automates a full RAG ingestion pipeline. When a new OCR JSON file is added to a Google Drive folder, the workflow extracts lesson metadata, parses and cleans the Arabic text, generates semantic chunks, creates AI embeddings, and stores them in a Pinecone vector index. After processing, the file is automatically moved to an archive folder to prevent duplicates.\n\n## Set up steps\nFollow the sticky notes inside the workflow for detailed instructions.\n\n1. Connect your Google Drive credentials.\n2. Replace the input folder ID and archive folder ID with your own.\n3. Connect your OpenAI account for embeddings.\n4. Connect your Pinecone API key and select your index.\n\nThe workflow is ready to run once credentials and folder paths are configured.\n",
    "workflow": {
      "id": "",
      "meta": {
        "instanceId": "",
        "templateCredsSetupCompleted": true
      },
      "name": "Auto-RAG: Google Drive to Pinecone Vector Store",
      "tags": [],
      "nodes": [
        {
          "id": "3f932fc0-5749-4cb9-9248-90ac63cbdff8",
          "name": "Download file",
          "type": "n8n-nodes-base.googleDrive",
          "position": [
            -816,
            -160
          ],
          "parameters": {
            "fileId": {
              "__rl": true,
              "mode": "id",
              "value": "={{ $('Watch Drive Folder (new files)').first().json.id }}"
            },
            "options": {
              "fileName": "={{ $('Watch Drive Folder (new files)').first().json.name }}"
            },
            "operation": "download"
          },
          "credentials": {
            "googleDriveOAuth2Api": {
              "id": "",
              "name": ""
            }
          },
          "typeVersion": 3
        },
        {
          "id": "95f22ca5-7f79-4fed-9e8d-091bbbc2a35a",
          "name": "Default Data Loader",
          "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
          "position": [
            320,
            96
          ],
          "parameters": {
            "options": {
              "metadata": {
                "metadataValues": [
                  {
                    "name": "title_ar",
                    "value": "={{ $json.metadata.title_ar }}"
                  },
                  {
                    "name": "lesson_formatted",
                    "value": "={{ $json.metadata.lesson_formatted }}"
                  },
                  {
                    "name": "book_id",
                    "value": "={{ $json.metadata.book_id }}"
                  },
                  {
                    "name": "grade",
                    "value": "={{ $json.metadata.grade }}"
                  },
                  {
                    "name": "lang",
                    "value": "={{ $json.metadata.lang }}"
                  },
                  {
                    "name": "field",
                    "value": "={{ $json.metadata.field }}"
                  },
                  {
                    "name": "source_file",
                    "value": "={{ $json.metadata.source_file }}"
                  },
                  {
                    "name": "tags",
                    "value": "={{ $('Filename ‚Üí Lesson Metadata').item.json.tags }}"
                  },
                  {
                    "name": "searchable_terms",
                    "value": "={{ $('Filename ‚Üí Lesson Metadata').item.json.searchable_terms }}"
                  }
                ]
              },
              "splitPages": false
            },
            "textSplittingMode": "custom"
          },
          "typeVersion": 1.1
        },
        {
          "id": "7471c670-fe8f-40da-b2aa-efca5a1655c8",
          "name": "Recursive Character Text Splitter",
          "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
          "position": [
            320,
            336
          ],
          "parameters": {
            "options": {},
            "chunkSize": 1200,
            "chunkOverlap": 150
          },
          "typeVersion": 1
        },
        {
          "id": "69b191fb-9605-4c08-b1c3-abdc3fbf1d10",
          "name": "Sticky Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -2080,
            -304
          ],
          "parameters": {
            "width": 576,
            "height": 384,
            "content": "## Google Drive ‚Üí Pinecone Automation\nUploads any OCR JSON file from Google Drive, extracts text and lesson details, converts them into clean chunks, creates AI embeddings, and stores them for fast semantic search. Automatically archives processed files to keep your workspace clean.\n"
          },
          "typeVersion": 1
        },
        {
          "id": "e5898c12-5b1c-4587-b94a-7017371e9b7d",
          "name": "Watch Drive Folder (new files)",
          "type": "n8n-nodes-base.googleDriveTrigger",
          "position": [
            -1296,
            -160
          ],
          "parameters": {
            "event": "fileCreated",
            "options": {},
            "pollTimes": {
              "item": [
                {
                  "mode": "everyMinute"
                }
              ]
            },
            "triggerOn": "specificFolder",
            "folderToWatch": {
              "__rl": true,
              "mode": "list",
              "value": "YOUR_INPUT_FOLDER_ID",
              "cachedResultUrl": "",
              "cachedResultName": ""
            }
          },
          "credentials": {
            "googleDriveOAuth2Api": {
              "id": "",
              "name": ""
            }
          },
          "typeVersion": 1
        },
        {
          "id": "ce7a1d5b-ce96-4cf0-abcb-6117f12db462",
          "name": "Filename ‚Üí Lesson Metadata",
          "type": "n8n-nodes-base.code",
          "position": [
            -1040,
            -160
          ],
          "parameters": {
            "jsCode": "// Get filename from previous \"Download file\" node or current item\nconst rawName =\n  $json.name ||\n  ($binary?.data?.fileName) ||\n  ($binary?.data_0?.fileName) ||\n  \"\";\n\n// ---- Normalize name: strip path, extension, GCS prefix, and _output- suffix\nfunction cleanBase(n) {\n  if (!n) return \"\";\n\n  // 1) ÿÆŸèÿØ ÿßŸÑÿßÿ≥ŸÖ ŸÅŸÇÿ∑ ŸÖŸÜ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ≥ÿßÿ±\n  let name = String(n).split(\"/\").pop();\n\n  // 2) ÿ¥ŸäŸÑ ÿßŸÑÿßŸÖÿ™ÿØÿßÿØ .json (ŸÑŸà ŸÖŸàÿ¨ŸàÿØ)\n  name = name.replace(/\\.json$/i, \"\");\n\n  // 3) ÿ¥ŸäŸÑ ÿ£Ÿä ÿ¨ÿ≤ÿ° ŸÖŸÜ ÿ£ŸàŸÑ _output- ŸÑÿ¢ÿÆÿ± ÿßŸÑÿ≥ŸÑÿ≥ŸÑÿ© (ÿÆÿßÿµÿ© Vision)\n  name = name.replace(/_output-.*$/i, \"\");\n\n  // 4) ÿ®ÿπÿ∂ ÿßŸÑŸÄ generators ÿ®Ÿäÿ∂ŸäŸÅŸàÿß ÿ®ÿßÿØÿ¶ÿ© ŸÇÿ®ŸÑ arabic_\n  // ÿ¥ŸäŸÑ ÿ£Ÿä ÿ≠ÿßÿ¨ÿ© ŸÇÿ®ŸÑ ÿ£ŸàŸÑ ÿ∏ŸáŸàÿ± ŸÑŸÄ \"arabic_\"\n  const pivot = name.indexOf(\"arabic_\");\n  if (pivot > 0) name = name.slice(pivot);\n\n  // ŸÖÿ´ÿßŸÑ ÿßŸÑŸÜÿßÿ™ÿ¨:\n  // arabic_g12_ar_lesson01_ÿßÿ±ÿßÿØŸá-ÿßŸÑÿ™ÿ∫ŸäŸäÿ±_ÿßŸÑŸÇÿ±ÿßÿ°Ÿá\n  return name;\n}\n\nconst base = cleanBase(rawName);\n\n// ÿ£ŸÖÿ´ŸÑÿ© ÿ®ÿπÿØ ÿßŸÑÿ™ŸÜÿ∏ŸäŸÅ:\n// arabic_g12_ar_lesson01_ÿßÿ±ÿßÿØŸá-ÿßŸÑÿ™ÿ∫ŸäŸäÿ±_ÿßŸÑŸÇÿ±ÿßÿ°Ÿá\n// arabic_g12_ar_lesson02_ÿßÿ®Ÿà-ÿßŸÑÿ±Ÿäÿ≠ÿßŸÜ-ÿßŸÑÿ®Ÿäÿ±ŸàŸÜŸä_ÿßŸÑŸÇÿ±ÿßÿ°Ÿá\n// arabic_g12_ar_lesson03_ÿßŸÑŸÇÿØÿ≥-ŸÖÿØŸäŸÜÿ©-ÿπÿ±ÿ®Ÿäÿ©-ÿßÿ≥ŸÑÿßŸÖŸäÿ©_ÿßŸÑŸÇÿ±ÿßÿ°Ÿá\n\nconst re = new RegExp(\n  '^' +\n    '(?<subject>[a-z]+)_' +          // arabic\n    '(?<grade>g\\\\d{2})_' +           // g12\n    '(?<lang>[a-z]+)_' +             // ar\n    'lesson(?<lesson>\\\\d{2})_' +     // lesson01\n    '(?<title_ar>.+?)_' +            // ÿßÿ±ÿßÿØŸá-ÿßŸÑÿ™ÿ∫ŸäŸäÿ± (ŸÇÿØ Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿ¥ÿ±ÿ∑ÿßÿ™)\n    '(?<field>[^_]+)' +              // ÿßŸÑŸÇÿ±ÿßÿ°Ÿá (ÿ®ÿØŸàŸÜ underscores)\n  '$',\n  'u' // Unicode\n);\n\nconst m = base.match(re);\n\nif (!m) {\n  return [{\n    json: {\n      meta_error: 'filename_not_matched',\n      source_file: rawName,\n      cleaned_base: base,\n    },\n  }];\n}\n\nconst { subject, grade, lang, title_ar, field } = m.groups;\nconst lesson = m.groups.lesson ? Number(m.groups.lesson) : null;\nconst grade_num = Number(grade.replace(/^g/i, ''));\n\n// ÿ™ŸÜÿ∏ŸäŸÅÿßÿ™ ÿ®ÿ≥Ÿäÿ∑ÿ©\nconst clean_title_ar = title_ar ? title_ar.replace(/-/g, ' ') : '';\nconst clean_field = field ? field.replace(/-/g, ' ') : '';\n\n// ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿßÿØÿ©\nconst subjectInfo = {\n  arabic: {\n    subject_ar: 'ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',\n    subject_en: 'Arabic Language',\n  },\n};\n\nconst currentSubject = subjectInfo[subject] || {\n  subject_ar: subject,\n  subject_en: subject,\n};\n\n// ÿ™ÿ≠ÿØŸäÿØ ŸÜŸàÿπ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿ¨ÿßŸÑ\nconst fieldTypes = {\n  'ÿßŸÑŸÇÿ±ÿßÿ°Ÿá': 'reading',\n  'ÿßŸÑŸÇÿ±ÿßÿ°ÿ©': 'reading',\n  'ÿßŸÑŸÜÿ≠Ÿà': 'grammar',\n  'ÿßŸÑÿ®ŸÑÿßÿ∫ÿ©': 'rhetoric',\n  'ÿßŸÑŸÜÿµŸàÿµ': 'texts',\n  'ÿßŸÑÿ£ÿØÿ®': 'literature',\n};\n\nconst content_type = fieldTypes[clean_field] || 'general';\n\n// ÿßÿ≥ŸÖ ÿßŸÑŸÄ PDF ÿßŸÑÿ£ÿµŸÑŸä (ÿ®ÿπÿØ ÿßŸÑÿ™ŸÜÿ∏ŸäŸÅ)\nconst source_pdf = `${base}.pdf`;\n\nreturn [{\n  json: {\n    // Basic info\n    subject,                                // \"arabic\"\n    subject_ar: currentSubject.subject_ar,  // \"ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©\"\n    subject_en: currentSubject.subject_en,  // \"Arabic Language\"\n    grade,                                  // \"g12\"\n    grade_num,                              // 12\n    grade_ar: 'ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÑÿ´ ÿßŸÑÿ´ÿßŸÜŸàŸä',\n    lang,                                   // \"ar\"\n\n    // Lesson info\n    lesson,                                 // 1, 2, 3...\n    lesson_formatted: `lesson${String(lesson).padStart(2, '0')}`, // \"lesson01\"\n\n    // Content info\n    title_ar: clean_title_ar,               // \"ÿ•ÿ±ÿßÿØÿ© ÿßŸÑÿ™ÿ∫ŸäŸäÿ±\"\n    field: clean_field,                     // \"ÿßŸÑŸÇÿ±ÿßÿ°ÿ©\"\n    field_en: content_type,                 // \"reading\"\n\n    // Metadata for Pinecone\n    book_id: `${subject}_${grade}_${lang}_2025`,        // \"arabic_g12_ar_2025\"\n    namespace: `${subject}-${grade}-${lang}-update`,    // \"arabic-g12-ar-update\"\n    document_type: 'lesson_material',\n    curriculum: 'Egyptian Ministry of Education',\n\n    // Source info\n    source_file: source_pdf,                // ÿßŸÑŸÄ PDF ÿßŸÑÿ£ÿµŸÑŸä\n    source_json: rawName,                   // ÿßÿ≥ŸÖ JSON ÿßŸÑÿ≠ÿßŸÑŸä\n    created_via: 'gdrive_ingest',\n\n    // Additional searchable fields\n    searchable_terms: [\n      clean_title_ar,\n      clean_field,\n      `ÿßŸÑÿØÿ±ÿ≥ ${lesson}`,\n      `lesson ${lesson}`,\n      currentSubject.subject_ar,\n    ].filter(Boolean),\n\n    // Tags\n    tags: [\n      subject,\n      grade,\n      content_type,\n      'egyptian_curriculum',\n      'high_school',\n    ],\n  },\n}];\n"
          },
          "typeVersion": 2
        },
        {
          "id": "c856144d-e4cb-41b7-bb5e-6d0184edff1d",
          "name": "Vision JSON ‚Üí Clean Text Chunks",
          "type": "n8n-nodes-base.code",
          "position": [
            -368,
            -160
          ],
          "parameters": {
            "jsCode": "// ==== ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ field ŸÖŸÜ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÑŸÅ ====\nfunction extractFieldFromBaseName(baseName) {\n  const parts = baseName.split('_');\n  const lastPart = parts[parts.length - 1];\n\n  // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ¥ÿ±ÿ∑ÿßÿ™ ŸÑŸÖÿ≥ÿßŸÅÿßÿ™ Ÿàÿ™ŸÜÿ∏ŸäŸÅ\n  let field = lastPart ? lastPart.replace(/-/g, ' ') : 'ÿßŸÑŸÇÿ±ÿßÿ°ÿ©';\n\n  // mapping ŸÑŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©\n  const fieldMap = {\n    'ÿßŸÑŸÇÿ±ÿßÿ°Ÿá': 'ÿßŸÑŸÇÿ±ÿßÿ°ÿ©',\n    'ÿßŸÑÿßÿØÿ® Ÿà ÿßŸÑŸÜÿµŸàÿµ': 'ÿßŸÑÿ£ÿØÿ®',\n    'ÿßŸÑŸÜÿ´ÿ± Ÿà ÿßŸÑŸÅŸÜŸàŸÜ': 'ÿßŸÑŸÜÿ´ÿ±',\n    'ÿßŸÑÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑŸÑÿ∫ŸàŸäÿ©': 'ÿßŸÑÿ™ÿØÿ±Ÿäÿ®ÿßÿ™',\n    'ÿßŸÑŸÇÿµŸá': 'ÿßŸÑŸÇÿµÿ©',\n    'ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿπÿßŸÖÿ©': 'ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™',\n  };\n\n  return fieldMap[field] || field;\n}\n\n// ==== ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÄ JSON ŸÖŸÜ ÿßŸÑŸÄ Binary ====\nconst item = $input.first();\nconst binContainer = item.binary || $binary || {};\nconst binKey = Object.keys(binContainer)[0];\nconst bin = binKey ? binContainer[binKey] : null;\n\nif (!bin || !bin.data) {\n  return [\n    {\n      json: {\n        error: 'no_binary_data',\n        hint:\n          'ÿ™ÿ£ŸÉÿØ ÿ•ŸÜ Google Drive ‚Üí Operation = Download Ÿàÿ•ŸÜ Binary Property = data',\n        gotBinaryKeys: Object.keys(binContainer),\n      },\n    },\n  ];\n}\n\nconst fname = bin.fileName || item.json?.name || 'file.json';\nconst buf = Buffer.from(bin.data, 'base64');\n\nlet docAll;\ntry {\n  docAll = JSON.parse(buf.toString('utf8'));\n} catch (e) {\n  return [{ json: { error: 'invalid_json', message: String(e) } }];\n}\n\n// ==== ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÜÿµ ŸÖŸÜ Vision / Document AI ====\nfunction extractTextFromVision(o) {\n  if (!o) return '';\n\n  // 1) Vision async PDF: responses[].fullTextAnnotation.text\n  if (Array.isArray(o.responses) && o.responses.length) {\n    const parts = [];\n\n    for (const r of o.responses) {\n      const t1 = r?.fullTextAnnotation?.text || '';\n      const t2 = r?.textAnnotations?.[0]?.description || '';\n      const t = t1 && t1.trim() ? t1 : t2 || '';\n\n      if (t && t.trim()) parts.push(t);\n    }\n\n    if (parts.length) return parts.join('\\n');\n  }\n\n  // 2) Document AI (document.text)\n  if (typeof o.document?.text === 'string' && o.document.text.trim()) {\n    return o.document.text;\n  }\n\n  // 3) fallback ŸÇÿØŸäŸÖ\n  if (typeof o.text === 'string' && o.text.trim()) return o.text;\n\n  return '';\n}\n\nlet full = extractTextFromVision(docAll);\n\n// ŸÑŸà ŸÖŸÅŸäÿ¥ ŸÜÿµ Ÿàÿßÿ∂ÿ≠\nif (!full || !full.trim()) {\n  return [\n    {\n      json: {\n        error: 'no_text_extracted',\n        hint:\n          'ŸÖŸÑŸÅ Vision JSON ŸÑÿß Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ fullTextAnnotation.text. ÿ±ÿßÿ¨ÿπ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿ£Ÿà ÿ¨ÿ±Ÿëÿ® ŸÖŸÑŸÅ ÿ¢ÿÆÿ±.',\n        file: fname,\n        debug_keys: Object.keys(docAll),\n      },\n    },\n  ];\n}\n\n// ==== Helpers ŸÑŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÜÿµ ÿßŸÑÿπÿ±ÿ®Ÿä ====\nfunction normalizeAr(t) {\n  return t\n    .replace(/\\u0640/g, '') // ÿ™ÿ∑ŸàŸäŸÑ\n    .replace(\n      /[\\u0617-\\u061A\\u064B-\\u0652\\u0657-\\u065F\\u0670\\u06D6-\\u06ED]/g,\n      '',\n    ) // ÿ™ÿ¥ŸÉŸäŸÑ\n    .replace(/[ÿ•ÿ£ÿ¢ÿß]/g, 'ÿß')\n    .replace(/Ÿâ/g, 'Ÿä')\n    .replace(/[Ÿ†-Ÿ©]/g, (d) => 'Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©'.indexOf(d))\n    .replace(/\\s+/g, ' ')\n    .trim();\n}\n\nfunction splitSentences(t) {\n  return t\n    .split(/(?<=[\\.!\\ÿü\\?‚Ä¶])\\s+|\\n+/)\n    .map((s) => s.trim())\n    .filter(Boolean);\n}\n\nfunction makeChunks(text, max = 900, overlap = 150) {\n  const sents = splitSentences(text);\n  const out = [];\n  let cur = '';\n\n  for (const s of sents) {\n    if (cur.length + s.length + 1 <= max) {\n      cur = (cur ? cur + ' ' : '') + s;\n    } else {\n      if (cur) out.push(cur);\n      const tail = out.length ? out[out.length - 1].slice(-overlap) : '';\n      cur = (tail + ' ' + s).slice(-max).trim();\n    }\n  }\n\n  if (cur) out.push(cur);\n  return out;\n}\n\nfunction pullAnchor() {\n  return '';\n} // ŸÖÿ¥ ŸáŸÜÿ≠ÿ™ÿßÿ¨Ÿáÿß ŸÖÿπ Vision responses\n\nfunction parseLessonMeta(name) {\n  const m = /lesson(\\d{2})/i.exec(name) || [];\n  const key = m[1] ? `lesson${m[1]}` : 'lessonXX';\n\n  const titles = {\n    lesson01: 'ÿ•ÿ±ÿßÿØÿ© ÿßŸÑÿ™ÿ∫ŸäŸäÿ±',\n    lesson02: 'ÿ£ÿ®Ÿà ÿßŸÑÿ±Ÿäÿ≠ÿßŸÜ ÿßŸÑÿ®Ÿäÿ±ŸàŸÜŸä',\n    lesson03: 'ÿßŸÑŸÇÿØÿ≥ ŸÖÿØŸäŸÜÿ© ÿπÿ±ÿ®Ÿäÿ© ÿ•ÿ≥ŸÑÿßŸÖŸäÿ©',\n    lesson04: 'ÿßŸÑÿπŸÑŸÖ ŸÅŸä ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖ',\n    lesson05: 'ŸÇŸäŸÖ ÿ•ŸÜÿ≥ÿßŸÜŸäÿ©',\n  };\n\n  return { key, title: titles[key] || '' };\n}\n\nfunction toAsciiId(s) {\n  return String(s)\n    .replace(/\\.json$/i, '')\n    .replace(/[^\\w\\-]+/g, '_')\n    .slice(-200);\n}\n\nfunction cleanFileBase(fname) {\n  const noJson = fname.replace(/\\.json$/i, '');\n  const noOutput = noJson.replace(/_output-.*$/i, ''); // Ÿäÿ¥ŸäŸÑ ŸÜŸáÿßŸäÿ© _output-..\n  const noPrefix = noOutput.replace(/^g12-arabic-ocr-2_/, ''); // ŸÑŸà ŸÅŸäŸá ÿ®ÿßÿØÿ¶ÿ©\n  return noPrefix;\n}\n\n// ==== ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑŸÜÿµ Ÿàÿ™ÿ¨ÿ≤ÿ¶ÿ™Ÿá ====\nlet cleaned = normalizeAr(full);\n\ncleaned = cleaned\n  .replace(/ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©.*ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÑÿ´ ÿßŸÑÿ´ÿßŸÜŸàŸä/gi, ' ')\n  .replace(\n    /ÿ™ŸÉŸÜŸà\\s*ÿ®ÿ±ŸÜÿ™|ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™\\s*Ÿàÿ£ŸÜÿ¥ÿ∑ÿ©|Ÿàÿ≤ÿßÿ±ÿ© ÿßŸÑÿ™ÿ±ÿ®Ÿäÿ© ŸàÿßŸÑÿ™ÿπŸÑŸäŸÖ|ÿ≠ŸÇŸàŸÇ ÿßŸÑÿ∑ÿ®ÿπ/gi,\n    ' ',\n  )\n  .replace(/\\s+/g, ' ')\n  .trim();\n\nconst chunks = makeChunks(cleaned, 900, 150);\n\n// ŸÑŸà ŸÖŸÅŸäÿ¥ chunks ÿ®ÿπÿØ ÿßŸÑÿ™ŸÜÿ∏ŸäŸÅ\nif (!chunks.length) {\n  return [\n    {\n      json: {\n        error: 'empty_chunks_after_clean',\n        file: fname,\n        note: 'ÿßŸÑŸÜÿµ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿ±ÿ¨ ÿ®ÿπÿØ ÿßŸÑÿ™ŸÜÿ∏ŸäŸÅ ÿ£ÿµÿ®ÿ≠ ŸÅÿßÿ±ÿ∫.',\n      },\n    },\n  ];\n}\n\n// ==== Metadata + IDs ====\nconst baseName = cleanFileBase(fname);\nconst { key: lesson_key, title } = parseLessonMeta(baseName);\nconst srcPdf = `${baseName}.pdf`;\n\nconst meta = {\n  title_ar: title,\n  lesson_formatted: lesson_key,\n  book_id: 'arabic_g12_ar_2025',\n  namespace: 'arabic-g12-ar',\n  grade: 'g12',\n  lang: 'ar',\n  field: extractFieldFromBaseName(baseName),\n  source_file: srcPdf,\n};\n\n// ==== ÿ•ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÄ chunks ====\nreturn chunks.map((text, i) => ({\n  json: {\n    id: `${toAsciiId(lesson_key + '_' + baseName)}_${String(i + 1)\n      .padStart(4, '0')}`,\n    text,\n    metadata: meta,\n  },\n}));\n"
          },
          "typeVersion": 2
        },
        {
          "id": "342f3191-0910-4154-b9a9-2736852363bf",
          "name": "Generate Embeddings (OpenAI)",
          "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
          "position": [
            96,
            160
          ],
          "parameters": {
            "options": {}
          },
          "credentials": {
            "openAiApi": {
              "id": "",
              "name": ""
            }
          },
          "typeVersion": 1.2
        },
        {
          "id": "a7e9184b-3391-4208-a37c-255aa0b30bc2",
          "name": "Insert into Pinecone Vector Store",
          "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
          "position": [
            256,
            -160
          ],
          "parameters": {
            "mode": "insert",
            "options": {
              "pineconeNamespace": "={{ $('Filename ‚Üí Lesson Metadata').item.json.namespace }}"
            },
            "pineconeIndex": {
              "__rl": true,
              "mode": "list",
              "value": "YOUR_PINECONE_INDEX",
              "cachedResultName": "arabic-g12"
            },
            "embeddingBatchSize": 64
          },
          "credentials": {
            "pineconeApi": {
              "id": "",
              "name": ""
            }
          },
          "typeVersion": 1.3
        },
        {
          "id": "ad674e55-0848-401f-a480-0982c725a31f",
          "name": "Move File to Archive",
          "type": "n8n-nodes-base.googleDrive",
          "position": [
            1008,
            -160
          ],
          "parameters": {
            "fileId": {
              "__rl": true,
              "mode": "id",
              "value": "={{ $('Watch Drive Folder (new files)').item.json.id }}"
            },
            "driveId": {
              "__rl": true,
              "mode": "list",
              "value": "My Drive"
            },
            "folderId": {
              "__rl": true,
              "mode": "list",
              "value": "YOUR_ARCHIVE_FOLDER_ID",
              "cachedResultUrl": "",
              "cachedResultName": ""
            },
            "operation": "move"
          },
          "credentials": {
            "googleDriveOAuth2Api": {
              "id": "",
              "name": ""
            }
          },
          "typeVersion": 3
        },
        {
          "id": "2826f9fd-610c-4410-86de-d2b225bae14b",
          "name": "Sticky Note1",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -1344,
            -304
          ],
          "parameters": {
            "color": 7,
            "width": 736,
            "height": 384,
            "content": "## 01 ‚Äì Input & Metadata Extraction\nThis section watches a Google Drive folder for new files, downloads each JSON file, and extracts structured lesson metadata from the filename. It prepares the raw file and metadata for text extraction and RAG ingestion.\n"
          },
          "typeVersion": 1
        },
        {
          "id": "c069ce44-000c-4890-8dd7-58235ab76297",
          "name": "Sticky Note2",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -560,
            -304
          ],
          "parameters": {
            "color": 7,
            "width": 464,
            "height": 384,
            "content": "## 02 ‚Äì Vision Parsing & Text Cleaning\nParses Google Vision JSON, extracts full Arabic text, removes noise, normalizes characters, and generates clean text chunks with consistent structure for downstream RAG processing.\n"
          },
          "typeVersion": 1
        },
        {
          "id": "1f35019a-0a17-4b22-b02c-f51ae49bd7ff",
          "name": "Sticky Note3",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            0,
            -304
          ],
          "parameters": {
            "color": 7,
            "width": 832,
            "height": 864,
            "content": "## 03 ‚Äì Embeddings & Vector Storage\nGenerates vector embeddings for each cleaned text chunk and stores them, along with metadata, in a Pinecone index. This section forms the core of the RAG ingestion process for fast semantic search.\n"
          },
          "typeVersion": 1
        },
        {
          "id": "224d141d-38b3-42ad-82bd-961cbcea42d3",
          "name": "Sticky Note4",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            864,
            -304
          ],
          "parameters": {
            "color": 7,
            "width": 496,
            "height": 320,
            "content": "## 04 ‚Äì Archive Processed Files\nMoves the processed Google Drive file into an archive folder to prevent duplicate ingestion and keep the input directory organized for future uploads.\n"
          },
          "typeVersion": 1
        }
      ],
      "active": false,
      "pinData": {},
      "settings": {
        "timezone": "Africa/Cairo",
        "callerPolicy": "workflowsFromSameOwner",
        "executionOrder": "v1"
      },
      "versionId": "",
      "connections": {
        "Download file": {
          "main": [
            [
              {
                "node": "Vision JSON ‚Üí Clean Text Chunks",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Default Data Loader": {
          "ai_document": [
            [
              {
                "node": "Insert into Pinecone Vector Store",
                "type": "ai_document",
                "index": 0
              }
            ]
          ]
        },
        "Filename ‚Üí Lesson Metadata": {
          "main": [
            [
              {
                "node": "Download file",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate Embeddings (OpenAI)": {
          "ai_embedding": [
            [
              {
                "node": "Insert into Pinecone Vector Store",
                "type": "ai_embedding",
                "index": 0
              }
            ]
          ]
        },
        "Watch Drive Folder (new files)": {
          "main": [
            [
              {
                "node": "Filename ‚Üí Lesson Metadata",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Insert into Pinecone Vector Store": {
          "main": [
            [
              {
                "node": "Move File to Archive",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Recursive Character Text Splitter": {
          "ai_textSplitter": [
            [
              {
                "node": "Default Data Loader",
                "type": "ai_textSplitter",
                "index": 0
              }
            ]
          ]
        },
        "Vision JSON ‚Üí Clean Text Chunks": {
          "main": [
            [
              {
                "node": "Insert into Pinecone Vector Store",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      }
    },
    "lastUpdatedBy": 1,
    "workflowInfo": {
      "nodeCount": 14,
      "nodeTypes": {
        "n8n-nodes-base.code": {
          "count": 2
        },
        "n8n-nodes-base.stickyNote": {
          "count": 5
        },
        "n8n-nodes-base.googleDrive": {
          "count": 2
        },
        "n8n-nodes-base.googleDriveTrigger": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.embeddingsOpenAi": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.vectorStorePinecone": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.documentDefaultDataLoader": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter": {
          "count": 1
        }
      }
    },
    "status": "published",
    "user": {
      "name": "osama goda",
      "username": "osamagoda",
      "bio": "Automation Engineer & Laravel Developer specialized in building AI-powered workflows and backend integrations.\nI design end-to-end automation systems combining n8n, custom APIs, and scalable Laravel backends.\n\nMy focus is creating clean, modular, production-ready workflows for SaaS platforms, customer support systems, payment processing, and Telegram/WhatsApp bots.\n\nI bridge the gap between automation tools and custom backend development to deliver real business value.",
      "verified": true,
      "links": [
        "https://makeaiagents.dev"
      ],
      "avatar": "https://gravatar.com/avatar/ffded6974acf41e4e49d60f832a97e2fced81b01d83f85544fc844235ac68b56?r=pg&d=retro&size=200"
    },
    "nodes": [
      {
        "id": 58,
        "icon": "file:googleDrive.svg",
        "name": "n8n-nodes-base.googleDrive",
        "codex": {
          "data": {
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/your-business-doesnt-need-you-to-operate/",
                  "icon": " üñ•Ô∏è",
                  "label": "Hey founders! Your business doesn't need you to operate"
                },
                {
                  "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                  "icon": "üß†",
                  "label": "Why this Product Manager loves workflow automation with n8n"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.googledrive/"
                }
              ],
              "credentialDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
                }
              ]
            },
            "categories": [
              "Data & Storage"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0"
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Google Drive"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiB2aWV3Qm94PSIwIDAgODEgNzMiPjx1c2UgeGxpbms6aHJlZj0iI2EiIHg9Ii41IiB5PSIuNSIvPjxzeW1ib2wgaWQ9ImEiIG92ZXJmbG93PSJ2aXNpYmxlIj48ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0ibm9uZSI+PHBhdGggZmlsbD0iIzAwNjZkYSIgZD0ibTYuMDQ4IDYxLjI2IDMuNTI4IDYuMDk0Yy43MzMgMS4yODMgMS43ODcgMi4yOTEgMy4wMjQgMy4wMjRsMTIuNi0yMS44MUgwYTguMyA4LjMgMCAwIDAgMS4xIDQuMTI0eiIvPjxwYXRoIGZpbGw9IiMwMGFjNDciIGQ9Ik00MCAyMi45MSAyNy40IDEuMWMtMS4yMzcuNzMzLTIuMjkxIDEuNzQxLTMuMDI0IDMuMDI0TDEuMSA0NC40NDVBOC4zIDguMyAwIDAgMCAwIDQ4LjU2OGgyNS4yeiIvPjxwYXRoIGZpbGw9IiNlYTQzMzUiIGQ9Ik02Ny40IDcwLjM3OGMxLjIzNy0uNzMzIDIuMjkxLTEuNzQxIDMuMDI0LTMuMDI0bDEuNDY2LTIuNTIgNy4wMS0xMi4xNDJhOC4zIDguMyAwIDAgMCAxLjEtNC4xMjRINTQuNzk4bDUuMzYzIDEwLjUzOHoiLz48cGF0aCBmaWxsPSIjMDA4MzJkIiBkPSJNNDAgMjIuOTEgNTIuNiAxLjFDNTEuMzYzLjM2NyA0OS45NDMgMCA0OC40NzcgMEgzMS41MjRjLTEuNDY2IDAtMi44ODcuNDEyLTQuMTI0IDEuMXoiLz48cGF0aCBmaWxsPSIjMjY4NGZjIiBkPSJNNTQuNzk5IDQ4LjU2OEgyNS4ybC0xMi42IDIxLjgxYzEuMjM3LjczMyAyLjY1NyAxLjEgNC4xMjQgMS4xaDQ2LjU1MmMxLjQ2NiAwIDIuODg3LS40MTIgNC4xMjQtMS4xeiIvPjxwYXRoIGZpbGw9IiNmZmJhMDAiIGQ9Ik02Ny4yNjIgMjQuMjg0IDU1LjYyNCA0LjEyNEM1NC44OTEgMi44NDEgNTMuODM3IDEuODMzIDUyLjYgMS4xTDQwIDIyLjkxbDE0LjggMjUuNjU5aDI1LjE1NWE4LjMgOC4zIDAgMCAwLTEuMS00LjEyNHoiLz48L2c+PC9zeW1ib2w+PC9zdmc+"
        },
        "displayName": "Google Drive",
        "typeVersion": 3,
        "nodeCategories": [
          {
            "id": 3,
            "name": "Data & Storage"
          }
        ]
      },
      {
        "id": 531,
        "icon": "file:googleDrive.svg",
        "name": "n8n-nodes-base.googleDriveTrigger",
        "codex": {
          "data": {
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/trigger-nodes/n8n-nodes-base.googledrivetrigger/"
                }
              ],
              "credentialDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
                }
              ]
            },
            "categories": [
              "Data & Storage"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0"
          }
        },
        "group": "[\"trigger\"]",
        "defaults": {
          "name": "Google Drive Trigger"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiB2aWV3Qm94PSIwIDAgODEgNzMiPjx1c2UgeGxpbms6aHJlZj0iI2EiIHg9Ii41IiB5PSIuNSIvPjxzeW1ib2wgaWQ9ImEiIG92ZXJmbG93PSJ2aXNpYmxlIj48ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0ibm9uZSI+PHBhdGggZmlsbD0iIzAwNjZkYSIgZD0ibTYuMDQ4IDYxLjI2IDMuNTI4IDYuMDk0Yy43MzMgMS4yODMgMS43ODcgMi4yOTEgMy4wMjQgMy4wMjRsMTIuNi0yMS44MUgwYTguMyA4LjMgMCAwIDAgMS4xIDQuMTI0eiIvPjxwYXRoIGZpbGw9IiMwMGFjNDciIGQ9Ik00MCAyMi45MSAyNy40IDEuMWMtMS4yMzcuNzMzLTIuMjkxIDEuNzQxLTMuMDI0IDMuMDI0TDEuMSA0NC40NDVBOC4zIDguMyAwIDAgMCAwIDQ4LjU2OGgyNS4yeiIvPjxwYXRoIGZpbGw9IiNlYTQzMzUiIGQ9Ik02Ny40IDcwLjM3OGMxLjIzNy0uNzMzIDIuMjkxLTEuNzQxIDMuMDI0LTMuMDI0bDEuNDY2LTIuNTIgNy4wMS0xMi4xNDJhOC4zIDguMyAwIDAgMCAxLjEtNC4xMjRINTQuNzk4bDUuMzYzIDEwLjUzOHoiLz48cGF0aCBmaWxsPSIjMDA4MzJkIiBkPSJNNDAgMjIuOTEgNTIuNiAxLjFDNTEuMzYzLjM2NyA0OS45NDMgMCA0OC40NzcgMEgzMS41MjRjLTEuNDY2IDAtMi44ODcuNDEyLTQuMTI0IDEuMXoiLz48cGF0aCBmaWxsPSIjMjY4NGZjIiBkPSJNNTQuNzk5IDQ4LjU2OEgyNS4ybC0xMi42IDIxLjgxYzEuMjM3LjczMyAyLjY1NyAxLjEgNC4xMjQgMS4xaDQ2LjU1MmMxLjQ2NiAwIDIuODg3LS40MTIgNC4xMjQtMS4xeiIvPjxwYXRoIGZpbGw9IiNmZmJhMDAiIGQ9Ik02Ny4yNjIgMjQuMjg0IDU1LjYyNCA0LjEyNEM1NC44OTEgMi44NDEgNTMuODM3IDEuODMzIDUyLjYgMS4xTDQwIDIyLjkxbDE0LjggMjUuNjU5aDI1LjE1NWE4LjMgOC4zIDAgMCAwLTEuMS00LjEyNHoiLz48L2c+PC9zeW1ib2w+PC9zdmc+"
        },
        "displayName": "Google Drive Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 3,
            "name": "Data & Storage"
          }
        ]
      },
      {
        "id": 565,
        "icon": "fa:sticky-note",
        "name": "n8n-nodes-base.stickyNote",
        "codex": {
          "data": {
            "alias": [
              "Comments",
              "Notes",
              "Sticky"
            ],
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Sticky Note",
          "color": "#FFD233"
        },
        "iconData": {
          "icon": "sticky-note",
          "type": "icon"
        },
        "displayName": "Sticky Note",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 834,
        "icon": "file:code.svg",
        "name": "n8n-nodes-base.code",
        "codex": {
          "data": {
            "alias": [
              "cpde",
              "Javascript",
              "JS",
              "Python",
              "Script",
              "Custom Code",
              "Function"
            ],
            "details": "The Code node allows you to execute JavaScript in your workflow.",
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
                }
              ]
            },
            "categories": [
              "Development",
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers",
                "Data Transformation"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Code"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
        },
        "displayName": "Code",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 1141,
        "icon": "file:openAiLight.svg",
        "name": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.embeddingsopenai/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Embeddings"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Embeddings OpenAI"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTM2Ljg2NzEgMTYuMzcxOEMzNy43NzQ2IDEzLjY0OCAzNy40NjIxIDEwLjY2NDIgMzYuMDEwOCA4LjE4NjYxQzMzLjgyODIgNC4zODY1MyAyOS40NDA3IDIuNDMxNDkgMjUuMTU1NiAzLjM1MTUxQzIzLjI0OTMgMS4yMDM5NiAyMC41MTA1IC0wLjAxNzMxNDggMTcuNjM5MiAwLjAwMDE4NTUzM0MxMy4yNTkxIC0wLjAwOTgxNDY4IDkuMzcyNzMgMi44MTAyNSA4LjAyNTIgNi45Nzc4M0M1LjIxMTM5IDcuNTU0MSAyLjc4MjU4IDkuMzE1MzggMS4zNjEzIDExLjgxMTdDLTAuODM3NDkzIDE1LjYwMTggLTAuMzM2MjMyIDIwLjM3OTQgMi42MDEzMyAyMy42Mjk0QzEuNjkzODEgMjYuMzUzMiAyLjAwNjMyIDI5LjMzNzEgMy40NTc2IDMxLjgxNDZDNS42NDAxNSAzNS42MTQ3IDEwLjAyNzcgMzcuNTY5NyAxNC4zMTI4IDM2LjY0OTdDMTYuMjE3OSAzOC43OTczIDE4Ljk1NzkgNDAuMDE4NSAyMS44MjkyIDM5Ljk5OThDMjYuMjExOCA0MC4wMTEgMzAuMDk5NCAzNy4xODg1IDMxLjQ0NjkgMzMuMDE3MUMzNC4yNjA4IDMyLjQ0MDkgMzYuNjg5NiAzMC42Nzk2IDM4LjExMDggMjguMTgzM0M0MC4zMDcxIDI0LjM5MzIgMzkuODA0NiAxOS42MTk0IDM2Ljg2ODMgMTYuMzY5M0wzNi44NjcxIDE2LjM3MThaTTIxLjgzMTcgMzcuMzg2QzIwLjA3OCAzNy4zODg1IDE4LjM3OTIgMzYuNzc0NyAxNy4wMzI5IDM1LjY1MDlDMTcuMDk0MSAzNS42MTg0IDE3LjIwMDQgMzUuNTU5NyAxNy4yNjkxIDM1LjUxNzJMMjUuMjM0MyAzMC45MTcxQzI1LjY0MTggMzAuNjg1OCAyNS44OTE4IDMwLjI1MjEgMjUuODg5MyAyOS43ODMzVjE4LjU1NDNMMjkuMjU1NyAyMC40OTgxQzI5LjI5MTkgMjAuNTE1NiAyOS4zMTU3IDIwLjU1MDYgMjkuMzIwNyAyMC41OTA2VjI5Ljg4OTZDMjkuMzE1NyAzNC4wMjQ3IDI1Ljk2NjggMzcuMzc3MiAyMS44MzE3IDM3LjM4NlpNNS43MjY0IDMwLjUwNzFDNC44NDc2MyAyOC45ODk2IDQuNTMxMzcgMjcuMjEwOCA0LjgzMjYzIDI1LjQ4NDVDNC44OTEzOCAyNS41MTk1IDQuOTk1MTMgMjUuNTgzMiA1LjA2ODg4IDI1LjYyNTdMMTMuMDM0MSAzMC4yMjU4QzEzLjQzNzggMzAuNDYyMSAxMy45Mzc4IDMwLjQ2MjEgMTQuMzQyOCAzMC4yMjU4TDI0LjA2NjggMjQuNjEwN1YyOC40OTgzQzI0LjA2OTMgMjguNTM4MyAyNC4wNTA1IDI4LjU3NyAyNC4wMTkzIDI4LjYwMkwxNS45Njc5IDMzLjI1MDlDMTIuMzgxNSAzNS4zMTU5IDcuODAxNDQgMzQuMDg4NCA1LjcyNzY1IDMwLjUwNzFINS43MjY0Wk0zLjYzMDEgMTMuMTIwNUM0LjUwNTEyIDExLjYwMDQgNS44ODY0IDEwLjQzNzkgNy41MzE0NCA5LjgzNDE1QzcuNTMxNDQgOS45MDI5IDcuNTI3NjkgMTAuMDI0MiA3LjUyNzY5IDEwLjEwOTJWMTkuMzEwNkM3LjUyNTE5IDE5Ljc3ODEgNy43NzUxOSAyMC4yMTE5IDguMTgxNDUgMjAuNDQzMUwxNy45MDU0IDI2LjA1N0wxNC41MzkxIDI4LjAwMDhDMTQuNTA1MyAyOC4wMjMzIDE0LjQ2MjggMjguMDI3IDE0LjQyNTMgMjguMDEwOEw2LjM3MjY2IDIzLjM1ODJDMi43OTM4MyAyMS4yODU2IDEuNTY2MzEgMTYuNzA2OCAzLjYyODg1IDEzLjEyMTdMMy42MzAxIDEzLjEyMDVaTTMxLjI4ODIgMTkuNTU2OUwyMS41NjQyIDEzLjk0MTdMMjQuOTMwNiAxMS45OTkyQzI0Ljk2NDMgMTEuOTc2NyAyNS4wMDY4IDExLjk3MjkgMjUuMDQ0MyAxMS45ODkyTDMzLjA5NyAxNi42MzhDMzYuNjgyMSAxOC43MDkzIDM3LjkxMDggMjMuMjk1NyAzNS44Mzk1IDI2Ljg4MDhDMzQuOTYzMyAyOC4zOTgzIDMzLjU4MzIgMjkuNTYwOCAzMS45Mzk1IDMwLjE2NThWMjAuNjg5NEMzMS45NDMyIDIwLjIyMTkgMzEuNjk0NSAxOS43ODk0IDMxLjI4OTQgMTkuNTU2OUgzMS4yODgyWk0zNC42MzgzIDE0LjUxNDJDMzQuNTc5NSAxNC40NzggMzQuNDc1OCAxNC40MTU1IDM0LjQwMiAxNC4zNzNMMjYuNDM2OCA5Ljc3Mjg5QzI2LjAzMzEgOS41MzY2NCAyNS41MzMxIDkuNTM2NjQgMjUuMTI4MSA5Ljc3Mjg5TDE1LjQwNDEgMTUuMzg4VjExLjUwMDRDMTUuNDAxNiAxMS40NjA0IDE1LjQyMDQgMTEuNDIxNyAxNS40NTE2IDExLjM5NjdMMjMuNTAzIDYuNzUxNThDMjcuMDg5NCA0LjY4Mjc5IDMxLjY3NDUgNS45MTQwNiAzMy43NDIgOS41MDE2NEMzNC42MTU4IDExLjAxNjcgMzQuOTMyIDEyLjc5MDUgMzQuNjM1OCAxNC41MTQySDM0LjYzODNaTTEzLjU3NDEgMjEuNDQzMUwxMC4yMDY1IDE5LjQ5OTRDMTAuMTcwMiAxOS40ODE5IDEwLjE0NjUgMTkuNDQ2OCAxMC4xNDE1IDE5LjQwNjhWMTAuMTA3OUMxMC4xNDQgNS45Njc4MSAxMy41MDI4IDIuNjEyNzQgMTcuNjQyOSAyLjYxNTI0QzE5LjM5NDIgMi42MTUyNCAyMS4wODkyIDMuMjMwMjUgMjIuNDM1NSA0LjM1MDI4QzIyLjM3NDMgNC4zODI3OCAyMi4yNjkzIDQuNDQxNTMgMjIuMTk5MiA0LjQ4NDAzTDE0LjIzNDEgOS4wODQxM0MxMy44MjY2IDkuMzE1MzggMTMuNTc2NiA5Ljc0Nzg5IDEzLjU3OTEgMTAuMjE2N0wxMy41NzQxIDIxLjQ0MDZWMjEuNDQzMVpNMTUuNDAyOSAxNy41MDA2TDE5LjczNDIgMTQuOTk5M0wyNC4wNjU1IDE3LjQ5OTNWMjIuNTAwN0wxOS43MzQyIDI1LjAwMDdMMTUuNDAyOSAyMi41MDA3VjE3LjUwMDZaIiBmaWxsPSIjN0Q3RDg3Ii8+Cjwvc3ZnPgo="
        },
        "displayName": "Embeddings OpenAI",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1191,
        "icon": "fa:grip-lines-vertical",
        "name": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.textsplitterrecursivecharactertextsplitter/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Text Splitters"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Recursive Character Text Splitter"
        },
        "iconData": {
          "icon": "grip-lines-vertical",
          "type": "icon"
        },
        "displayName": "Recursive Character Text Splitter",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1230,
        "icon": "file:pinecone.svg",
        "name": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.vectorstorepinecone/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Vector Stores",
                "Tools",
                "Root Nodes"
              ],
              "Tools": [
                "Other Tools"
              ],
              "Vector Stores": [
                "Other Vector Stores"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Pinecone Vector Store"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzUiIHZpZXdCb3g9IjAgMCAzMiAzNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEzLjg1NTUgMzQuMjk2MkMxNC45MzI1IDM0LjI5NjIgMTUuODA1NSAzMy40NDUxIDE1LjgwNTUgMzIuMzk1NEMxNS44MDU1IDMxLjM0NTYgMTQuOTMyNSAzMC40OTQ2IDEzLjg1NTUgMzAuNDk0NkMxMi43Nzg2IDMwLjQ5NDYgMTEuOTA1NSAzMS4zNDU2IDExLjkwNTUgMzIuMzk1NEMxMS45MDU1IDMzLjQ0NTEgMTIuNzc4NiAzNC4yOTYyIDEzLjg1NTUgMzQuMjk2MloiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0xOC40MTM4IDcuMTk2NzVMMTkuMjUxMiAyLjY2MDA1IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMTE3ODYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz4KPHBhdGggZD0iTTIyLjI2NTYgNS41ODU1TDE5LjM0NjYgMi4xMTA5OUwxNS4zNzQ4IDQuMzcyOTIiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMi4xMTc4NiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTQuOTIwMiAyNi41NTI4TDE1LjczMzcgMjIuMDE2OSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyLjExNzg2IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIi8+CjxwYXRoIGQ9Ik0xOC43NzI5IDI0LjkzMDRMMTUuODMgMjEuNDY3MUwxMS44NzAxIDIzLjc0MSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyLjExNzg2IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNi42MDc3IDE3LjE5OTZMMTcuNDIxMiAxMi42NjMzIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMTE3ODYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz4KPHBhdGggZD0iTTIwLjQ1ODcgMTUuNThMMTcuNTI3NyAxMi4xMjhMMTMuNTY3OSAxNC4zOTA0IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMTE3ODYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTguMzI4NzEgMjYuMTU1NEw0Ljc1MTcxIDI4LjU4MTUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMi4wMTAxNyIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPgo8cGF0aCBkPSJNOC41NDM4MyAzMC4wODY1TDQuMzIwOCAyOC44NzM4TDQuNjMxODUgMjQuNTk0NCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyLjAxMDE3IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0yMS4zMjEzIDI4LjQyOTlMMjMuODA5NiAzMS45MjgyIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMDEwMTciIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz4KPHBhdGggZD0iTTE5LjcxOCAzMi4wNDVMMjQuMTA4NSAzMi4zMzY1TDI1LjM1MjcgMjguMjQzOCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyLjAxMDE3IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0yNS4zOTk5IDIxLjMyOTFMMjkuNzc4NCAyMi4wOTk2IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMDU4MDQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz4KPHBhdGggZD0iTTI2LjkwNzIgMjUuMDcyTDMwLjMwNDggMjIuMTkxOUwyOC4xNjM0IDE4LjM1NTciIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMi4wNTgwNCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMjQuMTE5NiAxMi44NjE1TDI4LjAxOTcgMTAuNzYzIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMDU4MDQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz4KPHBhdGggZD0iTTI0LjMzNTcgOC44Mzk2NUwyOC40ODY5IDEwLjUxODhMMjcuNzA5MyAxNC44MjE2IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMDU4MDQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTYuOTE2MzkgMTguMTU3MkwyLjUyNTg4IDE3LjQxMDEiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMi4wNTgwNCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPgo8cGF0aCBkPSJNNC4xNzczMSAyMS4xNjQ1TDIgMTcuMzI4TDUuMzYxNjcgMTQuNDM2IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIuMDU4MDQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTExLjA3OTkgMTAuNjEyOUw4LjE0ODkzIDcuMzQ3NjkiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMi4wNTgwNCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPgo8cGF0aCBkPSJNMTIuMjg5NyA2Ljc3NDk2TDcuODAzNDkgNi45NjE1Nkw3LjAxMzkyIDExLjI2NDkiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMi4wNTgwNCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K"
        },
        "displayName": "Pinecone Vector Store",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1243,
        "icon": "file:binary.svg",
        "name": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.documentdefaultdataloader/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Document Loaders"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Default Data Loader"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjgiIGhlaWdodD0iMTAyNCI+PHBhdGggZmlsbD0iIzdEN0Q4NyIgZD0iTTAgOTYwVjY0aDU3NmwxOTIgMTkydjcwNHptNzA0LTY0MEw1MTIgMTI4SDY0djc2OGg2NDB6TTMyMCA1MTJIMTI4VjI1NmgxOTJ6bS02NC0xOTJoLTY0djEyOGg2NHptMCA0NDhoNjR2NjRIMTI4di02NGg2NFY2NDBoLTY0di02NGgxMjh6bTI1Ni0zMjBoNjR2NjRIMzg0di02NGg2NFYzMjBoLTY0di02NGgxMjh6bTY0IDM4NEgzODRWNTc2aDE5MnptLTY0LTE5MmgtNjR2MTI4aDY0eiIvPjwvc3ZnPg=="
        },
        "displayName": "Default Data Loader",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      }
    ],
    "categories": [
      {
        "id": 35,
        "name": "Document Extraction"
      },
      {
        "id": 48,
        "name": "AI RAG"
      }
    ],
    "image": []
  }
}