{
  "workflow": {
    "id": 7206,
    "name": "Multi-chain token swap relayer with Li.Fi",
    "views": 297,
    "recentViews": 0,
    "totalViews": 297,
    "createdAt": "2025-08-10T03:45:43.121Z",
    "description": "![image.png](fileId:2778)\n\n# Swap Tokens with Li.Fi \n\nThe growing popularity of agentic payments has lead to the development of protocols like [x402](https://x402.org) where agents and humans can pay for internet resources over standard http protocols using stablecoins.\n\nThis workflow lets you run your own swap relayer where callers can provide an [x402-compatible payment header](https://1shotapi.com/tools) and a desired destination network to instantly receive gas tokens. This setup is trust minimized - user's have the following guarantees:\n\n1. They will be the receiver of the swap.\n2. Only the amount of tokens the authorized will be swapped. \n\n## Setup\n\nIn order to run this relayer workflow, you will need an account on [1Shot API](https://1shotapi.com). You must then import the 1Shot Gas Station contract into your business for any chain you wish to support with your relayer.\n\nNext, follow the directions in the worflow sticky notes to update the Payment Configs for the tokens you wish to support swaps for. Lastly, distrubute your webhook api endpoint to your users. \n",
    "workflow": {
      "id": "fVQBtrZ0NyAMHS3D",
      "meta": {
        "instanceId": "62f017ec8f130d172e2e5f39bbf09515036bfd403dfa60fe06f5ab14b78705d0"
      },
      "name": "n8n Gateway for 1Shot Gas Station",
      "tags": [],
      "nodes": [
        {
          "id": "80932427-585a-4ca3-8ee2-cf8aaf756aae",
          "name": "Sticky Note6",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -1888,
            512
          ],
          "parameters": {
            "width": 408,
            "height": 524,
            "content": "## x402 Payment Endpoint \n\nThis workflow lets the operator monetize swaps from ERC-20 tokens to native gas tokens on up to 100 different EVM blockchains via the [Li.Fi](https://li.fi/) protocol. \n\nThis workflow accepts an [x402 payment](https://www.x402.org/) header that will be used with the [1Shot Gas Station](https://github.com/uxlySoftware/1Shot-Gas-Station) smart contract which interacts with Li.Fi to swap EIP-3009 compatible tokens for native tokens (even cross-chain) without the user paying gas. \n\n1. Click on the webhook trigger and give the route a good name.\n2. Click on the \"Payment Token Configs\" and  set up the desired tokens you want to support."
          },
          "typeVersion": 1
        },
        {
          "id": "39a72092-252c-4e96-9ecb-0b271da73cd5",
          "name": "Sticky Note3",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -2176,
            1088
          ],
          "parameters": {
            "width": 840,
            "height": 596,
            "content": "## Example Curl Command\n\nThe workflow requires the following POST body parameters:\n\n- `fromChain` - the chain the user's EIP-3009 compatible tokens are on\n- `fromToken` - the address of the EIP-3009 compatible token to swap for native token\n- `fromAmount` - the amount of `fromToken` to swap\n- `fromAddress` - the user's address that holds the `fromToken`, must be the same as the `from` address in the `x-payment` header\n- `toChain` - the chain id of the target network to receive native token on\n\nYou can test [1Shot Gas Station](https://github.com/uxlysoftware/1shot-gas-station?tab=readme-ov-file#1shot-api-gas-station) endpoint with a command like this (be sure to use a [properly formatted x-payment header](https://1shotapi.com/tools) payload: \n\n```sh\n# swap out the URL here for you webhook URL endpoint\ncurl -X POST \\\n  https://n8n.1shotapi.dev/webhook-test/refactored-gas-station \\\n  -H \"x-payment: YOUR-BASE64-ENCODED-PAYMENT-PAYLOAD\" \\\n  -H \"User-Agent: CustomUserAgent/1.0\" \\\n  -H \"Accept: application/json\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"fromChain\": \"8453\",\n    \"fromToken\": \"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913\",\n    \"fromAmount\": \"100000000\",\n    \"fromAddress\": \"0x55680c6b69d598c0b42f93cd53dff3d20e069b5b\",\n    \"toChain\": \"43114\"\n  }'\n```"
          },
          "typeVersion": 1
        },
        {
          "id": "3e805ca4-f2f2-43db-9f50-ccffd5b770d2",
          "name": "Response: 200 - Payment Successful",
          "type": "n8n-nodes-base.respondToWebhook",
          "position": [
            -64,
            416
          ],
          "parameters": {
            "options": {
              "responseCode": 200
            },
            "respondWith": "text",
            "responseBody": "={ \"transactionHash\": \"{{ $json.transactionHash }}\" }"
          },
          "typeVersion": 1.3
        },
        {
          "id": "2708bdf9-fcbc-4d0b-b2c1-dbb1ba24e35f",
          "name": "1Shot API Submit & Wait",
          "type": "n8n-nodes-1shot.oneShotSynch",
          "position": [
            -288,
            512
          ],
          "parameters": {
            "params": "={\n  \"tokenAddress\": \"{{ $('Webhook').item.json.body.fromToken }}\",\n  \"from\":  \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.from }}\",\n  \"value\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.value }}\",\n  \"validAfter\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.validAfter }}\",\n  \"validBefore\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.validBefore }}\",\n  \"nonce\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.nonce }}\",\n  \"v\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.v }}\",\n  \"r\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.r }}\",\n  \"s\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.s }}\",\n  \"diamondCalldata\": \"{{ $('Fetch Li.Fi Quote').item.json.transactionRequest.data }}\"\n} ",
            "additionalFields": {
              "memo": "=Li.Fi swap - receiver:  {{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.from }}, token: {{ $('Webhook').item.json.body.fromToken }},amount: {{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.value }}, chain: {{ $('Webhook').item.json.body.fromChain }}",
              "gasLimit": "={{ (parseInt($('Fetch Li.Fi Quote').item.json.transactionRequest.gasLimit, 16) + 100000).toString() }}"
            },
            "contractMethodId": "={{ $('Payment Token Configs').item.json.paymentTokens[$('Validate & Verify POST Body').item.json.selectedToken].contractMethodId }}"
          },
          "credentials": {
            "oneShotOAuth2Api": {
              "id": "credential-id",
              "name": "oneShotOAuth2Api Credential"
            }
          },
          "typeVersion": 1
        },
        {
          "id": "f7e3314b-5cab-4ca7-930e-d00b03dbc5b4",
          "name": "On Successful Payment Simulation",
          "type": "n8n-nodes-base.if",
          "position": [
            -512,
            608
          ],
          "parameters": {
            "options": {},
            "conditions": {
              "options": {
                "version": 2,
                "leftValue": "",
                "caseSensitive": true,
                "typeValidation": "strict"
              },
              "combinator": "and",
              "conditions": [
                {
                  "id": "81c67679-e256-4fd2-bed7-8f4272c2392b",
                  "operator": {
                    "name": "filter.operator.equals",
                    "type": "string",
                    "operation": "equals"
                  },
                  "leftValue": "={{ $json.success.toString() }}",
                  "rightValue": "true"
                }
              ]
            }
          },
          "typeVersion": 2.2
        },
        {
          "id": "acfea100-cd3a-4099-b828-c6fe0bcfc3ba",
          "name": "Simulate Payment",
          "type": "n8n-nodes-1shot.oneShot",
          "onError": "continueRegularOutput",
          "position": [
            -736,
            608
          ],
          "parameters": {
            "params": "={\n  \"tokenAddress\": \"{{ $('Webhook').item.json.body.fromToken }}\",\n  \"from\":  \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.from }}\",\n  \"value\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.value }}\",\n  \"validAfter\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.validAfter }}\",\n  \"validBefore\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.validBefore }}\",\n  \"nonce\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.authorization.nonce }}\",\n  \"v\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.v }}\",\n  \"r\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.r }}\",\n  \"s\": \"{{ $('Validate & Verify X-Payment Header').item.json.decodedXPayment.payload.s }}\",\n  \"diamondCalldata\": \"{{ $('Fetch Li.Fi Quote').item.json.transactionRequest.data }}\"\n} ",
            "gasLimit": "={{ (parseInt($('Fetch Li.Fi Quote').item.json.transactionRequest.gasLimit, 16) + 100000).toString() }}",
            "operation": "simulate",
            "contractMethodId": "={{ $('Payment Token Configs').item.json.paymentTokens[$('Validate & Verify POST Body').item.json.selectedToken].contractMethodId }}"
          },
          "credentials": {
            "oneShotOAuth2Api": {
              "id": "credential-id",
              "name": "oneShotOAuth2Api Credential"
            }
          },
          "retryOnFail": true,
          "typeVersion": 1
        },
        {
          "id": "f5089506-8709-4942-9062-ac66fe091bbe",
          "name": "Webhook",
          "type": "n8n-nodes-base.webhook",
          "position": [
            -1856,
            896
          ],
          "webhookId": "92c5ca23-99a7-437d-85da-84aef8bd2a25",
          "parameters": {
            "path": "=refactored-gas-station",
            "options": {},
            "httpMethod": "POST",
            "responseMode": "responseNode"
          },
          "typeVersion": 2
        },
        {
          "id": "bd5ce8db-39eb-4194-ab5f-cffc73eb9397",
          "name": "Fetch Li.Fi Quote",
          "type": "n8n-nodes-base.httpRequest",
          "onError": "continueErrorOutput",
          "position": [
            -1184,
            800
          ],
          "parameters": {
            "url": "https://li.quest/v1/quote",
            "options": {},
            "sendQuery": true,
            "sendHeaders": true,
            "queryParameters": {
              "parameters": [
                {
                  "name": "fromChain",
                  "value": "={{ $('Webhook').item.json.body.fromChain }}"
                },
                {
                  "name": "fromToken",
                  "value": "={{ $('Webhook').item.json.body.fromToken }}"
                },
                {
                  "name": "fromAddress",
                  "value": "={{ $('Webhook').item.json.body.fromAddress }}"
                },
                {
                  "name": "toChain",
                  "value": "={{ $('Webhook').item.json.body.toChain }}"
                },
                {
                  "name": "toToken",
                  "value": "=0x0000000000000000000000000000000000000000"
                },
                {
                  "name": "toAddress",
                  "value": "={{ $('Webhook').item.json.body.fromAddress }}"
                },
                {
                  "name": "slippage",
                  "value": "0.05"
                },
                {
                  "name": "integrator",
                  "value": "oneshot-gas-station"
                },
                {
                  "name": "=fromAmount",
                  "value": "={{ $('Webhook').item.json.body.fromAmount }}"
                },
                {
                  "name": "allowBridges",
                  "value": "gasZipBridge"
                },
                {
                  "name": "fee",
                  "value": "0.005"
                }
              ]
            },
            "headerParameters": {
              "parameters": [
                {
                  "name": "x-lifi-api-key"
                }
              ]
            }
          },
          "retryOnFail": true,
          "typeVersion": 4.2
        },
        {
          "id": "a6e7de73-8e9c-49fb-b172-47e98695de17",
          "name": "Response: Missing or Invalid Request Body Params",
          "type": "n8n-nodes-base.respondToWebhook",
          "position": [
            -1184,
            992
          ],
          "parameters": {
            "options": {
              "responseCode": 402
            },
            "respondWith": "json",
            "responseBody": "={\n  \"x402Version\": \"1\",\n  \"error\": \"{{ $('Validate & Verify POST Body').item.json.error.errorMessage }}\",\n  \"accepts\": {{ JSON.stringify($('Validate & Verify POST Body').item.json.error.paymentConfigs) }}\n}"
          },
          "typeVersion": 1.3
        },
        {
          "id": "b226d9e6-8963-4556-a6be-16b98486a326",
          "name": "Response: Failed to Get Quote",
          "type": "n8n-nodes-base.respondToWebhook",
          "position": [
            -960,
            896
          ],
          "parameters": {
            "options": {
              "responseCode": 402
            },
            "respondWith": "json",
            "responseBody": "={\n  \"x402Version\": \"1\",\n  \"error\": {{ JSON.stringify($json.error.message) }},\n  \"accepts\": {{ JSON.stringify($('Validate & Verify POST Body').item.json.accepts) }}\n}"
          },
          "typeVersion": 1.3
        },
        {
          "id": "1f92afa5-ae85-41ce-9d2d-b868a37d5a03",
          "name": "Sticky Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -1280,
            384
          ],
          "parameters": {
            "color": 5,
            "width": 272,
            "height": 576,
            "content": "## Fetch Swap Route & Quote form Li.Fi\n\nThis block fetches a quote from the Li.Fi Route API that retuns the `callData` needed to call the Li.FI Diamond Proxy contract.\n\nYou'll need to get a Li.Fi API key so you don't get rate limited and put it in the Li.Fi node for the `x-lifi-api-key`.\n\nAdditionally, if you want to collect integrator fees, you'll need to change the `integrator` to point at your Li.Fi integrator account."
          },
          "typeVersion": 1
        },
        {
          "id": "466fed72-b4fa-4f50-ab71-e3701d2e88a8",
          "name": "Sticky Note1",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -784,
            352
          ],
          "parameters": {
            "color": 6,
            "width": 672,
            "height": 416,
            "content": "## Use 1Shot API to Simulate and Submit the Swap \n\n[1Shot API](https://1shotapi.com) handles simulating the transaction and submitting it the the appropriate blockchain network. "
          },
          "typeVersion": 1
        },
        {
          "id": "fd5beb2b-9129-4d89-8ec2-9e20c1d303a4",
          "name": "Sticky Note2",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -1264,
            1184
          ],
          "parameters": {
            "width": 752,
            "height": 352,
            "content": "## Payment Token Configs\n\nYou must edit the \"Payment Token Configs\" node with the tokens you wish to support for swaps.\n\nYou need:\n\n1. The token address\n2. The EVM chain id\n3. The x402 name of the `toChain` (like `base` or `avalanche`)\n3. The token `name`\n4. Token `version`\n5. The `contractMethodId` of the `callDiamondWithEIP3009SignatureToNative` method that you've imported into your 1Shot API account on the same chain as the token. "
          },
          "typeVersion": 1
        },
        {
          "id": "fefb995e-d5ee-4a4f-99ee-6e2c90d08d9d",
          "name": "Validate & Verify X-Payment Header",
          "type": "n8n-nodes-base.code",
          "onError": "continueErrorOutput",
          "position": [
            -960,
            704
          ],
          "parameters": {
            "jsCode": "const payTo = $('Payment Token Configs').first().json.gasStationContract;\nconst timeOut = $('Payment Token Configs').first().json.timeOut;\nconst paymentTokens = $('Payment Token Configs').first().json.paymentTokens;\nconst selectedToken = $('Validate & Verify POST Body').first().json.selectedToken;\nconst gasLimit = $('Fetch Li.Fi Quote').first().json.transactionRequest.gasLimit;\nconst estimate = {\n  swapFee: $('Fetch Li.Fi Quote').first().json.estimate.feeCosts[0].amountUSD,\n  gasCostUSD: $('Fetch Li.Fi Quote').first().json.estimate.gasCosts[0].amountUSD,\n  toAmountUSD: $('Fetch Li.Fi Quote').first().json.estimate.toAmountUSD,\n  toAmountETH: $('Fetch Li.Fi Quote').first().json.estimate.toAmount,\n  gasEstimateETH: $('Fetch Li.Fi Quote').first().json.estimate.gasCosts[0].estimate,\n  waitTime: $('Fetch Li.Fi Quote').first().json.estimate.executionDuration\n}\n\n\n// this function will split the signature from the user into r,s & v components\nfunction splitSignature(sigHex) {\n  // Remove \"0x\" prefix if present\n  const hex = sigHex.startsWith(\"0x\") ? sigHex.slice(2) : sigHex;\n\n  // Convert hex to byte array\n  const bytes = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < bytes.length; i++) {\n    bytes[i] = parseInt(hex.substr(i * 2, 2), 16);\n  }\n\n  if (bytes.length !== 65) {\n    throw new Error(`Invalid signature length: got ${bytes.length} bytes`);\n  }\n\n  // Convert byte ranges to hex strings\n  const toHex = (arr) =>\n    \"0x\" + Array.from(arr).map(b => b.toString(16).padStart(2, \"0\")).join(\"\");\n\n  const r = toHex(bytes.slice(0, 32));\n  const s = toHex(bytes.slice(32, 64));\n\n  // Normalize v\n  let v = bytes[64];\n  if (v === 0) v = 27;\n  else if (v === 1) v = 28;\n  else if (v !== 27 && v !== 28 && v >= 35) {\n    v = (v & 1) ? 27 : 28; // EIP-155\n  }\n\n  const vHex = \"0x\" + v.toString(16).padStart(2, \"0\");\n\n  return { r, s, v: vHex };\n}\n\n// this will make sure our x-payment header contains all necessary components\nfunction validateXPayment(obj) {\n  // Define the expected structure and types\n  const requiredShape = {\n    x402Version: \"number\",\n    scheme: \"string\",\n    network: \"string\",\n    payload: {\n      authorization: {\n        from: \"string\",\n        to: \"string\",\n        value: \"string\",\n        validAfter: \"string\",\n        validBefore: \"string\",\n        nonce: \"string\"\n      },\n      signature: \"string\"\n    }\n  };\n\n  let missing = [];\n  function checkShape(expected, actual, path) {\n    for (const key in expected) {\n      const currentPath = path ? path + \".\" + key : key;\n\n      if (!(key in actual)) {\n        missing.push(\"Missing field: \" + currentPath);\n      } else if (typeof expected[key] === \"object\") {\n        if (typeof actual[key] !== \"object\" || actual[key] === null) {\n          missing.push(\"Invalid type at \" + currentPath + \": expected object\");\n        } else {\n          checkShape(expected[key], actual[key], currentPath);\n        }\n      } else {\n        if (typeof actual[key] !== expected[key]) {\n          missing.push(\n            \"Invalid type at \" + currentPath +\n            \": expected \" + expected[key] +\n            \", got \" + typeof actual[key]\n          );\n        }\n      }\n    }\n  }\n\n  checkShape(requiredShape, obj, \"\");\n  if (missing.length > 0) {\n    return missing.join(\"; \");\n  }\n  return \"valid\";\n}\n\n// this function will ensure the x-payment header is for one of our supported\n// networks, is for the correct amount, and pays the right address\nfunction verifyPaymentDetails(obj, config, payTo) {\n  const errors = [];\n\n  // 1. Check that network exists in config\n  const network = obj.network;\n  const configEntry = Object.values(config).find(\n    (entry) => entry.network.toLowerCase() === (network || \"\").toLowerCase()\n  );\n\n  if (!configEntry) {\n    errors.push(\"Invalid or unsupported network: \" + network);\n  }\n\n  // 2. Check value >= maxAmountRequired\n  if (configEntry) {\n    const required = BigInt(configEntry.maxAmountRequired);\n    let actual;\n\n    try {\n      actual = BigInt(obj.payload.authorization.value);\n    } catch (e) {\n      errors.push(\"Invalid value: must be numeric string\");\n    }\n\n    if (typeof actual !== \"undefined\" && actual < required) {\n      errors.push(\n        `Value too low: got ${actual}, requires at least ${required}`\n      );\n    }\n  }\n\n  // 3. Check 'to' matches payTo (case-insensitive)\n  const toAddr = obj.payload?.authorization?.to;\n  if (!toAddr) {\n    errors.push(\"Missing 'to' field in authorization\");\n  } else if (toAddr.toLowerCase() !== payTo.toLowerCase()) {\n    errors.push(`Invalid 'to' address: expected ${payTo}, got ${toAddr}`);\n  }\n\n  return errors.length > 0 ? errors.join(\"; \") : \"valid\";\n}\n\n\n\n// try to decode the x-payment header if it exists\ntry {\n    // Decode the x-payment header from base64\n    const xPaymentHeader = $('Webhook').first().json.headers['x-payment'];\n    const decodedXPayment = Buffer.from(xPaymentHeader, 'base64').toString('utf-8');\n    // Parse the decoded value into a JSON object\n    const decodedXPaymentJson = JSON.parse(decodedXPayment);\n\n    const validation = validateXPayment(decodedXPaymentJson)\n\n    if (validation !== \"valid\") {\n      return { \n        error: {\n          errorMessage: JSON.stringify(validation), \n          paymentConfigs: [$('Validate & Verify POST Body').first().json.accepts[selectedToken]]\n        } \n      };\n    }\n\n    const verification = verifyPaymentDetails(decodedXPaymentJson, [paymentTokens[selectedToken]], payTo[paymentTokens[selectedToken].chain]);\n\n    if (verification !== \"valid\") {\n      return {\n        error: {\n          errorMessage: JSON.stringify(verification),\n          paymentConfigs: [$('Validate & Verify POST Body').first().json.accepts[selectedToken]]\n        }\n      }\n    }\n\n    // make sure the quote amount is the same as the authorization amount or the tx will revert\n    if (BigInt(decodedXPaymentJson[\"payload\"][\"authorization\"][\"value\"]) !== BigInt($('Payment Token Configs').first().json.body.fromAmount)) {\n      return {\n        error: {\n          errorMessage: JSON.stringify(`fromAmount (${$('Payment Token Configs').first().json.body.fromAmount}) not equal to authorization value (${decodedXPaymentJson[\"payload\"][\"authorization\"][\"value\"]})`),\n          paymentConfigs: [$('Validate & Verify POST Body').first().json.accepts[selectedToken]]\n        }\n      }\n    }\n\n    // make sure the fromAddress is the same address the authorization\n    if (decodedXPaymentJson[\"payload\"][\"authorization\"][\"from\"].toLowerCase() !== $('Payment Token Configs').first().json.body.fromAddress.toLowerCase()) {\n      return {\n        error: {\n          errorMessage: JSON.stringify(`fromAddress (${$('Payment Token Configs').first().json.body.fromAddress}) not equal to authorization address (${decodedXPaymentJson[\"payload\"][\"authorization\"][\"from\"]})`),\n          paymentConfigs: [$('Validate & Verify POST Body').first().json.accepts[selectedToken]]\n        }\n      }\n    }\n\n  \n    // Add the parsed JSON object to the input\n    $input.first().json.decodedXPayment = decodedXPaymentJson;\n\n    const splitSig = splitSignature(decodedXPaymentJson.payload.signature);\n    $input.first().json.decodedXPayment.payload.r = splitSig.r;\n    $input.first().json.decodedXPayment.payload.s = splitSig.s;\n    $input.first().json.decodedXPayment.payload.v = splitSig.v;\n\n    $input.first().json.contractMethodId = Object.values(paymentTokens).find(\n      (entry) => entry.network.toLowerCase() === (decodedXPaymentJson.network || \"\").toLowerCase()\n     ).contractMethodId;\n\n    $input.first().json.gasLimit = gasLimit;\n\n    $input.first().json.paymentConfigs = [($('Validate & Verify POST Body').first().json.accepts)[selectedToken]];\n\n    return $input.all();\n} catch (error) {\n    // Return an error object if the token format is invalid\n    return {\n      error: {\n        errorMessage: JSON.stringify(estimate), \n        paymentConfigs: [($('Validate & Verify POST Body').first().json.accepts)[selectedToken]]\n      } \n    };\n}\n\nreturn $input.all();\n\n"
          },
          "typeVersion": 2
        },
        {
          "id": "dad98431-090b-49f3-b35f-81ee8344ecad",
          "name": "Payment Token Configs",
          "type": "n8n-nodes-base.code",
          "onError": "continueRegularOutput",
          "position": [
            -1632,
            896
          ],
          "parameters": {
            "jsCode": "// put your X402 resource description here\nconst resourceDescription =  \"Swap stablecoins for native tokens cross-chain.\"; \n// the amount of time in seconds the authorization should be good for\nconst timeOut = 60;\n\n// the gas station contract is the same on base, avalanche, and arbitrum\n// Latest version is V2: https://github.com/UXlySoftware/1shot-gas-station\n// This is the \"payTo\" address for x402\nconst gasStationContract = {\n  \"8453\": \"0x949EBD97b770bcA5146F24f4F9De815b3F457680\",\n  \"43114\": \"0x949EBD97b770bcA5146F24f4F9De815b3F457680\",\n  \"42161\": \"0x949EBD97b770bcA5146F24f4F9De815b3F457680\",\n  \"59144\": \"0x87435C81ef97D608E426f1f0e2185410C9Ba362A\",\n}\n\n// Got to 1Shot Prompts (https://app.1shotapi.com/1shot-prompts) and import the \n// callDiamondWithEIP3009SignatureToNative function, get its contract method id\n// and put it here\nconst gasStationContractMethodIds = {\n  \"base\": \"\",\n  \"arbitrum\": \"\",\n  \"avalanche\": \"\",\n  \"linea\": \"\"\n}\n\n// configure addiotional payment tokens here\nconst paymentTokens = [\n  {\n    tokenAddress: \"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\n    maxAmountRequired: 1000,\n    chain: \"8453\",\n    name: \"USD Coin\",\n    version: \"2\",\n    network: \"base\",\n    contractMethodId: gasStationContractMethodIds[\"base\"]\n  },\n  {\n    tokenAddress: \"0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\n    maxAmountRequired: 1000000,\n    chain: \"43114\",\n    name: \"USD Coin\",\n    version: \"2\",\n    network: \"avalanche\",\n    contractMethodId: gasStationContractMethodIds[\"avalanche\"]\n  },\n  {\n    tokenAddress: \"0xaf88d065e77c8cc2239327c5edb3a432268e5831\",\n    maxAmountRequired: 100000,\n    chain: \"42161\",\n    name: \"USD Coin\",\n    version: \"2\",\n    network: \"arbitrum\",\n    contractMethodId: gasStationContractMethodIds[\"arbitrum\"]\n  },\n  {\n    tokenAddress: \"0xACYOUR_TWILIO_ACCOUNT_SID2435DA\",\n    maxAmountRequired: 10000,\n    chain: \"59144\",\n    name: \"MetaMask USD\",\n    version: \"1\",\n    network: \"linea\",\n    contractMethodId: gasStationContractMethodIds[\"linea\"]\n  },\n  {\n    tokenAddress: \"0x46850aD61C2B7d64d08c9C754F45254596696984\",\n    maxAmountRequired: 10000,\n    chain: \"42161\",\n    name: \"PayPal USD\",\n    version: \"1\",\n    network: \"arbitrum\",\n    contractMethodId: gasStationContractMethodIds[\"arbitrum\"]\n  }\n];\n\n$input.first().json.resourceDescription = resourceDescription;\n$input.first().json.timeOut = timeOut;\n$input.first().json.paymentTokens = paymentTokens;\n$input.first().json.gasStationContract = gasStationContract;\n\nreturn $input.all();"
          },
          "typeVersion": 2
        },
        {
          "id": "dd5f6fd4-f74b-48cd-ab8a-66852214929c",
          "name": "Validate & Verify POST Body",
          "type": "n8n-nodes-base.code",
          "onError": "continueErrorOutput",
          "position": [
            -1408,
            896
          ],
          "parameters": {
            "jsCode": "const timeOut = $input.first().json.timeOut;\nconst resourceDescription = $input.first().json.resourceDescription;\nconst paymentTokens = $input.first().json.paymentTokens;\n\n// this helper function will convert our simple payment configs into an x402 \n// error response \nfunction transformConfig(config, payTo, maxAmountRequired, timeout, resource, resourceDescription) {\n  return Object.values(config).map(entry => ({\n    scheme: \"exact\",\n    network: entry.network,\n    maxAmountRequired: maxAmountRequired,\n    resource: resource, \n    description: resourceDescription,\n    mimeType: \"\",\n    payTo: payTo,\n    maxTimeoutSeconds: timeout, // passed in as argument\n    asset: entry.tokenAddress,\n    extra: {\n      name: entry.name,\n      version: entry.version\n    }\n  }));\n}\n\nfunction requireField(name, value) {\n  if (value === null || value === undefined || value === \"\") {\n    throw new Error(`Missing or empty required field: ${name}`);\n  }\n  return value;\n}\n\n// this will look up if the requested payment token is one we support\nfunction findPaymentTokenIndex(paymentTokens, fromToken, fromChain) {\n  const index = paymentTokens.findIndex(\n    (token) =>\n      token.tokenAddress.toLowerCase() === (fromToken || \"\").toLowerCase() &&\n      token.chain === String(fromChain)\n  );\n\n  if (index === -1) {\n    throw new Error(\n      `No matching payment token found for token=${fromToken}, chain=${fromChain}`\n    );\n  }\n\n  return index;\n}\n\nlet fromChain;\nlet fromToken;\nlet fromAmount;\nlet fromAddress;\nlet toChain;\nlet accepts; \n\n// Validate the required input parameters\ntry {\n  fromChain = requireField(\"fromChain\", $input.first().json.body.fromChain);\n  fromToken = requireField(\"fromToken\", $input.first().json.body.fromToken);\n  fromAmount = requireField(\"fromAmount\", $input.first().json.body.fromAmount);\n  fromAddress = requireField(\"fromAddress\", $input.first().json.body.fromAddress);\n  toChain = requireField(\"toChain\", $input.first().json.body.toChain);\n  \n  accepts = transformConfig(paymentTokens, $input.first().json.gasStationContract[$('Webhook').first().json.body.fromChain], $('Webhook').first().json.body.fromAmount,timeOut, $input.first().json.webhookUrl, resourceDescription);\n  $input.first().json.accepts = accepts;\n} catch (error) {\n  console.log(\"asdf: \", accepts)\n  return { \n    error: {\n      errorMessage: \"Missing POST Body Parameters - requires: fromChain, fromToken, fromAmount, fromAddress, tochain\", \n      paymentConfigs: (fromAddress && fromAddress !== \"\") ? transformConfig(paymentTokens, fromAddress, $('Webhook').first().json.body.fromAmount,timeOut, $input.first().json.webhookUrl, resourceDescription) : []\n    } \n  };\n}\n\n// Be ensure the fromToken is one we accept\ntry {\n  // find the token & get its contract method id\n  const selectedToken = findPaymentTokenIndex(paymentTokens, fromToken, fromChain);\n  $input.first().json.selectedToken = selectedToken;\n} catch (error) {\n  return { \n    error: {\n      errorMessage: \"fromToken & fromChain must match one of the supported payment tokens.\", \n      paymentConfigs: accepts\n    } \n  };\n}\n\nreturn $input.all();\n\n"
          },
          "typeVersion": 2
        },
        {
          "id": "f8f41400-ca0f-410d-a53b-f41d2730c9cc",
          "name": "Response: No X-Payment Header2",
          "type": "n8n-nodes-base.respondToWebhook",
          "position": [
            -736,
            800
          ],
          "parameters": {
            "options": {
              "responseCode": 402
            },
            "respondWith": "json",
            "responseBody": "={\n  \"x402Version\": \"1\",\n  \"error\": {{ $('Validate & Verify X-Payment Header').item.json.error.errorMessage }},\n  \"accepts\": {{ JSON.stringify($('Validate & Verify X-Payment Header').item.json.error.paymentConfigs) }}\n}"
          },
          "typeVersion": 1.3
        },
        {
          "id": "2a50dbb1-5078-4b0d-9415-23c418c68b81",
          "name": "Sticky Note4",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -2560,
            496
          ],
          "parameters": {
            "color": 6,
            "width": 616,
            "height": 524,
            "content": "## x402 Payment Endpoint \n\nThis workflow fragment can be used to monetize any workflow you can build in n8n by accepting stablecoin payments via an API call.\n\nLearn more about the [x402 payment](https://www.x402.org/) protocol. \n\nWatch the [YouTube tutorial](https://youtu.be/SHb5WkggQR4) for a complete walkthrough.\n@[youtube](SHb5WkggQR4)"
          },
          "typeVersion": 1
        },
        {
          "id": "b05cea5a-9e77-4f85-b98a-2a7c40b2d12b",
          "name": "Response: Verify Failed",
          "type": "n8n-nodes-base.respondToWebhook",
          "position": [
            -288,
            800
          ],
          "parameters": {
            "options": {
              "responseCode": 402
            },
            "respondWith": "json",
            "responseBody": "={\n  \"x402Version\": \"1\",\n  \"error\": {{ JSON.stringify($('Simulate Payment').item.json.error.message) }},\n  \"accepts\": {{ JSON.stringify($('Validate & Verify POST Body').item.json.accepts) }}\n}"
          },
          "typeVersion": 1.3
        },
        {
          "id": "f81d3b66-2a3a-4a8f-936f-41da1d86127e",
          "name": "Response: Settle Failed",
          "type": "n8n-nodes-base.respondToWebhook",
          "position": [
            -64,
            608
          ],
          "parameters": {
            "options": {
              "responseCode": 402
            },
            "respondWith": "json",
            "responseBody": "={\n  \"x402Version\": \"1\",\n  \"error\": \"Payment Settlement Failed\",\n  \"accepts\": {{ JSON.stringify($('Validate & Verify POST Body').item.json.accepts) }}\n}"
          },
          "typeVersion": 1.3
        }
      ],
      "active": false,
      "pinData": {},
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "b62f044b-b5cb-4fef-a6c6-445915dbed9a",
      "connections": {
        "Webhook": {
          "main": [
            [
              {
                "node": "Payment Token Configs",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Simulate Payment": {
          "main": [
            [
              {
                "node": "On Successful Payment Simulation",
                "type": "main",
                "index": 0
              }
            ],
            []
          ]
        },
        "Fetch Li.Fi Quote": {
          "main": [
            [
              {
                "node": "Validate & Verify X-Payment Header",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Response: Failed to Get Quote",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Payment Token Configs": {
          "main": [
            [
              {
                "node": "Validate & Verify POST Body",
                "type": "main",
                "index": 0
              }
            ],
            []
          ]
        },
        "1Shot API Submit & Wait": {
          "main": [
            [
              {
                "node": "Response: 200 - Payment Successful",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Response: Settle Failed",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Validate & Verify POST Body": {
          "main": [
            [
              {
                "node": "Fetch Li.Fi Quote",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Response: Missing or Invalid Request Body Params",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "On Successful Payment Simulation": {
          "main": [
            [
              {
                "node": "1Shot API Submit & Wait",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Response: Verify Failed",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Validate & Verify X-Payment Header": {
          "main": [
            [
              {
                "node": "Simulate Payment",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Response: No X-Payment Header2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      }
    },
    "lastUpdatedBy": 29,
    "workflowInfo": {
      "nodeCount": 20,
      "nodeTypes": {
        "n8n-nodes-base.if": {
          "count": 1
        },
        "n8n-nodes-base.code": {
          "count": 3
        },
        "n8n-nodes-base.webhook": {
          "count": 1
        },
        "n8n-nodes-1shot.oneShot": {
          "count": 1
        },
        "n8n-nodes-base.stickyNote": {
          "count": 6
        },
        "n8n-nodes-base.httpRequest": {
          "count": 1
        },
        "n8n-nodes-1shot.oneShotSynch": {
          "count": 1
        },
        "n8n-nodes-base.respondToWebhook": {
          "count": 6
        }
      }
    },
    "status": "published",
    "user": {
      "name": "1Shot API",
      "username": "oneshotapi",
      "bio": "Power noncustodial stablecoin payments, enterprise workflows, and AI agents via a simple API - Built on MetaMask Smart Wallets and x402",
      "verified": true,
      "links": [
        "https://1shotapi.com"
      ],
      "avatar": "https://gravatar.com/avatar/2f5dd5c202883a323b48cd379db1880533fe083a2d9a3b2b11ebf6f48a984e78?r=pg&d=retro&size=200"
    },
    "nodes": [
      {
        "id": 19,
        "icon": "file:httprequest.svg",
        "name": "n8n-nodes-base.httpRequest",
        "codex": {
          "data": {
            "alias": [
              "API",
              "Request",
              "URL",
              "Build",
              "cURL"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "‚òÄÔ∏è",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "üß¨",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/automatically-pulling-and-visualizing-data-with-n8n/",
                  "icon": "üìà",
                  "label": "Automatically pulling and visualizing data with n8n"
                },
                {
                  "url": "https://n8n.io/blog/learn-how-to-automatically-cross-post-your-content-with-n8n/",
                  "icon": "‚úçÔ∏è",
                  "label": "Learn how to automatically cross-post your content with n8n"
                },
                {
                  "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                  "icon": "üßæ",
                  "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
                },
                {
                  "url": "https://n8n.io/blog/running-n8n-on-ships-an-interview-with-maranics/",
                  "icon": "üõ≥",
                  "label": "Running n8n on ships: An interview with Maranics"
                },
                {
                  "url": "https://n8n.io/blog/what-are-apis-how-to-use-them-with-no-code/",
                  "icon": " ü™¢",
                  "label": "What are APIs and how to use them with no code"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "‚ö°Ô∏è",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/world-poetry-day-workflow/",
                  "icon": "üìú",
                  "label": "Celebrating World Poetry Day with a daily poem in Telegram"
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "üí°",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/automate-designs-with-bannerbear-and-n8n/",
                  "icon": "üé®",
                  "label": "Automate Designs with Bannerbear and n8n"
                },
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " üï∏Ô∏è",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/building-an-expense-tracking-app-in-10-minutes/",
                  "icon": "üì±",
                  "label": "Building an expense tracking app in 10 minutes"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ü§ñ",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/how-to-use-the-http-request-node-the-swiss-army-knife-for-workflow-automation/",
                  "icon": "üß∞",
                  "label": "How to use the HTTP Request Node - The Swiss Army Knife for Workflow Automation"
                },
                {
                  "url": "https://n8n.io/blog/learn-how-to-use-webhooks-with-mattermost-slash-commands/",
                  "icon": "ü¶Ñ",
                  "label": "Learn how to use webhooks with Mattermost slash commands"
                },
                {
                  "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                  "icon": "üìà",
                  "label": "How a Membership Development Manager automates his work and investments"
                },
                {
                  "url": "https://n8n.io/blog/a-low-code-bitcoin-ticker-built-with-questdb-and-n8n-io/",
                  "icon": "üìà",
                  "label": "A low-code bitcoin ticker built with QuestDB and n8n.io"
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "üé°",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/automations-for-activists/",
                  "icon": "‚ú®",
                  "label": "How Common Knowledge use workflow automation for activism"
                },
                {
                  "url": "https://n8n.io/blog/creating-scheduled-text-affirmations-with-n8n/",
                  "icon": "ü§ü",
                  "label": "Creating scheduled text affirmations with n8n"
                },
                {
                  "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                  "icon": "üõµ",
                  "label": "How Goomer automated their operations with over 200 n8n workflows"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest/"
                }
              ]
            },
            "categories": [
              "Development",
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"output\"]",
        "defaults": {
          "name": "HTTP Request",
          "color": "#0004F5"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MCAyMEM0MCA4Ljk1MzE0IDMxLjA0NjkgMCAyMCAwQzguOTUzMTQgMCAwIDguOTUzMTQgMCAyMEMwIDMxLjA0NjkgOC45NTMxNCA0MCAyMCA0MEMzMS4wNDY5IDQwIDQwIDMxLjA0NjkgNDAgMjBaTTIwIDM2Ljk0NThDMTguODg1MiAzNi45NDU4IDE3LjEzNzggMzUuOTY3IDE1LjQ5OTggMzIuNjk4NUMxNC43OTY0IDMxLjI5MTggMTQuMTk2MSAyOS41NDMxIDEzLjc1MjYgMjcuNjg0N0gyNi4xODk4QzI1LjgwNDUgMjkuNTQwMyAyNS4yMDQ0IDMxLjI5MDEgMjQuNTAwMiAzMi42OTg1QzIyLjg2MjIgMzUuOTY3IDIxLjExNDggMzYuOTQ1OCAyMCAzNi45NDU4Wk0xMi45MDY0IDIwQzEyLjkwNjQgMjEuNjA5NyAxMy4wMDg3IDIzLjE2NCAxMy4yMDAzIDI0LjYzMDVIMjYuNzk5N0MyNi45OTEzIDIzLjE2NCAyNy4wOTM2IDIxLjYwOTcgMjcuMDkzNiAyMEMyNy4wOTM2IDE4LjM5MDMgMjYuOTkxMyAxNi44MzYgMjYuNzk5NyAxNS4zNjk1SDEzLjIwMDNDMTMuMDA4NyAxNi44MzYgMTIuOTA2NCAxOC4zOTAzIDEyLjkwNjQgMjBaTTIwIDMuMDU0MTlDMjEuMTE0OSAzLjA1NDE5IDIyLjg2MjIgNC4wMzA3OCAyNC41MDAxIDcuMzAwMzlDMjUuMjA2NiA4LjcxNDA4IDI1LjgwNzIgMTAuNDA2NyAyNi4xOTIgMTIuMzE1M0gxMy43NTAxQzE0LjE5MzMgMTAuNDA0NyAxNC43OTQyIDguNzEyNTQgMTUuNDk5OCA3LjMwMDY0QzE3LjEzNzcgNC4wMzA4MyAxOC44ODUxIDMuMDU0MTkgMjAgMy4wNTQxOVpNMzAuMTQ3OCAyMEMzMC4xNDc4IDE4LjQwOTkgMzAuMDU0MyAxNi44NjE3IDI5LjgyMjcgMTUuMzY5NUgzNi4zMDQyQzM2LjcyNTIgMTYuODQyIDM2Ljk0NTggMTguMzk2NCAzNi45NDU4IDIwQzM2Ljk0NTggMjEuNjAzNiAzNi43MjUyIDIzLjE1OCAzNi4zMDQyIDI0LjYzMDVIMjkuODIyN0MzMC4wNTQzIDIzLjEzODMgMzAuMTQ3OCAyMS41OTAxIDMwLjE0NzggMjBaTTI2LjI3NjcgNC4yNTUxMkMyNy42MzY1IDYuMzYwMTkgMjguNzExIDkuMTMyIDI5LjM3NzQgMTIuMzE1M0gzNS4xMDQ2QzMzLjI1MTEgOC42NjggMzAuMTA3IDUuNzgzNDYgMjYuMjc2NyA0LjI1NTEyWk0xMC42MjI2IDEyLjMxNTNINC44OTI5M0M2Ljc1MTQ3IDguNjY3ODQgOS44OTM1MSA1Ljc4MzQxIDEzLjcyMzIgNC4yNTUxM0MxMi4zNjM1IDYuMzYwMjEgMTEuMjg5IDkuMTMyMDEgMTAuNjIyNiAxMi4zMTUzWk0zLjA1NDE5IDIwQzMuMDU0MTkgMjEuNjAzIDMuMjc3NDMgMjMuMTU3NSAzLjY5NDg0IDI0LjYzMDVIMTAuMTIxN0M5Ljk0NjE5IDIzLjE0MiA5Ljg1MjIyIDIxLjU5NDMgOS44NTIyMiAyMEM5Ljg1MjIyIDE4LjQwNTcgOS45NDYxOSAxNi44NTggMTAuMTIxNyAxNS4zNjk1SDMuNjk0ODRDMy4yNzc0MyAxNi44NDI1IDMuMDU0MTkgMTguMzk3IDMuMDU0MTkgMjBaTTI2LjI3NjYgMzUuNzQyN0MyNy42MzY1IDMzLjYzOTMgMjguNzExIDMwLjg2OCAyOS4zNzc0IDI3LjY4NDdIMzUuMTA0NkMzMy4yNTEgMzEuMzMyMiAzMC4xMDY4IDM0LjIxNzkgMjYuMjc2NiAzNS43NDI3Wk0xMy43MjM0IDM1Ljc0MjdDOS44OTM2OSAzNC4yMTc5IDYuNzUxNTUgMzEuMzMyNCA0Ljg5MjkzIDI3LjY4NDdIMTAuNjIyNkMxMS4yODkgMzAuODY4IDEyLjM2MzUgMzMuNjM5MyAxMy43MjM0IDM1Ljc0MjdaIiBmaWxsPSIjM0E0MkU5Ii8+Cjwvc3ZnPgo="
        },
        "displayName": "HTTP Request",
        "typeVersion": 4,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 20,
        "icon": "fa:map-signs",
        "name": "n8n-nodes-base.if",
        "codex": {
          "data": {
            "alias": [
              "Router",
              "Filter",
              "Condition",
              "Logic",
              "Boolean",
              "Branch"
            ],
            "details": "The IF node can be used to implement binary conditional logic in your workflow. You can set up one-to-many conditions to evaluate each item of data being inputted into the node. That data will either evaluate to TRUE or FALSE and route out of the node accordingly.\n\nThis node has multiple types of conditions: Bool, String, Number, and Date & Time.",
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                  "icon": "üè≠",
                  "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
                },
                {
                  "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                  "icon": "‚òÄÔ∏è",
                  "label": "2021: The Year to Automate the New You with n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                  "icon": "üß¨",
                  "label": "Why business process automation with n8n can change your daily life"
                },
                {
                  "url": "https://n8n.io/blog/create-a-toxic-language-detector-for-telegram/",
                  "icon": "ü§¨",
                  "label": "Create a toxic language detector for Telegram in 4 step"
                },
                {
                  "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                  "icon": "store",
                  "label": "6 e-commerce workflows to power up your Shopify s"
                },
                {
                  "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                  "icon": "üîó",
                  "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
                },
                {
                  "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                  "icon": "‚öôÔ∏è",
                  "label": "Automate your data processing pipeline in 9 steps"
                },
                {
                  "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                  "icon": "üë•",
                  "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "‚ö°Ô∏è",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                  "icon": "üí°",
                  "label": "15 Google apps you can combine and automate to increase productivity"
                },
                {
                  "url": "https://n8n.io/blog/automation-for-maintainers-of-open-source-projects/",
                  "icon": "üè∑Ô∏è",
                  "label": "How to automatically manage contributions to open-source projects"
                },
                {
                  "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                  "icon": " üï∏Ô∏è",
                  "label": "How uProc scraped a multi-page website with a low-code workflow"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ü§ñ",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                  "icon": "üß†",
                  "label": "Why this Product Manager loves workflow automation with n8n"
                },
                {
                  "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                  "icon": "üôå",
                  "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
                },
                {
                  "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                  "icon": "üé°",
                  "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
                },
                {
                  "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                  "icon": "üéñ",
                  "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
                },
                {
                  "url": "https://n8n.io/blog/aws-workflow-automation/",
                  "label": "7 no-code workflow automations for Amazon Web Services"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.if/"
                }
              ]
            },
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Flow"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "If",
          "color": "#408000"
        },
        "iconData": {
          "icon": "map-signs",
          "type": "icon"
        },
        "displayName": "If",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 47,
        "icon": "file:webhook.svg",
        "name": "n8n-nodes-base.webhook",
        "codex": {
          "data": {
            "alias": [
              "HTTP",
              "API",
              "Build",
              "WH"
            ],
            "resources": {
              "generic": [
                {
                  "url": "https://n8n.io/blog/learn-how-to-automatically-cross-post-your-content-with-n8n/",
                  "icon": "‚úçÔ∏è",
                  "label": "Learn how to automatically cross-post your content with n8n"
                },
                {
                  "url": "https://n8n.io/blog/running-n8n-on-ships-an-interview-with-maranics/",
                  "icon": "üõ≥",
                  "label": "Running n8n on ships: An interview with Maranics"
                },
                {
                  "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                  "icon": "üîó",
                  "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
                },
                {
                  "url": "https://n8n.io/blog/what-are-apis-how-to-use-them-with-no-code/",
                  "icon": " ü™¢",
                  "label": "What are APIs and how to use them with no code"
                },
                {
                  "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                  "icon": "‚ö°Ô∏è",
                  "label": "5 tasks you can automate with the new Notion API "
                },
                {
                  "url": "https://n8n.io/blog/how-a-digital-strategist-uses-n8n-for-online-marketing/",
                  "icon": "üíª",
                  "label": "How a digital strategist uses n8n for online marketing"
                },
                {
                  "url": "https://n8n.io/blog/the-ultimate-guide-to-automate-your-video-collaboration-with-whereby-mattermost-and-n8n/",
                  "icon": "üìπ",
                  "label": "The ultimate guide to automate your video collaboration with Whereby, Mattermost, and n8n"
                },
                {
                  "url": "https://n8n.io/blog/how-to-automatically-give-kudos-to-contributors-with-github-slack-and-n8n/",
                  "icon": "üëè",
                  "label": "How to automatically give kudos to contributors with GitHub, Slack, and n8n"
                },
                {
                  "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                  "icon": "ü§ñ",
                  "label": "5 workflow automations for Mattermost that we love at n8n"
                },
                {
                  "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                  "icon": "üß†",
                  "label": "Why this Product Manager loves workflow automation with n8n"
                },
                {
                  "url": "https://n8n.io/blog/creating-custom-incident-response-workflows-with-n8n/",
                  "label": "How to automate every step of an incident response workflow"
                },
                {
                  "url": "https://n8n.io/blog/learn-to-build-powerful-api-endpoints-using-webhooks/",
                  "icon": "üß∞",
                  "label": "Learn to Build Powerful API Endpoints Using Webhooks"
                },
                {
                  "url": "https://n8n.io/blog/learn-how-to-use-webhooks-with-mattermost-slash-commands/",
                  "icon": "ü¶Ñ",
                  "label": "Learn how to use webhooks with Mattermost slash commands"
                },
                {
                  "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                  "icon": "üõµ",
                  "label": "How Goomer automated their operations with over 200 n8n workflows"
                }
              ],
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.webhook/"
                }
              ]
            },
            "categories": [
              "Development",
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"trigger\"]",
        "defaults": {
          "name": "Webhook"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PHBhdGggZmlsbD0iIzM3NDc0ZiIgZD0iTTM1IDM3Yy0yLjIgMC00LTEuOC00LTRzMS44LTQgNC00IDQgMS44IDQgNC0xLjggNC00IDQiLz48cGF0aCBmaWxsPSIjMzc0NzRmIiBkPSJNMzUgNDNjLTMgMC01LjktMS40LTcuOC0zLjdsMy4xLTIuNWMxLjEgMS40IDIuOSAyLjMgNC43IDIuMyAzLjMgMCA2LTIuNyA2LTZzLTIuNy02LTYtNmMtMSAwLTIgLjMtMi45LjdsLTEuNyAxTDIzLjMgMTZsMy41LTEuOSA1LjMgOS40YzEtLjMgMi0uNSAzLS41IDUuNSAwIDEwIDQuNSAxMCAxMFM0MC41IDQzIDM1IDQzIi8+PHBhdGggZmlsbD0iIzM3NDc0ZiIgZD0iTTE0IDQzQzguNSA0MyA0IDM4LjUgNCAzM2MwLTQuNiAzLjEtOC41IDcuNS05LjdsMSAzLjlDOS45IDI3LjkgOCAzMC4zIDggMzNjMCAzLjMgMi43IDYgNiA2czYtMi43IDYtNnYtMmgxNXY0SDIzLjhjLS45IDQuNi01IDgtOS44IDgiLz48cGF0aCBmaWxsPSIjZTkxZTYzIiBkPSJNMTQgMzdjLTIuMiAwLTQtMS44LTQtNHMxLjgtNCA0LTQgNCAxLjggNCA0LTEuOCA0LTQgNCIvPjxwYXRoIGZpbGw9IiMzNzQ3NGYiIGQ9Ik0yNSAxOWMtMi4yIDAtNC0xLjgtNC00czEuOC00IDQtNCA0IDEuOCA0IDQtMS44IDQtNCA0Ii8+PHBhdGggZmlsbD0iI2U5MWU2MyIgZD0ibTE1LjcgMzQtMy40LTIgNS45LTkuN2MtMi0xLjktMy4yLTQuNS0zLjItNy4zIDAtNS41IDQuNS0xMCAxMC0xMHMxMCA0LjUgMTAgMTBjMCAuOS0uMSAxLjctLjMgMi41bC0zLjktMWMuMS0uNS4yLTEgLjItMS41IDAtMy4zLTIuNy02LTYtNnMtNiAyLjctNiA2YzAgMi4xIDEuMSA0IDIuOSA1LjFsMS43IDF6Ii8+PC9zdmc+"
        },
        "displayName": "Webhook",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 535,
        "icon": "file:webhook.svg",
        "name": "n8n-nodes-base.respondToWebhook",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.respondtowebhook/"
                }
              ]
            },
            "categories": [
              "Core Nodes",
              "Utility"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Respond to Webhook"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PHBhdGggZmlsbD0iIzM3NDc0ZiIgZD0iTTM1IDM3Yy0yLjIgMC00LTEuOC00LTRzMS44LTQgNC00IDQgMS44IDQgNC0xLjggNC00IDQiLz48cGF0aCBmaWxsPSIjMzc0NzRmIiBkPSJNMzUgNDNjLTMgMC01LjktMS40LTcuOC0zLjdsMy4xLTIuNWMxLjEgMS40IDIuOSAyLjMgNC43IDIuMyAzLjMgMCA2LTIuNyA2LTZzLTIuNy02LTYtNmMtMSAwLTIgLjMtMi45LjdsLTEuNyAxTDIzLjMgMTZsMy41LTEuOSA1LjMgOS40YzEtLjMgMi0uNSAzLS41IDUuNSAwIDEwIDQuNSAxMCAxMFM0MC41IDQzIDM1IDQzIi8+PHBhdGggZmlsbD0iIzM3NDc0ZiIgZD0iTTE0IDQzQzguNSA0MyA0IDM4LjUgNCAzM2MwLTQuNiAzLjEtOC41IDcuNS05LjdsMSAzLjlDOS45IDI3LjkgOCAzMC4zIDggMzNjMCAzLjMgMi43IDYgNiA2czYtMi43IDYtNnYtMmgxNXY0SDIzLjhjLS45IDQuNi01IDgtOS44IDgiLz48cGF0aCBmaWxsPSIjZTkxZTYzIiBkPSJNMTQgMzdjLTIuMiAwLTQtMS44LTQtNHMxLjgtNCA0LTQgNCAxLjggNCA0LTEuOCA0LTQgNCIvPjxwYXRoIGZpbGw9IiMzNzQ3NGYiIGQ9Ik0yNSAxOWMtMi4yIDAtNC0xLjgtNC00czEuOC00IDQtNCA0IDEuOCA0IDQtMS44IDQtNCA0Ii8+PHBhdGggZmlsbD0iI2U5MWU2MyIgZD0ibTE1LjcgMzQtMy40LTIgNS45LTkuN2MtMi0xLjktMy4yLTQuNS0zLjItNy4zIDAtNS41IDQuNS0xMCAxMC0xMHMxMCA0LjUgMTAgMTBjMCAuOS0uMSAxLjctLjMgMi41bC0zLjktMWMuMS0uNS4yLTEgLjItMS41IDAtMy4zLTIuNy02LTYtNnMtNiAyLjctNiA2YzAgMi4xIDEuMSA0IDIuOSA1LjFsMS43IDF6Ii8+PC9zdmc+"
        },
        "displayName": "Respond to Webhook",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 7,
            "name": "Utility"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 565,
        "icon": "fa:sticky-note",
        "name": "n8n-nodes-base.stickyNote",
        "codex": {
          "data": {
            "alias": [
              "Comments",
              "Notes",
              "Sticky"
            ],
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Sticky Note",
          "color": "#FFD233"
        },
        "iconData": {
          "icon": "sticky-note",
          "type": "icon"
        },
        "displayName": "Sticky Note",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 834,
        "icon": "file:code.svg",
        "name": "n8n-nodes-base.code",
        "codex": {
          "data": {
            "alias": [
              "cpde",
              "Javascript",
              "JS",
              "Python",
              "Script",
              "Custom Code",
              "Function"
            ],
            "details": "The Code node allows you to execute JavaScript in your workflow.",
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
                }
              ]
            },
            "categories": [
              "Development",
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers",
                "Data Transformation"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Code"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
        },
        "displayName": "Code",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 5,
            "name": "Development"
          },
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      }
    ],
    "categories": [
      {
        "id": 44,
        "name": "Crypto Trading"
      },
      {
        "id": 51,
        "name": "Multimodal AI"
      }
    ],
    "image": [
      {
        "id": 2778,
        "url": "https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_2629468840.png"
      }
    ]
  }
}