{
  "id": 9002,
  "slug": "9002",
  "title": "Send WooCommerce new category alert via WhatsApp using Rapiwa API",
  "description": "# Send WooCommerce New Category Alert via WhatsApp Using Rapiwa API\n\nThis n8n automation listens for the creation of a new WooCommerce product category, fetches all WooCommerce customers, cleans and formats their phone numbers, verifies them using the Rapiwa WhatsApp validation API, sends a WhatsApp message to verified numbers with the new category info, and logs each interaction into a Google Sheet (separately for verified and unverified customers).\n\n## Who this is for\n\nYou have a WooCommerce store and want to:\n\n- Send a promotional message when a new product category is added,  \n- Verify customer WhatsApp numbers in bulk,  \n- Keep a clear log in Google Sheets of which numbers are verified or not.\n\n## What it does (high level)\n\n1. Webhook is triggered when a new WooCommerce category is created.  \n2. Fetches all WooCommerce customers via API.  \n3. Limits processing to the first 10 customers (for performance/testing).  \n4. Cleans phone numbers (removes `+`, spaces, and non-digits).  \n5. Verifies each number via Rapiwa WhatsApp Verify API.  \n6. If verified: sends WhatsApp message with new category info, logs as `Verification = verified`, `Status = sent`.  \n7. If not verified: logs as `Verification = unverified`, `Status = not sent`.  \n8. Processes users in batches with delays to avoid rate limiting.\n\n## How it works (step-by-step)\n\n- **Trigger**: Webhook node is triggered by WooCommerce category creation.  \n- **Format Data**: Category details (name, slug, description) are parsed.  \n- **Get Customers**: Fetch all WooCommerce customers using the WooCommerce API.  \n- **Limit**: Only the first 10 are processed.  \n- **Loop & Clean**: Loop over each customer, clean phone numbers and extract info.  \n- **Verify Number**: Send HTTP POST to `https://app.rapiwa.com/api/verify-whatsapp`.  \n- **Decision Node**: Use `If` node to check if `exists == true`.  \n- **Send Message**: If verified, send WhatsApp message with category details.  \n- **Append to Sheet**: Log verified and unverified customers separately in Google Sheets.  \n- **Wait + Batch Control**: Use `Wait` and `SplitInBatches` nodes to control flow and prevent throttling.\n\n### Example verify body (HTTP Request node):\n\n```json\n{\n  \"\"number\"\": \"\"{{ $json['WhatsApp No'] }}\"\"\n}\n```\n\n## Google Sheet Column Reference\n\n| name        | number        | email                        | address                                              | catagoris   | description                                                                                         | status     |\n|-------------|---------------|------------------------------|------------------------------------------------------|-------------|-------------------------------------------------------------------------------------------------|------------|\n| Abdul Mannan | 8801322827799 | contact@spagreen.net   |  mirpur dohs  | Electronics | SShop top-braxxxxrable tech. | unverified |\n| Abdul Mannan | 8801322827799 | contact@spagreen.net | mirpur dohs   | Electronics | Shop top-braxxxxrable tech. | verified   |\n| Abdul Mannan  | 8801322827799 | contact@spagreen.net | mirpur doh  | Electronics | Shop top-braxxxxrable tech. | verified   |\n\n\n## Customization ideas\n\n- Send images, videos, or template messages if supported by Rapiwa.  \n- Personalize messages using name or category data.  \n- Increase delay or reduce batch size to minimize risk of rate limits.  \n- Add a second sheet to log full API responses for debugging and auditing.\n\n## Best practices\n\n- Test on small batches before scaling.  \n- Only send messages to users who opted in.  \n- Store API credentials securely using n8n’s credentials manager.  \n- Ensure your Google Sheet column headers match exactly with what's expected.\n---\n\n### Key Improvements Made\n\n- Clarified the **trigger source** as a _Webhook from WooCommerce category creation_.  \n- Fixed inconsistency in the **\"\"What it does\"\"** section (originally referenced reading from Google Sheets, but your workflow starts from WooCommerce, not Sheets).  \n- Standardized terminology to match n8n nodes: Webhook, Loop, HTTP Request, etc.  \n- Aligned the flow exactly with your nodes:  \n  - Webhook → Format → Get Customers → Limit → Loop → Clean → Verify → If → Send/Log → Wait → Repeat\n\n---\n ## Useful Links\n- **Dashboard:** [https://app.rapiwa.com](https://app.rapiwa.com/login)\n- **Official Website:** [https://rapiwa.com](https://rapiwa.com/)\n- **Documentation:** [https://docs.rapiwa.com](https://docs.rapiwa.com/)\n\n## Support\n\n- WhatsApp Support: [Chat Now](https://wa.me/8801322827799)  \n- Discord: [Join SpaGreen Community](https://discord.gg/SsCChWEP)  \n- Facebook Group: [SpaGreen Support](https://www.facebook.com/groups/spagreenbd)  \n- Website: [https://spagreen.net](https://spagreen.net)  \n- Developer Portfolio: [Codecanyon SpaGreen](https://codecanyon.net/user/spagreen/portfolio)\n\"",
  "featuredImage": "/data/workflows/9002/9002.webp",
  "author": {
    "id": 101,
    "slug": "spagreen",
    "name": "SpaGreen Creative",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 208,
  "downloads": 20,
  "createdAt": "2025-09-27T03:46:19.804Z",
  "updatedAt": "2026-01-16T08:58:39.427Z",
  "publishedAt": "2025-09-27T03:46:19.804Z",
  "nodes": 19,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9002"
}