# 网站改版用户测试计划

**版本**: 1.0  
**最后更新**: 2026-01-10  
**测试负责**: QA 与用户研究团队

---

## 目录

1. [可用性测试](#可用性测试)
2. [性能测试](#性能测试)
3. [功能测试](#功能测试)
4. [用户反馈收集](#用户反馈收集)
5. [灰度发布与回滚](#灰度发布与回滚)

---

## 可用性测试

### 1.1 测试对象特征

#### 目标用户人群

- **n8n 初学者**: 初次接触 n8n 的用户，seeking 简单易用的工作流
- **资深用户**: 已使用 n8n 6 个月以上的用户，需要高级功能
- **非英语使用者**: 来自不同地区，可能对英文 UI 有挑战
- **移动用户**: 通过手机或平板访问网站的用户

#### 样本量

- **冷用户测试** (新用户模拟): 5-8 人
- **热用户测试** (活跃用户): 5-8 人
- **移动设备测试**: 4-6 人
- **残障用户测试** (可访问性): 2-3 人

**总在线测试人数**: 20-25 人
**A/B 测试人数**: 500-1000 人 (灰度发布阶段)

### 1.2 测试场景设计

#### 场景 1: 首次发现工作流

**任务**: 在 30 秒内找到"最近 7 天的 AI 工作流"

成功标准:
- [ ] 用户能快速定位 FilterSidebar
- [ ] 时间段筛选清晰易用
- [ ] AI 分类能找到
- [ ] 结果准确显示

观察指标:
- 完成时间
- 点击步数
- 是否需要帮助
- 是否感到困惑

#### 场景 2: 搜索特定工作流

**任务**: 在 1 分钟内找到"Gmail to Slack"工作流，并查看其详情

成功标准:
- [ ] 搜索功能可见易用
- [ ] 搜索结果相关性高
- [ ] 详情页加载快
- [ ] 详情页内容清晰

观察指标:
- 搜索技巧使用
- 结果满意度评分
- 页面加载时间
- 交互流畅度

#### 场景 3: 提交新工作流

**任务**: 完成"提交工作流"表单 (包括所有必填项)

成功标准:
- [ ] 表单字段清晰
- [ ] 验证消息有帮助
- [ ] 提交成功反馈清晰
- [ ] 预计时间透明

观察指标:
- 完成时间
- 错误频率
- 放弃率
- 用户满意度

#### 场景 4: 订阅 Newsletter

**任务**: 在首页成功订阅 Newsletter

成功标准:
- [ ] 订阅入口醒目
- [ ] 流程简单 (< 3 步)
- [ ] 成功反馈清晰
- [ ] 选项可选 (非强制)

观察指标:
- 转化率
- 完成时间
- 退出点
- 字段填写率

#### 场景 5: 移动端筛选

**任务**: 在手机上使用筛选面板进行工作流筛选

成功标准:
- [ ] 筛选按钮易于点击
- [ ] Bottom Sheet 弹出流畅
- [ ] 操作直观
- [ ] 返回和关闭清晰

观察指标:
- 点击准确度
- 操作完成率
- 返回频率
- 页面响应速度

### 1.3 成功度量指标

| 指标 | 目标值 | 优先级 |
|-----|--------|--------|
| 任务完成率 | >= 85% | P0 |
| 平均完成时间 | <= 目标时间 * 1.5 | P0 |
| 用户满意度 | >= 7/10 | P1 |
| 错误率 | <= 10% | P0 |
| 易用性评分 | >= 4/5 | P1 |
| 需要帮助比例 | <= 15% | P1 |

### 1.4 测试方法

#### 方法 1: 远程用户测试 (优先)

```
工具: UserTesting.com 或 Maze
流程:
1. 创建 3-5 个场景任务
2. 邀请目标用户完成
3. 用户屏幕录制 + 语音讲述思考过程
4. 收集定性反馈
5. 统计量化指标

时间: 2 周
成本: $300-500 (20 测试者)
```

#### 方法 2: A/B 测试 (灰度发布阶段)

```
工具: Google Analytics 4 + Optimize
流程:
1. 分叉旧 UI 版本 (Control) vs 新 UI (Variant)
2. 随机 50% 流量到各版本
3. 追踪关键指标:
   - 筛选使用率
   - 详情页查看深度
   - Newsletter 转化率
4. 2 周后分析，确定赢家

效力: 高度统计显著性
成本: 免费 (built-in analytics)
```

#### 方法 3: 焦点小组讨论

```
流程:
1. 邀请 5-8 个目标用户
2. 集中演示新功能 (30 分钟)
3. 开放讨论 (30 分钟)
4. 深入探讨特定问题 (30分钟)

时间: 1 次 2 小时会议
参与: 在线视频会议
处理: 记录并转录

收获: 深度定性反馈
```

---

## 性能测试

### 2.1 性能基准

| 指标 | 目标值 | 优先级 |
|-----|--------|--------|
| 首页加载时间 (FCP) | < 1.8s | P0 |
| 首页完全加载 (LCP) | < 2.5s | P0 |
| 工作流列表加载 | < 1s | P0 |
| 筛选响应时间 | < 500ms | P0 |
| 详情页加载 | < 1.5s | P0 |
| 无限滚动响应 | < 800ms | P1 |
| TTI (可交互时间) | < 3.5s | P0 |
| CLS (布局偏移) | < 0.1 | P0 |

### 2.2 性能测试工具

#### 工具 1: Lighthouse (Google)

```
运行方式:
npx lighthouse https://n8nworkflow.com --view

报告内容:
- Performance Score (0-100)
- FCP / LCP / CLS
- 优化建议

运行频率: 每次发布前后
```

#### 工具 2: WebPageTest

```
访问: https://www.webpagetest.org/

测试内容:
- 不同网络条件
- 不同地区加载时间
- 瀑布图分析

关键指标: Start Render, SpeedIndex
```

#### 工具 3: Chrome DevTools

```
手动测试:
1. 打开 DevTools → Performance
2. 开始录制
3. 执行用户操作
4. 停止录制，分析火焰图

重点: 
- JavaScript 执行时间
- 渲染阻塞资源
- 布局颤动
```

### 2.3 具体测试场景

#### 场景 1: 首页冷启动

```
环境: 
- Throttled 4G 网络
- Moto G4 设备模拟

测试过程:
1. 硬刷新 (Clean Cache)
2. 测量从 DNS 查询到完整呈现的时间
3. 抓取瀑布图

检查指标:
- FCP: < 1.8s
- LCP: < 2.5s
- 关键资源加载优化
```

#### 场景 2: 筛选操作性能

```
环境:
- Fast 3G 网络
- 首页已加载完成

测试过程:
1. 打开 DevTools Performance
2. 点击第一个筛选条件
3. 测量 API 响应 + DOM 更新时间
4. 重复 5 次，计算平均值

检查指标:
- API 响应: < 300ms
- DOM 更新: < 200ms
- 总响应: < 500ms (可接受 <= 800ms)
```

#### 场景 3: 详情页加载 (有图像)

```
环境:
- 3G 网络 / 4G 网络
- 首次访问

测试过程:
1. 从列表点击进入详情页
2. 测量加载时间
3. 检查图像加载情况

检查指标:
- 页面 TTI: < 1.5s
- 所有图像加载: < 2s
- WebP 格式已启用
- 懒加载有效
```

#### 场景 4: 无限滚动吞吐量

```
环境:
- 首页，列表已展示 20 个工作流
- 模拟 4G 网络

测试过程:
1. 快速滚动到页面底部
2. 自动加载下一批工作流
3. 测量加载时间和平滑度

检查指标:
- 加载时间: < 800ms
- FPS: 保持 60fps
- 无 jank / 卡顿
- 用户能感知进度
```

### 2.4 性能优化检查清单

- [ ] 图像优化
  - [ ] WebP 格式已启用
  - [ ] 适应式图像 (srcset)
  - [ ] 懒加载实现
  - [ ] 正确的图像尺寸

- [ ] 代码优化
  - [ ] 代码分割按路由实现
  - [ ] 不必要的 JavaScript 已移除
  - [ ] Tree-shaking 已应用
  - [ ] 压缩已启用 (gzip/brotli)

- [ ] 缓存策略
  - [ ] Service Worker 已部署
  - [ ] 静态资源 Cache-Control 设置正确
  - [ ] API 缓存已配置
  - [ ] CDN 缓存已优化

- [ ] 网络优化
  - [ ] DNS prefetch 已配置
  - [ ] Preconnect 到第三方服务
  - [ ] Preload 关键资源
  - [ ] HTTP/2 Push 已启用

---

## 功能测试

### 3.1 筛选功能测试

#### 测试用例清单

| # | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|---|--------|---------|---------|--------|
| 1 | 时间段筛选 - Last 7 days | 选择此选项 | 结果仅显示最近7天的工作流 | P0 |
| 2 | 时间段筛选 - All time | 选择此选项 | 结果显示 100% 工作流 | P0 |
| 3 | 价格筛选 - Free | 选择此选项 | 仅显示 Free 工作流 | P0 |
| 4 | 价格筛选 - Paid | 选择此选项 | 仅显示 Paid 工作流 | P0 |
| 5 | 复杂度筛选 - Beginner | 选择此选项 | 显示初级工作流 | P0 |
| 6 | 多条件筛选 | 选择 Last 7 days + Free + AI | 结果应为交集 | P0 |
| 7 | 类别筛选清数 | 展开 Categories | 每个类别显示结果数 | P0 |
| 8 | 筛选结果数精确 | 选择筛选条件 | 显示的计数 = 实际结果数 | P0 |
| 9 | 清除筛选 | 单击 "Clear All" | 恢复到无筛选状态 | P0 |
| 10 | URL 同步 | 改变筛选 | URL 参数更新正确 | P0 |

#### 筛选正确性验证

```sql
-- SQL 查询验证筛选结果准确性

-- 验证: Last 7 days 筛选
SELECT COUNT(*) as expected_count 
FROM workflows 
WHERE created_at >= NOW() - INTERVAL 7 DAY;

-- 验证: Free workflows
SELECT COUNT(*) as expected_count 
FROM workflows 
WHERE price = 'free';

-- 验证: 组合筛选
SELECT COUNT(*) as expected_count 
FROM workflows 
WHERE created_at >= NOW() - INTERVAL 7 DAY
  AND price = 'free'
  AND category_id IN (select id FROM categories WHERE name = 'AI');
```

### 3.2 详情页功能测试

| # | 测试项 | 预期行为 | 优先级 |
|---|--------|---------|--------|
| 1 | Disclaimer 显示 | 对于需要的工作流显示免责声明 | P0 |
| 2 | Overview 内容 | 所有字段有效显示 | P0 |
| 3 | Logical Blocks 展开 | 点击条目后展开/收起 | P0 |
| 4 | 目录导航 | 右侧目录链接跳转准确 | P1 |
| 5 | 相关工作流推荐 | 显示 3-5 个相关项 | P1 |
| 6 | 工作流预览加载 | 工作流截图快速加载 | P0 |
| 7 | 预览缩放 | 鼠标滚轮缩放工作流图 | P1 |
| 8 | 全屏查看 | 全屏按钮正常工作 | P1 |

### 3.3 用户提交功能测试

| # | 测试项 | 测试数据 | 预期结果 | 优先级 |
|---|--------|---------|---------|--------|
| 1 | 表单字段验证 | 空值提交 | 显示错误提示 | P0 |
| 2 | 邮箱格式验证 | 无效邮箱 | 拒绝并提示 | P0 |
| 3 | Workflow JSON 验证 | 无效 JSON | 错误提示 | P0 |
| 4 | 成功提交 | 有效表单 | 确认提示 + 取得 Submission ID | P0 |
| 5 | 确认邮件 | 提交后 | 收到确认邮件 | P1 |
| 6 | 数据库存储 | 提交成功 | 数据存在 workflow_submissions 表 | P0 |

### 3.4 Newsletter 订阅测试

| # | 测试项 | 测试数据 | 预期结果 | 优先级 |
|---|--------|---------|---------|--------|
| 1 | 邮箱验证 | 无效格式 | 拒绝并提示 | P0 |
| 2 | 重复订阅 | 已有邮箱 | 友好提示 (已订阅或允许更新) | P1 |
| 3 | 订阅成功 | 有效邮箱 | 显示成功消息，邀请确认邮件 | P0 |
| 4 | Mailchimp 同步 | 订阅后检查 | 邮箱出现在 Mailchimp 列表中 | P0 |
| 5 | 确认邮件 | 30秒后检查 | 收到 Mailchimp 确认链接邮件 | P1 |
| 6 | 频率选择 | 选择 "Weekly" | 默认选项显示，可更改 | P1 |

### 3.5 跨浏览器兼容性矩阵

```
测试矩阵 (必需平台 + 可选平台)

必需 (MUST SUPPORT):
├─ Chrome (Latest)
├─ Firefox (Latest)
├─ Safari (Latest on macOS & iOS)
└─ Edge (Latest)

可选 (NICE TO HAVE):
├─ Chrome Mobile
├─ Firefox Mobile
├─ Samsung Internet
└─ Opera

兼容性检查项:
├─ 页面渲染     (无破碎布局)
├─ CSS 特性     (无回退问题)
├─ JavaScript   (无控制台错误)
├─ 表单交互     (输入/提交工作)
├─ 触摸操作     (移动端滑动)
├─ 图像兼容     (WebP fallback)
└─ 字体显示     (无缺失字形)
```

---

## 用户反馈收集

### 4.1 反馈收集机制

#### 机构 1: 页面内反馈按钮

```
设计:
├─ 位置: 页面右下角 (fixed 位置)
├─ 按钮: "💬 Feedback" 文字 + 图标
├─ 大小: 48x48px (最小可点击区)
├─ 颜色: 主色蓝色

点击后:
├─ 弹出 Modal 表单
├─ 包含:
│  ├─ 反馈类型: 下拉 (Bug / Feature / Suggestion / Other)
│  ├─ 评分: 星级 (1-5)
│  ├─ 评论: 文本框 (200字限制)
│  ├─ 邮箱 (可选，获得 Follow-up)
│  └─ [Submit] 按钮

频率限制:
└─ 每个用户每日最多 5 条反馈

数据存储:
└─ Supabase `feedback` 表
   ├─ feedback_type, rating, comment, email, 
   ├─ page_url, user_agent, timestamp
   └─ 实时发送 Slack 通知 (rating <= 2)
```

#### 机制 2: 用户调查

发布 2 周后发送邮件给 Newsletter 订户：

```
主题: "Help us improve! Take 2 min survey"

内容:
1. 您最喜欢的功能? (多选)
2. 最大的困难? (文本)
3. 总体满意度? (1-10)
4. 您是否会推荐给朋友? (Yes/Maybe/No)
5. 最想看到的功能? (文本)

激励: 抽签送 n8n 相关礼品
```

#### 机制 3: 用户访谈 (定性)

```
对象: Top 10% 活跃用户或新用户
频率: 每月 2-3 次
方式: 30 分钟 Zoom 电话

议题:
├─ 您如何开始使用 n8n workflows 的?
├─ 新 UI 相比旧 UI 有什么改进?
├─ 什么功能您未曾使用过?
├─ 有什么建议吗?
└─ 您会继续使用吗? 为什么?

记录: 录音 + 转录 + 关键洞察总结
```

### 4.2 重点指标定义

#### 用户满意度指标

| 指标 | 计算方法 | 目标 | 监控频率 |
|-----|---------|------|--------|
| NPS (净推荐值) | (推荐者% - 贬低者%) | >= 40 | 每月 |
| CSAT (客户满意度) | 平均评分 (1-5) | >= 4.0 | 每周 |
| 功能完整度评分 | 特定功能的均分 | >= 4.0 | 每周 |
| UI 直观性评分 | 设计和易用性均分 | >= 4.5 | 每周 |

#### 使用指标

| 指标 | 计算方法 | 目标 | 监控频率 |
|-----|---------|------|--------|
| 筛选使用率 | (使用筛选的会话 / 总会话) × 100 | >= 40% | 每天 |
| 详情页深度 | 平均查看 3 个详情页或以上的会话比例 | >= 25% | 每周 |
| Newsletter 转化率 | (确认订阅 / 点击) × 100 | >= 3% | 每周 |
| Submit 工作流率 | (成功提交 / 访客) × 100 | >= 0.5% | 每月 |

### 4.3 反馈分析流程

```
1. 收集反馈
   └─ 每日汇总反馈数据
   
2. 分类和标记
   ├─ Bug vs Feature Request vs Suggestion
   ├─ 优先级 (P0/P1/P2)
   ├─ 组件归类 (FilterSidebar / DetailPage / etc)
   └─ 用户分群 (New / Active / Churned)

3. 分析和去重
   ├─ 找出重复反馈
   ├─ 统计提及频率
   ├─ 识别趋势
   └─ 关联相似项

4. Insight 提取
   ├─ 哪些功能用户最爱?
   ├─ 哪些功能最容易造成困惑?
   ├─ 用户的期望 vs 现实
   └─ 改进机会排序

5. 行动计划
   ├─ 立即修复的 Bug (24 小时)
   ├─ 下周迭代的改进
   ├─ 下月规划的新功能
   └─ 沟通计划 (感谢用户反馈)

6. 循环反馈
   └─ 发布改进后，通知相关用户
      "Based on your feedback, we..."
```

---

## 灰度发布与回滚

### 5.1 阶段计划

#### Phase 1: 内部测试 (1 周)

**参与者**: 开发团队 + 内部用户 (5-10 人)

```
目标:
├─ 验证核心功能正常
├─ 性能基准达成
├─ 没有 P0 级 bug
└─ 用户体验反馈收集

环境: Staging (n8nworkflow-staging.com)

验收标准:
├─ 所有测试用例通过
├─ 没有流量 / 验证错误
├─ 性能指标达成
├─ 可用性问题 < 5 个

失败条件:
├─ 关键功能不工作
├─ 性能严重回退 (>50% 慢)
├─ 崩溃或 500 错误

应对:
└─ 修复 + 重新测试
```

#### Phase 2: 灰度发布 20% (1 周)

**目标**: 验证在小规模真实用户中的表现

```
配置:
├─ 20% 流量转到新版本 (80% 用旧版)
├─ 使用 Cloudflare Workers 实现
├─ Cookie/Header 标记用户版本
├─ 可独立切换用户版本

监控:
├─ 错误率 (目标 < 0.5%)
├─ 性能 (FCP/LCP vs Baseline)
├─ API 可用性
├─ 用户反馈 (实时通知 Slack)

关键指标:
├─ Error Rate: < 0.5%
├─ Performance Regression: < 5%
├─ User Satisfaction: >= 3.5/5
├─ Expected Engagement: >= 90% of old version

回滚条件 (任意一项触发):
├─ 错误率 > 2%
├─ 性能下降 > 20%
├─ 无法查询关键数据
├─ 用户报告数据丢失

回滚时间: < 5 分钟 (自动或手动)
回滚验证: 100% 流量恢复到旧版
```

#### Phase 3: 灰度发布 50% (1 周)

**目标**: 进一步验证，收集更多反馈

```
配置:
├─ 50% 流量转到新版本
├─ 持续监控 Phase 2 指标
├─ 开放 Newsletter 用户反馈

监控级别: 与 Phase 2 同样严格

成功标准:
├─ 错误率保持 < 0.5%
├─ 没有新的 P0 bug 发现
├─ 用户反馈总体正面
├─ 关键指标无异常变化

失败处理:
├─ 降级或修复 + 重新上线
└─ 从 Phase 2 20% 重新开始
```

#### Phase 4: 全量发布 (立即)

**目标**: 100% 用户使用新版本，持续监控

```
配置:
├─ 100% 流量转到新版本
├─ 旧版本保留作为 Fallback
├─ 继续实时监控

监控频率: 每小时汇总
关键指标: 继续追踪 Phase 2-3 的指标

持续发布计划:
├─ 24h: 监控无异常 → 关闭旧版本服务
├─ 7d: 删除旧版本代码 (保留分支备份)
├─ 30d: 完整清理及总结

文档:
├─ 记录整个发布过程
├─ 总结学到的经验
├─ 模板化以用于未来发布
```

### 5.2 回滚流程

#### 自动回滚

在以下条件自动触发：

```
1. 错误率突增 (> 5% new errors)
   └─ 自动重定向 100% 流量到旧版本
   └─ Slack Alert: "CRITICAL: Auto rollback triggered"

2. API 连接失败 (Supabase down)
   └─ Health check 失败 3 次
   └─ 自动回滚

3. 响应时间 > 5 倍正常值
   └─ P95 latency > 5 秒
   └─ 自动降级到缓存 / 旧版本
```

#### 手动回滚

```
触发条件:
└─ 产品团队 / 工程师决定

流程:
1. 通知: 发送 Slack 通知团队
   └─ @channel Rollback initiated by [NAME]
   
2. 执行: 
   └─ 在 Cloudflare dashboard 切换流量
   └─ 验证: curl 检查响应是否旧版本

3. 验证:
   └─ 检查关键 API 响应
   └─ 确认错误率回归正常
   └─ 用户反馈确认

4. 总结:
   └─ 记录根本原因
   └─ 事后分析 (Postmortem)
   └─ 改进计划
```

### 5.3 监控仪表板配置

#### 关键指标看板 (Datadog / New Relic)

```
Real-time Dashboard 包含:

1. 流量分布
   ├─ 新版本: XX%
   ├─ 旧版本: YY%
   └─ 趋势图

2. 错误率
   ├─ Current: 0.1%
   ├─ Threshold: 0.5%
   ├─ Trend: ↓ (improving)
   └─ Top errors: [列表]

3. 性能
   ├─ FCP: 1.2s (vs 1.0s baseline)
   ├─ LCP: 2.1s (vs 2.0s baseline)
   ├─ TTI: 3.2s (vs 3.0s baseline)
   └─ P95 Latency: 800ms

4. 用户行为
   ├─ Active Users: 1,234
   ├─ Session Duration: 4m 32s
   ├─ Bounce Rate: 2.1%
   └─ Conversion Rate: 0.8%

5. 告警状态
   ├─ 🟢 All Healthy
   ├─ 🟡 Performance Degradation
   └─ 🔴 Critical (Auto-rollback)

实时通知:
├─ Slack: 每小时汇总 + 异常告警
├─ PagerDuty: P0 级告警
└─ Email: 日报给管理层
```

---

## 测试时间表

```
Week 1: 
├─ Mon-Tue: 内部测试（修复 bug）
├─ Wed: Staging 验证完成
├─ Thu-Fri: Phase 1 最后冲刺

Week 2-3:
├─ Mon-Sun: Phase 2 灰度 20% (持续监控)
├─ 每日评审指标
└─ 反馈收集

Week 4:
├─ Mon-Sun: Phase 3 灰度 50%
├─ 继续监控
└─ 用户研究访谈

Week 5:
├─ Mon: Phase 4 全量发布
├─ Tue-Fri: 持续监控
└─ 修复小问题

Week 6-8:
├─ 持续监控和优化
├─ 回收反馈并规划下月迭代
└─ 文档和 Postmortem
```

---

**文档版本**: 1.0  
**最后修改**: 2026-01-10  
**维护者**: QA 与用户研究团队
