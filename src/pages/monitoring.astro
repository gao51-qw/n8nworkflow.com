---
// Monitoring Dashboard Page
import BaseLayout from '../layouts/BaseLayout.astro';
import { formatNumber } from '../lib/utils/format';
import { formatShortDate as formatDate } from '../lib/utils/date';

const pageTitle = 'Monitoring Dashboard';
const pageDescription = 'Real-time monitoring and performance dashboard for N8N Workflows';
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">{pageTitle}</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <!-- System Health Card -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold mb-4">System Health</h2>
        <div class="space-y-3">
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">Status:</span>
            <span class="text-green-600 dark:text-green-400 font-medium">Healthy</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">Uptime:</span>
            <span class="font-medium">12 hours 34 minutes</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">Last Check:</span>
            <span class="font-medium">{formatDate(new Date().toISOString())}</span>
          </div>
        </div>
      </div>

      <!-- Performance Metrics Card -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold mb-4">Performance Metrics</h2>
        <div class="space-y-3">
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">LCP:</span>
            <span class="font-medium">1.8s</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">FID:</span>
            <span class="font-medium">45ms</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">CLS:</span>
            <span class="font-medium">0.05</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">TTI:</span>
            <span class="font-medium">2.3s</span>
          </div>
        </div>
      </div>

      <!-- Error Tracking Card -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold mb-4">Error Tracking</h2>
        <div class="space-y-3">
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">Critical Errors:</span>
            <span class="text-red-600 dark:text-red-400 font-medium">0</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">Warning Errors:</span>
            <span class="text-yellow-600 dark:text-yellow-400 font-medium">2</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">Info Errors:</span>
            <span class="text-blue-600 dark:text-blue-400 font-medium">5</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-300">Total Errors:</span>
            <span class="font-medium">7</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Traffic Metrics Section -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-8">
      <h2 class="text-xl font-semibold mb-4">Traffic Metrics</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="text-center">
          <div class="text-2xl font-bold">{formatNumber(12456)}</div>
          <div class="text-gray-600 dark:text-gray-300">Page Views</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold">{formatNumber(3456)}</div>
          <div class="text-gray-600 dark:text-gray-300">Unique Visitors</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold">{formatNumber(456)}</div>
          <div class="text-gray-600 dark:text-gray-300">Active Sessions</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold">2.45%</div>
          <div class="text-gray-600 dark:text-gray-300">Bounce Rate</div>
        </div>
      </div>
    </div>

    <!-- Recent Events Section -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
      <h2 class="text-xl font-semibold mb-4">Recent Events</h2>
      <div class="space-y-4">
        <div class="flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded">
          <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
          <div class="flex-1">
            <div class="font-medium">Deployment successful</div>
            <div class="text-sm text-gray-500 dark:text-gray-400">10 minutes ago</div>
          </div>
        </div>
        <div class="flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded">
          <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
          <div class="flex-1">
            <div class="font-medium">New workflow submitted</div>
            <div class="text-sm text-gray-500 dark:text-gray-400">25 minutes ago</div>
          </div>
        </div>
        <div class="flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded">
          <div class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></div>
          <div class="flex-1">
            <div class="font-medium">Performance warning</div>
            <div class="text-sm text-gray-500 dark:text-gray-400">1 hour ago</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  /* Add any page-specific styles here */
</style>