{
  "id": 11028,
  "slug": "11028",
  "title": "Generate personalized sales emails from Google Maps with OpenAI to Google Sheets",
  "description": "\n\n# Generate personalized sales emails from Google Maps results to Google Sheets\n\nThis workflow automates the entire process of lead generation and personalized outreach drafting for local businesses. It utilizes **Apify** to scrape business data from Google Maps based on your search criteria (e.g., \"Cafes in Shibuya\"), visits each business's website to extract content, and uses **OpenAI** to generate a highly personalized sales email that connects the business's unique characteristics with your service's value proposition. Finally, it saves the business details, scraped data, and the generated email draft into **Google Sheets**.\n\nThis template is perfect for reducing the manual effort required to research leads and write initial cold outreach emails.\n\n## Who is this for\n- **Sales Representatives** looking to automate lead sourcing and initial drafting.\n- **Marketing Agencies** doing outreach for local businesses.\n- **Freelancers** offering web design, SEO, or reservation system services to brick-and-mortar stores.\n\n## What it does\n1. **Configuration**: You define your search query (e.g., \"Gyms in London\"), the number of leads to fetch, and details about the service you are selling.\n2. **Lead Scraping**: The workflow triggers an Apify actor (Google Maps Scraper) to find businesses matching your criteria.\n3. **Website Analysis**: It checks if the business has a website, fetches the HTML, and extracts relevant text to understand the business's vibe and offerings.\n4. **AI Email Generation**: OpenAI analyzes the scraped website text and generates a specific, personalized email subject and body promoting your service.\n5. **Data Storage**: All data (Business Name, Phone, Address, Website, Scraped Info, and Email Draft) is appended to a Google Sheet.\n\n## Requirements\n- **n8n** (v1.0 or later)\n- **Apify Account**: You need an Apify account and the `compass/google-maps-scraper` actor.\n- **OpenAI Account**: An API key for generating the email content.\n- **Google Cloud Platform**: A project with the Google Sheets API enabled.\n\n## How to set up\n1. **Credentials**: Set up your credentials for Apify, OpenAI, and Google Sheets in n8n.\n2. **Google Sheet**: Create a new Google Sheet and add the following headers in the first row:\n   - `店舗名` (Store Name)\n   - `住所` (Address)\n   - `Webサイト` (Website)\n   - `電話番号` (Phone Number)\n   - `サイトから取得した情報` (Info from Website)\n   - `生成されたメール件名` (Generated Subject)\n   - `生成されたメール本文` (Generated Body)\n3. **Workflow Configuration Node**: Open the first \"Workflow Configuration\" node and update the following values:\n   - `searchQuery`: The location and keyword you want to target.\n   - `serviceName`: The name of the product you are selling.\n   - `serviceStrength`: The USP (Unique Selling Proposition) of your product.\n4. **Google Sheets Node**: Open the \"Save to Google Sheets\" node and select the file you created in step 2.\n\n## How to customize\n- **Change the Prompt**: Open the \"Generate Personalized Email\" (OpenAI) node to modify the system prompt. You can change the tone, language (currently set to Japanese context in your example), or structure of the sales email.\n- **Filter Results**: You can add logic to the \"Check Website URL Exists\" node to filter out specific types of businesses or domains.\n- **Limit Scraping**: Adjust the `maxPlaces` value in the Configuration node to control how many leads you process per run to save on API credits.\n",
  "featuredImage": "/data/workflows/11028/11028.webp",
  "author": {
    "id": 101,
    "slug": "korin",
    "name": "小林幸一",
    "avatar": ""
  },
  "categories": [
    "Lead Generation",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 90,
  "downloads": 9,
  "createdAt": "2025-11-20T04:58:55.520Z",
  "updatedAt": "2026-01-16T09:07:12.131Z",
  "publishedAt": "2025-11-20T04:58:55.520Z",
  "nodes": 15,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11028",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Generate personalized sales emails from Google Maps with OpenAI to Google Sheets",
    "workflowName": "Generate personalized sales emails from Google Maps with OpenAI to Google Sheets",
    "description": "# Generate personalized sales emails from Google Maps results to Google Sheets\n\nThis workflow automates the entire process of lead generation and personalized outreach drafting for local businesses. It utilizes **Apify** to scrape business data from Google Maps based on your search criteria (e.g., \"Cafes in Shibuya\"), visits each business's website to extract content, and uses **OpenAI** to generate a highly personalized sales email that connects the business's unique characteristics with your service's value proposition. Finally, it saves the business details, scraped data, and the generated email draft into **Google Sheets**.\n\nThis template is perfect for reducing the manual effort required to research leads and write initial cold outreach emails.\n\n## Who is this for\n- **Sales Representatives** looking to automate lead sourcing and initial drafting.\n- **Marketing Agencies** doing outreach for local businesses.\n- **Freelancers** offering web design, SEO, or reservation system services to brick-and-mortar stores.\n\n## What it does\n1. **Configuration**: You define your search query (e.g., \"Gyms in London\"), the number of leads to fetch, and details about the service you are selling.\n2. **Lead Scraping**: The workflow triggers an Apify actor (Google Maps Scraper) to find businesses matching your criteria.\n3. **Website Analysis**: It checks if the business has a website, fetches the HTML, and extracts relevant text to understand the business's vibe and offerings.\n4. **AI Email Generation**: OpenAI analyzes the scraped website text and generates a specific, personalized email subject and body promoting your service.\n5. **Data Storage**: All data (Business Name, Phone, Address, Website, Scraped Info, and Email Draft) is appended to a Google Sheet.\n\n## Requirements\n- **n8n** (v1.0 or later)\n- **Apify Account**: You need an Apify account and the `compass/google-maps-scraper` actor.\n- **OpenAI Account**: An API key for generating the email content.\n- **Google Cloud Platform**: A project with the Google Sheets API enabled.\n\n## How to set up\n1. **Credentials**: Set up your credentials for Apify, OpenAI, and Google Sheets in n8n.\n2. **Google Sheet**: Create a new Google Sheet and add the following headers in the first row:\n   - `店舗名` (Store Name)\n   - `住所` (Address)\n   - `Webサイト` (Website)\n   - `電話番号` (Phone Number)\n   - `サイトから取得した情報` (Info from Website)\n   - `生成されたメール件名` (Generated Subject)\n   - `生成されたメール本文` (Generated Body)\n3. **Workflow Configuration Node**: Open the first \"Workflow Configuration\" node and update the following values:\n   - `searchQuery`: The location and keyword you want to target.\n   - `serviceName`: The name of the product you are selling.\n   - `serviceStrength`: The USP (Unique Selling Proposition) of your product.\n4. **Google Sheets Node**: Open the \"Save to Google Sheets\" node and select the file you created in step 2.\n\n## How to customize\n- **Change the Prompt**: Open the \"Generate Personalized Email\" (OpenAI) node to modify the system prompt. You can change the tone, language (currently set to Japanese context in your example), or structure of the sales email.\n- **Filter Results**: You can add logic to the \"Check Website URL Exists\" node to filter out specific types of businesses or domains.\n- **Limit Scraping**: Adjust the `maxPlaces` value in the Configuration node to control how many leads you process per run to save on API credits.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Check Website URL Exists",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Fetch Website HTML",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Extract Text from HTML",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Generate Personalized Email",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 2"
    },
    {
      "name": "Save to Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Get user runs list",
      "type": "@apify/n8n-nodes-apify.apify",
      "role": "apify",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}