{
  "id": 2887,
  "slug": "2887",
  "title": "Export PDF invoices from SmartBill to Google Drive",
  "description": "This workflow automates the retrieval of invoice PDFs from the Smartbill API and saves them to Google Drive in a dynamically created folder based on last month’s date. It also generates a range of invoice numbers, ensuring proper formatting, and uploads each PDF with a structured filename.\n\n## Overview\n\n1. **Trigger and Data Setup:**  \n   The workflow is manually triggered. It sets the invoice range (start and end numbers), invoice series, the parent Google Drive folder ID and the folder where to save the PDF files.\n\n2. **Folder Handling:**  \n   - **Folder Name Calculation:** Calculates a default folder name based on last month’s date (formatted as `YYYY-MM`).\n\n3. **Invoice Generation:**  \n   A code node generates invoice items by iterating over a specified range of numbers. Each invoice number is padded to custom number of digits (e.g., `0013`), and the invoice series and folder ID are attached to each item.\n\n4. **Retrieving Invoice PDFs:**  \n   For each generated invoice, the Smartbill API is called (using an HTTP Request node) to retrieve the corresponding invoice PDF.\n\n\n## How to Use\n\n- **Credentials:**  \n  Ensure you have configured the Smartbill API (HTTP Basic Auth) and Google API credentials correctly.\n  \n- **Parameter Adjustment:**  \n  Modify the `SetData` node if you need to change the invoice range, series, or target parent folder.\n  \n- **Execution:**  \n  Click **Execute Workflow** to run the workflow manually.\n",
  "featuredImage": "/data/workflows/2887/2887.webp",
  "author": {
    "id": 101,
    "slug": "codez",
    "name": "Codez & AI",
    "avatar": ""
  },
  "categories": [
    "Invoice Processing"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1089,
  "downloads": 108,
  "createdAt": "2025-02-12T11:02:03.340Z",
  "updatedAt": "2026-01-16T08:27:02.682Z",
  "publishedAt": "2025-02-12T11:02:03.340Z",
  "nodes": 15,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2887",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Export PDF invoices from SmartBill to Google Drive",
    "workflowName": "Export PDF invoices from SmartBill to Google Drive",
    "description": "This workflow automates the retrieval of invoice PDFs from the Smartbill API and saves them to Google Drive in a dynamically created folder based on last month’s date. It also generates a range of invoice numbers, ensuring proper formatting, and uploads each PDF with a structured filename.\n\n## Overview\n\n1. **Trigger and Data Setup:**  \n   The workflow is manually triggered. It sets the invoice range (start and end numbers), invoice series, the parent Google Drive folder ID and the folder where to save the PDF files.\n\n2. **Folder Handling:**  \n   - **Folder Name Calculation:** Calculates a default folder name based on last month’s date (formatted as `YYYY-MM`).\n\n3. **Invoice Generation:**  \n   A code node generates invoice items by iterating over a specified range of numbers. Each invoice number is padded to custom number of digits (e.g., `0013`), and the invoice series and folder ID are attached to each item.\n\n4. **Retrieving Invoice PDFs:**  \n   For each generated invoice, the Smartbill API is called (using an HTTP Request node) to retrieve the corresponding invoice PDF.\n\n\n## How to Use\n\n- **Credentials:**  \n  Ensure you have configured the Smartbill API (HTTP Basic Auth) and Google API credentials correctly.\n  \n- **Parameter Adjustment:**  \n  Modify the `SetData` node if you need to change the invoice range, series, or target parent folder.\n  \n- **Execution:**  \n  Click **Execute Workflow** to run the workflow manually.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking \"Execute Workflow\"",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Smartbill get invoice pdf",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.1"
    },
    {
      "name": "SetData",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set mime",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Default Folder Name",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Search Drive Folder",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "If exists",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Create Drive Folder",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Set the loop",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Upload file to Google Drive",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Wait a sec",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Set Folder ID",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    }
  ]
}