{
  "id": 4036,
  "slug": "4036",
  "title": "Claude 3.7 Sonnet AI chatbot agent with Anthropic web search and think functions",
  "description": "This workflow builds a conversational AI chatbot agent using **Claude 3.7 Sonnet** model with the new . It enhances standard LLM capabilities with Anthropic‚Äôs features: **Web Search** and **Think**:\n\n* **Real-time web search**, to answer up-to-date factual queries.\n* A **‚ÄúThink‚Äù function**, to support internal reasoning and memory-like behavior by Anthropic.\n* A **memory buffer**, allowing the agent to maintain conversation history.\n* A **system prompt** defining clear ethical, functional, and formatting rules for interaction.\n\nWhen a user sends a message (trigger), the chatbot evaluates the query, optionally performs a web search if needed, processes the result using Claude, and responds accordingly.\n\n---\n\n### ‚úÖ **Advantages**\n\n* **üß† Enhanced Reasoning Abilities**\n  The *Think* tool allows the agent to simulate deep thought processes or contextual memory storage, improving conversational intelligence.\n\n* **üåê Real-Time Knowledge via Web Search**\n  The integrated `web_search` tool enables the agent to fetch the latest information from the internet, making it ideal for dynamic or news-driven use cases.\n\n* **üßæ Contextual Responses with Memory Buffer**\n  The inclusion of a memory buffer allows the agent to maintain state across messages, improving dialogue flow and continuity.\n\n* **üõ°Ô∏è Built-in Ethical Guidelines**\n  The system prompt enforces privacy, factual integrity, neutrality, and ethical response generation, making the agent safe for public or enterprise use.\n\n\n---\n\n### How It Works\n\n1. **Chat Trigger**: The workflow begins when a chat message is received via a webhook. This triggers the AI Agent to process the user's query.  \n2. **AI Agent Processing**: The AI Agent analyzes the query to determine if it requires information from the website or external sources. It follows a structured approach:  \n   - For website-related queries, it uses the provided context.  \n   - For external information, it employs the `web_search` tool to fetch up-to-date data from the internet.  \n   - The `Think` tool is used for internal reasoning or caching thoughts without altering data.  \n3. **Language Model**: The Anthropic Chat Model (Claude 3.7 Sonnet) generates responses based on the analyzed query, incorporating website context or web search results.  \n4. **Memory**: A simple memory buffer retains context from previous interactions to maintain continuity in conversations.  \n5. **Output**: The final response is delivered to the user, excluding internal processes like web searches or reasoning steps.  \n\n--- \n### Set Up Steps\n\n1. **Configure Nodes**:  \n   - **Chat Trigger**: Set up the webhook to receive user messages.  \n   - **AI Agent**: Define the system message and rules for handling queries.  \n   - **Anthropic Chat Model**: Select the Claude 3.7 Sonnet model and configure parameters like `maxTokensToSample`.  \n   - **Memory**: Initialize the memory buffer to store conversation context.  \n   - **Tools**:  \n     - `web_search`: Configure the HTTP request to the Anthropic API for web searches, including headers and authentication.  \n     - `Think`: Set up the tool for internal reasoning.  \n\n2. **Connect Nodes**:  \n   - Link the Chat Trigger to the AI Agent.  \n   - Connect the Anthropic Chat Model, Memory, and Tools (`web_search` and `Think`) to the AI Agent.  \n\n3. **Credentials**:  \n   - Ensure the Anthropic API credentials are correctly configured for both the chat model and the `web_search` tool.  \n\n---\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/). \n",
  "featuredImage": "/data/workflows/4036/4036.webp",
  "author": {
    "id": 101,
    "slug": "n3witalia",
    "name": "Davide",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 2982,
  "downloads": 298,
  "createdAt": "2025-05-14T09:17:36.639Z",
  "updatedAt": "2026-01-16T08:32:42.471Z",
  "publishedAt": "2025-05-14T09:17:36.639Z",
  "nodes": 7,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4036",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Claude 3.7 Sonnet AI chatbot agent with Anthropic web search and think functions",
    "workflowName": "Claude 3.7 Sonnet AI chatbot agent with Anthropic web search and think functions",
    "description": "This workflow builds a conversational AI chatbot agent using **Claude 3.7 Sonnet** model with the new . It enhances standard LLM capabilities with Anthropic‚Äôs features: **Web Search** and **Think**:\n\n* **Real-time web search**, to answer up-to-date factual queries.\n* A **‚ÄúThink‚Äù function**, to support internal reasoning and memory-like behavior by Anthropic.\n* A **memory buffer**, allowing the agent to maintain conversation history.\n* A **system prompt** defining clear ethical, functional, and formatting rules for interaction.\n\nWhen a user sends a message (trigger), the chatbot evaluates the query, optionally performs a web search if needed, processes the result using Claude, and responds accordingly.\n\n---\n\n### ‚úÖ **Advantages**\n\n* **üß† Enhanced Reasoning Abilities**\n  The *Think* tool allows the agent to simulate deep thought processes or contextual memory storage, improving conversational intelligence.\n\n* **üåê Real-Time Knowledge via Web Search**\n  The integrated `web_search` tool enables the agent to fetch the latest information from the internet, making it ideal for dynamic or news-driven use cases.\n\n* **üßæ Contextual Responses with Memory Buffer**\n  The inclusion of a memory buffer allows the agent to maintain state across messages, improving dialogue flow and continuity.\n\n* **üõ°Ô∏è Built-in Ethical Guidelines**\n  The system prompt enforces privacy, factual integrity, neutrality, and ethical response generation, making the agent safe for public or enterprise use.\n\n\n---\n\n### How It Works\n\n1. **Chat Trigger**: The workflow begins when a chat message is received via a webhook. This triggers the AI Agent to process the user's query.  \n2. **AI Agent Processing**: The AI Agent analyzes the query to determine if it requires information from the website or external sources. It follows a structured approach:  \n   - For website-related queries, it uses the provided context.  \n   - For external information, it employs the `web_search` tool to fetch up-to-date data from the internet.  \n   - The `Think` tool is used for internal reasoning or caching thoughts without altering data.  \n3. **Language Model**: The Anthropic Chat Model (Claude 3.7 Sonnet) generates responses based on the analyzed query, incorporating website context or web search results.  \n4. **Memory**: A simple memory buffer retains context from previous interactions to maintain continuity in conversations.  \n5. **Output**: The final response is delivered to the user, excluding internal processes like web searches or reasoning steps.  \n\n--- \n### Set Up Steps\n\n1. **Configure Nodes**:  \n   - **Chat Trigger**: Set up the webhook to receive user messages.  \n   - **AI Agent**: Define the system message and rules for handling queries.  \n   - **Anthropic Chat Model**: Select the Claude 3.7 Sonnet model and configure parameters like `maxTokensToSample`.  \n   - **Memory**: Initialize the memory buffer to store conversation context.  \n   - **Tools**:  \n     - `web_search`: Configure the HTTP request to the Anthropic API for web searches, including headers and authentication.  \n     - `Think`: Set up the tool for internal reasoning.  \n\n2. **Connect Nodes**:  \n   - Link the Chat Trigger to the AI Agent.  \n   - Connect the Anthropic Chat Model, Memory, and Tools (`web_search` and `Think`) to the AI Agent.  \n\n3. **Credentials**:  \n   - Ensure the Anthropic API credentials are correctly configured for both the chat model and the `web_search` tool.  \n\n---\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Anthropic Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "role": "lmChatAnthropic",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "web_search",
      "type": "n8n-nodes-base.httpRequestTool",
      "role": "httpRequestTool",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Think",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}