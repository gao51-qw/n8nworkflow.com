{
  "id": 8451,
  "slug": "8451",
  "title": "Auto-backup n8n workflows to OneDrive with cleanup & email notifications",
  "description": "## Automatically BackUp Your n8n Workflows to OneDrive\n\nThis workflow automates the backup of your self-hosted n8n instance by exporting all workflows and saving them as individual `.json` files to a designated OneDrive folder. Each file is timestamped for easy versioning and audit tracking.\n\nAfter a successful backup, the workflow optionally cleans up old backup files and sends a confirmation email to notify you that the process completed.\n\n## How it works\n\n1. Uses the **HTTP Request** node to fetch all workflows via the `/rest/workflows` API.\n2. Iterates through each workflow using **SplitInBatches**.\n3. Converts each workflow to a `.json` file using **Set** and **Function** nodes.\n4. Uploads each file to a target **Microsoft OneDrive** folder using OAuth2.\n5. Deletes old backup files from OneDrive after upload, with the option to keep backups for a configurable number of time.\n6. Sends an email notification once all backups have completed successfully.\n\n## Setup instructions\n\n- Enter your **n8n Base URL** and authentication details in the HTTP Request node.\n- Set up **Microsoft OneDrive OAuth2** credentials for cloud upload.\n- Configure the **Email node** with SMTP credentials to receive backup confirmation.\n- (Optional) Adjust the file retention logic to keep backups for a set duration.\n- A **Cron** trigger to schedule the workflow automatically (e.g., daily or weekly).\n\nðŸ‘‰ Sticky notes inside the workflow explain each step for easy setup.\n\n## Need Help\n\n- ## Need Help\nðŸ”— [LinkedIn â€“ Wessel Bulte](https://www.linkedin.com/in/wessel-bulte/)",
  "featuredImage": "/data/workflows/8451/8451.webp",
  "author": {
    "id": 101,
    "slug": "uuessel",
    "name": "Wessel Bulte",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 725,
  "downloads": 72,
  "createdAt": "2025-09-10T14:07:57.308Z",
  "updatedAt": "2026-01-16T08:55:53.780Z",
  "publishedAt": "2025-09-10T14:07:57.308Z",
  "nodes": 29,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8451",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Auto-backup n8n workflows to OneDrive with cleanup & email notifications",
    "workflowName": "Auto-backup n8n workflows to OneDrive with cleanup & email notifications",
    "description": "## Automatically BackUp Your n8n Workflows to OneDrive\n\nThis workflow automates the backup of your self-hosted n8n instance by exporting all workflows and saving them as individual `.json` files to a designated OneDrive folder. Each file is timestamped for easy versioning and audit tracking.\n\nAfter a successful backup, the workflow optionally cleans up old backup files and sends a confirmation email to notify you that the process completed.\n\n## How it works\n\n1. Uses the **HTTP Request** node to fetch all workflows via the `/rest/workflows` API.\n2. Iterates through each workflow using **SplitInBatches**.\n3. Converts each workflow to a `.json` file using **Set** and **Function** nodes.\n4. Uploads each file to a target **Microsoft OneDrive** folder using OAuth2.\n5. Deletes old backup files from OneDrive after upload, with the option to keep backups for a configurable number of time.\n6. Sends an email notification once all backups have completed successfully.\n\n## Setup instructions\n\n- Enter your **n8n Base URL** and authentication details in the HTTP Request node.\n- Set up **Microsoft OneDrive OAuth2** credentials for cloud upload.\n- Configure the **Email node** with SMTP credentials to receive backup confirmation.\n- (Optional) Adjust the file retention logic to keep backups for a set duration.\n- A **Cron** trigger to schedule the workflow automatically (e.g., daily or weekly).\n\nðŸ‘‰ Sticky notes inside the workflow explain each step for easy setup.\n\n## Need Help\n\n- ## Need Help\nðŸ”— [LinkedIn â€“ Wessel Bulte](https://www.linkedin.com/in/wessel-bulte/)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Retrieve workflows",
      "type": "n8n-nodes-base.n8n",
      "role": "n8n",
      "configDescription": "Version 1"
    },
    {
      "name": "Get backupfolders",
      "type": "n8n-nodes-base.microsoftOneDrive",
      "role": "microsoftOneDrive",
      "configDescription": "Version 1"
    },
    {
      "name": "Delete old backup folder",
      "type": "n8n-nodes-base.microsoftOneDrive",
      "role": "microsoftOneDrive",
      "configDescription": "Version 1"
    },
    {
      "name": "Prepare HTML Email",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Schedule Trigger Daily",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send HTML Success Email",
      "type": "n8n-nodes-base.microsoftOutlook",
      "role": "microsoftOutlook",
      "configDescription": "Version 2"
    },
    {
      "name": "Search a folder",
      "type": "n8n-nodes-base.microsoftOneDrive",
      "role": "microsoftOneDrive",
      "configDescription": "Version 1"
    },
    {
      "name": "Switch Old Folders",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Create new backup folder",
      "type": "n8n-nodes-base.microsoftOneDrive",
      "role": "microsoftOneDrive",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert to JSON file",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Upload JSON to folder",
      "type": "n8n-nodes-base.microsoftOneDrive",
      "role": "microsoftOneDrive",
      "configDescription": "Version 1"
    },
    {
      "name": "Filter backup folder",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note - Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Send HTML Success Email",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Prepare HTML Email",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Merge",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Delete old backup folder",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Loop Over Items",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Switch Old Folders",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Filter backup folder",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Get backupfolders",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Upload JSON to folder",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Convert to JSON file",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Retrieve workflows",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Search a folder",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Create new backup folder",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Schedule Trigger Daily",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}