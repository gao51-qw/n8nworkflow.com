{
  "id": 11868,
  "slug": "11868",
  "title": "Lead collection with SendPulse and GPT-generated welcome emails/SMS",
  "description": "## How it works\n\nThis n8n template automates lead processing from your website. It receives customer data via a Webhook, stores the customer's contact (email or phone number) in the respective [**SendPulse**](https://sendpulse.com) address books, and uses the [**SendPulse MCP Server**](https://sendpulse.com/knowledge-base/account-settings/mcp-server)  to send personalized welcome messages (email or SMS) generated using AI.\n\nThe template also includes built-in SendPulse token management logic with caching in the Data Table, which reduces the number of unnecessary API requests.\n\n[**SendPulse’s MCP server**](https://sendpulse.com/knowledge-base/account-settings/mcp-server) is a tool that helps you manage your account through a chat with an AI assistant. It uses SendPulse API methods to get information and perform actions, such as request statistics, run message campaigns, or update user data.\n\nMCP server acts as middleware between your AI assistant and your [**SendPulse account**](https://sendpulse.com). It processes requests through the SendPulse API and sends results back to chat, so you can manage everything without leaving the conversation.\n\nOnce connected, the MCP server operates as follows:\n\n1. You ask your AI assistant something in chat.\n2. It forwards your request to the MCP server.\n3. The MCP server calls the API to get data or perform an action.\n4. The AI assistant sends the result back to your chat.\n\n## Set up\n\n### Requirements:\n- An active SendPulse account.\n- Client ID and Client Secret from your SendPulse account.\n- An API key from your OpenAI account to power the AI agent.\n\n### Set up steps:\n\n1. Get your **OpenAI API Key** - [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)\n2. Add your **OpenAI API Key** to **OpenAI Chat Model** node in n8n workflow.\n3. Get your **Client ID** and **Client Secret** from your SendPulse account - [https://login.sendpulse.com/settings/#api](https://login.sendpulse.com/settings/#api)\n4. Add your **Client ID** and **Client Secret** to **Workflow Configuration** node.\n5. Add your **Client ID** and **Client Secret** to **SendPulse MCP Client** node as headers **X-SP-ID** і **X-SP-SECRET** in Multiple Headers Auth.\n6. In the **Workflow Configuration** node, change the names of the mailing lists, senderName, senderEmail, smsSender, routeCountryCode and routeType fileds as needed.\n7. Create a **tokens** table with the columns: **hash** (string), **accessToken** (string), **tokenExpiry** (string) in the Data tables section of your n8n platform account.",
  "featuredImage": "/data/workflows/11868/11868.webp",
  "author": {
    "id": 101,
    "slug": "sendpulse",
    "name": "SendPulse",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 27,
  "downloads": 2,
  "createdAt": "2025-12-16T15:27:39.074Z",
  "updatedAt": "2026-01-16T09:10:28.148Z",
  "publishedAt": "2025-12-16T15:27:39.074Z",
  "nodes": 30,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11868",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Lead collection with SendPulse and GPT-generated welcome emails/SMS",
    "workflowName": "Lead collection with SendPulse and GPT-generated welcome emails/SMS",
    "description": "## How it works\n\nThis n8n template automates lead processing from your website. It receives customer data via a Webhook, stores the customer's contact (email or phone number) in the respective [**SendPulse**](https://sendpulse.com) address books, and uses the [**SendPulse MCP Server**](https://sendpulse.com/knowledge-base/account-settings/mcp-server)  to send personalized welcome messages (email or SMS) generated using AI.\n\nThe template also includes built-in SendPulse token management logic with caching in the Data Table, which reduces the number of unnecessary API requests.\n\n[**SendPulse’s MCP server**](https://sendpulse.com/knowledge-base/account-settings/mcp-server) is a tool that helps you manage your account through a chat with an AI assistant. It uses SendPulse API methods to get information and perform actions, such as request statistics, run message campaigns, or update user data.\n\nMCP server acts as middleware between your AI assistant and your [**SendPulse account**](https://sendpulse.com). It processes requests through the SendPulse API and sends results back to chat, so you can manage everything without leaving the conversation.\n\nOnce connected, the MCP server operates as follows:\n\n1. You ask your AI assistant something in chat.\n2. It forwards your request to the MCP server.\n3. The MCP server calls the API to get data or perform an action.\n4. The AI assistant sends the result back to your chat.\n\n## Set up\n\n### Requirements:\n- An active SendPulse account.\n- Client ID and Client Secret from your SendPulse account.\n- An API key from your OpenAI account to power the AI agent.\n\n### Set up steps:\n\n1. Get your **OpenAI API Key** - [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)\n2. Add your **OpenAI API Key** to **OpenAI Chat Model** node in n8n workflow.\n3. Get your **Client ID** and **Client Secret** from your SendPulse account - [https://login.sendpulse.com/settings/#api](https://login.sendpulse.com/settings/#api)\n4. Add your **Client ID** and **Client Secret** to **Workflow Configuration** node.\n5. Add your **Client ID** and **Client Secret** to **SendPulse MCP Client** node as headers **X-SP-ID** і **X-SP-SECRET** in Multiple Headers Auth.\n6. In the **Workflow Configuration** node, change the names of the mailing lists, senderName, senderEmail, smsSender, routeCountryCode and routeType fileds as needed.\n7. Create a **tokens** table with the columns: **hash** (string), **accessToken** (string), **tokenExpiry** (string) in the Data tables section of your n8n platform account.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Get New Access Token",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Get Token from Storage",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Save Token to Storage",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Generate Hash",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Is Token Expired?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Exists phone?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Exists email?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Create mailing list with phones",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Search Mailing Lists With Phone Numbers",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Search Mailing Lists With Emails",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Is Exists Mailing List With Phone Numbers",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.3"
    },
    {
      "name": "SendPulse MCP Client",
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Set Access Token",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Exists Mailing List With Emails?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Create Mailing List With Emails",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Generate And Send Welcome Email",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 3"
    },
    {
      "name": "Generate Welcome SMS",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 3"
    },
    {
      "name": "Add Email to Mailing List",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Add Phone Number to Mailing List",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Send SMS to Client",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "New Customer Registration",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Mailing List",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}