{
  "id": 5589,
  "slug": "5589",
  "title": "Create a multi-modal Telegram support bot with GPT-4 and Supabase RAG",
  "description": "## üß† What It Does\nThis n8n workflow turns your Telegram bot into a smart, multi-modal AI assistant that accepts **text**, **documents**, **images**, and **audio** messages, interprets them using OpenAI models, and responds instantly with context-aware answers.\nIt integrates a **Supabase vector database** to store document embeddings and retrieve relevant information before sending a prompt to OpenAI ‚Äî enabling a full **RAG** experience\n\n## üí° Why This Workflow?\nMost support bots can only handle basic text input. This workflow:\n- Supports multiple input formats (voice, documents, images, text)\n- Dynamically extracts and processes data from uploaded files\n- Implements RAG by combining user input with relevant memory or vector-based context\n- Delivers more accurate, relevant, and human-like AI responses.\n\n\n## üë§ Who It's For\n\n- Businesses looking to automate support using Telegram\n- Freelancers or solopreneurs offering AI Chatbots for businesses.\n- Creators building AI-powered bots for real use cases as it's great for Customer support knowledge, Legal or Policy document, long FAQs, Project documentation, and Product information retrieval.\n- Devs or analysts exploring AI + multi-format input + vector memory.\n\n## ‚öôÔ∏è How It Works\n### üóÇÔ∏è Knowledge Base Setup\nRun the **‚ÄúAdd to Supabase Vector DB‚Äù** workflow manually to upload a document from your google drive and embed it into your vector database. This powers the Telegram chatbot‚Äôs ability to answer questions using your content. \n### üîÅ Telegram Message Routing\n1. **Telegram Trigger** captures the user message (Text, Image, Voice, Document)\n2. **Message Router** routes input by type using a Switch node\n3. Each type is handled separately:\n     - **Voice** ‚Üí Translate recording to text (.ogg, .mp3)\n     - **Image** ‚Üí Analyze image to text.\n     -  **Text** ‚Üí Sent directly to AI Agent (.txt).\n     - **Document** ‚Üí Parsed (e.g. .docx to .txt) accordingly.\n\n       #### üìé Document Type Routing\n\n       Before routing documents by type, the **Supported  Document File Types** node first checks if the file extension is allowed. If not supported, it exits early with an error message ‚Äî preventing unnecessary processing.\nSupported documents are then routed using the **Document Router** node, and converted to text for further processing.\n\n       #### Supported Document File Types\n       **.jpg**   **.jpeg**   **.png**   **.webp**   **.pdf**   **.doc**   **.docx**   **.xls**   **.xlsx**   **.json**   **.xml**.\n\n4. The text content is combined with stored memory and embedded knowledge using a **RAG** approach, enabling the AI to respond based on real uploaded data.\n   #### üß† RAG via Supabase\n   Uploaded documents are vectorized using OpenAI Embeddings. Embeddings are stored in Supabase with metadata. On new questions, the chatbot:\n   - Extracts question intent\n   - Queries Supabase for semantically similar chunks\n   - Ranks retrieved chunks to find the most relevant match.\n   - Injects them into the prompt for OpenAI. \n   - OpenAI generates a grounded response based on actual document content.\n\n5. Response is sent to the Telegram user with content awareness.\n\n## üõ† How to Set It Up\n\n1. Open [n8n](https://www.n8n.io) or your local/self-hosted instance.\n2. Import the `.json\n` workflow file.\n3. Set up these credentials:\n   - **Google drive API Key**\n   - **Telegram API (Bot Token) [Guide](https://docs.n8n.io/integrations/builtin/credentials/telegram/?utm_source=n8n_app&utm_medium=credential_settings&utm_campaign=create_new_credentials_modal)**\n   - **OpenAI API**\n   - **Supabase API Key + Environment**\n   - **ConvertAPI API Key**\n   - **Postgres API Key**\n   - **Cohere API Key**\n   - **Add a prompt suited to your business.** Add a custom AI agent prompt that reflects your business domain, tone, and purpose. This is very important. Without it, your agent won't know how best to respond.\n4. Activate the workflow.\n5. Start testing by sending a message or document to your Telegram bot.\n",
  "featuredImage": "/data/workflows/5589/5589.webp",
  "author": {
    "id": 101,
    "slug": "kingsley",
    "name": "Ezema Kingsley Chibuzo",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 10579,
  "downloads": 1057,
  "createdAt": "2025-07-02T09:02:20.931Z",
  "updatedAt": "2026-01-16T08:40:25.357Z",
  "publishedAt": "2025-07-02T09:02:20.931Z",
  "nodes": 51,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5589",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Create a multi-modal Telegram support bot with GPT-4 and Supabase RAG",
    "workflowName": "Create a multi-modal Telegram support bot with GPT-4 and Supabase RAG",
    "description": "## üß† What It Does\nThis n8n workflow turns your Telegram bot into a smart, multi-modal AI assistant that accepts **text**, **documents**, **images**, and **audio** messages, interprets them using OpenAI models, and responds instantly with context-aware answers.\nIt integrates a **Supabase vector database** to store document embeddings and retrieve relevant information before sending a prompt to OpenAI ‚Äî enabling a full **RAG** experience\n\n## üí° Why This Workflow?\nMost support bots can only handle basic text input. This workflow:\n- Supports multiple input formats (voice, documents, images, text)\n- Dynamically extracts and processes data from uploaded files\n- Implements RAG by combining user input with relevant memory or vector-based context\n- Delivers more accurate, relevant, and human-like AI responses.\n\n\n## üë§ Who It's For\n\n- Businesses looking to automate support using Telegram\n- Freelancers or solopreneurs offering AI Chatbots for businesses.\n- Creators building AI-powered bots for real use cases as it's great for Customer support knowledge, Legal or Policy document, long FAQs, Project documentation, and Product information retrieval.\n- Devs or analysts exploring AI + multi-format input + vector memory.\n\n## ‚öôÔ∏è How It Works\n### üóÇÔ∏è Knowledge Base Setup\nRun the **‚ÄúAdd to Supabase Vector DB‚Äù** workflow manually to upload a document from your google drive and embed it into your vector database. This powers the Telegram chatbot‚Äôs ability to answer questions using your content. \n### üîÅ Telegram Message Routing\n1. **Telegram Trigger** captures the user message (Text, Image, Voice, Document)\n2. **Message Router** routes input by type using a Switch node\n3. Each type is handled separately:\n     - **Voice** ‚Üí Translate recording to text (.ogg, .mp3)\n     - **Image** ‚Üí Analyze image to text.\n     -  **Text** ‚Üí Sent directly to AI Agent (.txt).\n     - **Document** ‚Üí Parsed (e.g. .docx to .txt) accordingly.\n\n       #### üìé Document Type Routing\n\n       Before routing documents by type, the **Supported  Document File Types** node first checks if the file extension is allowed. If not supported, it exits early with an error message ‚Äî preventing unnecessary processing.\nSupported documents are then routed using the **Document Router** node, and converted to text for further processing.\n\n       #### Supported Document File Types\n       **.jpg**   **.jpeg**   **.png**   **.webp**   **.pdf**   **.doc**   **.docx**   **.xls**   **.xlsx**   **.json**   **.xml**.\n\n4. The text content is combined with stored memory and embedded knowledge using a **RAG** approach, enabling the AI to respond based on real uploaded data.\n   #### üß† RAG via Supabase\n   Uploaded documents are vectorized using OpenAI Embeddings. Embeddings are stored in Supabase with metadata. On new questions, the chatbot:\n   - Extracts question intent\n   - Queries Supabase for semantically similar chunks\n   - Ranks retrieved chunks to find the most relevant match.\n   - Injects them into the prompt for OpenAI. \n   - OpenAI generates a grounded response based on actual document content.\n\n5. Response is sent to the Telegram user with content awareness.\n\n## üõ† How to Set It Up\n\n1. Open [n8n](https://www.n8n.io) or your local/self-hosted instance.\n2. Import the `.json\n` workflow file.\n3. Set up these credentials:\n   - **Google drive API Key**\n   - **Telegram API (Bot Token) [Guide](https://docs.n8n.io/integrations/builtin/credentials/telegram/?utm_source=n8n_app&utm_medium=credential_settings&utm_campaign=create_new_credentials_modal)**\n   - **OpenAI API**\n   - **Supabase API Key + Environment**\n   - **ConvertAPI API Key**\n   - **Postgres API Key**\n   - **Cohere API Key**\n   - **Add a prompt suited to your business.** Add a custom AI agent prompt that reflects your business domain, tone, and purpose. This is very important. Without it, your agent won't know how best to respond.\n4. Activate the workflow.\n5. Start testing by sending a message or document to your Telegram bot.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Telegram",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Download Audio",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Translate to Text",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Download PDF",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Download Image",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Fix mimeType",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Download Photo",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Fix mimeType1",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Photo to text",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Download Spreadsheet",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Extract from PDF",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract from Spreadsheet",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Typing‚Ä¶",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Supported Document File Types",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Group Similar Documents",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Input Message Router",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Document Router",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Download JSON",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Extract from JSON",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Download XML",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Extract from XML",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Download Word Document",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "File to Base64",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert to text (convertapi.com)",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Download Text",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Photo to text1",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "When clicking ‚ÄòExecute workflow‚Äô",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Download file",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Default Data Loader1",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Recursive Character Text Splitter1",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Embeddings OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Reranker Cohere",
      "type": "@n8n/n8n-nodes-langchain.rerankerCohere",
      "role": "rerankerCohere",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract Text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Text & Content",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Error Message",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Text1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Text2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Text3",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Text4",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Text5",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Add to Supabase Vector DB",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Knowledge Base AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Supabase Vector Store Search",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1.3"
    }
  ]
}