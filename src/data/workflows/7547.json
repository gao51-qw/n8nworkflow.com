{
  "id": 7547,
  "slug": "7547",
  "title": "Monitor S3 bucket changes with automated integrity auditing using Mistral AI",
  "description": "# Automated and Periodic AWS S3 Bucket Object Integrity Audit to detect unexpected changes (by Humans, Tenants or Ransomwares)\n\n\n$\\mapsto$ Working with AWS S3, but could also be working with Microsoft Azure, Google Storage Plateform or any other Cloud Provider ! Interested ? Send us an email : contact@sienna.dev\n\n## What this workflow does ?\n\nThis workflow performs automated, periodic audits of an AWS S3 bucket containing objects (files) that can be added, deleted, modified, renamed, or moved at any time by people, tenants, applications, or even ransomware, which could corrupt your resources. \n\nAudits are performed on a single bucket and use optical character recognition (OCR) and artificial intelligence (AI) to characterize changes that may have been made to specific files (TXT, PDF, and logs) in order to determine their sensitivity and integrity (is the file sensitive and complete/intact).\n\n\n## Who's this intended for ?\n\nStorage administrators, cloud architects, or DevOps who need a solution to audit movements on remote cloud storage spaces (such as AWS S3).\n\nThis helps prevent data loss and ensures your compliance level!\n\n## How it works ?\n\nEverything is explained in the workflow. It is taking a \"picture\" of your bucket at a given moment, and then, every X Hours/Days/Weeks, it's taking another picture. \n\nAfter that, we will compare the two photos (like a game of spot the difference) to determine which objects are present in one of the two photos (added or deleted), or present in both but modified.\n\nThe workflow will extract and download added and modified files, select those in text format (PDF, TXT, and logs), and characterize the changes that have been made to these files to ensure that their integrity level is sufficient.\n\nYou can obviously modify this workflow to only get Added or Modified Files, and change prompts (ex : tell if the file is containing specific informations, ...).\n\n## Requirements\n\n- An access to an AWS S3 Bucket obviously;\n- A MinIO S3 Bucket running locally on the Host, or on a different VM/LXC/Container (Using PVE ? Check this : https://community-scripts.github.io/ProxmoxVE/scripts?id=minio) ;\n- Permissions for your N8N Docker Container to write/read on the Host FS (using SSH Nodes with the “execute command” option) ;\n- A Python Script (here : https://sienna.dev/bitnami/wordpress/wp-content/uploads/assets/fileFormatter.py) for the final AI Report Creation\n- A Mistral Account for OCR and LLM with API Keys (or an OCR running locally with Ollama for example\n- MongoDB running on a separate container to get all reports saved\n\nNeed help with something ? Contact us by Mail !\n\n\n## Need a similar Workflow to audit Files & Objects on another Cloud Storage Provider ?\n\nGood news, we have what you need! We can work with any cloud provider, audit files and objects on remote spaces (Backblaze, Wasabi, Scaleway, OVH, IBM, Oracle, Storadera, etc.) using custom scripts and open-source tools!\n\nSimply contact us by email to get in touch with a cloud storage expert and find out today how you can mitigate your cloud storage issues or recover data from the cloud to an on-premises infrastructure.\n",
  "featuredImage": "/data/workflows/7547/7547.webp",
  "author": {
    "id": 101,
    "slug": "sienna",
    "name": "SIENNA",
    "avatar": ""
  },
  "categories": [
    "AI Summarization",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 70,
  "downloads": 7,
  "createdAt": "2025-08-18T12:49:52.918Z",
  "updatedAt": "2026-01-16T08:51:01.469Z",
  "publishedAt": "2025-08-18T12:49:52.918Z",
  "nodes": 77,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7547",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Monitor S3 bucket changes with automated integrity auditing using Mistral AI",
    "workflowName": "Monitor S3 bucket changes with automated integrity auditing using Mistral AI",
    "description": "# Automated and Periodic AWS S3 Bucket Object Integrity Audit to detect unexpected changes (by Humans, Tenants or Ransomwares)\n\n\n$\\mapsto$ Working with AWS S3, but could also be working with Microsoft Azure, Google Storage Plateform or any other Cloud Provider ! Interested ? Send us an email : contact@sienna.dev\n\n## What this workflow does ?\n\nThis workflow performs automated, periodic audits of an AWS S3 bucket containing objects (files) that can be added, deleted, modified, renamed, or moved at any time by people, tenants, applications, or even ransomware, which could corrupt your resources. \n\nAudits are performed on a single bucket and use optical character recognition (OCR) and artificial intelligence (AI) to characterize changes that may have been made to specific files (TXT, PDF, and logs) in order to determine their sensitivity and integrity (is the file sensitive and complete/intact).\n\n\n## Who's this intended for ?\n\nStorage administrators, cloud architects, or DevOps who need a solution to audit movements on remote cloud storage spaces (such as AWS S3).\n\nThis helps prevent data loss and ensures your compliance level!\n\n## How it works ?\n\nEverything is explained in the workflow. It is taking a \"picture\" of your bucket at a given moment, and then, every X Hours/Days/Weeks, it's taking another picture. \n\nAfter that, we will compare the two photos (like a game of spot the difference) to determine which objects are present in one of the two photos (added or deleted), or present in both but modified.\n\nThe workflow will extract and download added and modified files, select those in text format (PDF, TXT, and logs), and characterize the changes that have been made to these files to ensure that their integrity level is sufficient.\n\nYou can obviously modify this workflow to only get Added or Modified Files, and change prompts (ex : tell if the file is containing specific informations, ...).\n\n## Requirements\n\n- An access to an AWS S3 Bucket obviously;\n- A MinIO S3 Bucket running locally on the Host, or on a different VM/LXC/Container (Using PVE ? Check this : https://community-scripts.github.io/ProxmoxVE/scripts?id=minio) ;\n- Permissions for your N8N Docker Container to write/read on the Host FS (using SSH Nodes with the “execute command” option) ;\n- A Python Script (here : https://sienna.dev/bitnami/wordpress/wp-content/uploads/assets/fileFormatter.py) for the final AI Report Creation\n- A Mistral Account for OCR and LLM with API Keys (or an OCR running locally with Ollama for example\n- MongoDB running on a separate container to get all reports saved\n\nNeed help with something ? Contact us by Mail !\n\n\n## Need a similar Workflow to audit Files & Objects on another Cloud Storage Provider ?\n\nGood news, we have what you need! We can work with any cloud provider, audit files and objects on remote spaces (Backblaze, Wasabi, Scaleway, OVH, IBM, Oracle, Storadera, etc.) using custom scripts and open-source tools!\n\nSimply contact us by email to get in touch with a cloud storage expert and find out today how you can mitigate your cloud storage issues or recover data from the cloud to an on-premises infrastructure.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Envoi de mail récapitulatif",
      "type": "n8n-nodes-base.emailSend",
      "role": "emailSend",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Mistral Cloud Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "role": "lmChatMistralCloud",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract .txt / .log",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Extraction des paths",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note18",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note21",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note23",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note27",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Remove Duplicates",
      "type": "n8n-nodes-base.removeDuplicates",
      "role": "removeDuplicates",
      "configDescription": "Version 2"
    },
    {
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Sticky Note30",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract text with OCR",
      "type": "n8n-nodes-base.mistralAi",
      "role": "mistralAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Boucle",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "AnalyseIA",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Delete a folder1",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Create a folder1",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract from File",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Out",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Only keep PDF, TXT and Logs",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Download suspect files",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "List downloaded objects",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Ajout à MongoDB",
      "type": "n8n-nodes-base.mongoDb",
      "role": "mongoDb",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note19",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Error Message #1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Error Message #2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "PDF Prompt Creation",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "TXT/LOG Prompt Creation",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Result Message Creation",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Result Saved",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Delete local files",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note24",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note31",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Path Extraction",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Objects Listing",
      "type": "n8n-nodes-base.awsS3",
      "role": "awsS3",
      "configDescription": "Version 2"
    },
    {
      "name": "Objects Download",
      "type": "n8n-nodes-base.awsS3",
      "role": "awsS3",
      "configDescription": "Version 2"
    },
    {
      "name": "Generate MD5",
      "type": "n8n-nodes-base.crypto",
      "role": "crypto",
      "configDescription": "Version 1"
    },
    {
      "name": "Create JSON from AWS S3 API Call",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Save Audit Snapshot",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert to File",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Compare Datasets",
      "type": "n8n-nodes-base.compareDatasets",
      "role": "compareDatasets",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Audit file to JSON",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Objects",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Upload objects to MinIO",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert to File1",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Convert to File2",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note25",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get previous Audit Snapshot",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "List S3 Objects",
      "type": "n8n-nodes-base.awsS3",
      "role": "awsS3",
      "configDescription": "Version 2"
    },
    {
      "name": "Generate MD6",
      "type": "n8n-nodes-base.crypto",
      "role": "crypto",
      "configDescription": "Version 1"
    },
    {
      "name": "Create JSON from results",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Replace previous snapshot with current one",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Save Suspect Objects List",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Download current Integrity Snapshot",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Remove them from Host FS",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Upload Snapshot on Host FS",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note26",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note28",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Report Creation",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note20",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Getting Report",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Upload Report to MinIO",
      "type": "n8n-nodes-base.s3",
      "role": "s3",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "workflow running ? ",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note16",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note17",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}