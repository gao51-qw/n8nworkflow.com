{
  "id": 4627,
  "slug": "4627",
  "title": "Discover hidden website API endpoints using regex and AI",
  "description": "# üí° What it is for\n\nThis workflow helps to automatically discover undocumented API endpoints by analysing JavaScript files from the website's HTML code.\n\nWhen building automation for platforms without public APIs, we face a significant technical barrier. In a perfect world, every service would offer well-documented APIs with clear endpoints and authentication methods. But the reality is different.\n\nBefore we resort to complex web scraping, let's analyse the architecture of the platform and check whether it makes internal API calls. We will examine JavaScript files embedded in the HTML source code to find and extract potential API endpoints.\n\n# ‚öôÔ∏èKey Features\n\nTo discover hidden API endpoints, we can apply two major approaches:\n\n**1.** **Predefined regex extraction:** manually insert a fixed regex with the necessary conditions to extract endpoints. Unlike LLM, which creates a custom regex for each JS file, we provide a generic expression to capture all URL strings. We do not want to accidentally miss important API endpoints. \n\n**2.** **AI-supported extraction:** \n  - ask LLMs to examine the structure of the JavaScript code. The 1st model will:\n  - capture potential API endpoints\n  - create a detailed description of each identified endpoint with methods and query parameters\n  - the 2nd LLM connected to the AI Agent will generate a regex for each JS file individually based on the output of the 1st model.\n\t \nIn addition to pure endpoint extraction, we supplement our analysis with:\t \n\n- **AI regex validation:** the AI Agent calls a validation tool to iteratively improve its regex based on the reference data.  \n\n-  **Results comparison:** side-by-side analysis of API endpoints extracted with a predefined regex against AI-supported results.\n   \n# ‚úÖRequirements:\n\n- OpenRouter API access: for AI-powered analysis (Gemini + Claude models by default)\n- Minimal setup: simply configure the target URL and run\n- Platforms: JS files must be accessible and have embedded standard API endpoints patterns (/api/, /v1/, etc.)  \n\n# üí™Use Cases\n\nüìö API documentation: create complete endpoint descriptions for internal APIs\nüöÄ Automation & integration projects: find the APIs you need when official documentation is missing\nüõ† Web scraping projects: discover data access patterns\nüîç Security research: map attack surfaces and explore unprotected endpoints\n\n# üéâExtracted the endpoints, what now? \nTo execute API requests, we often need additional information such as query parameters or JSON body data:\n- One way to find out exactly how the request is being made on the platform is to navigate to the Network tab in the Dev Tools console while interacting with the platform. Look for anything that resembles API requests and review the request/response headers, payload and query parameters. \n- Alternatively, you can also check the JS file and the page source code for the required values.\n\n# ‚ú®Inspiration\n\nAs a guitarist who also builds workflows, I wanted to automate communication with the booking platform I use in my music project. While trying to connect to the platform from n8n, I ran into a challenge: no public APIs. \n\nFortunately, I found out that the platform I work with was built as a modern web app with client-side JavaScript that contained information about the API structure. This led me to the topic of hidden API endpoints and eventually to this workflow. \n\nIt is part of my music booking project which I presented at [the n8n Community Meetup in Berlin on 22 May 2025](https://www.linkedin.com/posts/exxeta_n8n-automation-ai-activity-7331582589398302721-xK_A).\n\n\n\n\n\n",
  "featuredImage": "/data/workflows/4627/4627.webp",
  "author": {
    "id": 101,
    "slug": "yulia",
    "name": "Yulia",
    "avatar": ""
  },
  "categories": [
    "Engineering",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1477,
  "downloads": 147,
  "createdAt": "2025-06-03T20:24:40.505Z",
  "updatedAt": "2026-01-16T08:35:24.777Z",
  "publishedAt": "2025-06-03T20:24:40.505Z",
  "nodes": 58,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4627",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Discover hidden website API endpoints using regex and AI",
    "workflowName": "Discover hidden website API endpoints using regex and AI",
    "description": "# üí° What it is for\n\nThis workflow helps to automatically discover undocumented API endpoints by analysing JavaScript files from the website's HTML code.\n\nWhen building automation for platforms without public APIs, we face a significant technical barrier. In a perfect world, every service would offer well-documented APIs with clear endpoints and authentication methods. But the reality is different.\n\nBefore we resort to complex web scraping, let's analyse the architecture of the platform and check whether it makes internal API calls. We will examine JavaScript files embedded in the HTML source code to find and extract potential API endpoints.\n\n# ‚öôÔ∏èKey Features\n\nTo discover hidden API endpoints, we can apply two major approaches:\n\n**1.** **Predefined regex extraction:** manually insert a fixed regex with the necessary conditions to extract endpoints. Unlike LLM, which creates a custom regex for each JS file, we provide a generic expression to capture all URL strings. We do not want to accidentally miss important API endpoints. \n\n**2.** **AI-supported extraction:** \n  - ask LLMs to examine the structure of the JavaScript code. The 1st model will:\n  - capture potential API endpoints\n  - create a detailed description of each identified endpoint with methods and query parameters\n  - the 2nd LLM connected to the AI Agent will generate a regex for each JS file individually based on the output of the 1st model.\n\t \nIn addition to pure endpoint extraction, we supplement our analysis with:\t \n\n- **AI regex validation:** the AI Agent calls a validation tool to iteratively improve its regex based on the reference data.  \n\n-  **Results comparison:** side-by-side analysis of API endpoints extracted with a predefined regex against AI-supported results.\n   \n# ‚úÖRequirements:\n\n- OpenRouter API access: for AI-powered analysis (Gemini + Claude models by default)\n- Minimal setup: simply configure the target URL and run\n- Platforms: JS files must be accessible and have embedded standard API endpoints patterns (/api/, /v1/, etc.)  \n\n# üí™Use Cases\n\nüìö API documentation: create complete endpoint descriptions for internal APIs\nüöÄ Automation & integration projects: find the APIs you need when official documentation is missing\nüõ† Web scraping projects: discover data access patterns\nüîç Security research: map attack surfaces and explore unprotected endpoints\n\n# üéâExtracted the endpoints, what now? \nTo execute API requests, we often need additional information such as query parameters or JSON body data:\n- One way to find out exactly how the request is being made on the platform is to navigate to the Network tab in the Dev Tools console while interacting with the platform. Look for anything that resembles API requests and review the request/response headers, payload and query parameters. \n- Alternatively, you can also check the JS file and the page source code for the required values.\n\n# ‚ú®Inspiration\n\nAs a guitarist who also builds workflows, I wanted to automate communication with the booking platform I use in my music project. While trying to connect to the platform from n8n, I ran into a challenge: no public APIs. \n\nFortunately, I found out that the platform I work with was built as a modern web app with client-side JavaScript that contained information about the API structure. This led me to the topic of hidden API endpoints and eventually to this workflow. \n\nIt is part of my music booking project which I presented at [the n8n Community Meetup in Berlin on 22 May 2025](https://www.linkedin.com/posts/exxeta_n8n-automation-ai-activity-7331582589398302721-xK_A).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Auto-fixing Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "role": "outputParserAutofixing",
      "configDescription": "Version 1"
    },
    {
      "name": "Start API Discovery",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Configuration",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Fetch Website HTML",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Extract URLs of JS files",
      "type": "n8n-nodes-base.html",
      "role": "html",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Split URLs of JS files",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Keep Relevant JS Files",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Fetch JS Content",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Extract API Endpoints",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Check Endpoints Count",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Split Endpoints",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Remove Duplicates",
      "type": "n8n-nodes-base.removeDuplicates",
      "role": "removeDuplicates",
      "configDescription": "Version 2"
    },
    {
      "name": "AI Endpoints Analysis",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Add Source Metadata",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Reference for Source Metadata",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Process Each Analyzed File",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Format AI Results",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Prepare Endpoints File(s)",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Save Endpoints File(s)",
      "type": "n8n-nodes-base.readWriteFile",
      "role": "readWriteFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Pass File Name, No Binary",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Merge AI Analysis & File Name",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Create Endpoints Regex With AI",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Regex Generation LLM",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate LLM Regex",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Parse AI Regex Output",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Regex Validation Start",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Load Reference Endpoints",
      "type": "n8n-nodes-base.readWriteFile",
      "role": "readWriteFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract Endpoints File Text",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge Regex, File Name & Reference Endpoints",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Evaluate LLM Regex",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Merge Initial AI Analysis & AI Agent Output",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Prepare Data for Regex Extraction",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Execute LLM Regex",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Split LLM-extracted Endpoints",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Remove LLM Endpoints Duplicates",
      "type": "n8n-nodes-base.removeDuplicates",
      "role": "removeDuplicates",
      "configDescription": "Version 2"
    },
    {
      "name": "Merge Original And LLM Endpoints",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Final Merge with Enriched File Name",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Sort Merged Endpoints",
      "type": "n8n-nodes-base.sort",
      "role": "sort",
      "configDescription": "Version 1"
    },
    {
      "name": "Reorder Output Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Export Comparison Results To Excel",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Prepare Source & File Name for Merge",
      "type": "n8n-nodes-base.removeDuplicates",
      "role": "removeDuplicates",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Insufficient Endpoints",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    }
  ]
}