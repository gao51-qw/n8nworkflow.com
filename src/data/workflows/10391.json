{
  "id": 10391,
  "slug": "10391",
  "title": "Generate comprehensive business analysis reports with Gemini AI & Firecrawl",
  "description": "This workflow automates business intelligence. Submit one URL, and it scrapes the website, uses AI to perform a comprehensive analysis, and generates a professional report in Google Doc and PDF format.\n\nIt's perfect for agencies, freelancers, and consultants who need to streamline client research or competitive analysis.\n\n## How It Works\n\nThe workflow is triggered by a form input, where you provide a single website URL.\n\n1.  **Scrape:** It uses **Firecrawl** to scrape the sitemap and get the full content from the target website.\n2.  **Analyze:** The main workflow calls a **Tools Workflow** (included below) which uses **Google Gemini** and **Perplexity** AI agents to analyze the scraped content and extract key business information.\n3.  **Generate & Deliver:** All the extracted data is formatted and used to populate a template in **Google Docs**. The final report is saved to **Google Drive** and delivered via **Gmail**.\n\n## What It Generates\n\nThe final report is a comprehensive business analysis, including:\n\n  * **Business Overview:** A full company description.\n  * **Target Audience Personas:** Defines the demographic and psychographic profiles of ideal customers.\n  * **Brand & UVP:** Extracts the brand's personality matrix and its Unique Value Proposition (UVP).\n  * **Customer Journey:** Maps the typical customer journey from Awareness to Loyalty.\n\n## Required Tools\n\nThis workflow requires n8n and API keys/credentials for the following services:\n\n  * **Firecrawl** (for scraping)\n  * **Perplexity** (for AI analysis)\n  * **Google Gemini** (for AI analysis)\n  * **Google Services** (for Docs, Drive, and Gmail)\n\n## ‚ö†Ô∏è Required: Tools Workflow\n\nThis workflow **will not work** without its \"Tools\" sub-workflow. Please create a **new, separate workflow** in n8n, name it (e.g., \"Business Analysis Tools\"), and paste the following code into it.\n\n```json\n{\n  \"name\": \"Business Analysis Workflow Tools\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"function\"\n            },\n            {\n              \"name\": \"keyword\"\n            },\n            {\n              \"name\": \"url\"\n            },\n            {\n              \"name\": \"location_code\"\n            },\n            {\n              \"name\": \"language_code\"\n            }\n          ]\n        }\n      },\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        -448,\n        800\n      ],\n      \"id\": \"e79e0605-f9ac-4166-894c-e5aa9bd75bac\",\n      \"name\": \"When Executed by Another Workflow\"\n    },\n    {\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"8d7d3035-3a57-47ee-b1d1-dd7bfcab9114\",\n                    \"leftValue\": \"serp_search\",\n                    \"rightValue\": \"={{ $json.function }}\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\",\n                      \"name\": \"filter.operator.equals\"\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"serp_search\"\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"bb2c23eb-862d-4582-961e-5a8d8338842c\",\n                    \"leftValue\": \"ai_mode\",\n                    \"rightValue\": \"={{ $json.function }}\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\",\n                      \"name\": \"filter.operator.equals\"\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"ai_mode\"\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"4603eee1-3888-4e32-b3b9-4f299dfd6df3\",\n                    \"leftValue\": \"internal_links\",\n                    \"rightValue\": \"={{ $json.function }}\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\",\n                      \"name\": \"filter.operator.equals\"\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"internal_links\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.switch\",\n      \"typeVersion\": 3.2,\n      \"position\": [\n        -208,\n        784\n      ],\n      \"id\": \"72c37890-7054-48d8-a508-47ed981551d6\",\n      \"name\": \"Switch\"\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://api.dataforseo.com/v3/serp/google/organic/live/advanced\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpBasicAuth\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"=[\\n  {\\n    \\\"keyword\\\": \\\"{{ $json.keyword.replace(/[:'\\\"\\\\\\\\/]/g, '') }}\\\",\\n    \\\"location_code\\\": {{ $json.location_code }},\\n    \\\"language_code\\\": \\\"{{ $json.language_code }}\\\",\\n    \\\"depth\\\": 10,\\n    \\\"group_organic_results\\\": true,\\n    \\\"load_async_ai_overview\\\": true,\\n    \\\"people_also_ask_click_depth\\\": 1\\n  }\\n]\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {\n              \"followRedirects\": false\n            }\n          }\n        }\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        384,\n        512\n      ],\n      \"id\": \"6203f722-b590-4a25-8953-8753a44eb3cb\",\n      \"name\": \"SERP Google\",\n      \"credentials\": {\n        \"httpBasicAuth\": {\n          \"id\": \"n5o00CCWcmHFeI1p\",\n          \"name\": \"DataForSEO\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## SERP Google\",\n        \"height\": 272,\n        \"width\": 688,\n        \"color\": 4\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        288,\n        432\n      ],\n      \"id\": \"81593217-034f-466d-9055-03ab6b2d7d08\",\n      \"name\": \"Sticky Note3\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"97ef7ee0-bc97-4089-bc37-c0545e28ed9f\",\n              \"name\": \"platform\",\n              \"value\": \"={{ $json.tasks[0].data.se }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"9299e6bb-bd36-4691-bc6c-655795a6226e\",\n              \"name\": \"type\",\n              \"value\": \"={{ $json.tasks[0].data.se_type }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"2dc26c8e-713c-4a59-a353-9d9259109e74\",\n              \"name\": \"keyword\",\n              \"value\": \"={{ $json.tasks[0].data.keyword }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"84c9be31-8f1d-4a67-9d13-897910d7ec18\",\n              \"name\": \"results\",\n              \"value\": \"={{ $json.tasks[0].result }}\",\n              \"type\": \"array\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        592,\n        512\n      ],\n      \"id\": \"a916551a-009b-403f-b02e-3951d54d2407\",\n      \"name\": \"Prepare SERP output\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"# Google Organic Search API\\n\\nThis API lets you retrieve real-time Google search results with a wide range of parameters and custom settings.  \\nThe response includes structured data for all available SERP features, along with a direct URL to the search results page.  \\n\\nüëâ [Documentation](https://docs.dataforseo.com/v3/serp/overview/)\\n\",\n        \"height\": 272,\n        \"width\": 496,\n        \"color\": 4\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        976,\n        432\n      ],\n      \"id\": \"87672b01-7477-4b43-9ccc-523ef8d91c64\",\n      \"name\": \"Sticky Note17\"\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://api.dataforseo.com/v3/serp/google/ai_mode/live/advanced\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpBasicAuth\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"=[\\n  {\\n    \\\"keyword\\\": \\\"{{ $json.keyword }}\\\",\\n    \\\"location_code\\\": {{ $json.location_code }},\\n    \\\"language_code\\\": \\\"{{ $json.language_code }}\\\",\\n    \\\"device\\\": \\\"mobile\\\",\\n    \\\"os\\\": \\\"android\\\"\\n  }\\n]\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        }\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        384,\n        800\n      ],\n      \"id\": \"fb0001c4-d590-45b3-a3d0-cac7174741d3\",\n      \"name\": \"AI Mode\",\n      \"credentials\": {\n        \"httpBasicAuth\": {\n          \"id\": \"n5o00CCWcmHFeI1p\",\n          \"name\": \"DataForSEO\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## AI Mode\",\n        \"height\": 272,\n        \"width\": 512,\n        \"color\": 6\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        288,\n        720\n      ],\n      \"id\": \"2cea3312-31f8-4ff0-b385-5b76b836274c\",\n      \"name\": \"Sticky Note11\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b822f458-ebf2-4a37-9906-b6a2606e6106\",\n              \"name\": \"keyword\",\n              \"value\": \"={{ $json.tasks[0].data.keyword }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"10484675-b107-4157-bc7e-b942d8cdb5d2\",\n              \"name\": \"result\",\n              \"value\": \"={{ $json.tasks[0].result[0].items }}\",\n              \"type\": \"array\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        592,\n        800\n      ],\n      \"id\": \"6b1e7239-ee2b-4457-8acb-17ce87415729\",\n      \"name\": \"Prepare AI Mode Output\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"# Google AI Mode API\\n\\nThis API provides AI-generated search result summaries and insights from Google.  \\nIt returns detailed explanations, overviews, and related information based on search queries, with parameters to customize the AI overview.  \\n\\nüëâ [Documentation](https://docs.dataforseo.com/v3/serp/google/ai_mode/overview/)\\n\",\n        \"height\": 272,\n        \"width\": 496,\n        \"color\": 6\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        800,\n        720\n      ],\n      \"id\": \"d761dc57-e35d-4052-a360-71170a155f7b\",\n      \"name\": \"Sticky Note18\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## Input\",\n        \"height\": 384,\n        \"width\": 544,\n        \"color\": 7\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -528,\n        672\n      ],\n      \"id\": \"db90385e-f921-4a9c-89f3-53fc5825b207\",\n      \"name\": \"Sticky Note\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b865f4a0-b4c3-4dde-bf18-3da933ab21af\",\n              \"name\": \"platform\",\n              \"value\": \"={{ $json.platform }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"476e07ca-ccf6-43d4-acb4-4cc905464314\",\n              \"name\": \"type\",\n              \"value\": \"={{ $json.type }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"f1a14eb8-9f10-4198-bbc7-17091532b38e\",\n              \"name\": \"keyword\",\n              \"value\": \"={{ $json.keyword }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"181791a0-1d88-481c-8d98-a86242bb2135\",\n              \"name\": \"results\",\n              \"value\": \"={{ $json.results[0].items }}\",\n              \"type\": \"array\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        800,\n        512\n      ],\n      \"id\": \"83fef061-5e0b-417c-b1f6-d34eb712fac6\",\n      \"name\": \"Sort Results\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## Internal Links\",\n        \"height\": 272,\n        \"width\": 272,\n        \"color\": 5\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        288,\n        1024\n      ],\n      \"id\": \"9246601a-f133-4ca3-aac8-989cb45e6cd2\",\n      \"name\": \"Sticky Note7\"\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://api.firecrawl.dev/v2/map\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"Bearer your-firecrawl-apikey\"\n            }\n          ]\n        },\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"={\\n    \\\"url\\\": \\\"https://{{ $json.url }}\\\",\\n    \\\"limit\\\": 400,\\n    \\\"includeSubdomains\\\": false,\\n    \\\"sitemap\\\": \\\"include\\\"\\n  }\",\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        368,\n        1104\n      ],\n      \"id\": \"fd6a33ae-6fb3-4331-ab6a-994048659116\",\n      \"name\": \"Get Internal Links\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"# Firecrawl Map API\\n\\nThis endpoint maps a website from a single URL and returns the list of discovered URLs (titles and descriptions when available) ‚Äî extremely fast and useful for selecting which pages to scrape or for quickly enumerating site links. ([Firecrawl][1])\\n\\nIt supports a `search` parameter to find relevant pages inside a site, `location`/`languages` options to emulate country/language (uses proxies when available), and SDK + cURL examples in the docs,\\n\\nüëâ [Documentation](https://docs.firecrawl.dev/features/map)\\n\\n[1]: https://docs.firecrawl.dev/features/map \\\"Map | Firecrawl\\\"\\n\",\n        \"height\": 272,\n        \"width\": 624,\n        \"color\": 5\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        560,\n        1024\n      ],\n      \"id\": \"08457204-93ff-4586-a76e-03907118be3c\",\n      \"name\": \"Sticky Note24\"\n    }\n  ],\n  \"pinData\": {\n    \"When Executed by Another Workflow\": [\n      {\n        \"json\": {\n          \"function\": \"serp_search\",\n          \"keyword\": \"villanyszerel≈ë Largo Florida\",\n          \"url\": null,\n          \"location_code\": 2840,\n          \"language_code\": \"hu\"\n        }\n      }\n    ]\n  },\n  \"connections\": {\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"SERP Google\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"AI Mode\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get Internal Links\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"SERP Google\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare SERP output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Mode\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare AI Mode Output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare SERP output\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Sort Results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Sort Results\": {\n      \"main\": [\n        []\n      ]\n    }\n  },\n  \"active\": false,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"6fce16d1-aa28-4939-9c2d-930d11c1e17f\",\n  \"meta\": {\n    \"instanceId\": \"1ee7b11b3a4bb285563e32fdddf3fbac26379ada529b942ee7cda230735046a1\"\n  },\n  \"id\": \"VjpOW2V2aNV9HpQJ\",\n  \"tags\": []\n}\n```",
  "featuredImage": "/data/workflows/10391/10391.webp",
  "author": {
    "id": 101,
    "slug": "agricidaniel",
    "name": "Daniel Agrici",
    "avatar": ""
  },
  "categories": [
    "Market Research",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 371,
  "downloads": 37,
  "createdAt": "2025-10-31T12:36:00.232Z",
  "updatedAt": "2026-01-16T09:04:51.461Z",
  "publishedAt": "2025-10-31T12:36:00.232Z",
  "nodes": 35,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10391",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Generate comprehensive business analysis reports with Gemini AI & Firecrawl",
    "workflowName": "Generate comprehensive business analysis reports with Gemini AI & Firecrawl",
    "description": "This workflow automates business intelligence. Submit one URL, and it scrapes the website, uses AI to perform a comprehensive analysis, and generates a professional report in Google Doc and PDF format.\n\nIt's perfect for agencies, freelancers, and consultants who need to streamline client research or competitive analysis.\n\n## How It Works\n\nThe workflow is triggered by a form input, where you provide a single website URL.\n\n1.  **Scrape:** It uses **Firecrawl** to scrape the sitemap and get the full content from the target website.\n2.  **Analyze:** The main workflow calls a **Tools Workflow** (included below) which uses **Google Gemini** and **Perplexity** AI agents to analyze the scraped content and extract key business information.\n3.  **Generate & Deliver:** All the extracted data is formatted and used to populate a template in **Google Docs**. The final report is saved to **Google Drive** and delivered via **Gmail**.\n\n## What It Generates\n\nThe final report is a comprehensive business analysis, including:\n\n  * **Business Overview:** A full company description.\n  * **Target Audience Personas:** Defines the demographic and psychographic profiles of ideal customers.\n  * **Brand & UVP:** Extracts the brand's personality matrix and its Unique Value Proposition (UVP).\n  * **Customer Journey:** Maps the typical customer journey from Awareness to Loyalty.\n\n## Required Tools\n\nThis workflow requires n8n and API keys/credentials for the following services:\n\n  * **Firecrawl** (for scraping)\n  * **Perplexity** (for AI analysis)\n  * **Google Gemini** (for AI analysis)\n  * **Google Services** (for Docs, Drive, and Gmail)\n\n## ‚ö†Ô∏è Required: Tools Workflow\n\nThis workflow **will not work** without its \"Tools\" sub-workflow. Please create a **new, separate workflow** in n8n, name it (e.g., \"Business Analysis Tools\"), and paste the following code into it.\n\n```json\n{\n  \"name\": \"Business Analysis Workflow Tools\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"function\"\n            },\n            {\n              \"name\": \"keyword\"\n            },\n            {\n              \"name\": \"url\"\n            },\n            {\n              \"name\": \"location_code\"\n            },\n            {\n              \"name\": \"language_code\"\n            }\n          ]\n        }\n      },\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        -448,\n        800\n      ],\n      \"id\": \"e79e0605-f9ac-4166-894c-e5aa9bd75bac\",\n      \"name\": \"When Executed by Another Workflow\"\n    },\n    {\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"8d7d3035-3a57-47ee-b1d1-dd7bfcab9114\",\n                    \"leftValue\": \"serp_search\",\n                    \"rightValue\": \"={{ $json.function }}\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\",\n                      \"name\": \"filter.operator.equals\"\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"serp_search\"\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"bb2c23eb-862d-4582-961e-5a8d8338842c\",\n                    \"leftValue\": \"ai_mode\",\n                    \"rightValue\": \"={{ $json.function }}\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\",\n                      \"name\": \"filter.operator.equals\"\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"ai_mode\"\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"4603eee1-3888-4e32-b3b9-4f299dfd6df3\",\n                    \"leftValue\": \"internal_links\",\n                    \"rightValue\": \"={{ $json.function }}\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\",\n                      \"name\": \"filter.operator.equals\"\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"internal_links\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.switch\",\n      \"typeVersion\": 3.2,\n      \"position\": [\n        -208,\n        784\n      ],\n      \"id\": \"72c37890-7054-48d8-a508-47ed981551d6\",\n      \"name\": \"Switch\"\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://api.dataforseo.com/v3/serp/google/organic/live/advanced\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpBasicAuth\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"=[\\n  {\\n    \\\"keyword\\\": \\\"{{ $json.keyword.replace(/[:'\\\"\\\\\\\\/]/g, '') }}\\\",\\n    \\\"location_code\\\": {{ $json.location_code }},\\n    \\\"language_code\\\": \\\"{{ $json.language_code }}\\\",\\n    \\\"depth\\\": 10,\\n    \\\"group_organic_results\\\": true,\\n    \\\"load_async_ai_overview\\\": true,\\n    \\\"people_also_ask_click_depth\\\": 1\\n  }\\n]\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {\n              \"followRedirects\": false\n            }\n          }\n        }\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        384,\n        512\n      ],\n      \"id\": \"6203f722-b590-4a25-8953-8753a44eb3cb\",\n      \"name\": \"SERP Google\",\n      \"credentials\": {\n        \"httpBasicAuth\": {\n          \"id\": \"n5o00CCWcmHFeI1p\",\n          \"name\": \"DataForSEO\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## SERP Google\",\n        \"height\": 272,\n        \"width\": 688,\n        \"color\": 4\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        288,\n        432\n      ],\n      \"id\": \"81593217-034f-466d-9055-03ab6b2d7d08\",\n      \"name\": \"Sticky Note3\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"97ef7ee0-bc97-4089-bc37-c0545e28ed9f\",\n              \"name\": \"platform\",\n              \"value\": \"={{ $json.tasks[0].data.se }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"9299e6bb-bd36-4691-bc6c-655795a6226e\",\n              \"name\": \"type\",\n              \"value\": \"={{ $json.tasks[0].data.se_type }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"2dc26c8e-713c-4a59-a353-9d9259109e74\",\n              \"name\": \"keyword\",\n              \"value\": \"={{ $json.tasks[0].data.keyword }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"84c9be31-8f1d-4a67-9d13-897910d7ec18\",\n              \"name\": \"results\",\n              \"value\": \"={{ $json.tasks[0].result }}\",\n              \"type\": \"array\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        592,\n        512\n      ],\n      \"id\": \"a916551a-009b-403f-b02e-3951d54d2407\",\n      \"name\": \"Prepare SERP output\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"# Google Organic Search API\\n\\nThis API lets you retrieve real-time Google search results with a wide range of parameters and custom settings.  \\nThe response includes structured data for all available SERP features, along with a direct URL to the search results page.  \\n\\nüëâ [Documentation](https://docs.dataforseo.com/v3/serp/overview/)\\n\",\n        \"height\": 272,\n        \"width\": 496,\n        \"color\": 4\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        976,\n        432\n      ],\n      \"id\": \"87672b01-7477-4b43-9ccc-523ef8d91c64\",\n      \"name\": \"Sticky Note17\"\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://api.dataforseo.com/v3/serp/google/ai_mode/live/advanced\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpBasicAuth\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"=[\\n  {\\n    \\\"keyword\\\": \\\"{{ $json.keyword }}\\\",\\n    \\\"location_code\\\": {{ $json.location_code }},\\n    \\\"language_code\\\": \\\"{{ $json.language_code }}\\\",\\n    \\\"device\\\": \\\"mobile\\\",\\n    \\\"os\\\": \\\"android\\\"\\n  }\\n]\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        }\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        384,\n        800\n      ],\n      \"id\": \"fb0001c4-d590-45b3-a3d0-cac7174741d3\",\n      \"name\": \"AI Mode\",\n      \"credentials\": {\n        \"httpBasicAuth\": {\n          \"id\": \"n5o00CCWcmHFeI1p\",\n          \"name\": \"DataForSEO\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## AI Mode\",\n        \"height\": 272,\n        \"width\": 512,\n        \"color\": 6\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        288,\n        720\n      ],\n      \"id\": \"2cea3312-31f8-4ff0-b385-5b76b836274c\",\n      \"name\": \"Sticky Note11\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b822f458-ebf2-4a37-9906-b6a2606e6106\",\n              \"name\": \"keyword\",\n              \"value\": \"={{ $json.tasks[0].data.keyword }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"10484675-b107-4157-bc7e-b942d8cdb5d2\",\n              \"name\": \"result\",\n              \"value\": \"={{ $json.tasks[0].result[0].items }}\",\n              \"type\": \"array\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        592,\n        800\n      ],\n      \"id\": \"6b1e7239-ee2b-4457-8acb-17ce87415729\",\n      \"name\": \"Prepare AI Mode Output\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"# Google AI Mode API\\n\\nThis API provides AI-generated search result summaries and insights from Google.  \\nIt returns detailed explanations, overviews, and related information based on search queries, with parameters to customize the AI overview.  \\n\\nüëâ [Documentation](https://docs.dataforseo.com/v3/serp/google/ai_mode/overview/)\\n\",\n        \"height\": 272,\n        \"width\": 496,\n        \"color\": 6\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        800,\n        720\n      ],\n      \"id\": \"d761dc57-e35d-4052-a360-71170a155f7b\",\n      \"name\": \"Sticky Note18\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## Input\",\n        \"height\": 384,\n        \"width\": 544,\n        \"color\": 7\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -528,\n        672\n      ],\n      \"id\": \"db90385e-f921-4a9c-89f3-53fc5825b207\",\n      \"name\": \"Sticky Note\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b865f4a0-b4c3-4dde-bf18-3da933ab21af\",\n              \"name\": \"platform\",\n              \"value\": \"={{ $json.platform }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"476e07ca-ccf6-43d4-acb4-4cc905464314\",\n              \"name\": \"type\",\n              \"value\": \"={{ $json.type }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"f1a14eb8-9f10-4198-bbc7-17091532b38e\",\n              \"name\": \"keyword\",\n              \"value\": \"={{ $json.keyword }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"181791a0-1d88-481c-8d98-a86242bb2135\",\n              \"name\": \"results\",\n              \"value\": \"={{ $json.results[0].items }}\",\n              \"type\": \"array\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        800,\n        512\n      ],\n      \"id\": \"83fef061-5e0b-417c-b1f6-d34eb712fac6\",\n      \"name\": \"Sort Results\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## Internal Links\",\n        \"height\": 272,\n        \"width\": 272,\n        \"color\": 5\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        288,\n        1024\n      ],\n      \"id\": \"9246601a-f133-4ca3-aac8-989cb45e6cd2\",\n      \"name\": \"Sticky Note7\"\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://api.firecrawl.dev/v2/map\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"Bearer your-firecrawl-apikey\"\n            }\n          ]\n        },\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"={\\n    \\\"url\\\": \\\"https://{{ $json.url }}\\\",\\n    \\\"limit\\\": 400,\\n    \\\"includeSubdomains\\\": false,\\n    \\\"sitemap\\\": \\\"include\\\"\\n  }\",\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        368,\n        1104\n      ],\n      \"id\": \"fd6a33ae-6fb3-4331-ab6a-994048659116\",\n      \"name\": \"Get Internal Links\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"# Firecrawl Map API\\n\\nThis endpoint maps a website from a single URL and returns the list of discovered URLs (titles and descriptions when available) ‚Äî extremely fast and useful for selecting which pages to scrape or for quickly enumerating site links. ([Firecrawl][1])\\n\\nIt supports a `search` parameter to find relevant pages inside a site, `location`/`languages` options to emulate country/language (uses proxies when available), and SDK + cURL examples in the docs,\\n\\nüëâ [Documentation](https://docs.firecrawl.dev/features/map)\\n\\n[1]: https://docs.firecrawl.dev/features/map \\\"Map | Firecrawl\\\"\\n\",\n        \"height\": 272,\n        \"width\": 624,\n        \"color\": 5\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        560,\n        1024\n      ],\n      \"id\": \"08457204-93ff-4586-a76e-03907118be3c\",\n      \"name\": \"Sticky Note24\"\n    }\n  ],\n  \"pinData\": {\n    \"When Executed by Another Workflow\": [\n      {\n        \"json\": {\n          \"function\": \"serp_search\",\n          \"keyword\": \"villanyszerel≈ë Largo Florida\",\n          \"url\": null,\n          \"location_code\": 2840,\n          \"language_code\": \"hu\"\n        }\n      }\n    ]\n  },\n  \"connections\": {\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"SERP Google\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"AI Mode\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get Internal Links\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"SERP Google\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare SERP output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Mode\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare AI Mode Output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare SERP output\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Sort Results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Sort Results\": {\n      \"main\": [\n        []\n      ]\n    }\n  },\n  \"active\": false,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"6fce16d1-aa28-4939-9c2d-930d11c1e17f\",\n  \"meta\": {\n    \"instanceId\": \"1ee7b11b3a4bb285563e32fdddf3fbac26379ada529b942ee7cda230735046a1\"\n  },\n  \"id\": \"VjpOW2V2aNV9HpQJ\",\n  \"tags\": []\n}\n```",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Get Country & Language Code",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Submit Form",
      "type": "n8n-nodes-base.formTrigger",
      "role": "formTrigger",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "URL_search",
      "type": "n8n-nodes-base.httpRequestTool",
      "role": "httpRequestTool",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Session ID",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "insert_row_in_data_table",
      "type": "n8n-nodes-base.dataTableTool",
      "role": "dataTableTool",
      "configDescription": "Version 1"
    },
    {
      "name": "online_Search",
      "type": "n8n-nodes-base.perplexityTool",
      "role": "perplexityTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "serp_Search",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 2.2"
    },
    {
      "name": "ai_Mode",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Think_tool",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1.1"
    },
    {
      "name": "deep_research",
      "type": "n8n-nodes-base.perplexityTool",
      "role": "perplexityTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Business Analyst",
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "role": "googleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Session Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "get_internal_links",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note21",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Business Data",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Make Copy of Template",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Generate PDF",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Add PDF To Drive",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get All Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Generate Doc",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Add Doc to Drive",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Get Links",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send email",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note22",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Change Variables in Doc",
      "type": "n8n-nodes-base.googleDocs",
      "role": "googleDocs",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}