{
  "id": 4508,
  "slug": "4508",
  "title": "Multi-platform AI sales agent with RAG, CRM logging & appointment booking",
  "description": "## Multi-Platform AI Sales Agent with RAG, CRM Logging & Appointment Booking\n\nThis workflow acts as a 24/7 sales agent, engaging leads across **WhatsApp, Instagram, Facebook, Telegram, and your website**. It intelligently transcribes audio messages, answers questions using a knowledge base, and uses modular sub-workflows to manage your CRM in **Airtable** and book appointments in **Google Calendar**.\n\n---\n\n## Who Is It For?\n\nThis solution is designed for **service-based businesses** that require a sophisticated, multi-channel lead management and appointment booking system.\n* **Agencies, consultants, and clinics** looking to automate lead qualification and booking across text and voice messages.\n* **Sales teams** needing a robust system that separates CRM and calendar logic for easier management and scalability.\n* **Advanced n8n users** who want a powerful, agent-based framework that can be easily customized and extended.\n\n---\n\n## Key Features & Workflow\n\nThis system is composed of a parent workflow that orchestrates the conversation and calls specialized sub-workflows (agents) to perform specific tasks.\n\n* **Omni-Channel Engagement:** Greets and converses with leads naturally on **Website Chat, WhatsApp, Instagram, Facebook, and Telegram**.\n* **Voice Message Transcription:** Automatically transcribes incoming audio/voice notes from **WhatsApp and Telegram** into text, allowing the AI to understand and respond without manual intervention.\n* **RAG-Powered Intelligence:** The AI agent draws answers from your dedicated **PostgreSQL Knowledge Base (RAG)**, providing accurate information about your services, pricing, and process. A built-in tool allows you to load new knowledge documents from Google Drive.\n* **Modular CRM Agent (Sub-Workflow):** When the conversation requires CRM actions (like creating a contact or updating an opportunity), the main agent calls a dedicated **Airtable CRM sub-workflow** to handle the task.\n* **Modular Calendar Agent (Sub-Workflow):** To book appointments, the main agent calls a separate **Google Calendar sub-workflow**, which manages event creation, updates, and deletions.\n\n---\n\n## What You'll Need\n\nThis workflow framework requires credentials for the following services:\n* An AI provider (**OpenAI** is used for the main agent, transcription, and embeddings).\n* **PostgreSQL** database with the `pgvector` extension (for RAG and chat memory).\n* **Airtable** account (for the CRM sub-workflow).\n* **Google Calendar** account (for the Calendar sub-workflow).\n* **Telegram Bot** credentials.\n* A **Meta Developer Account** (for WhatsApp, Instagram & Facebook).\n* (Optional) **Google Drive** for loading knowledge documents.\n* (Optional) **Google Gemini** for embeddings.\n\n---\n\n## How to Set It Up\n\n**This is a modular system. You must set up the sub-workflows first.**\n\n1.  **Deploy Sub-Workflows:** Create **two new, separate workflows** using the provided templates for the **CRM Agent** and the **Calendar Agent**. Configure the credentials (Airtable, Google Calendar) within those workflows, then **save and activate them**.\n2.  **Link Sub-Workflows in Main Workflow:** Return to this main workflow. In the **\"CRM Agent\"** and **\"Consultation Agent\"** tool nodes, select the new workflows you just created from the dropdown list.\n3.  **Configure Main Credentials:** Securely add the remaining credentials (**OpenAI, PostgreSQL, Telegram,** and your **Meta App**) in this main workflow.\n4.  **Personalize the AI Agent:** In the **\"Update Agent Details\"** node, fill in your business name, the agent's persona name, and your key services to customize the AI's personality.\n5.  **Load Your Knowledge (Optional):** To populate the RAG database, use the manual trigger path starting with **\"When clicking ‘Execute workflow’\"** to download a document from Google Drive and insert it into your PostgreSQL vector store.\n6.  **Activate:** Configure your channel-specific details (e.g., Phone Number ID in WhatsApp nodes), save the workflow, and activate it.\n\n---\n**Demo CRM Table:** [View on Airtable](https://airtable.com/app7cw2dSfW9Y8Fg9/shrZ08N5Im3SDzTou/tbl3yCddn8oTpBIX3/viwm20KsStVhawr4s?blocks=bipG9pIosCb4tPbcG)\n",
  "featuredImage": "/data/workflows/4508/4508.webp",
  "author": {
    "id": 101,
    "slug": "v4nsh",
    "name": "Vansh Arora",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 4948,
  "downloads": 494,
  "createdAt": "2025-05-30T09:29:25.335Z",
  "updatedAt": "2026-01-16T08:34:45.053Z",
  "publishedAt": "2025-05-30T09:29:25.335Z",
  "nodes": 84,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4508",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Multi-platform AI sales agent with RAG, CRM logging & appointment booking",
    "workflowName": "Multi-platform AI sales agent with RAG, CRM logging & appointment booking",
    "description": "## Multi-Platform AI Sales Agent with RAG, CRM Logging & Appointment Booking\n\nThis workflow acts as a 24/7 sales agent, engaging leads across **WhatsApp, Instagram, Facebook, Telegram, and your website**. It intelligently transcribes audio messages, answers questions using a knowledge base, and uses modular sub-workflows to manage your CRM in **Airtable** and book appointments in **Google Calendar**.\n\n---\n\n## Who Is It For?\n\nThis solution is designed for **service-based businesses** that require a sophisticated, multi-channel lead management and appointment booking system.\n* **Agencies, consultants, and clinics** looking to automate lead qualification and booking across text and voice messages.\n* **Sales teams** needing a robust system that separates CRM and calendar logic for easier management and scalability.\n* **Advanced n8n users** who want a powerful, agent-based framework that can be easily customized and extended.\n\n---\n\n## Key Features & Workflow\n\nThis system is composed of a parent workflow that orchestrates the conversation and calls specialized sub-workflows (agents) to perform specific tasks.\n\n* **Omni-Channel Engagement:** Greets and converses with leads naturally on **Website Chat, WhatsApp, Instagram, Facebook, and Telegram**.\n* **Voice Message Transcription:** Automatically transcribes incoming audio/voice notes from **WhatsApp and Telegram** into text, allowing the AI to understand and respond without manual intervention.\n* **RAG-Powered Intelligence:** The AI agent draws answers from your dedicated **PostgreSQL Knowledge Base (RAG)**, providing accurate information about your services, pricing, and process. A built-in tool allows you to load new knowledge documents from Google Drive.\n* **Modular CRM Agent (Sub-Workflow):** When the conversation requires CRM actions (like creating a contact or updating an opportunity), the main agent calls a dedicated **Airtable CRM sub-workflow** to handle the task.\n* **Modular Calendar Agent (Sub-Workflow):** To book appointments, the main agent calls a separate **Google Calendar sub-workflow**, which manages event creation, updates, and deletions.\n\n---\n\n## What You'll Need\n\nThis workflow framework requires credentials for the following services:\n* An AI provider (**OpenAI** is used for the main agent, transcription, and embeddings).\n* **PostgreSQL** database with the `pgvector` extension (for RAG and chat memory).\n* **Airtable** account (for the CRM sub-workflow).\n* **Google Calendar** account (for the Calendar sub-workflow).\n* **Telegram Bot** credentials.\n* A **Meta Developer Account** (for WhatsApp, Instagram & Facebook).\n* (Optional) **Google Drive** for loading knowledge documents.\n* (Optional) **Google Gemini** for embeddings.\n\n---\n\n## How to Set It Up\n\n**This is a modular system. You must set up the sub-workflows first.**\n\n1.  **Deploy Sub-Workflows:** Create **two new, separate workflows** using the provided templates for the **CRM Agent** and the **Calendar Agent**. Configure the credentials (Airtable, Google Calendar) within those workflows, then **save and activate them**.\n2.  **Link Sub-Workflows in Main Workflow:** Return to this main workflow. In the **\"CRM Agent\"** and **\"Consultation Agent\"** tool nodes, select the new workflows you just created from the dropdown list.\n3.  **Configure Main Credentials:** Securely add the remaining credentials (**OpenAI, PostgreSQL, Telegram,** and your **Meta App**) in this main workflow.\n4.  **Personalize the AI Agent:** In the **\"Update Agent Details\"** node, fill in your business name, the agent's persona name, and your key services to customize the AI's personality.\n5.  **Load Your Knowledge (Optional):** To populate the RAG database, use the manual trigger path starting with **\"When clicking ‘Execute workflow’\"** to download a document from Google Drive and insert it into your PostgreSQL vector store.\n6.  **Activate:** Configure your channel-specific details (e.g., Phone Number ID in WhatsApp nodes), save the workflow, and activate it.\n\n---\n**Demo CRM Table:** [View on Airtable](https://airtable.com/app7cw2dSfW9Y8Fg9/shrZ08N5Im3SDzTou/tbl3yCddn8oTpBIX3/viwm20KsStVhawr4s?blocks=bipG9pIosCb4tPbcG)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "No Operation, do nothing",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Consultation Agent",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 2"
    },
    {
      "name": "CRM Agent",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 2"
    },
    {
      "name": "Vector Database",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "role": "vectorStorePGVector",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Company Database",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "role": "toolVectorStore",
      "configDescription": "Version 1"
    },
    {
      "name": "Sales Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Reply To User1",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Set Message",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Message1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Facebook Trigger",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Respond to Webhook - facebook post",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Respond to Webhook - facebook get",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Instagram Trigger",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Respond to Webhook - instagram get",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Respond to Webhook - instagram post",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Switch1",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Send message (instagram)",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Send message (embedded)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send message (telegram)",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send message (facebook)",
      "type": "n8n-nodes-base.facebookGraphApi",
      "role": "facebookGraphApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Send message (Whatsapp)",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "role": "whatsAppTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Lead Info",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Route Messages",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Route Message",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Get Audio",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Download Audio",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Transcribe",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Set Message2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Message3",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Message4",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Message5",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Message6",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "If not echo",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "If not echo1",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Facebook Typing Effect",
      "type": "n8n-nodes-base.facebookGraphApi",
      "role": "facebookGraphApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Audio1",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Transcribe1",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Reply to user",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Update Agent Details",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Download file",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "PGVector",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "role": "vectorStorePGVector",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Gemini",
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "role": "embeddingsGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Response",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Try Again",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "get_schema",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "CRM Assistant",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "list_records",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Window Buffer Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "create_opportunity",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "update_opportunity",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "create_contact",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "update_contact",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Success",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Calendar Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.6"
    },
    {
      "name": "Create Event with Attendee",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Get Events",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Delete Event",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Update Event",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Try Again1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenAI Chat Model3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}