{
  "id": 4136,
  "slug": "4136",
  "title": "WhatsApp expense tracker with PostgreSQL database & AI-powered reports",
  "description": "# Track Personal Finances with WhatsApp and AI Assistant\n\nTransform your WhatsApp into a powerful personal finance command center. This AI-powered workflow converts natural language messages into structured financial data, automates record-keeping, and delivers instant insightsâ€”all within your favorite messaging app.\n\n## Who is this for?\n\nThis template is perfect for:\n- **Personal finance enthusiasts** who want effortless expense tracking\n- **Small business owners** managing personal and business expenses  \n- **Freelancers** tracking income and expenses across projects\n- **Anyone** who prefers messaging over complex finance apps\n- **Users seeking privacy** with self-hosted financial data\n\n## What problem is this workflow solving?\n\nTraditional expense tracking requires switching between apps, manual data entry, and complex spreadsheets. Most people abandon these systems within weeks. This workflow solves the friction by:\n- Eliminating app-switchingâ€”everything happens in WhatsApp\n- Converting natural language to structured data automatically\n- Providing instant confirmations and reports\n- Requiring zero learning curve or behavior change\n\n## What this workflow does\n\n### Smart Transaction Processing\nSend natural messages like `Spent 300 on groceries at Walmart` and the AI automatically extracts:\n- **Date**: Today's date (or specified date)\n- **Category**: Groceries  \n- **Type**: Expense/Income/Debt\n- **Amount**: 300\n- **Person/Company**: Walmart\n\n### Intelligent Message Classification\nThe workflow automatically routes messages to three processing branches:\n- **Branch 1**: Reports and analytics (`show March expenses`)\n- **Branch 2**: Transaction logging (`spent 50 on coffee`)  \n- **Branch 3**: General financial chat (`how can I save money?`)\n\n### Advanced Reporting\nGenerate instant reports by messaging:\n- `today's report` â†’ Daily income/expense summary\n- `March vs April report` â†’ Monthly comparisons with percentages\n- `show groceries spending` â†’ Category-specific analysis\n- Automatic daily summaries at your preferred time\n\n### Database Integration\nAll transactions are stored in PostgreSQL with proper schema:\n```sql\nCREATE TABLE financial_transactions (\n date DATE NOT NULL,\n category TEXT NOT NULL, \n type TEXT NOT NULL,\n amount NUMERIC(12,2) NOT NULL,\n person TEXT\n);\n```\n\n## Setup\n\n## Prerequisites\n\n- **n8n instance** (self-hosted or n8n.cloud)\n- **WhatsApp Business Cloud API** credentials\n- **PostgreSQL database** (version 12+)\n- **OpenRouter API key** for AI processing\n\n## Quick Setup Steps\n\n1. **Import the workflow** template into your n8n instance\n2. **Configure credentials**:\n  - WhatsApp Business Cloud API (App Token + Phone Number ID)\n  - PostgreSQL connection details\n  - OpenRouter API key for AI processing\n3. **Create database table** using the provided SQL schema\n4. **Test the connection** by sending a sample message\n5. **Customize** the scheduled report timing (default: 8 AM daily)\n\n## Verification Checklist\n\n- [ ] WhatsApp webhook receives messages\n- [ ] AI correctly parses transaction messages\n- [ ] Database insertions work properly\n- [ ] Confirmation messages are sent back\n- [ ] Reports generate with accurate data\n\n# How to customize this workflow to your needs\n\n## AI Model Configuration\n\n- **Default**: Uses OpenRouter with GPT-3.5-turbo for cost efficiency\n- **Upgrade**: Switch to GPT-4 or Claude for better accuracy\n- **Local**: Replace with self-hosted Ollama for complete privacy\n\n## Database Options\n\n- **PostgreSQL**: Recommended for production use\n- **Google Sheets**: Alternative for simpler setups (nodes included)\n- **MySQL/SQLite**: Easily adaptable with minor SQL modifications\n\n## Message Classification\n\nCustomize the classification system:\n- **0**: Reports (modify SQL queries for different analytics)\n- **1**: Transactions (adjust parsing rules for your language/currency)\n- **2**: Chat (customize AI responses for financial advice)\n\n## Reporting Customization\n\n- **Scheduled reports**: Change timing, format, and recipients\n- **Custom periods**: Add quarterly, yearly, or custom date ranges\n- **Categories**: Modify auto-categorization rules for your spending patterns\n- **Currency**: Update formatting for your local currency\n\n## Advanced Features\n\n- **Multi-user support**: Add user identification for family/team use\n- **Receipt photos**: Extend workflow to process image receipts via OCR\n- **Budgets**: Add budget tracking and overspend alerts\n- **Integrations**: Connect to banks via Plaid or other financial APIs\n\n# Complete Package Included\n\nWhen you download this template, you get everything needed for immediate implementation:\n\n## Ready-to-Use n8n Workflow\n\n- **Fully configured nodes** with descriptive names explaining each step\n- **Color-coded sticky notes** throughout the workflow explaining:\n - What each branch does (Reports/Transactions/Chat)\n - How the AI classification works\n - Database connection requirements\n - Error handling and troubleshooting tips\n\n## Comprehensive Documentation Bundle\n\n- **Quick Start Guide**: Get running in under 10 minutes\n- **Detailed Setup Guide**: Complete configuration walkthrough with screenshots\n- **Branch Explanation Guide**: Deep dive into each processing branch:\n - **Branch 0**: Reports & Analytics - SQL queries and formatting\n - **Branch 1**: Transaction Processing - AI parsing and database insertion\n - **Branch 2**: Financial Chat - AI responses and conversation handling\n\n## Built-in Workflow Documentation\n\n- **Sticky notes at every major step** explaining the logic\n- **Node descriptions** that clarify what each component does\n- **Visual flow indicators** showing message routing paths\n- **Dependency callouts** highlighting required credentials and connections\n\n## Technical Implementation Details\n\n- **Database schema** with complete SQL commands\n- **API configuration examples** for all external services\n- **Troubleshooting checklist** for common setup issues\n- **Performance optimization** recommendations\n\n## Bonus Resources\n\n- **Example message templates** to test each workflow branch\n- **Sample data** for testing reports and analytics\n- **Customization recipes** for common modifications\n- **Integration patterns** for extending functionality\n\n# Example Usage\n\n## Log Expenses:\n\n- `Spent 1200 on rent this month`\n- `Paid 45 for gas at Shell`\n- `Coffee 5.50 at Starbucks`\n\n## Log Income:\n\n- `Received 5000 salary from Company ABC`\n- `Freelance payment 800 from Client XYZ`\n\n## Generate Reports:\n\n- `today's summary`\n- `show this week's expenses`\n- `compare March vs April spending`\n- `how much on food this month?`\n\n## Expected Responses:\nâœ… Logged: expense | Rent | â‚¹1,200.00 | Landlord\nâœ… Logged: income | salary |â‚¹12,000.00|company\n\nðŸ“Š Today's Summary:\nIncome: â‚¹0.00\nExpenses: â‚¹1,245.50  \nSavings: -â‚¹1,245.50\n\nðŸ“ˆ March vs April:\nExpenses: â‚¹15,000 vs â‚¹12,500 (-16.7%)\nTop categories: Rent, Food, Transport",
  "featuredImage": "/data/workflows/4136/4136.webp",
  "author": {
    "id": 101,
    "slug": "rawsun007",
    "name": "Roshan Ramani",
    "avatar": ""
  },
  "categories": [
    "Personal Productivity",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 2853,
  "downloads": 285,
  "createdAt": "2025-05-17T05:57:32.971Z",
  "updatedAt": "2026-01-16T08:33:08.454Z",
  "publishedAt": "2025-05-17T05:57:32.971Z",
  "nodes": 50,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4136",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "WhatsApp expense tracker with PostgreSQL database & AI-powered reports",
    "workflowName": "WhatsApp expense tracker with PostgreSQL database & AI-powered reports",
    "description": "# Track Personal Finances with WhatsApp and AI Assistant\n\nTransform your WhatsApp into a powerful personal finance command center. This AI-powered workflow converts natural language messages into structured financial data, automates record-keeping, and delivers instant insightsâ€”all within your favorite messaging app.\n\n## Who is this for?\n\nThis template is perfect for:\n- **Personal finance enthusiasts** who want effortless expense tracking\n- **Small business owners** managing personal and business expenses  \n- **Freelancers** tracking income and expenses across projects\n- **Anyone** who prefers messaging over complex finance apps\n- **Users seeking privacy** with self-hosted financial data\n\n## What problem is this workflow solving?\n\nTraditional expense tracking requires switching between apps, manual data entry, and complex spreadsheets. Most people abandon these systems within weeks. This workflow solves the friction by:\n- Eliminating app-switchingâ€”everything happens in WhatsApp\n- Converting natural language to structured data automatically\n- Providing instant confirmations and reports\n- Requiring zero learning curve or behavior change\n\n## What this workflow does\n\n### Smart Transaction Processing\nSend natural messages like `Spent 300 on groceries at Walmart` and the AI automatically extracts:\n- **Date**: Today's date (or specified date)\n- **Category**: Groceries  \n- **Type**: Expense/Income/Debt\n- **Amount**: 300\n- **Person/Company**: Walmart\n\n### Intelligent Message Classification\nThe workflow automatically routes messages to three processing branches:\n- **Branch 1**: Reports and analytics (`show March expenses`)\n- **Branch 2**: Transaction logging (`spent 50 on coffee`)  \n- **Branch 3**: General financial chat (`how can I save money?`)\n\n### Advanced Reporting\nGenerate instant reports by messaging:\n- `today's report` â†’ Daily income/expense summary\n- `March vs April report` â†’ Monthly comparisons with percentages\n- `show groceries spending` â†’ Category-specific analysis\n- Automatic daily summaries at your preferred time\n\n### Database Integration\nAll transactions are stored in PostgreSQL with proper schema:\n```sql\nCREATE TABLE financial_transactions (\n date DATE NOT NULL,\n category TEXT NOT NULL, \n type TEXT NOT NULL,\n amount NUMERIC(12,2) NOT NULL,\n person TEXT\n);\n```\n\n## Setup\n\n## Prerequisites\n\n- **n8n instance** (self-hosted or n8n.cloud)\n- **WhatsApp Business Cloud API** credentials\n- **PostgreSQL database** (version 12+)\n- **OpenRouter API key** for AI processing\n\n## Quick Setup Steps\n\n1. **Import the workflow** template into your n8n instance\n2. **Configure credentials**:\n  - WhatsApp Business Cloud API (App Token + Phone Number ID)\n  - PostgreSQL connection details\n  - OpenRouter API key for AI processing\n3. **Create database table** using the provided SQL schema\n4. **Test the connection** by sending a sample message\n5. **Customize** the scheduled report timing (default: 8 AM daily)\n\n## Verification Checklist\n\n- [ ] WhatsApp webhook receives messages\n- [ ] AI correctly parses transaction messages\n- [ ] Database insertions work properly\n- [ ] Confirmation messages are sent back\n- [ ] Reports generate with accurate data\n\n# How to customize this workflow to your needs\n\n## AI Model Configuration\n\n- **Default**: Uses OpenRouter with GPT-3.5-turbo for cost efficiency\n- **Upgrade**: Switch to GPT-4 or Claude for better accuracy\n- **Local**: Replace with self-hosted Ollama for complete privacy\n\n## Database Options\n\n- **PostgreSQL**: Recommended for production use\n- **Google Sheets**: Alternative for simpler setups (nodes included)\n- **MySQL/SQLite**: Easily adaptable with minor SQL modifications\n\n## Message Classification\n\nCustomize the classification system:\n- **0**: Reports (modify SQL queries for different analytics)\n- **1**: Transactions (adjust parsing rules for your language/currency)\n- **2**: Chat (customize AI responses for financial advice)\n\n## Reporting Customization\n\n- **Scheduled reports**: Change timing, format, and recipients\n- **Custom periods**: Add quarterly, yearly, or custom date ranges\n- **Categories**: Modify auto-categorization rules for your spending patterns\n- **Currency**: Update formatting for your local currency\n\n## Advanced Features\n\n- **Multi-user support**: Add user identification for family/team use\n- **Receipt photos**: Extend workflow to process image receipts via OCR\n- **Budgets**: Add budget tracking and overspend alerts\n- **Integrations**: Connect to banks via Plaid or other financial APIs\n\n# Complete Package Included\n\nWhen you download this template, you get everything needed for immediate implementation:\n\n## Ready-to-Use n8n Workflow\n\n- **Fully configured nodes** with descriptive names explaining each step\n- **Color-coded sticky notes** throughout the workflow explaining:\n - What each branch does (Reports/Transactions/Chat)\n - How the AI classification works\n - Database connection requirements\n - Error handling and troubleshooting tips\n\n## Comprehensive Documentation Bundle\n\n- **Quick Start Guide**: Get running in under 10 minutes\n- **Detailed Setup Guide**: Complete configuration walkthrough with screenshots\n- **Branch Explanation Guide**: Deep dive into each processing branch:\n - **Branch 0**: Reports & Analytics - SQL queries and formatting\n - **Branch 1**: Transaction Processing - AI parsing and database insertion\n - **Branch 2**: Financial Chat - AI responses and conversation handling\n\n## Built-in Workflow Documentation\n\n- **Sticky notes at every major step** explaining the logic\n- **Node descriptions** that clarify what each component does\n- **Visual flow indicators** showing message routing paths\n- **Dependency callouts** highlighting required credentials and connections\n\n## Technical Implementation Details\n\n- **Database schema** with complete SQL commands\n- **API configuration examples** for all external services\n- **Troubleshooting checklist** for common setup issues\n- **Performance optimization** recommendations\n\n## Bonus Resources\n\n- **Example message templates** to test each workflow branch\n- **Sample data** for testing reports and analytics\n- **Customization recipes** for common modifications\n- **Integration patterns** for extending functionality\n\n# Example Usage\n\n## Log Expenses:\n\n- `Spent 1200 on rent this month`\n- `Paid 45 for gas at Shell`\n- `Coffee 5.50 at Starbucks`\n\n## Log Income:\n\n- `Received 5000 salary from Company ABC`\n- `Freelance payment 800 from Client XYZ`\n\n## Generate Reports:\n\n- `today's summary`\n- `show this week's expenses`\n- `compare March vs April spending`\n- `how much on food this month?`\n\n## Expected Responses:\nâœ… Logged: expense | Rent | â‚¹1,200.00 | Landlord\nâœ… Logged: income | salary |â‚¹12,000.00|company\n\nðŸ“Š Today's Summary:\nIncome: â‚¹0.00\nExpenses: â‚¹1,245.50  \nSavings: -â‚¹1,245.50\n\nðŸ“ˆ March vs April:\nExpenses: â‚¹15,000 vs â‚¹12,500 (-16.7%)\nTop categories: Rent, Food, Transport",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Date and time",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "role": "toolCode",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenRouter Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Calculator",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "role": "toolCalculator",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenRouter Chat Model3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenRouter Chat Model4",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Postgres2",
      "type": "n8n-nodes-base.postgresTool",
      "role": "postgresTool",
      "configDescription": "Version 2.6"
    },
    {
      "name": "OpenRouter Chat Model5",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Calculator1",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "role": "toolCalculator",
      "configDescription": "Version 1"
    },
    {
      "name": "Structured Output Parser2",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenRouter Chat Model6",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert to File",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Send Financial Response",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Normal Conversation ",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Incoming WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "role": "whatsAppTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Message Intent Classifier",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Route by Intent",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Parse & Validate Transaction",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Split Transaction Lines",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Format Transaction JSON",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Validate Transaction Fields",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Insert Transaction into DB",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Build Confirmation Message",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Daily 8AM Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Build Daily Report Query",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Execute Daily Report Query",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Build Daily Financial Summary",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Send Daily Report",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Build Custom Report Query",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Transform Custom Query for Postgres",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Format Custom Query Results",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Execute Custom Report Query",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Build Custom Financial Summary",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Send Custom Report",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "simple conversation ",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.9"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Transform Custom Query for Postgres1",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Date and time1",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "role": "toolCode",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Date and time2",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "role": "toolCode",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Date and time3",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "role": "toolCode",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Date and time4",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "role": "toolCode",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Date and time5",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "role": "toolCode",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenRouter Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenRouter Chat Model7",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenRouter Chat Model8",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}