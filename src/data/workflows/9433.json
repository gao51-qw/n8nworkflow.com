{
  "id": 9433,
  "slug": "9433",
  "title": "Enrich and score leads automatically with Claude AI, PDL and Perplexity",
  "description": "## ⚠️ Community Node Disclaimer\nThis template uses the Apify LinkedIn Profile Scraper, which is a community node only available in self-hosted n8n installations. The LinkedIn scraping step is optional and can be removed for n8n Cloud compatibility.\n\n## Who's it for\nSales and marketing teams processing 20+ leads daily who need to eliminate manual research and focus reps on hot prospects. Perfect for B2B companies wanting to qualify inbound leads at scale using AI-powered enrichment and scoring.\n\n## What it does\nThis workflow automates lead qualification by enriching email addresses with firmographic data from People Data Labs, researching individuals and companies using Perplexity AI, scoring leads against your ICP criteria with Claude, and routing them to appropriate channels. Hot leads (8-10 score) get instant Slack alerts with personalized email drafts. Warm leads (5-7) go to a digest channel. Cold leads (0-4) log to your CRM only. Processing takes 30-60 seconds per lead versus 20 minutes manual research, costing $0.08-0.15 per lead.\n\n## How it works\nThe webhook receives an email address and optional name. Multiple enrichment sources run in parallel: PDL fetches contact and firmographic data, Perplexity researches the individual's recent activity and company developments, and optionally Apify scrapes their LinkedIn profile. All data merges into a complete profile. Claude AI scores the lead against your ICP rules stored in Google Docs, calculating points for company fit, title fit, buying signals, and timing. Based on the total score, leads route to three tiers with different handling. Hot leads trigger immediate Slack alerts and generate personalized email drafts using Gemini. All qualified leads optionally sync to your CRM.\n\n## Requirements\n- People Data Labs API (or Apollo/Clearbit alternative)\n- Perplexity API  \n- Anthropic Claude API\n- Google Docs for ICP rules\n- Slack workspace\n- Gmail account\n- Optional: Apify for LinkedIn scraping (self-hosted only)\n- Optional: HubSpot or other CRM\n\n## Set up steps\n\n### 1. Configure the webhook\nIn the Webhook node, set your webhook path (default is \"lead-intake\"). Send POST requests with this JSON format:\n```json\n{\n  \"email\": \"lead@company.com\",\n  \"name\": \"Optional Name\"\n}\n```\n\n### 2. Add API credentials securely\n\n**People Data Labs:** In the PDL Enrich node, click \"Credential for Header Auth\" → Create new credential → Add header name `X-Api-Key` with your PDL API key as the value. This uses n8n's credential management instead of hardcoding keys.\n\n**Perplexity:** In both Individual Research and Company Research nodes, add your Perplexity API credentials.\n\n**Anthropic:** In the Anthropic Chat Model node, add your Claude API credentials.\n\n**Slack:** In both Slack nodes, set up OAuth2 and select your target channels. Hot and warm leads can route to different channels.\n\n**Gmail:** In the Send Hot Lead Email node, configure OAuth2 credentials.\n\n**Google Docs:** In the ICP & Use Case node, replace the documentURL with your Google Doc containing ICP scoring rules, then add OAuth2 credentials.\n\n**Optional - Apify:** In LinkedIn Profile Scraper node, add your Apify OAuth2 credentials from https://apify.com/curious_coder/linkedin-profile-scraper\n\n**Optional - HubSpot:** Enable the Upsert to HubSpot CRM node and add your credentials. Customize the customPropertiesValues array to match your fields.\n\n### 3. Create your ICP rules document\nCreate a Google Doc with this structure:\n```\nCOMPANY FIT (0-3 points):\n- Company size: 50-500 employees = 3 points\n- Industry: SaaS/Technology = 3 points\n- Geography: North America = 3 points\n\nTITLE FIT (0-3 points):\n- VP/C-level = 3 points\n- Director = 2 points\n- Manager = 1 point\n\nBUYING SIGNALS (0-2 points):\n- Recent funding = 2 points\n- New executive = 1 point\n\nTIMING (0-2 points):\n- Urgent need = 2 points\n```\n\nCopy the URL and paste it in the ICP & Use Case node's documentURL parameter.\n\n### 4. Test the workflow\nActivate the workflow and send a test webhook. Monitor the execution to verify enrichment sources return data, AI scoring completes, routing works correctly, and notifications send to the right channels.\n\n## How to customize\n\n**Swap enrichment sources:** Replace the PDL Enrich node with Apollo or Clearbit HTTP Request nodes. Update the Merge Enrichment Data node to parse the new response format.\n\n**Adjust scoring thresholds:** In the AI Agent node prompt, change the score ranges (currently 8-10 = hot, 5-7 = warm, 0-4 = cold) and add custom scoring factors like technology stack match or budget authority.\n\n**Change routing:** In the Route by Score node, add new output conditions for additional tiers like VIP or modify existing thresholds.\n\n**Different notifications:** Replace Slack nodes with Gmail or add Twilio nodes for SMS. Update the formatting nodes to create appropriate message templates.\n\n**Use different AI models:** Swap the Anthropic Chat Model with OpenAI for GPT-4 or replace the Gemini formatting nodes with Claude for consistency.\n\n**Remove LinkedIn scraping:** Delete the LinkedIn Profile Scraper node and adjust Merge All Sources to accept 4 inputs instead of 5 for n8n Cloud compatibility.\n\n**Connect different CRMs:** Replace the HubSpot node with Salesforce, Pipedrive, or other CRM nodes. Update the Format for CRM node's field mappings to match your CRM's structure.![aiosdhioahiosda.PNG](fileId:2965)",
  "featuredImage": "/data/workflows/9433/9433.webp",
  "author": {
    "id": 101,
    "slug": "connorprovines",
    "name": "Connor Provines",
    "avatar": ""
  },
  "categories": [
    "Lead Generation",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 203,
  "downloads": 20,
  "createdAt": "2025-10-09T18:36:21.995Z",
  "updatedAt": "2026-01-16T09:00:30.431Z",
  "publishedAt": "2025-10-09T18:36:21.995Z",
  "nodes": 28,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9433",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Enrich and score leads automatically with Claude AI, PDL and Perplexity",
    "workflowName": "Enrich and score leads automatically with Claude AI, PDL and Perplexity",
    "description": "## ⚠️ Community Node Disclaimer\nThis template uses the Apify LinkedIn Profile Scraper, which is a community node only available in self-hosted n8n installations. The LinkedIn scraping step is optional and can be removed for n8n Cloud compatibility.\n\n## Who's it for\nSales and marketing teams processing 20+ leads daily who need to eliminate manual research and focus reps on hot prospects. Perfect for B2B companies wanting to qualify inbound leads at scale using AI-powered enrichment and scoring.\n\n## What it does\nThis workflow automates lead qualification by enriching email addresses with firmographic data from People Data Labs, researching individuals and companies using Perplexity AI, scoring leads against your ICP criteria with Claude, and routing them to appropriate channels. Hot leads (8-10 score) get instant Slack alerts with personalized email drafts. Warm leads (5-7) go to a digest channel. Cold leads (0-4) log to your CRM only. Processing takes 30-60 seconds per lead versus 20 minutes manual research, costing $0.08-0.15 per lead.\n\n## How it works\nThe webhook receives an email address and optional name. Multiple enrichment sources run in parallel: PDL fetches contact and firmographic data, Perplexity researches the individual's recent activity and company developments, and optionally Apify scrapes their LinkedIn profile. All data merges into a complete profile. Claude AI scores the lead against your ICP rules stored in Google Docs, calculating points for company fit, title fit, buying signals, and timing. Based on the total score, leads route to three tiers with different handling. Hot leads trigger immediate Slack alerts and generate personalized email drafts using Gemini. All qualified leads optionally sync to your CRM.\n\n## Requirements\n- People Data Labs API (or Apollo/Clearbit alternative)\n- Perplexity API  \n- Anthropic Claude API\n- Google Docs for ICP rules\n- Slack workspace\n- Gmail account\n- Optional: Apify for LinkedIn scraping (self-hosted only)\n- Optional: HubSpot or other CRM\n\n## Set up steps\n\n### 1. Configure the webhook\nIn the Webhook node, set your webhook path (default is \"lead-intake\"). Send POST requests with this JSON format:\n```json\n{\n  \"email\": \"lead@company.com\",\n  \"name\": \"Optional Name\"\n}\n```\n\n### 2. Add API credentials securely\n\n**People Data Labs:** In the PDL Enrich node, click \"Credential for Header Auth\" → Create new credential → Add header name `X-Api-Key` with your PDL API key as the value. This uses n8n's credential management instead of hardcoding keys.\n\n**Perplexity:** In both Individual Research and Company Research nodes, add your Perplexity API credentials.\n\n**Anthropic:** In the Anthropic Chat Model node, add your Claude API credentials.\n\n**Slack:** In both Slack nodes, set up OAuth2 and select your target channels. Hot and warm leads can route to different channels.\n\n**Gmail:** In the Send Hot Lead Email node, configure OAuth2 credentials.\n\n**Google Docs:** In the ICP & Use Case node, replace the documentURL with your Google Doc containing ICP scoring rules, then add OAuth2 credentials.\n\n**Optional - Apify:** In LinkedIn Profile Scraper node, add your Apify OAuth2 credentials from https://apify.com/curious_coder/linkedin-profile-scraper\n\n**Optional - HubSpot:** Enable the Upsert to HubSpot CRM node and add your credentials. Customize the customPropertiesValues array to match your fields.\n\n### 3. Create your ICP rules document\nCreate a Google Doc with this structure:\n```\nCOMPANY FIT (0-3 points):\n- Company size: 50-500 employees = 3 points\n- Industry: SaaS/Technology = 3 points\n- Geography: North America = 3 points\n\nTITLE FIT (0-3 points):\n- VP/C-level = 3 points\n- Director = 2 points\n- Manager = 1 point\n\nBUYING SIGNALS (0-2 points):\n- Recent funding = 2 points\n- New executive = 1 point\n\nTIMING (0-2 points):\n- Urgent need = 2 points\n```\n\nCopy the URL and paste it in the ICP & Use Case node's documentURL parameter.\n\n### 4. Test the workflow\nActivate the workflow and send a test webhook. Monitor the execution to verify enrichment sources return data, AI scoring completes, routing works correctly, and notifications send to the right channels.\n\n## How to customize\n\n**Swap enrichment sources:** Replace the PDL Enrich node with Apollo or Clearbit HTTP Request nodes. Update the Merge Enrichment Data node to parse the new response format.\n\n**Adjust scoring thresholds:** In the AI Agent node prompt, change the score ranges (currently 8-10 = hot, 5-7 = warm, 0-4 = cold) and add custom scoring factors like technology stack match or budget authority.\n\n**Change routing:** In the Route by Score node, add new output conditions for additional tiers like VIP or modify existing thresholds.\n\n**Different notifications:** Replace Slack nodes with Gmail or add Twilio nodes for SMS. Update the formatting nodes to create appropriate message templates.\n\n**Use different AI models:** Swap the Anthropic Chat Model with OpenAI for GPT-4 or replace the Gemini formatting nodes with Claude for consistency.\n\n**Remove LinkedIn scraping:** Delete the LinkedIn Profile Scraper node and adjust Merge All Sources to accept 4 inputs instead of 5 for n8n Cloud compatibility.\n\n**Connect different CRMs:** Replace the HubSpot node with Salesforce, Pipedrive, or other CRM nodes. Update the Format for CRM node's field mappings to match your CRM's structure.![aiosdhioahiosda.PNG](fileId:2965)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Validate & Parse Input",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "PDL Enrich",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Individual Research",
      "type": "n8n-nodes-base.perplexity",
      "role": "perplexity",
      "configDescription": "Version 1"
    },
    {
      "name": "Company Research",
      "type": "n8n-nodes-base.perplexity",
      "role": "perplexity",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge Enrichment Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Merge All Sources",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Parse & Structure Output",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Route by Score",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Send Hot Lead Slack Alert",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Parse Email JSON",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Hot Lead Email",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Send Warm Lead to Digest",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Format for CRM",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Upsert to HubSpot CRM",
      "type": "n8n-nodes-base.hubspot",
      "role": "hubspot",
      "configDescription": "Version 2"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Anthropic Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "role": "lmChatAnthropic",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Format Hot Lead Slack",
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "role": "googleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Format Hot Lead Email",
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "role": "googleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Format Warm Lead Slack",
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "role": "googleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "LinkedIn Profile Scraper",
      "type": "@apify/n8n-nodes-apify.apify",
      "role": "apify",
      "configDescription": "Version 1"
    },
    {
      "name": "ICP & Use Case",
      "type": "n8n-nodes-base.googleDocsTool",
      "role": "googleDocsTool",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "AI Reasoning",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1.1"
    }
  ]
}