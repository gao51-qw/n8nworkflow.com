{
  "id": 6221,
  "slug": "6221",
  "title": "Manage Stripe data using natural language with Kimi K2 via OpenRouter",
  "description": "Elevate your Stripe workflows with an AI agent that intelligently, securely, and interactively handles essential Stripe data operations. Leveraging the Kimi K2 model via OpenRouter, this n8n template enables safe data retrieval. From fetching summarized financial insights to managing customer discounts, while strictly enforcing privacy, concise outputs, and operational boundaries.\n\n---\n\n## üßæ Requirements\n\n**Stripe:**\n- Active Stripe account\n- API key with read and write access.\n\n**n8n:**\n- Deployed n8n instance (cloud or self-hosted)\n\n**OpenRouter:**\n- Active OpenRouter account with credit\n- API key from OpenRouter\n\n---\n\n## üîó Useful Links\n\n- [Stripe](https://stripe.com)\n- [n8n Stripe Credentials Setup](https://docs.n8n.io/integrations/builtin/credentials/stripe/)\n- [OpenRouter](https://openrouter.ai/)\n\n---\n\n## üö¶ Workflow Breakdown\n\n1. **Trigger: User Request**\n   - Workflow initiates when an authenticated user sends a message in the chat trigger.\n\n2. **AI Agent (Kimi K2 OpenRouter): Intent Analysis**\n   - Determines whether the user wants to:\n     - List customers, charges, or coupons\n     - Retrieve the account‚Äôs balance\n     - Create a new coupon in Stripe\n   - Filters unsupported or unclear requests, explaining permissions or terminology as needed.\n\n3. **Stripe Data Retrieval**\n   - For data queries:\n     - Only returns summarized, masked lists (e.g., last 10 transactions/customers)\n     - Sensitive details, such as card numbers, are automatically masked or truncated\n     - Never exposes or logs confidential information\n\n4. **Coupon Creation**\n   - When a coupon creation is requested:\n     - AI agent collects coupon parameters (discount, expiration, restrictions)\n     - Clearly summarizes the action and **requires explicit user confirmation** before proceeding\n     - Creates the coupon upon confirmation and replies with only the public-safe coupon details\n\n---\n\n## üõ°Ô∏è Privacy & Security\n\n- **No data storage:** All responses are ephemeral; sensitive Stripe data is never retained.\n- **Strict minimization:** Outputs are tightly scoped; only partial identifiers are shown and only when necessary.\n- **Retention rules enforced:** No logs, exports, or secondary storage of Stripe data.\n- **Confirmation required:** Actions modifying Stripe (like coupon creation) always require the user to approve before execution.\n- **Compliance-ready:** Aligned with Stripe and general data protection standards.\n\n---\n\n## ‚è±Ô∏è Setup Steps\n\n- Setup time: 10‚Äì15 minutes\n- Add Stripe API credentials in n8n\n- Add the OpenRouter API credentials in n8n and select your desired AI model to run the agent. In our template we selected Kimi K2 from Moonshot AI.\n\n---\n\n## ‚úÖ Summary\n\nThis workflow template connects a privacy-prioritized AI agent (Kimi K2 via OpenRouter) with your Stripe account to enable:\n- Fast, summarized access to customer, transaction, coupon, and balance data\n- Secure, confirmed creation of discounts/coupons\n- Complete adherence to authorization, privacy, and operational best practices\n\n---\n\n## üôã‚Äç‚ôÇÔ∏è Need Help?\n\nFeel free to contact us at [1 Node](https://1node.ai)\nGet instant access to a library of [free resources](https://1node.ai/resources) we created.\n",
  "featuredImage": "/data/workflows/6221/6221.webp",
  "author": {
    "id": 101,
    "slug": "aitoralonso",
    "name": "Aitor | 1Node",
    "avatar": ""
  },
  "categories": [
    "CRM",
    "AI Chatbot"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 380,
  "downloads": 38,
  "createdAt": "2025-07-21T10:25:09.277Z",
  "updatedAt": "2026-01-16T08:43:53.180Z",
  "publishedAt": "2025-07-21T10:25:09.277Z",
  "nodes": 12,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6221",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Manage Stripe data using natural language with Kimi K2 via OpenRouter",
    "workflowName": "Manage Stripe data using natural language with Kimi K2 via OpenRouter",
    "description": "Elevate your Stripe workflows with an AI agent that intelligently, securely, and interactively handles essential Stripe data operations. Leveraging the Kimi K2 model via OpenRouter, this n8n template enables safe data retrieval. From fetching summarized financial insights to managing customer discounts, while strictly enforcing privacy, concise outputs, and operational boundaries.\n\n---\n\n## üßæ Requirements\n\n**Stripe:**\n- Active Stripe account\n- API key with read and write access.\n\n**n8n:**\n- Deployed n8n instance (cloud or self-hosted)\n\n**OpenRouter:**\n- Active OpenRouter account with credit\n- API key from OpenRouter\n\n---\n\n## üîó Useful Links\n\n- [Stripe](https://stripe.com)\n- [n8n Stripe Credentials Setup](https://docs.n8n.io/integrations/builtin/credentials/stripe/)\n- [OpenRouter](https://openrouter.ai/)\n\n---\n\n## üö¶ Workflow Breakdown\n\n1. **Trigger: User Request**\n   - Workflow initiates when an authenticated user sends a message in the chat trigger.\n\n2. **AI Agent (Kimi K2 OpenRouter): Intent Analysis**\n   - Determines whether the user wants to:\n     - List customers, charges, or coupons\n     - Retrieve the account‚Äôs balance\n     - Create a new coupon in Stripe\n   - Filters unsupported or unclear requests, explaining permissions or terminology as needed.\n\n3. **Stripe Data Retrieval**\n   - For data queries:\n     - Only returns summarized, masked lists (e.g., last 10 transactions/customers)\n     - Sensitive details, such as card numbers, are automatically masked or truncated\n     - Never exposes or logs confidential information\n\n4. **Coupon Creation**\n   - When a coupon creation is requested:\n     - AI agent collects coupon parameters (discount, expiration, restrictions)\n     - Clearly summarizes the action and **requires explicit user confirmation** before proceeding\n     - Creates the coupon upon confirmation and replies with only the public-safe coupon details\n\n---\n\n## üõ°Ô∏è Privacy & Security\n\n- **No data storage:** All responses are ephemeral; sensitive Stripe data is never retained.\n- **Strict minimization:** Outputs are tightly scoped; only partial identifiers are shown and only when necessary.\n- **Retention rules enforced:** No logs, exports, or secondary storage of Stripe data.\n- **Confirmation required:** Actions modifying Stripe (like coupon creation) always require the user to approve before execution.\n- **Compliance-ready:** Aligned with Stripe and general data protection standards.\n\n---\n\n## ‚è±Ô∏è Setup Steps\n\n- Setup time: 10‚Äì15 minutes\n- Add Stripe API credentials in n8n\n- Add the OpenRouter API credentials in n8n and select your desired AI model to run the agent. In our template we selected Kimi K2 from Moonshot AI.\n\n---\n\n## ‚úÖ Summary\n\nThis workflow template connects a privacy-prioritized AI agent (Kimi K2 via OpenRouter) with your Stripe account to enable:\n- Fast, summarized access to customer, transaction, coupon, and balance data\n- Secure, confirmed creation of discounts/coupons\n- Complete adherence to authorization, privacy, and operational best practices\n\n---\n\n## üôã‚Äç‚ôÇÔ∏è Need Help?\n\nFeel free to contact us at [1 Node](https://1node.ai)\nGet instant access to a library of [free resources](https://1node.ai/resources) we created.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Create a coupon in Stripe",
      "type": "n8n-nodes-base.stripeTool",
      "role": "stripeTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Get a balance in Stripe",
      "type": "n8n-nodes-base.stripeTool",
      "role": "stripeTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Get many charges in Stripe",
      "type": "n8n-nodes-base.stripeTool",
      "role": "stripeTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Get many coupons in Stripe",
      "type": "n8n-nodes-base.stripeTool",
      "role": "stripeTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get many customers in Stripe",
      "type": "n8n-nodes-base.stripeTool",
      "role": "stripeTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}