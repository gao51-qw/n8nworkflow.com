{
  "id": 2559,
  "slug": "2559",
  "title": "Visualize your SQL Agent queries with OpenAI and Quickchart.io",
  "description": "### Overview  \n- This workflow aims to provide data visualization capabilities to a native SQL Agent.  \n- Together, they can help foster data analysis and data visualization within a team.  \n- It uses the native SQL Agent that works well and adds visualization capabilities thanks to OpenAI’s Structured Output and Quickchart.io.  \n\n### How it works  \n1. Information Extraction:  \n   - The Information Extractor identifies and extracts the user's question.  \n   - If the question includes a visualization aspect, the SQL Agent alone may not respond accurately.  \n\n2. SQL Querying:  \n   - It leverages a regular SQL Agent: it connects to a database, queries it, and translates the response into a human-readable format.  \n\n3. Chart Decision:  \n   - The Text Classifier determines whether the user would benefit from a chart to support the SQL Agent's response.  \n\n4. Chart Generation:  \n   - If a chart is needed, the sub-workflow dynamically generates a chart and appends it to the SQL Agent’s response.  \n   - If not, the SQL Agent’s response is output as is.  \n\n5. Calling OpenAI for Chart Definition:  \n   - The sub-workflow calls OpenAI via the HTTP Request node to retrieve a chart definition.  \n\n6. Building and Returning the Chart:  \n   - In the \"Set Response\" node, the chart definition is appended to a Quickchart.io URL, generating the final chart image.  \n   - The AI Agent returns the response along with the chart.  \n\n### How to use it  \n- Use an existing database or create a new one.  \n- For example, I've used [this Kaggle dataset](https://www.kaggle.com/datasets/ihelon/coffee-sales/versions/15?resource=download) and uploaded it to a Supabase DB.  \n- Add the PostgreSQL or MySQL credentials.  \n- Alternatively, you can use SQLite binary files (check [this template](https://n8n.io/workflows/2292-talk-to-your-sqlite-database-with-a-langchain-ai-agent/)).  \n- Activate the workflow.  \n- Start chatting with the AI SQL Agent.  \n- If the Text Classifier determines a chart would be useful, it will generate one in addition to the SQL Agent's response.  \n\n### Notes  \n- The full Quickchart.io specifications have not been fully integrated, so there may be some glitches (e.g., radar graphs may not display properly due to size limitations).  ",
  "featuredImage": "/data/workflows/2559/2559.webp",
  "author": {
    "id": 101,
    "slug": "agentstudio",
    "name": "Agent Studio",
    "avatar": ""
  },
  "categories": [
    "Engineering",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 16231,
  "downloads": 1623,
  "createdAt": "2024-11-20T10:54:23.294Z",
  "updatedAt": "2026-01-16T08:25:24.159Z",
  "publishedAt": "2024-11-20T10:54:23.294Z",
  "nodes": 19,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2559",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Visualize your SQL Agent queries with OpenAI and Quickchart.io",
    "workflowName": "Visualize your SQL Agent queries with OpenAI and Quickchart.io",
    "description": "- This workflow aims to provide data visualization capabilities to a native SQL Agent.  \n- Together, they can help foster data analysis and data visualization within a team.  \n- It uses the native SQL Agent that works well and adds visualization capabilities thanks to OpenAI’s Structured Output and Quickchart.io.  \n\n### How it works  \n1. Information Extraction:  \n   - The Information Extractor identifies and extracts the user's question.  \n   - If the question includes a visualization aspect, the SQL Agent alone may not respond accurately.  \n\n2. SQL Querying:  \n   - It leverages a regular SQL Agent: it connects to a database, queries it, and translates the response into a human-readable format.  \n\n3. Chart Decision:  \n   - The Text Classifier determines whether the user would benefit from a chart to support the SQL Agent's response.  \n\n4. Chart Generation:  \n   - If a chart is needed, the sub-workflow dynamically generates a chart and appends it to the SQL Agent’s response.  \n   - If not, the SQL Agent’s response is output as is.  \n\n5. Calling OpenAI for Chart Definition:  \n   - The sub-workflow calls OpenAI via the HTTP Request node to retrieve a chart definition.  \n\n6. Building and Returning the Chart:  \n   - In the \"Set Response\" node, the chart definition is appended to a Quickchart.io URL, generating the final chart image.  \n   - The AI Agent returns the response along with the chart.  \n\n### How to use it  \n- Use an existing database or create a new one.  \n- For example, I've used [this Kaggle dataset](https://www.kaggle.com/datasets/ihelon/coffee-sales/versions/15?resource=download) and uploaded it to a Supabase DB.  \n- Add the PostgreSQL or MySQL credentials.  \n- Alternatively, you can use SQLite binary files (check [this template](https://n8n.io/workflows/2292-talk-to-your-sqlite-database-with-a-langchain-ai-agent/)).  \n- Activate the workflow.  \n- Start chatting with the AI SQL Agent.  \n- If the Text Classifier determines a chart would be useful, it will generate one in addition to the SQL Agent's response.  \n\n### Notes  \n- The full Quickchart.io specifications have not been fully integrated, so there may be some glitches (e.g., radar graphs may not display properly due to size limitations).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Execute Workflow",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Execute \"Generate a chart\" tool",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI - Generate Chart definition with Structured Output",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Set response",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Set Text output",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Text + Chart output",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Window Buffer Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model Classifier",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Text Classifier - Chart required?",
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "role": "textClassifier",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "User question + Agent initial response",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Information Extractor - User question",
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "role": "informationExtractor",
      "configDescription": "Version 1"
    }
  ]
}