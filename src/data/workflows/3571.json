{
  "id": 3571,
  "slug": "3571",
  "title": "Get Scaleway server info with dynamic filtering",
  "description": "# Get Scaleway Server Info with Dynamic Filtering\n\n## Description\n\nThis workflow is designed for developers, system administrators, and DevOps engineers who need to retrieve and filter Scaleway server information quickly and efficiently. It gathers data from Scaleway instances and baremetal servers across multiple zones and is ideal for:\n- Quickly identifying servers by tags, names, public IPs, or zones.\n- Automating server status checks in production, staging, or test environments.\n- Integrating Scaleway data into broader monitoring or inventory systems.\n\n## High-Level Steps\n\n- **Webhook Trigger:**\n  Receives an HTTP POST request (with basic authentication) containing the search criteria (`search_by` and `search`).\n\n- **Server Data Collection:**\n  Fetches server data from Scaleway’s API endpoints for both instances and baremetal servers across defined zones.\n\n- **Data Processing:**\n  Aggregates and normalizes the fetched data using a Code node with helper functions.\n\n- **Dynamic Filtering:**\n  Routes data to dedicated filtering routines (by tags, name, public_ip, or zone) based on the input criteria.\n\n- **Response:**\n  Returns the filtered data (or an error message) via a webhook response.\n\n## Set Up Steps\n\n1. **Insert Your Scaleway Token:**\n   In the “Edit Fields” node, replace the placeholder `Your personal Scaleway X Auth Token` with your Scaleway API token.\n\n2. **Configure Zones:**\n   Review or update the zone lists (`ZONE_INSTANCE` and `ZONE_BAREMETAL`) to suit your environment.\n\n3. **Send a Request:**\n   Make a POST request to the workflow’s webhook endpoint with a JSON payload, for example:\n   ```json\n   {\n     \"search_by\": \"tags\",\n     \"search\": \"Apiv1\"\n   }\n   ```\n\n4. **View the Results:**\n   The workflow returns a JSON array of servers matching your criteria, including details like name, tags, public IP, type, state, zone, and user.",
  "featuredImage": "/data/workflows/3571/3571.webp",
  "author": {
    "id": 101,
    "slug": "pablobarrier",
    "name": "Pablo",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 291,
  "downloads": 29,
  "createdAt": "2025-04-16T11:20:04.714Z",
  "updatedAt": "2026-01-16T08:30:23.707Z",
  "publishedAt": "2025-04-16T11:20:04.714Z",
  "nodes": 24,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3571",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Get Scaleway server info with dynamic filtering",
    "workflowName": "Get Scaleway server info with dynamic filtering",
    "description": "# Get Scaleway Server Info with Dynamic Filtering\n\n## Description\n\nThis workflow is designed for developers, system administrators, and DevOps engineers who need to retrieve and filter Scaleway server information quickly and efficiently. It gathers data from Scaleway instances and baremetal servers across multiple zones and is ideal for:\n- Quickly identifying servers by tags, names, public IPs, or zones.\n- Automating server status checks in production, staging, or test environments.\n- Integrating Scaleway data into broader monitoring or inventory systems.\n\n## High-Level Steps\n\n- **Webhook Trigger:**\n  Receives an HTTP POST request (with basic authentication) containing the search criteria (`search_by` and `search`).\n\n- **Server Data Collection:**\n  Fetches server data from Scaleway’s API endpoints for both instances and baremetal servers across defined zones.\n\n- **Data Processing:**\n  Aggregates and normalizes the fetched data using a Code node with helper functions.\n\n- **Dynamic Filtering:**\n  Routes data to dedicated filtering routines (by tags, name, public_ip, or zone) based on the input criteria.\n\n- **Response:**\n  Returns the filtered data (or an error message) via a webhook response.\n\n## Set Up Steps\n\n1. **Insert Your Scaleway Token:**\n   In the “Edit Fields” node, replace the placeholder `Your personal Scaleway X Auth Token` with your Scaleway API token.\n\n2. **Configure Zones:**\n   Review or update the zone lists (`ZONE_INSTANCE` and `ZONE_BAREMETAL`) to suit your environment.\n\n3. **Send a Request:**\n   Make a POST request to the workflow’s webhook endpoint with a JSON payload, for example:\n   ```json\n   {\n     \"search_by\": \"tags\",\n     \"search\": \"Apiv1\"\n   }\n   ```\n\n4. **View the Results:**\n   The workflow returns a JSON array of servers matching your criteria, including details like name, tags, public IP, type, state, zone, and user.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Code",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Code search Tags",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Code search Name",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Code search public_ip",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Code search zone",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Respond Error",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Respond to Webhook1",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Respond to Webhook2",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Respond to Webhook3",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Scalway Machines",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Respond to Webhook4",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Get scw instance by zone",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Loop Over Zone Instance",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Get scw baremetal by zone",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Split Out ZONE_INSTANCE",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "If ZONE_BAREMETAL in ZONE_INSTANCE",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}