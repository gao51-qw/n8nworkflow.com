{
  "id": 4115,
  "slug": "4115",
  "title": "Analyze crypto market with CoinGecko: volatility metrics & investment signals",
  "description": "This n8n template lets you automatically pull market data for the cryptocurrencies from CoinGecko every hour, calculate custom volatility and market-health metrics, classify each coinâ€™s price action into buy/sell/hold/neutral signals with risk ratings, and expose both individual analyses and a portfolio summary via a webhook. Itâ€™s perfect for crypto analysts, DeFi builders, or portfolio managers who want on-demand insights without writing a single line of backend code.\n\n---\n\n# ðŸ”§ How it works\n- Schedule Trigger fires every hour (or interval you choose).\n- HTTP Request (CoinGecko) fetches the top 10 coins by market cap, including 24 h, 7 d, and 30 d price change percentages.\n- Split In Batches ensures each coin is processed sequentially.\n- Function (Calculate Market Metrics) computes:\n  - A weighted volatility score\n  - Market-cap-to-volume ratio\n  - Price-to-ATH ratio\n  - Composite market score\n\n- IF & Switch nodes categorize each coinâ€™s 24 h price action (up &gt;5%, down &gt;5%, high volatility, or stable) and append:\n  - signal (BUY/SELL/HOLD/NEUTRAL)\n  - riskRating (High/Medium/Low/Unknown)\n  - recommendation & investmentStrategy guidance\n\n- NoOp & Merge nodes consolidate each branch back into a single data stream.\n\n- Function (Generate Portfolio Summary) aggregates all analyses into:\n  - A Markdown portfolioSummary\n  - Counts of buy/sell/hold/neutral signals\n  - Risk distribution\n\n- Webhook Response returns the full JSON payload with individual analyses and the summary for downstream consumers.\n\n---\n\n# ðŸ‘¤ Who is it for?\n### This workflow is ideal for:\n\n- Crypto researchers and analysts who need scheduled market insights\n\n- DeFi and trading bot developers looking to automate signal generation\n\n- Portfolio managers seeking a no-code overview of top assets\n\n- Automation engineers exploring API integration and data enrichment\n\n\n---\n\n# ðŸ“‘ Data Structure\n### When you trigger the webhook, youâ€™ll receive a JSON object containing:\n\n- individualAnalyses: Array of { coin, symbol, currentPrice, priceChanges, marketMetrics, signal, riskRating, recommendation }\n\n- portfolioSummary: Markdown report summarizing signals, risk distribution, and top opportunity\n\n- marketSignals: Counts of each signal type\n\n- riskDistribution: Counts of each risk rating\n\n- timestamp: ISO string of analysis time\n\n---\n\n# âš™ï¸ Setup Instructions\n- Import: In n8n Editor â†’ click â€œImport from JSONâ€ â†’ paste this workflow JSON.\n\n- Configure Schedule: Double-click the Schedule Trigger â†’ set your desired interval (default: every hour).\n\n- Webhook Path: Open the Webhook node â†’ choose a unique path (e.g., /cryptoâ€analysis) and â€œPOSTâ€.\n\n- Activate: Save and activate the workflow.\n\n- Test:\n  - Open the webhook url to other tab or use cURL\n```bash\ncurl -X POST https://&lt;your-n8n-host&gt;/webhook/&lt;path&gt;\n```\n\nYouâ€™ll get back a JSON payload with both portfolioSummary and individualAnalyses.\n\n---\n\n# ðŸ“ Tips\n- Rate-Limit Handling: If CoinGecko returns 429, insert a Delay node (e.g., 500 ms) after the HTTP Request.\n- Batch Size: Default is 1 coin at a time; you can bump it to parallelize.\n- Customization: Tweak volatility weightings or add new metrics directly in the â€œCalculate Market Metricsâ€ Function node.\n- Extension: Swap CoinGecko for another API by updating the HTTP Request URL and field mappings.\n",
  "featuredImage": "/data/workflows/4115/4115.webp",
  "author": {
    "id": 101,
    "slug": "ist00dent",
    "name": "ist00dent",
    "avatar": ""
  },
  "categories": [
    "Crypto Trading"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 8848,
  "downloads": 884,
  "createdAt": "2025-05-16T17:00:04.497Z",
  "updatedAt": "2026-01-16T08:33:08.720Z",
  "publishedAt": "2025-05-16T17:00:04.497Z",
  "nodes": 26,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4115",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Analyze crypto market with CoinGecko: volatility metrics & investment signals",
    "workflowName": "Analyze crypto market with CoinGecko: volatility metrics & investment signals",
    "description": "This n8n template lets you automatically pull market data for the cryptocurrencies from CoinGecko every hour, calculate custom volatility and market-health metrics, classify each coinâ€™s price action into buy/sell/hold/neutral signals with risk ratings, and expose both individual analyses and a portfolio summary via a webhook. Itâ€™s perfect for crypto analysts, DeFi builders, or portfolio managers who want on-demand insights without writing a single line of backend code.\n\n---\n\n# ðŸ”§ How it works\n- Schedule Trigger fires every hour (or interval you choose).\n- HTTP Request (CoinGecko) fetches the top 10 coins by market cap, including 24 h, 7 d, and 30 d price change percentages.\n- Split In Batches ensures each coin is processed sequentially.\n- Function (Calculate Market Metrics) computes:\n  - A weighted volatility score\n  - Market-cap-to-volume ratio\n  - Price-to-ATH ratio\n  - Composite market score\n\n- IF & Switch nodes categorize each coinâ€™s 24 h price action (up &gt;5%, down &gt;5%, high volatility, or stable) and append:\n  - signal (BUY/SELL/HOLD/NEUTRAL)\n  - riskRating (High/Medium/Low/Unknown)\n  - recommendation & investmentStrategy guidance\n\n- NoOp & Merge nodes consolidate each branch back into a single data stream.\n\n- Function (Generate Portfolio Summary) aggregates all analyses into:\n  - A Markdown portfolioSummary\n  - Counts of buy/sell/hold/neutral signals\n  - Risk distribution\n\n- Webhook Response returns the full JSON payload with individual analyses and the summary for downstream consumers.\n\n---\n\n# ðŸ‘¤ Who is it for?\n### This workflow is ideal for:\n\n- Crypto researchers and analysts who need scheduled market insights\n\n- DeFi and trading bot developers looking to automate signal generation\n\n- Portfolio managers seeking a no-code overview of top assets\n\n- Automation engineers exploring API integration and data enrichment\n\n\n---\n\n# ðŸ“‘ Data Structure\n### When you trigger the webhook, youâ€™ll receive a JSON object containing:\n\n- individualAnalyses: Array of { coin, symbol, currentPrice, priceChanges, marketMetrics, signal, riskRating, recommendation }\n\n- portfolioSummary: Markdown report summarizing signals, risk distribution, and top opportunity\n\n- marketSignals: Counts of each signal type\n\n- riskDistribution: Counts of each risk rating\n\n- timestamp: ISO string of analysis time\n\n---\n\n# âš™ï¸ Setup Instructions\n- Import: In n8n Editor â†’ click â€œImport from JSONâ€ â†’ paste this workflow JSON.\n\n- Configure Schedule: Double-click the Schedule Trigger â†’ set your desired interval (default: every hour).\n\n- Webhook Path: Open the Webhook node â†’ choose a unique path (e.g., /cryptoâ€analysis) and â€œPOSTâ€.\n\n- Activate: Save and activate the workflow.\n\n- Test:\n  - Open the webhook url to other tab or use cURL\n```bash\ncurl -X POST https://&lt;your-n8n-host&gt;/webhook/&lt;path&gt;\n```\n\nYouâ€™ll get back a JSON payload with both portfolioSummary and individualAnalyses.\n\n---\n\n# ðŸ“ Tips\n- Rate-Limit Handling: If CoinGecko returns 429, insert a Delay node (e.g., 500 ms) after the HTTP Request.\n- Batch Size: Default is 1 coin at a time; you can bump it to parallelize.\n- Customization: Tweak volatility weightings or add new metrics directly in the â€œCalculate Market Metricsâ€ Function node.\n- Extension: Swap CoinGecko for another API by updating the HTTP Request URL and field mappings.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Fetch Crypto Data",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 3"
    },
    {
      "name": "Calculate Market Metrics",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    },
    {
      "name": "IF 24h Price Up >5%",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "IF 24h Price Down >5%",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "IF High Volatility",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Uptrend Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Set Downtrend Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Set Volatility Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Set Stable Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Merge Results",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Set High Risk Rating",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Set Medium Risk Rating",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Set Low Risk Rating",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Set Default Risk Rating",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 2"
    },
    {
      "name": "Final Merge",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Format Final Analysis",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    },
    {
      "name": "Collect All Analyses",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Generate Portfolio Summary",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Switch by Market Score",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Out",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}