{
  "id": 12151,
  "slug": "12151",
  "title": "Log daily Interactive Brokers trades to a Google Sheets journal",
  "description": "![tempImageKbwBTH.gif](fileId:3902)\n\n## Automated Trade Report from Interactive Brokers\nThis workflow is aimed at traders who use Interactive Brokers. It automatically retrieves the trades made in IBKR on a daily basis and writes them to a Google Sheet, so that anyone can easily perform further analyses and statistics using the on-board tools.\n\nThis creates an automatic, continuous trade journal.\n\n### Typical Usecaes\n- Monitoring your trades in one journal\n- Analyze your Profit & Losses\n- Basis for any kind of statistics\n\t•\tLog trades (entry, exit, setup, reason)\n\t•\tAnalyze performance (win rate, R/R, expectancy)\n\t•\tEvaluate strategies & setups\n\t•\tDetect mistakes & patterns\n\t•\tTrack emotions & discipline\n\t•\tSupport coaching, reviews & improvement\n\n### How it works\n1. A daily schedule triggers a FlexStatement request to Interactive Brokers to start generating a trade report.\n2. The workflow extracts the reference code from IBKR's response, waits for the report to be ready, then downloads the Flex report XML.\n3. The XML is parsed and split into individual Trade records.\n4. Key fields (tradeDate, symbol, quantity, buySell, tradeID, price, money, currency, fxRateToBase) are normalized.\\n5. Each trade is appended or updated in the configured Google Sheet, matching on tradeID to avoid duplicates and keep the journal current.\n\n### Prerequisites\n- Trading Account on [IBKR](IBKR)\n- Google Sheets OAuth2\n- A Google Sheet containing your trading journal\n\n### Setup\n- [ ] Set schedule to run at your desired time (default: 08:00)\n- [ ] Add or verify IBKR request token/reference parameters. \n\n#### 1. Create Flex Query Token:\nGo to IBKR [Account Management](https://ndcdyn.interactivebrokers.com/portal/?loginType=1&action=ACCT_MGMT_MAIN&mid=001&clt=1#/dashboard) \nReports → Flex Queries → Flex Web Service\n→ Generate Current Token\n→ Make a note of the token (e.g.: 123456789012345678901234)\n\n#### 2. Enter Flex Token:\nIn node '1. Request Flex Report' and in node '2. Extract Reference Code'\nReplace YOUR_FLEX_TOKEN with your token ID\n\n#### 3. Create Flex Query in IBKR (if not already done):\nGo to IBKR [Account Management](https://ndcdyn.interactivebrokers.com/portal/?loginType=1&action=ACCT_MGMT_MAIN&mid=001&clt=1#/dashboard) \nReports → Flex Queries → Activity Flex Query → Create\nSelect: Trade Confirmation ✓\nPeriod: Last 365 Days\nFormat: XML\nSave and note down the query ID\n\n#### 4. Enter Flex Query ID:\nIn node '1. Request Flex Report'\nReplace YOUR_QUERY_ID with your query ID\n\n\n- [ ] Adjust wait time if IBKR needs longer to generate reports\n- [ ] Select the Google Sheet and target sheet/tab\n- [ ] Connect Google Sheets OAuth2 account\n- [ ] Confirm column mapping and that tradeID is the matching column\n- [ ] Run a manual test to validate parsing and row updates",
  "featuredImage": "/data/workflows/12151/12151.webp",
  "author": {
    "id": 101,
    "slug": "naviqo",
    "name": "Wolfgang Renner",
    "avatar": ""
  },
  "categories": [
    "Crypto Trading"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 0,
  "downloads": 0,
  "createdAt": "2025-12-26T07:09:20.428Z",
  "updatedAt": "2026-01-16T09:11:33.946Z",
  "publishedAt": "2025-12-26T07:09:20.428Z",
  "nodes": 13,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/12151",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Log daily Interactive Brokers trades to a Google Sheets journal",
    "workflowName": "Log daily Interactive Brokers trades to a Google Sheets journal",
    "description": "![tempImageKbwBTH.gif](fileId:3902)\n\n## Automated Trade Report from Interactive Brokers\nThis workflow is aimed at traders who use Interactive Brokers. It automatically retrieves the trades made in IBKR on a daily basis and writes them to a Google Sheet, so that anyone can easily perform further analyses and statistics using the on-board tools.\n\nThis creates an automatic, continuous trade journal.\n\n### Typical Usecaes\n- Monitoring your trades in one journal\n- Analyze your Profit & Losses\n- Basis for any kind of statistics\n\t•\tLog trades (entry, exit, setup, reason)\n\t•\tAnalyze performance (win rate, R/R, expectancy)\n\t•\tEvaluate strategies & setups\n\t•\tDetect mistakes & patterns\n\t•\tTrack emotions & discipline\n\t•\tSupport coaching, reviews & improvement\n\n### How it works\n1. A daily schedule triggers a FlexStatement request to Interactive Brokers to start generating a trade report.\n2. The workflow extracts the reference code from IBKR's response, waits for the report to be ready, then downloads the Flex report XML.\n3. The XML is parsed and split into individual Trade records.\n4. Key fields (tradeDate, symbol, quantity, buySell, tradeID, price, money, currency, fxRateToBase) are normalized.\\n5. Each trade is appended or updated in the configured Google Sheet, matching on tradeID to avoid duplicates and keep the journal current.\n\n### Prerequisites\n- Trading Account on [IBKR](IBKR)\n- Google Sheets OAuth2\n- A Google Sheet containing your trading journal\n\n### Setup\n- [ ] Set schedule to run at your desired time (default: 08:00)\n- [ ] Add or verify IBKR request token/reference parameters. \n\n#### 1. Create Flex Query Token:\nGo to IBKR [Account Management](https://ndcdyn.interactivebrokers.com/portal/?loginType=1&action=ACCT_MGMT_MAIN&mid=001&clt=1#/dashboard) \nReports → Flex Queries → Flex Web Service\n→ Generate Current Token\n→ Make a note of the token (e.g.: 123456789012345678901234)\n\n#### 2. Enter Flex Token:\nIn node '1. Request Flex Report' and in node '2. Extract Reference Code'\nReplace YOUR_FLEX_TOKEN with your token ID\n\n#### 3. Create Flex Query in IBKR (if not already done):\nGo to IBKR [Account Management](https://ndcdyn.interactivebrokers.com/portal/?loginType=1&action=ACCT_MGMT_MAIN&mid=001&clt=1#/dashboard) \nReports → Flex Queries → Activity Flex Query → Create\nSelect: Trade Confirmation ✓\nPeriod: Last 365 Days\nFormat: XML\nSave and note down the query ID\n\n#### 4. Enter Flex Query ID:\nIn node '1. Request Flex Report'\nReplace YOUR_QUERY_ID with your query ID\n\n\n- [ ] Adjust wait time if IBKR needs longer to generate reports\n- [ ] Select the Google Sheet and target sheet/tab\n- [ ] Connect Google Sheets OAuth2 account\n- [ ] Confirm column mapping and that tradeID is the matching column\n- [ ] Run a manual test to validate parsing and row updates",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "1. Request Flex Report",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "2. Extract Reference Code",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Wait 10 Seconds",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "3. Download Report",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "5. Split Trades",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "6. Format Trade Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "7. Save to Google Sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Daily Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "4. Convert XML to JSON",
      "type": "n8n-nodes-base.xml",
      "role": "xml",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}