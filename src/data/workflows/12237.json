{
  "id": 12237,
  "slug": "12237",
  "title": "Generate stale page reports for Confluence spaces with REST API v1 and v2",
  "description": "## Report stale pages in Confluence\n\nThis workflow generates a **stale page report** for Confluence spaces, helping teams keep documentation accurate, relevant, and actively maintained.\n\n### What it does\n- Identifies Confluence pages **not updated within a defined cutoff period** (in days).\n- Supports both:\n  - **Confluence REST API v1 (CQL search)**, and\n  - **Confluence REST API v2** (spaces + pages).\n- Produces a clean, aggregated report including:\n  - Page title  \n  - Page status  \n  - Last updated date  \n  - Days overdue  \n  - Direct page URL\n- Ideal for **content audits**, **documentation hygiene**, and **ownership reviews**.\n\n### How it works\n- The workflow starts via a **Manual Trigger**.\n- A **Set Variables** node defines:\n  - Atlassian domain\n  - Space keys to scan\n  - Cutoff age (in days)\n  - API version toggle (v1 or v2)\n- Two execution paths are supported:\n  - **API v1**: Uses CQL search to fetch outdated pages directly.\n  - **API v2**: Fetches spaces → pages → filters pages by last modified date.\n- All pages are normalized into a consistent format.\n- Results are **aggregated into a single `stalePages` array** for easy reuse in downstream steps.\n\n### Setup\n- Configure the **Set Variables** node:\n  - `atlassianDomain` → your Confluence base URL  \n  - `spaceKeys` → comma-separated space keys (e.g. `DOCS, ENG`)  \n  - `cutoffDateDays` → age threshold (e.g. `90`)  \n  - `apiV2` → `true` (recommended) or `false` for legacy CQL\n- Create an **HTTP Basic Auth credential**:\n  - Atlassian email + API token\n  - Assign it to all HTTP Request nodes\n- Optional:\n  - Extend the workflow with email notifications, Slack alerts, or CSV exports.\n\n### Notes\n- **API v2 is recommended** and future-proof; API v1 is included for legacy compatibility.\n- Pagination limits are set to **50 items per request** — increase if your spaces contain many pages.\n- If no results are returned:\n  - Verify space keys\n  - Check cutoff logic\n  - Confirm API permissions for the token\n- Tested against **Confluence Cloud**.\n",
  "featuredImage": "/data/workflows/12237/12237.webp",
  "author": {
    "id": 101,
    "slug": "alexschnabl",
    "name": "Alexander Schnabl",
    "avatar": ""
  },
  "categories": [
    "Document Extraction"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 4,
  "downloads": 0,
  "createdAt": "2025-12-28T12:53:30.232Z",
  "updatedAt": "2026-01-16T09:11:48.333Z",
  "publishedAt": "2025-12-28T12:53:30.232Z",
  "nodes": 18,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/12237",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Generate stale page reports for Confluence spaces with REST API v1 and v2",
    "workflowName": "Generate stale page reports for Confluence spaces with REST API v1 and v2",
    "description": "## Report stale pages in Confluence\n\nThis workflow generates a **stale page report** for Confluence spaces, helping teams keep documentation accurate, relevant, and actively maintained.\n\n### What it does\n- Identifies Confluence pages **not updated within a defined cutoff period** (in days).\n- Supports both:\n  - **Confluence REST API v1 (CQL search)**, and\n  - **Confluence REST API v2** (spaces + pages).\n- Produces a clean, aggregated report including:\n  - Page title  \n  - Page status  \n  - Last updated date  \n  - Days overdue  \n  - Direct page URL\n- Ideal for **content audits**, **documentation hygiene**, and **ownership reviews**.\n\n### How it works\n- The workflow starts via a **Manual Trigger**.\n- A **Set Variables** node defines:\n  - Atlassian domain\n  - Space keys to scan\n  - Cutoff age (in days)\n  - API version toggle (v1 or v2)\n- Two execution paths are supported:\n  - **API v1**: Uses CQL search to fetch outdated pages directly.\n  - **API v2**: Fetches spaces → pages → filters pages by last modified date.\n- All pages are normalized into a consistent format.\n- Results are **aggregated into a single `stalePages` array** for easy reuse in downstream steps.\n\n### Setup\n- Configure the **Set Variables** node:\n  - `atlassianDomain` → your Confluence base URL  \n  - `spaceKeys` → comma-separated space keys (e.g. `DOCS, ENG`)  \n  - `cutoffDateDays` → age threshold (e.g. `90`)  \n  - `apiV2` → `true` (recommended) or `false` for legacy CQL\n- Create an **HTTP Basic Auth credential**:\n  - Atlassian email + API token\n  - Assign it to all HTTP Request nodes\n- Optional:\n  - Extend the workflow with email notifications, Slack alerts, or CSV exports.\n\n### Notes\n- **API v2 is recommended** and future-proof; API v1 is included for legacy compatibility.\n- Pagination limits are set to **50 items per request** — increase if your spaces contain many pages.\n- If no results are returned:\n  - Verify space keys\n  - Check cutoff logic\n  - Confirm API permissions for the token\n- Tested against **Confluence Cloud**.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Variables",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Confluence - Get Spaces",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Format Space Ids",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Confluence - Get Outdated Spaces via CQL",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Filter Version by cutoffDate",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Switch API Version",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Report Data V2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Report Data V1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Split Out Pages V1",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Out Pages V2",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Confluence - Get Pages",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}