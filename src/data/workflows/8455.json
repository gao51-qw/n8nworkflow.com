{
  "id": 8455,
  "slug": "8455",
  "title": "Automate water bill calculations with Telegram, Gemini AI, and Google Sheets",
  "description": "## **Automate Water Bill Calculations with Telegram, Gemini AI, and Google Sheets**\n![Screen Shot 20250911 at 20.48.18.png](fileId:2357)\n\nThis workflow automates the calculation of monthly water bills. Residents can send a photo of their water meter along with their name via Telegram. The workflow uses Gemini AI to extract the meter reading, calculates the usage difference compared to the previous month, and updates a Google Sheet with the billing details. Finally, the workflow sends a summary back via Telegram.\n\nDonâ€™t hesitate to reach out if you have any questions or run into issues! ðŸ™Œ\n\n**Requirements**\n- A Telegram bot token (created via BotFather).\n- A Google account with access to Google Sheets.\n- A Gemini API key ([](Google AI Studio)).\n- A pre-created Google Sheet with the required columns.\n\n**Google Sheet Setup**\nCreate a new Google Sheet with the following columns:\nNama, Volume Sebelumnya, Volume Saat Ini, Harga/mÂ³, Jumlah Bayar, Beban, Total Bayar, Tanggal Input\n\n**Workflow Setup Instructions**\n1. Connect Google Sheets\n- Add your Google Sheets credentials in n8n.\n- Link the workflow to your sheet with the structure above.\n2. Set Up Telegram Bot\n- Create a Telegram bot via BotFather.\n- Copy your bot token into the Telegram Trigger node.\n3. Configure Gemini AI\n- Obtain a Gemini API key from Google AI Studio.\n- Add it to your n8n credentials.\n- The workflow will parse the meter reading from the uploaded image.\n\n**Example Calculation**\nPrevious Volume: 535 mÂ³\nCurrent Volume: 545 mÂ³\nUsage: 10 mÂ³\nPrice per mÂ³: Rp3.000\nFixed cost: Rp3.000\nTotal Bill: Rp33.000\n\n**How It Works**\n- User sends a photo of the water meter with caption (name).\n- Telegram Trigger receives the message.\n- Gemini AI reads the meter number from the photo.\n- Workflow fetches previous volume from Google Sheets.\n- Usage and total bill are calculated.\n- Data is stored back into Google Sheets.\n- Bot replies in Telegram with detailed bill info.\n\n**Customization**\n- Change Harga/mÂ³ in the sheet to match your communityâ€™s water price.\n- Update Beban if your community uses a different fixed fee.\n- Edit the Telegram reply message node to adjust wording.\n\n*With this workflow, you can streamline water billing for residents, ensure accuracy, and save time on manual calculations.*",
  "featuredImage": "/data/workflows/8455/8455.webp",
  "author": {
    "id": 101,
    "slug": "miftahr",
    "name": "Miftah Rahmat",
    "avatar": ""
  },
  "categories": [
    "File Management",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 230,
  "downloads": 23,
  "createdAt": "2025-09-10T15:12:24.879Z",
  "updatedAt": "2026-01-16T08:55:55.052Z",
  "publishedAt": "2025-09-10T15:12:24.879Z",
  "nodes": 15,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8455",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate water bill calculations with Telegram, Gemini AI, and Google Sheets",
    "workflowName": "Automate water bill calculations with Telegram, Gemini AI, and Google Sheets",
    "description": "## **Automate Water Bill Calculations with Telegram, Gemini AI, and Google Sheets**\n![Screen Shot 20250911 at 20.48.18.png](fileId:2357)\n\nThis workflow automates the calculation of monthly water bills. Residents can send a photo of their water meter along with their name via Telegram. The workflow uses Gemini AI to extract the meter reading, calculates the usage difference compared to the previous month, and updates a Google Sheet with the billing details. Finally, the workflow sends a summary back via Telegram.\n\nDonâ€™t hesitate to reach out if you have any questions or run into issues! ðŸ™Œ\n\n**Requirements**\n- A Telegram bot token (created via BotFather).\n- A Google account with access to Google Sheets.\n- A Gemini API key ([](Google AI Studio)).\n- A pre-created Google Sheet with the required columns.\n\n**Google Sheet Setup**\nCreate a new Google Sheet with the following columns:\nNama, Volume Sebelumnya, Volume Saat Ini, Harga/mÂ³, Jumlah Bayar, Beban, Total Bayar, Tanggal Input\n\n**Workflow Setup Instructions**\n1. Connect Google Sheets\n- Add your Google Sheets credentials in n8n.\n- Link the workflow to your sheet with the structure above.\n2. Set Up Telegram Bot\n- Create a Telegram bot via BotFather.\n- Copy your bot token into the Telegram Trigger node.\n3. Configure Gemini AI\n- Obtain a Gemini API key from Google AI Studio.\n- Add it to your n8n credentials.\n- The workflow will parse the meter reading from the uploaded image.\n\n**Example Calculation**\nPrevious Volume: 535 mÂ³\nCurrent Volume: 545 mÂ³\nUsage: 10 mÂ³\nPrice per mÂ³: Rp3.000\nFixed cost: Rp3.000\nTotal Bill: Rp33.000\n\n**How It Works**\n- User sends a photo of the water meter with caption (name).\n- Telegram Trigger receives the message.\n- Gemini AI reads the meter number from the photo.\n- Workflow fetches previous volume from Google Sheets.\n- Usage and total bill are calculated.\n- Data is stored back into Google Sheets.\n- Bot replies in Telegram with detailed bill info.\n\n**Customization**\n- Change Harga/mÂ³ in the sheet to match your communityâ€™s water price.\n- Update Beban if your community uses a different fixed fee.\n- Edit the Telegram reply message node to adjust wording.\n\n*With this workflow, you can streamline water billing for residents, ensure accuracy, and save time on manual calculations.*",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Redirect Message Types",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Get a file",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Image Explainer",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Get row(s) in sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Append row in sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Find Latest Row",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Format Bill Message",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Bill to Telegram",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Prepare Data for Sheet",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Calculate Bill",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    }
  ]
}