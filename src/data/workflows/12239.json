{
  "id": 12239,
  "slug": "12239",
  "title": "Audit Confluence space permissions and public links for compliance",
  "description": "## Audit permissions in Confluence to ensure compliance\n\nThis workflow scans selected **Confluence spaces** for **public exposure risks**, helping teams identify unintended access and potential data leakage.\n\n### What it does\n- Detects public exposure risks in Confluence spaces, including:\n  - **Anonymous access permissions** at space level\n  - Whether **public links are enabled**\n  - Pages with **active or blocked public links**\n- Uses **Confluence REST API v2** together with the **Atlassian GraphQL API**.\n- Produces a consolidated per-space report containing:\n  - Anonymous access permissions\n  - Public link status\n  - Pages with public links (title, status, URL, enabled-by user)\n- Ideal for **security audits**, **compliance reviews**, and **data leakage prevention**.\n\n### How it works\n- The workflow starts via a **Manual Trigger**.\n- A **Set Variables** node defines:\n  - `atlassianDomain`\n  - `spaceKeys` (comma-separated)\n- **Get Spaces (v2)** retrieves matching spaces and splits them into individual items.\n- For each space, three **GraphQL queries** run in parallel:\n  - Retrieve **anonymous access permissions**\n  - Check **public link feature status** at space level\n  - Fetch **pages with public links** (ON / BLOCKED)\n- Results from all three queries are merged and normalized into a single per-space report.\n\n### Setup\n- Configure the **Set Variables** node:\n  - `atlassianDomain` → your Confluence base URL  \n  - `spaceKeys` → comma-separated list (e.g. `ENG, HR`)\n- Create an **HTTP Basic Auth** credential for Atlassian:\n  - Email + API token\n  - Assign it to all HTTP and GraphQL nodes\n- Ensure the credential has permission to:\n  - Read spaces\n  - Read space permissions\n  - Access GraphQL endpoints\n- Execute the workflow manually to generate the report.\n\n### Notes\n- Uses the **Atlassian GraphQL API**, which exposes permission and public-link data not fully available via REST.\n- Pages with blocked public links are included for visibility.\n- The GraphQL page query fetches up to **250 pages per space**.",
  "featuredImage": "/data/workflows/12239/12239.webp",
  "author": {
    "id": 101,
    "slug": "alexschnabl",
    "name": "Alexander Schnabl",
    "avatar": ""
  },
  "categories": [
    "SecOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 7,
  "downloads": 0,
  "createdAt": "2025-12-28T12:58:20.542Z",
  "updatedAt": "2026-01-16T09:11:49.035Z",
  "publishedAt": "2025-12-28T12:58:20.542Z",
  "nodes": 17,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/12239",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Audit Confluence space permissions and public links for compliance",
    "workflowName": "Audit Confluence space permissions and public links for compliance",
    "description": "## Audit permissions in Confluence to ensure compliance\n\nThis workflow scans selected **Confluence spaces** for **public exposure risks**, helping teams identify unintended access and potential data leakage.\n\n### What it does\n- Detects public exposure risks in Confluence spaces, including:\n  - **Anonymous access permissions** at space level\n  - Whether **public links are enabled**\n  - Pages with **active or blocked public links**\n- Uses **Confluence REST API v2** together with the **Atlassian GraphQL API**.\n- Produces a consolidated per-space report containing:\n  - Anonymous access permissions\n  - Public link status\n  - Pages with public links (title, status, URL, enabled-by user)\n- Ideal for **security audits**, **compliance reviews**, and **data leakage prevention**.\n\n### How it works\n- The workflow starts via a **Manual Trigger**.\n- A **Set Variables** node defines:\n  - `atlassianDomain`\n  - `spaceKeys` (comma-separated)\n- **Get Spaces (v2)** retrieves matching spaces and splits them into individual items.\n- For each space, three **GraphQL queries** run in parallel:\n  - Retrieve **anonymous access permissions**\n  - Check **public link feature status** at space level\n  - Fetch **pages with public links** (ON / BLOCKED)\n- Results from all three queries are merged and normalized into a single per-space report.\n\n### Setup\n- Configure the **Set Variables** node:\n  - `atlassianDomain` → your Confluence base URL  \n  - `spaceKeys` → comma-separated list (e.g. `ENG, HR`)\n- Create an **HTTP Basic Auth** credential for Atlassian:\n  - Email + API token\n  - Assign it to all HTTP and GraphQL nodes\n- Ensure the credential has permission to:\n  - Read spaces\n  - Read space permissions\n  - Access GraphQL endpoints\n- Execute the workflow manually to generate the report.\n\n### Notes\n- Uses the **Atlassian GraphQL API**, which exposes permission and public-link data not fully available via REST.\n- Pages with blocked public links are included for visibility.\n- The GraphQL page query fetches up to **250 pages per space**.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Variables",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Confluence - GQL Space Anonymous Access",
      "type": "n8n-nodes-base.graphql",
      "role": "graphql",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Split Out Spaces",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Confluence - GQL Space Public Links Enabled",
      "type": "n8n-nodes-base.graphql",
      "role": "graphql",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Confluence - GQL Space Pages with Public Link",
      "type": "n8n-nodes-base.graphql",
      "role": "graphql",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Set Anonymous Access",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Space Public Links Enabled",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Space Pages with Public Link",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Confluence - Get Spaces",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Build Report",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}