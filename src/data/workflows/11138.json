{
  "id": 11138,
  "slug": "11138",
  "title": "Generate AI photos with Gemini & auto-post to FB, Instagram & X with approval",
  "description": "## Social Media Foto Creation Bot with Approval Loop\n**Create & Share AI Photos with Telegram, Gemini & Post to Facebook, Instagram & X**\n\n**Description**\nThis n8n workflow turns your Telegram messenger into a complete **AI Photo Content Pipeline**. You send your photo idea as a text or voice message to a Telegram bot, collaborate with an AI to refine the prompt and social media caption, let Gemini generate the image, and then automatically publish it after your approval to **Facebook, Instagram, and X (Twitter)** ‚Äì including status tracking and Telegram confirmations.\n\n---\n\n### What You Need to Get Started\nThis workflow connects several external services. You will need the following credentials:\n\n* **Telegram Bot API Key**\n    * Create a bot via **BotFather** and copy the bot token.\n    * This is used by the `Listen for incoming events` and other Telegram nodes.\n* **OpenAI API Key**\n    * Required for **Speech to Text** (OpenAI Whisper) to transcribe voice notes.\n    * Used by the AI Agent model (`OpenAI Chat Model`) for prompt creation.\n* **Google Gemini API Key**\n    * Used by the `Generate an image` node (model: `models/gemini-2.5-flash-image`) to create the AI image.\n* **Google Drive & Sheets Access**\n    * The generated image is temporarily stored in a Google Drive folder (`Upload image1`) and later retrieved by Blotato.\n    * Prompts and post texts are logged to Google Sheets (`Save Prompt & Post-Text`) for tracking.\n* **Blotato API Key**\n    * The layer for social media publishing.\n    * Uploads the image as a media asset (`Upload media1`) and creates posts for **Facebook, Instagram, and X**.\n\n---\n\n### How the Workflow Operates ‚Äì Step by Step\n\n#### 1. Input & Initial Processing (Telegram + Voice Handling)\nThis phase receives your messages and prepares the input for the AI.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Listen for incoming events` | Telegram Trigger node that starts the workflow on any incoming message. |\n| `Voice or Text` | Set node that structures the incoming message into a unified `text` field. |\n| `A Voice?` | IF node that checks if the message is a voice note. |\n| `Get Voice File` | If voice is detected, this downloads the audio file from Telegram. |\n| `Speech to Text` | Uses OpenAI Whisper to convert the voice note into a text transcript. |\n\nThe output of this stage is always a clean text string containing your image idea.\n\n#### 2. AI Core & Refinement Loop (Prompt + Caption via AI)\nHere, the AI drafts the image prompt (for Gemini) and the social media caption (for all platforms) and enters an approval loop with you.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `AI Agent` | Central logic agent. Creates a `videoPrompt` (used for image generation) and `socialMediaText` based on your idea, and asks for feedback. |\n| `OpenAI Chat Model` | The LLM backing the agent (e.g., GPT-4.1-mini). |\n| `Window Buffer Memory` | Stores recent turns, allowing the agent to maintain context during revisions. |\n| `Send questions or proposal to user` | Sends the AI's suggestion for review back to you. |\n| `Approved from user?` | IF node that checks if the output is the **approved JSON** (meaning you replied with \"ok\" or \"approved\"). |\n| `Parse AI Output` | Code node that extracts the `videoPrompt` and `socialMediaText` fields from the agent‚Äôs final JSON output. |\n\n#### 3. Content Generation & Final Approval\nOnce the prompt and caption are set, the image is created and sent to you for final approval before publishing.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Inform user about processing` | Telegram node to confirm: \"Okay. Your image is being prepared now...\" |\n| `Save Prompt & Post-Text` | Google Sheets node that logs the `videoPrompt` and `socialMediaText`. |\n| `Generate an image` | Gemini node that creates the image based on the `videoPrompt`. |\n| `Send a photo message` | Sends the generated image to Telegram for review. |\n| `Send message and wait for response` | Telegram node that waits for your response to the image (e.g., \"Good?\" / \"Approve\"). |\n| `Upload image1` | Temporarily saves the generated image to Google Drive. |\n| `Download image from Drive` | Downloads the image back from Drive. |\n| `If1` | IF node that checks if the image was approved in the previous step (`approved == true`). |\n\n#### 4. Upload & Publishing (Blotato)\nAfter final approval, the image is uploaded to Blotato, and post submissions for the social media platforms are created.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Upload media1` | Blotato Media node. Uploads the approved image as a media asset and returns a public `url`. |\n| `Create instagram Post` | Creates an Instagram post using the media URL and `socialMediaText`. |\n| `Create x post` | Creates an X (Twitter) post using the media URL and `socialMediaText`. |\n| `Create FB post` | Creates a Facebook post using the media URL and `socialMediaText`. |\n\n#### 5. Status Monitoring & Retry Loops (X, Facebook, Instagram)\nAn independent loop runs for each platform, polling Blotato until the post is either published or failed.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Wait`, `Wait1`, `Wait2` | Initial pauses after post creation. |\n| `Check Post Status`, `Get post1`, `Check Post Status1` | Blotato Get operations to fetch the current status of the post. |\n| `Published to X?`, `Published to Facebook?`, `Published to Instagram?` | IF nodes checking for the `\"published\"` status. |\n| `Confirm publishing to X`, `Confirm publishing to Facebook`, `Confirm publishing to Instagram` | Telegram nodes that notify you of successful publication (often including the post link). |\n| `In Progress?`, `In Progress?1`, `In Progress?2` | IF nodes that check for `\"in-progress\"` status and loop back to the Wait nodes (`Give Blotat other 5s`). |\n| `Send X Error Message`, `Send Facebook Error Message`, `Send Instagram Error Message` | Telegram nodes that notify you if a failure occurs. |\n\n---\n\n### üõ†Ô∏è Personalizing Your Content Bot\n\nThe workflow is highly adaptable to your personal brand and platform preferences:\n\n1.  **Tweak the AI Prompt & Behavior:**\n    * **Where:** In the **`AI Agent`** node, within the **System Message**.\n    * **Options:** Change the tone (casual, professional, humorous) and the level of detail required for the prompt generation or the social media captions.\n2.  **Change Gemini Model or Image Options:**\n    * **Where:** In the **`Generate an image`** node.\n    * **Options:** Swap the model or adjust image options like **Aspect Ratio** or **Style** based on Gemini's API capabilities.\n3.  **Modify Which Platforms You Post To:**\n    * **Where:** In the Blotato nodes: **`Create instagram Post`**, **`Create x post`**, **`Create FB post`**.\n    * **Options:** Disable or delete branches for unused platforms, or add new platforms supported by Blotato.",
  "featuredImage": "/data/workflows/11138/11138.webp",
  "author": {
    "id": 101,
    "slug": "ferasdabour",
    "name": "Feras Dabour",
    "avatar": ""
  },
  "categories": [
    "Social Media",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 572,
  "downloads": 57,
  "createdAt": "2025-11-22T15:51:48.706Z",
  "updatedAt": "2026-01-16T09:07:40.835Z",
  "publishedAt": "2025-11-22T15:51:48.706Z",
  "nodes": 52,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11138",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Generate AI photos with Gemini & auto-post to FB, Instagram & X with approval",
    "workflowName": "Generate AI photos with Gemini & auto-post to FB, Instagram & X with approval",
    "description": "## Social Media Foto Creation Bot with Approval Loop\n**Create & Share AI Photos with Telegram, Gemini & Post to Facebook, Instagram & X**\n\n**Description**\nThis n8n workflow turns your Telegram messenger into a complete **AI Photo Content Pipeline**. You send your photo idea as a text or voice message to a Telegram bot, collaborate with an AI to refine the prompt and social media caption, let Gemini generate the image, and then automatically publish it after your approval to **Facebook, Instagram, and X (Twitter)** ‚Äì including status tracking and Telegram confirmations.\n\n---\n\n### What You Need to Get Started\nThis workflow connects several external services. You will need the following credentials:\n\n* **Telegram Bot API Key**\n    * Create a bot via **BotFather** and copy the bot token.\n    * This is used by the `Listen for incoming events` and other Telegram nodes.\n* **OpenAI API Key**\n    * Required for **Speech to Text** (OpenAI Whisper) to transcribe voice notes.\n    * Used by the AI Agent model (`OpenAI Chat Model`) for prompt creation.\n* **Google Gemini API Key**\n    * Used by the `Generate an image` node (model: `models/gemini-2.5-flash-image`) to create the AI image.\n* **Google Drive & Sheets Access**\n    * The generated image is temporarily stored in a Google Drive folder (`Upload image1`) and later retrieved by Blotato.\n    * Prompts and post texts are logged to Google Sheets (`Save Prompt & Post-Text`) for tracking.\n* **Blotato API Key**\n    * The layer for social media publishing.\n    * Uploads the image as a media asset (`Upload media1`) and creates posts for **Facebook, Instagram, and X**.\n\n---\n\n### How the Workflow Operates ‚Äì Step by Step\n\n#### 1. Input & Initial Processing (Telegram + Voice Handling)\nThis phase receives your messages and prepares the input for the AI.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Listen for incoming events` | Telegram Trigger node that starts the workflow on any incoming message. |\n| `Voice or Text` | Set node that structures the incoming message into a unified `text` field. |\n| `A Voice?` | IF node that checks if the message is a voice note. |\n| `Get Voice File` | If voice is detected, this downloads the audio file from Telegram. |\n| `Speech to Text` | Uses OpenAI Whisper to convert the voice note into a text transcript. |\n\nThe output of this stage is always a clean text string containing your image idea.\n\n#### 2. AI Core & Refinement Loop (Prompt + Caption via AI)\nHere, the AI drafts the image prompt (for Gemini) and the social media caption (for all platforms) and enters an approval loop with you.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `AI Agent` | Central logic agent. Creates a `videoPrompt` (used for image generation) and `socialMediaText` based on your idea, and asks for feedback. |\n| `OpenAI Chat Model` | The LLM backing the agent (e.g., GPT-4.1-mini). |\n| `Window Buffer Memory` | Stores recent turns, allowing the agent to maintain context during revisions. |\n| `Send questions or proposal to user` | Sends the AI's suggestion for review back to you. |\n| `Approved from user?` | IF node that checks if the output is the **approved JSON** (meaning you replied with \"ok\" or \"approved\"). |\n| `Parse AI Output` | Code node that extracts the `videoPrompt` and `socialMediaText` fields from the agent‚Äôs final JSON output. |\n\n#### 3. Content Generation & Final Approval\nOnce the prompt and caption are set, the image is created and sent to you for final approval before publishing.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Inform user about processing` | Telegram node to confirm: \"Okay. Your image is being prepared now...\" |\n| `Save Prompt & Post-Text` | Google Sheets node that logs the `videoPrompt` and `socialMediaText`. |\n| `Generate an image` | Gemini node that creates the image based on the `videoPrompt`. |\n| `Send a photo message` | Sends the generated image to Telegram for review. |\n| `Send message and wait for response` | Telegram node that waits for your response to the image (e.g., \"Good?\" / \"Approve\"). |\n| `Upload image1` | Temporarily saves the generated image to Google Drive. |\n| `Download image from Drive` | Downloads the image back from Drive. |\n| `If1` | IF node that checks if the image was approved in the previous step (`approved == true`). |\n\n#### 4. Upload & Publishing (Blotato)\nAfter final approval, the image is uploaded to Blotato, and post submissions for the social media platforms are created.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Upload media1` | Blotato Media node. Uploads the approved image as a media asset and returns a public `url`. |\n| `Create instagram Post` | Creates an Instagram post using the media URL and `socialMediaText`. |\n| `Create x post` | Creates an X (Twitter) post using the media URL and `socialMediaText`. |\n| `Create FB post` | Creates a Facebook post using the media URL and `socialMediaText`. |\n\n#### 5. Status Monitoring & Retry Loops (X, Facebook, Instagram)\nAn independent loop runs for each platform, polling Blotato until the post is either published or failed.\n\n| Node Name | Role in Workflow |\n| :--- | :--- |\n| `Wait`, `Wait1`, `Wait2` | Initial pauses after post creation. |\n| `Check Post Status`, `Get post1`, `Check Post Status1` | Blotato Get operations to fetch the current status of the post. |\n| `Published to X?`, `Published to Facebook?`, `Published to Instagram?` | IF nodes checking for the `\"published\"` status. |\n| `Confirm publishing to X`, `Confirm publishing to Facebook`, `Confirm publishing to Instagram` | Telegram nodes that notify you of successful publication (often including the post link). |\n| `In Progress?`, `In Progress?1`, `In Progress?2` | IF nodes that check for `\"in-progress\"` status and loop back to the Wait nodes (`Give Blotat other 5s`). |\n| `Send X Error Message`, `Send Facebook Error Message`, `Send Instagram Error Message` | Telegram nodes that notify you if a failure occurs. |\n\n---\n\n### üõ†Ô∏è Personalizing Your Content Bot\n\nThe workflow is highly adaptable to your personal brand and platform preferences:\n\n1.  **Tweak the AI Prompt & Behavior:**\n    * **Where:** In the **`AI Agent`** node, within the **System Message**.\n    * **Options:** Change the tone (casual, professional, humorous) and the level of detail required for the prompt generation or the social media captions.\n2.  **Change Gemini Model or Image Options:**\n    * **Where:** In the **`Generate an image`** node.\n    * **Options:** Swap the model or adjust image options like **Aspect Ratio** or **Style** based on Gemini's API capabilities.\n3.  **Modify Which Platforms You Post To:**\n    * **Where:** In the Blotato nodes: **`Create instagram Post`**, **`Create x post`**, **`Create FB post`**.\n    * **Options:** Disable or delete branches for unused platforms, or add new platforms supported by Blotato.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 3"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Listen for incoming events",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Speech to Text",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Voice or Text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Get Voice File",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Parse AI Output",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Window Buffer Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Upload media1",
      "type": "@blotato/n8n-nodes-blotato.blotato",
      "role": "blotato",
      "configDescription": "Version 2"
    },
    {
      "name": "Get post1",
      "type": "@blotato/n8n-nodes-blotato.blotato",
      "role": "blotato",
      "configDescription": "Version 2"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Wait1",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "In Progress?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Give Blotat other 5s :)",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "In Progress?1",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "A Voice?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Send questions or proposal to user",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Approved from user?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Inform user about processing",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Save Prompt & Post-Text",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Check Post Status",
      "type": "@blotato/n8n-nodes-blotato.blotato",
      "role": "blotato",
      "configDescription": "Version 2"
    },
    {
      "name": "Give Blotat more time",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Published to Instagram?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Confirm publishing to Instagram",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send Instagram Error Message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Create x post",
      "type": "@blotato/n8n-nodes-blotato.blotato",
      "role": "blotato",
      "configDescription": "Version 2"
    },
    {
      "name": "Generate an image",
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "role": "googleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Send a photo message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send message and wait for response",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Upload image1",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Download image from Drive",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "If1",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Wait2",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "In Progress?2",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Give Blotat other 5s :)1",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Check Post Status1",
      "type": "@blotato/n8n-nodes-blotato.blotato",
      "role": "blotato",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Create instagram Post",
      "type": "@blotato/n8n-nodes-blotato.blotato",
      "role": "blotato",
      "configDescription": "Version 2"
    },
    {
      "name": "Create FB post",
      "type": "@blotato/n8n-nodes-blotato.blotato",
      "role": "blotato",
      "configDescription": "Version 2"
    },
    {
      "name": "Published to Facebook ?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Send Facebook Error Message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Confirm publishing to Facebook",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Published to X?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Confirm publishing to X",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send X Error Message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}