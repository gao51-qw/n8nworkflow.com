{
  "id": 9157,
  "slug": "9157",
  "title": "Ai-powered email triage & auto-response system with OpenAI agents & Gmail",
  "description": "# AI Email Dispatcher: Classify, Process, and Route Emails with Multiple Agents\n\nThis n8n template automatically classifies incoming emails (Sales, Support, Internal, Finance, Promotions) and routes them to a dedicated **OpenAI LLM Agent** for processing. Depending on the category, the agent will then:\n\n* **Internal/Customer Support:** Draft a reply and send it.\n* **Sales/Finance/Promotions:** Generate a summary, notification, or draft reply for a human to review.\n\nThis is the ultimate workflow for managing a high volume of emails, ensuring every message gets a fast, appropriate, and structured AI-powered response or initial analysis.\n\n## How it works\n\n* The **Gmail Trigger** node monitors your inbox for unread emails.\n* The **Text Classifier** node uses AI to read the email body and subject to categorize it as Internal, Customer Support, Sales, Promotions, or Admin/Finance.\n* The workflow then uses a **Split In Batches** node and multiple **If** nodes to send the email data to a specific, specialized **OpenAI Agent** (LLM node) based on the classification.\n* Each AI Agent has a custom system prompt (e.g., \"Customer Support Agent,\" \"Promotions Analyst\") to ensure it processes the email with the right rules, tone, and output format.\n* Finally, the workflow either automatically **replies** via Gmail (for Internal and Support) or creates a **draft/summary** and sends a **notification** (for Sales, Finance, and Promotions) for human review.\n\n## Set up steps\n\nSetting up the accounts and nodes should take about **10â€“15 minutes**.\n\n1.  **Gmail Account:** You'll need to set up two Gmail credentials for the workflow:\n    * One for the **Gmail Trigger** to watch for new unread emails.\n    * A second one for the **Gmail** action nodes to label, draft, and reply to messages.\n2.  **OpenAI Account:** Connect your **OpenAI API Key** to the five different LLM Agent nodes.\n3.  **Telegram/Slack:** Set up your Telegram or Slack credentials to receive the 'New Sales Opportunity' and 'New Finance' notifications.\n4.  **Labels in Gmail:** Before activating the workflow, make sure you have created the necessary labels in your Gmail account for the classifier (Internal, Customer Support, Promotions, Admin/Finance, Sales Opportunity).\n5.  **Review Agent Prompts:** The instructions and logic for each AI Agent are in the system messages. You might want to review and customize these prompts to match your specific business rules and tone.\n\n## Requirements\n\n* **Gmail** Account\n* **OpenAI** Account (or another LLM provider for the agents)\n* **Telegram** (or Slack/other notification tool of your choice)\n\n## Customising this workflow\n\nYou can easily adapt this template to suit your needs!\n\n* **New Categories:** Modify the **Text Classifier** node to add or remove categories (e.g., \"Job Applications,\" \"Partnerships\"). You would then add a new LLM Agent and routing logic for the new category.\n* **Different LLMs:** You can swap the OpenAI nodes for any other LLM service supported by n8n, such as **Gemini** or **Anthropic Claude**, by simply changing the node type or model ID.\n* **More Actions:** Instead of just sending a notification to Telegram, you could modify the logic to create a task in **ClickUp**, a lead in **Salesforce**, or an entry in a **Google Sheet** when a \"Sales Opportunity\" email is identified. ðŸ“¬âœ¨",
  "featuredImage": "/data/workflows/9157/9157.webp",
  "author": {
    "id": 101,
    "slug": "abdosman06",
    "name": "Abdullahi Ahmed",
    "avatar": ""
  },
  "categories": [
    "Ticket Management",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 556,
  "downloads": 55,
  "createdAt": "2025-10-01T15:02:27.867Z",
  "updatedAt": "2026-01-16T08:59:18.135Z",
  "publishedAt": "2025-10-01T15:02:27.867Z",
  "nodes": 68,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9157",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Ai-powered email triage & auto-response system with OpenAI agents & Gmail",
    "workflowName": "Ai-powered email triage & auto-response system with OpenAI agents & Gmail",
    "description": "# AI Email Dispatcher: Classify, Process, and Route Emails with Multiple Agents\n\nThis n8n template automatically classifies incoming emails (Sales, Support, Internal, Finance, Promotions) and routes them to a dedicated **OpenAI LLM Agent** for processing. Depending on the category, the agent will then:\n\n* **Internal/Customer Support:** Draft a reply and send it.\n* **Sales/Finance/Promotions:** Generate a summary, notification, or draft reply for a human to review.\n\nThis is the ultimate workflow for managing a high volume of emails, ensuring every message gets a fast, appropriate, and structured AI-powered response or initial analysis.\n\n## How it works\n\n* The **Gmail Trigger** node monitors your inbox for unread emails.\n* The **Text Classifier** node uses AI to read the email body and subject to categorize it as Internal, Customer Support, Sales, Promotions, or Admin/Finance.\n* The workflow then uses a **Split In Batches** node and multiple **If** nodes to send the email data to a specific, specialized **OpenAI Agent** (LLM node) based on the classification.\n* Each AI Agent has a custom system prompt (e.g., \"Customer Support Agent,\" \"Promotions Analyst\") to ensure it processes the email with the right rules, tone, and output format.\n* Finally, the workflow either automatically **replies** via Gmail (for Internal and Support) or creates a **draft/summary** and sends a **notification** (for Sales, Finance, and Promotions) for human review.\n\n## Set up steps\n\nSetting up the accounts and nodes should take about **10â€“15 minutes**.\n\n1.  **Gmail Account:** You'll need to set up two Gmail credentials for the workflow:\n    * One for the **Gmail Trigger** to watch for new unread emails.\n    * A second one for the **Gmail** action nodes to label, draft, and reply to messages.\n2.  **OpenAI Account:** Connect your **OpenAI API Key** to the five different LLM Agent nodes.\n3.  **Telegram/Slack:** Set up your Telegram or Slack credentials to receive the 'New Sales Opportunity' and 'New Finance' notifications.\n4.  **Labels in Gmail:** Before activating the workflow, make sure you have created the necessary labels in your Gmail account for the classifier (Internal, Customer Support, Promotions, Admin/Finance, Sales Opportunity).\n5.  **Review Agent Prompts:** The instructions and logic for each AI Agent are in the system messages. You might want to review and customize these prompts to match your specific business rules and tone.\n\n## Requirements\n\n* **Gmail** Account\n* **OpenAI** Account (or another LLM provider for the agents)\n* **Telegram** (or Slack/other notification tool of your choice)\n\n## Customising this workflow\n\nYou can easily adapt this template to suit your needs!\n\n* **New Categories:** Modify the **Text Classifier** node to add or remove categories (e.g., \"Job Applications,\" \"Partnerships\"). You would then add a new LLM Agent and routing logic for the new category.\n* **Different LLMs:** You can swap the OpenAI nodes for any other LLM service supported by n8n, such as **Gemini** or **Anthropic Claude**, by simply changing the node type or model ID.\n* **More Actions:** Instead of just sending a notification to Telegram, you could modify the logic to create a task in **ClickUp**, a lead in **Salesforce**, or an entry in a **Google Sheet** when a \"Sales Opportunity\" email is identified. ðŸ“¬âœ¨",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking â€˜Execute workflowâ€™",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Message a model",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Send a message",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Text Classifier",
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "role": "textClassifier",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Add Label: Internal",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Add Label: Customer Support",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Add Label: Promotions",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Add Label: Admin/Finance",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Add Label: Sales Opportunities",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Gmail3",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gmail4",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gmail Trigger1",
      "type": "n8n-nodes-base.gmailTrigger",
      "role": "gmailTrigger",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Customer Support Agent",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Internal Agent",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Promotions Analyst Agent",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Finance & Billing Assistant Agent",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Sales Agent",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Gmail1",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gmail5",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Finance & Billing Assistant notifier",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sales Notifier",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Internal notifier",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Customer Support notifier",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Promotions Analyst Notifier",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Gmail Trigger2",
      "type": "n8n-nodes-base.gmailTrigger",
      "role": "gmailTrigger",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Notification clasifier",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Notification clasifier5",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "OpenRouter Chat Model4",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Gemini Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Notification clasifier6",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "OpenRouter Chat Model5",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Gemini Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Mark as read",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Mark as read3",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Mark as read4",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Mark as read1",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "mark as read",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Google Drive Trigger",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "role": "googleDriveTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Delete Duplicated",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Download file",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Pinecone Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "role": "vectorStorePinecone",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Drive Trigger1",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "role": "googleDriveTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Pinecone Vector Store1",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "role": "vectorStorePinecone",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Pinecone Vector Store2",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "role": "vectorStorePinecone",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Pinecone Vector Store3",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "role": "vectorStorePinecone",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Pinecone Vector Store4",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "role": "vectorStorePinecone",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Pinecone Vector Store5",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "role": "vectorStorePinecone",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Append row in sheet4",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Log information into sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Log information into sheet1",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Log information into sheet2",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Log information into sheet3",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Error Trigger",
      "type": "n8n-nodes-base.errorTrigger",
      "role": "errorTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Workflow Error Message1",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "log error Data1",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    }
  ]
}