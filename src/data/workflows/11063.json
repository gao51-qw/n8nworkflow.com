{
  "id": 11063,
  "slug": "11063",
  "title": "AI-powered price watchdog: competitor monitoring & alerting (Decodo & Gemini)",
  "description": "**Never miss a competitor price change again.**\n\nThis advanced workflow automates the most difficult aspect of market monitoring: intelligently extracting structured pricing data from complex, dynamic competitor websites and comparing it against your historical baseline. It sends instant, conditional alerts only when a significant price shift is detected.\n\nThe workflow uses **Decodo** for dynamic scraping, **Gemini** for reliable data parsing, and **Google Sheets** for robust historical state management.\n\n### ‚ú® Key Features\n* **AI-Powered Extraction:** Uses **Gemini 2.5 Flash** to analyze raw, noisy website HTML and output a clean JSON array of plan names, prices, and features, bypassing brittle CSS selectors.\n* **Historical Comparison:** Automatically retrieves the price from the previous workflow run and calculates the percentage difference (diff) for every single plan item.\n* **Edge Case Handling:** Includes specific code logic to prevent errors and flag crucial events like a **\"Free-to-Paid\"** plan transition (division by zero).\n* **Conditional Alerting:** Sends immediate Slack notifications only when the price change exceeds your predefined percentage threshold.\n* **State Management:** Uses Google Sheets to automatically **shift data** (Current Price $\\rightarrow$ Old Price) to maintain the historical baseline for the next scheduled execution.\n\n### ‚öôÔ∏è How it Works (The Monitoring Loop)\n\n1.  **Setup & Sourcing:** The workflow is executed on a schedule, defining the global alert threshold and retrieving the list of target URLs from a Google Sheet.\n2.  **Scraping (Dynamic):** **Decodo** runs with **JavaScript rendering ON** to fetch the complete, dynamic HTML of the pricing page.\n3.  **AI Structuring:** **Gemini** receives the raw HTML and uses a strict System Prompt to extract a clean JSON array of all pricing plans.\n4.  **Comparison & Calculation:** A **Code Node** parses the current plan list and the list from the previous run (stored in Sheets). It calculates the percentage change for every matching plan.\n5.  **Alert Decision:** An **If Node** checks the calculated change against the threshold. If the condition is met, the filtered alert proceeds to Slack.\n6.  **Data Shift & Log:** The final **Sheets Update** node shifts the current plan data to the \"Last Plans\" column and moves the previous \"Last Plans\" to the \"Old Plans\" column, setting the new baseline for the next scheduled check.\n---\n\n### üì• Decodo Node Installation\n\nThe Decodo node is used three times in this workflow for precision scraping and searching.\n\n1.  **Find the Node:** Click the **+** button in your n8n canvas.\n2.  **Search:** Search for the **`Decodo`** node and select it.\n3.  **Credentials:** When configuring the first Decodo node, use your API key (obtained with the 80% discount coupon).\n-----\n\n### üéÅ Exclusive Deal for n8n Users\n\nTo run this workflow, you require a robust scraping provider. We have secured a massive discount for Decodo users:\n\n  * **Get 80% OFF** the **23k Advanced Scraping API** plan.\n  * **Coupon Code:** `ATTAN8N`\n  * **Sign Up Here:** [**Claim 80% Discount on Decodo**](https://visit.decodo.com/c/6679292/3071239/17480)\n-----\n### üõ†Ô∏è Setup Instructions\n\n1.  **Credentials:** Obtain API keys for **Decodo** (using the coupon below), **Google Sheets**, and **Slack**.\n2.  **Google Sheets Setup:** Create a sheet with the following required columns for tracking (one row per URL):\n    * `Name`\n    * `URL`\n    * `Old Plans` (JSON String)\n    * `Last Plans` (JSON String)\n    * `Updated At` (Date)\n3.  **Global Configuration:** Open the **`Config: Alert Parameters`** node to set your `alert_threshold` (e.g., `10`).\n\nI understand. To complete the final template description for your **Competitor Price Monitoring** workflow, here is the dedicated **How to Adapt the Template** section, focusing on functional changes a user can make for advanced monitoring.\n\n***\n\n### ‚ûï How to Adapt the Template\n\nThe workflow is currently configured for maximum efficiency and stability. To expand its functionality or change its dependencies, you can implement the following adaptations:\n\n* **Change Database for Storage:** Replace the **Google Sheets** nodes with **Airtable** or **Notion** nodes for historical storage. Since your comparison logic relies on the JSON string being saved and retrieved, you will only need to change the read/write operations (the Code logic remains the same).\n* **Change Alert Channel:** Easily swap the **Slack** node with a **Gmail**, **Discord**, or **Pushover** node to deliver critical price alerts to a different team or application.\n* **Dynamic Thresholds:** Modify the **`Config: Alert Parameters`** to include separate fields for price *increases* (e.g., `alert_increase_threshold`) and price *decreases* (e.g., `alert_decrease_threshold`), allowing you to track competitor sales differently than price hikes.\n* **Advanced Price Filtering:** Adjust the code logic in **`Code: Isolate Pricing Section`** to target specific currency symbols (e.g., `‚Ç¨`, `¬£`) or to filter out prices that appear to be marked as promotional (e.g., text containing \"SALE\" or \"Discount\").\n* **Add Advanced Alert Reporting:** Instead of sending a simple Slack message, use the full list of `price_diffs` (which contains all plans) to generate a consolidated daily **CSV report** or a professional **HTML email** summarizing all movements, even those below the alert threshold.\n",
  "featuredImage": "/data/workflows/11063/11063.webp",
  "author": {
    "id": 101,
    "slug": "attakhalighi",
    "name": "Atta",
    "avatar": ""
  },
  "categories": [
    "Market Research",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 142,
  "downloads": 14,
  "createdAt": "2025-11-20T22:32:05.069Z",
  "updatedAt": "2026-01-16T09:07:21.064Z",
  "publishedAt": "2025-11-20T22:32:05.069Z",
  "nodes": 27,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11063",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "AI-powered price watchdog: competitor monitoring & alerting (Decodo & Gemini)",
    "workflowName": "AI-powered price watchdog: competitor monitoring & alerting (Decodo & Gemini)",
    "description": "**Never miss a competitor price change again.**\n\nThis advanced workflow automates the most difficult aspect of market monitoring: intelligently extracting structured pricing data from complex, dynamic competitor websites and comparing it against your historical baseline. It sends instant, conditional alerts only when a significant price shift is detected.\n\nThe workflow uses **Decodo** for dynamic scraping, **Gemini** for reliable data parsing, and **Google Sheets** for robust historical state management.\n\n### ‚ú® Key Features\n* **AI-Powered Extraction:** Uses **Gemini 2.5 Flash** to analyze raw, noisy website HTML and output a clean JSON array of plan names, prices, and features, bypassing brittle CSS selectors.\n* **Historical Comparison:** Automatically retrieves the price from the previous workflow run and calculates the percentage difference (diff) for every single plan item.\n* **Edge Case Handling:** Includes specific code logic to prevent errors and flag crucial events like a **\"Free-to-Paid\"** plan transition (division by zero).\n* **Conditional Alerting:** Sends immediate Slack notifications only when the price change exceeds your predefined percentage threshold.\n* **State Management:** Uses Google Sheets to automatically **shift data** (Current Price $\\rightarrow$ Old Price) to maintain the historical baseline for the next scheduled execution.\n\n### ‚öôÔ∏è How it Works (The Monitoring Loop)\n\n1.  **Setup & Sourcing:** The workflow is executed on a schedule, defining the global alert threshold and retrieving the list of target URLs from a Google Sheet.\n2.  **Scraping (Dynamic):** **Decodo** runs with **JavaScript rendering ON** to fetch the complete, dynamic HTML of the pricing page.\n3.  **AI Structuring:** **Gemini** receives the raw HTML and uses a strict System Prompt to extract a clean JSON array of all pricing plans.\n4.  **Comparison & Calculation:** A **Code Node** parses the current plan list and the list from the previous run (stored in Sheets). It calculates the percentage change for every matching plan.\n5.  **Alert Decision:** An **If Node** checks the calculated change against the threshold. If the condition is met, the filtered alert proceeds to Slack.\n6.  **Data Shift & Log:** The final **Sheets Update** node shifts the current plan data to the \"Last Plans\" column and moves the previous \"Last Plans\" to the \"Old Plans\" column, setting the new baseline for the next scheduled check.\n---\n\n### üì• Decodo Node Installation\n\nThe Decodo node is used three times in this workflow for precision scraping and searching.\n\n1.  **Find the Node:** Click the **+** button in your n8n canvas.\n2.  **Search:** Search for the **`Decodo`** node and select it.\n3.  **Credentials:** When configuring the first Decodo node, use your API key (obtained with the 80% discount coupon).\n-----\n\n### üéÅ Exclusive Deal for n8n Users\n\nTo run this workflow, you require a robust scraping provider. We have secured a massive discount for Decodo users:\n\n  * **Get 80% OFF** the **23k Advanced Scraping API** plan.\n  * **Coupon Code:** `ATTAN8N`\n  * **Sign Up Here:** [**Claim 80% Discount on Decodo**](https://visit.decodo.com/c/6679292/3071239/17480)\n-----\n### üõ†Ô∏è Setup Instructions\n\n1.  **Credentials:** Obtain API keys for **Decodo** (using the coupon below), **Google Sheets**, and **Slack**.\n2.  **Google Sheets Setup:** Create a sheet with the following required columns for tracking (one row per URL):\n    * `Name`\n    * `URL`\n    * `Old Plans` (JSON String)\n    * `Last Plans` (JSON String)\n    * `Updated At` (Date)\n3.  **Global Configuration:** Open the **`Config: Alert Parameters`** node to set your `alert_threshold` (e.g., `10`).\n\nI understand. To complete the final template description for your **Competitor Price Monitoring** workflow, here is the dedicated **How to Adapt the Template** section, focusing on functional changes a user can make for advanced monitoring.\n\n***\n\n### ‚ûï How to Adapt the Template\n\nThe workflow is currently configured for maximum efficiency and stability. To expand its functionality or change its dependencies, you can implement the following adaptations:\n\n* **Change Database for Storage:** Replace the **Google Sheets** nodes with **Airtable** or **Notion** nodes for historical storage. Since your comparison logic relies on the JSON string being saved and retrieved, you will only need to change the read/write operations (the Code logic remains the same).\n* **Change Alert Channel:** Easily swap the **Slack** node with a **Gmail**, **Discord**, or **Pushover** node to deliver critical price alerts to a different team or application.\n* **Dynamic Thresholds:** Modify the **`Config: Alert Parameters`** to include separate fields for price *increases* (e.g., `alert_increase_threshold`) and price *decreases* (e.g., `alert_decrease_threshold`), allowing you to track competitor sales differently than price hikes.\n* **Advanced Price Filtering:** Adjust the code logic in **`Code: Isolate Pricing Section`** to target specific currency symbols (e.g., `‚Ç¨`, `¬£`) or to filter out prices that appear to be marked as promotional (e.g., text containing \"SALE\" or \"Discount\").\n* **Add Advanced Alert Reporting:** Instead of sending a simple Slack message, use the full list of `price_diffs` (which contains all plans) to generate a consolidated daily **CSV report** or a professional **HTML email** summarizing all movements, even those below the alert threshold.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Start Workflow (Manual Run)",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Config: Alert Parameters",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Decodo: Fetch Full HTML",
      "type": "@decodo/n8n-nodes-decodo.decodo",
      "role": "decodo",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Discard Error Item",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Update row in sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "If: Alerts to Send?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Split Alerts for Notification",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Send Competitor Price Alert",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Sheets: Get Competitor List",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Code: Filter HTML Noise",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "If: Price Parsed Successfully?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "If: History Exists?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Loop Monitor Each Plan",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "AI Agent: Extract Plans",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 3"
    },
    {
      "name": "Code: Price Diff & Filter",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    }
  ]
}