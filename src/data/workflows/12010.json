{
  "id": 12010,
  "slug": "12010",
  "title": "Track & alert public transport delays using ScrapeGraphAI, Teams and Todoist",
  "description": "# Public Transport Delay Tracker with Microsoft Teams and Todoist\n\n**⚠️ COMMUNITY TEMPLATE DISCLAIMER: This is a community-contributed template that uses ScrapeGraphAI (a community node). Please ensure you have the ScrapeGraphAI community node installed in your n8n instance before using this template.**\n\nThis workflow continuously monitors public-transportation websites and apps for real-time schedule changes and delays, then posts an alert to a Microsoft Teams channel and creates a follow-up task in Todoist. It is ideal for commuters or travel coordinators who need instant, actionable updates about transit disruptions.\n\n## Pre-conditions/Requirements\n\n### Prerequisites\n- An n8n instance (self-hosted or n8n cloud)\n- ScrapeGraphAI community node installed\n- Microsoft Teams account with permission to create an Incoming Webhook\n- Todoist account with at least one project\n- Access to target transit authority websites or APIs\n\n### Required Credentials\n- **ScrapeGraphAI API Key** – Enables scraping of transit data\n- **Microsoft Teams Webhook URL** – Sends messages to a specific channel\n- **Todoist API Token** – Creates follow-up tasks\n- *(Optional)* Transit API key if you are using a protected data source\n\n### Specific Setup Requirements\n| Resource                 | What you need                                                 |\n|--------------------------|---------------------------------------------------------------|\n| Teams Channel            | Create a channel → Add “Incoming Webhook” → copy the URL      |\n| Todoist Project          | Create “Transit Alerts” project and note its Project ID       |\n| Transit URLs/APIs        | Confirm the URLs/pages contain the schedule & delay elements  |\n\n## How it works\n\nThis workflow continuously monitors public-transportation websites and apps for real-time schedule changes and delays, then posts an alert to a Microsoft Teams channel and creates a follow-up task in Todoist. It is ideal for commuters or travel coordinators who need instant, actionable updates about transit disruptions.\n\n## Key Steps:\n- **Webhook (Trigger)**: Starts the workflow on a schedule or via HTTP call.\n- **Set Node**: Defines target transit URLs and parsing rules.\n- **ScrapeGraphAI Node**: Scrapes live schedule and delay data.\n- **Code Node**: Normalizes scraped data, converts times, and flags delays.\n- **IF Node**: Determines if a delay exceeds the user-defined threshold.\n- **Microsoft Teams Node**: Sends formatted alert message to the selected Teams channel.\n- **Todoist Node**: Creates a “Check alternate route” task with due date equal to the delayed departure time.\n- **Sticky Note Node**: Holds a blueprint-level explanation for future editors.\n\n## Set up steps\n\n**Setup Time: 15–20 minutes**\n\n1. **Install community node**: In n8n, go to “Manage Nodes” → “Install” → search for “ScrapeGraphAI” → install and restart n8n.\n2. **Create Teams webhook**: In Microsoft Teams, open target channel → “Connectors” → “Incoming Webhook” → give it a name/icon → copy the URL.\n3. **Create Todoist API token**: Todoist → Settings → Integrations → copy your personal API token.\n4. **Add credentials in n8n**: Settings → Credentials → create new for ScrapeGraphAI, Microsoft Teams, and Todoist.\n5. **Import workflow template**: File → Import Workflow JSON → select this template.\n6. **Configure Set node**: Replace example transit URLs with those of your local transit authority.\n7. **Adjust delay threshold**: In the Code node, edit `const MAX_DELAY_MINUTES = 5;` as needed.\n8. **Activate workflow**: Toggle “Active”. Monitor executions to ensure messages and tasks are created.\n\n## Node Descriptions\n\n### Core Workflow Nodes:\n- **Webhook** – Triggers workflow on schedule or external HTTP request.\n- **Set** – Supplies list of URLs and scraping selectors.\n- **ScrapeGraphAI** – Scrapes timetable, status, and delay indicators.\n- **Code** – Parses results, converts to minutes, and builds payloads.\n- **IF** – Compares delay duration to threshold.\n- **Microsoft Teams** – Posts formatted adaptive-card-style message.\n- **Todoist** – Adds a task with priority and due date.\n- **Sticky Note** – Internal documentation inside the workflow canvas.\n\n### Data Flow:\n1. **Webhook** → **Set** → **ScrapeGraphAI** → **Code** → **IF**  \n   a. **IF (true branch)** → **Microsoft Teams** → **Todoist**  \n   b. **IF (false branch)** → (workflow ends)\n\n## Customization Examples\n\n### Change alert message formatting\n```javascript\n// In the Code node\nconst message = `⚠️ Delay Alert:\nRoute: ${item.route}\nExpected: ${item.scheduled}\nNew Time: ${item.newTime}\nDelay: ${item.delay} min\nLink: ${item.url}`;\nreturn [{ json: { message } }];\n```\n\n### Post to multiple Teams channels\n```javascript\n// Duplicate the Microsoft Teams node and reference a different credential\nitems.forEach(item =&gt; {\n  item.json.webhookUrl = $node[\"Set\"].json[\"secondaryChannelWebhook\"];\n});\nreturn items;\n```\n\n## Data Output Format\n\nThe workflow outputs structured JSON data:\n\n```json\n{\n  \"route\": \"Blue Line\",\n  \"scheduled\": \"2024-12-01T14:25:00Z\",\n  \"newTime\": \"2024-12-01T14:45:00Z\",\n  \"delay\": 20,\n  \"status\": \"Delayed\",\n  \"url\": \"https://transit.example.com/blue-line/status\"\n}\n```\n\n## Troubleshooting\n\n### Common Issues\n1. **Scraping returns empty data** – Verify CSS selectors/XPath in the Set node and ensure the target site hasn’t changed its markup.\n2. **Teams message not sent** – Check that the stored webhook URL is correct and the connector is still active.\n3. **Todoist task duplicated** – Add a unique key (e.g., route + timestamp) to avoid inserting duplicates.\n\n### Performance Tips\n- Limit the number of URLs per execution when monitoring many routes.\n- Cache previous scrape results to avoid hitting site rate limits.\n\n**Pro Tips:**\n- Use n8n’s built-in Cron instead of Webhook if you only need periodic polling.\n- Add a SplitInBatches node after scraping to process large route lists incrementally.\n- Enable execution logging to an external database for detailed audit trails.",
  "featuredImage": "/data/workflows/12010/12010.webp",
  "author": {
    "id": 101,
    "slug": "vinci-king-01",
    "name": "vinci-king-01",
    "avatar": ""
  },
  "categories": [
    "Personal Productivity",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 11,
  "downloads": 1,
  "createdAt": "2025-12-22T07:14:12.026Z",
  "updatedAt": "2026-01-16T09:10:58.500Z",
  "publishedAt": "2025-12-22T07:14:12.026Z",
  "nodes": 16,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/12010",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Track & alert public transport delays using ScrapeGraphAI, Teams and Todoist",
    "workflowName": "Track & alert public transport delays using ScrapeGraphAI, Teams and Todoist",
    "description": "# Public Transport Delay Tracker with Microsoft Teams and Todoist\n\n**⚠️ COMMUNITY TEMPLATE DISCLAIMER: This is a community-contributed template that uses ScrapeGraphAI (a community node). Please ensure you have the ScrapeGraphAI community node installed in your n8n instance before using this template.**\n\nThis workflow continuously monitors public-transportation websites and apps for real-time schedule changes and delays, then posts an alert to a Microsoft Teams channel and creates a follow-up task in Todoist. It is ideal for commuters or travel coordinators who need instant, actionable updates about transit disruptions.\n\n## Pre-conditions/Requirements\n\n### Prerequisites\n- An n8n instance (self-hosted or n8n cloud)\n- ScrapeGraphAI community node installed\n- Microsoft Teams account with permission to create an Incoming Webhook\n- Todoist account with at least one project\n- Access to target transit authority websites or APIs\n\n### Required Credentials\n- **ScrapeGraphAI API Key** – Enables scraping of transit data\n- **Microsoft Teams Webhook URL** – Sends messages to a specific channel\n- **Todoist API Token** – Creates follow-up tasks\n- *(Optional)* Transit API key if you are using a protected data source\n\n### Specific Setup Requirements\n| Resource                 | What you need                                                 |\n|--------------------------|---------------------------------------------------------------|\n| Teams Channel            | Create a channel → Add “Incoming Webhook” → copy the URL      |\n| Todoist Project          | Create “Transit Alerts” project and note its Project ID       |\n| Transit URLs/APIs        | Confirm the URLs/pages contain the schedule & delay elements  |\n\n## How it works\n\nThis workflow continuously monitors public-transportation websites and apps for real-time schedule changes and delays, then posts an alert to a Microsoft Teams channel and creates a follow-up task in Todoist. It is ideal for commuters or travel coordinators who need instant, actionable updates about transit disruptions.\n\n## Key Steps:\n- **Webhook (Trigger)**: Starts the workflow on a schedule or via HTTP call.\n- **Set Node**: Defines target transit URLs and parsing rules.\n- **ScrapeGraphAI Node**: Scrapes live schedule and delay data.\n- **Code Node**: Normalizes scraped data, converts times, and flags delays.\n- **IF Node**: Determines if a delay exceeds the user-defined threshold.\n- **Microsoft Teams Node**: Sends formatted alert message to the selected Teams channel.\n- **Todoist Node**: Creates a “Check alternate route” task with due date equal to the delayed departure time.\n- **Sticky Note Node**: Holds a blueprint-level explanation for future editors.\n\n## Set up steps\n\n**Setup Time: 15–20 minutes**\n\n1. **Install community node**: In n8n, go to “Manage Nodes” → “Install” → search for “ScrapeGraphAI” → install and restart n8n.\n2. **Create Teams webhook**: In Microsoft Teams, open target channel → “Connectors” → “Incoming Webhook” → give it a name/icon → copy the URL.\n3. **Create Todoist API token**: Todoist → Settings → Integrations → copy your personal API token.\n4. **Add credentials in n8n**: Settings → Credentials → create new for ScrapeGraphAI, Microsoft Teams, and Todoist.\n5. **Import workflow template**: File → Import Workflow JSON → select this template.\n6. **Configure Set node**: Replace example transit URLs with those of your local transit authority.\n7. **Adjust delay threshold**: In the Code node, edit `const MAX_DELAY_MINUTES = 5;` as needed.\n8. **Activate workflow**: Toggle “Active”. Monitor executions to ensure messages and tasks are created.\n\n## Node Descriptions\n\n### Core Workflow Nodes:\n- **Webhook** – Triggers workflow on schedule or external HTTP request.\n- **Set** – Supplies list of URLs and scraping selectors.\n- **ScrapeGraphAI** – Scrapes timetable, status, and delay indicators.\n- **Code** – Parses results, converts to minutes, and builds payloads.\n- **IF** – Compares delay duration to threshold.\n- **Microsoft Teams** – Posts formatted adaptive-card-style message.\n- **Todoist** – Adds a task with priority and due date.\n- **Sticky Note** – Internal documentation inside the workflow canvas.\n\n### Data Flow:\n1. **Webhook** → **Set** → **ScrapeGraphAI** → **Code** → **IF**  \n   a. **IF (true branch)** → **Microsoft Teams** → **Todoist**  \n   b. **IF (false branch)** → (workflow ends)\n\n## Customization Examples\n\n### Change alert message formatting\n```javascript\n// In the Code node\nconst message = `⚠️ Delay Alert:\nRoute: ${item.route}\nExpected: ${item.scheduled}\nNew Time: ${item.newTime}\nDelay: ${item.delay} min\nLink: ${item.url}`;\nreturn [{ json: { message } }];\n```\n\n### Post to multiple Teams channels\n```javascript\n// Duplicate the Microsoft Teams node and reference a different credential\nitems.forEach(item =&gt; {\n  item.json.webhookUrl = $node[\"Set\"].json[\"secondaryChannelWebhook\"];\n});\nreturn items;\n```\n\n## Data Output Format\n\nThe workflow outputs structured JSON data:\n\n```json\n{\n  \"route\": \"Blue Line\",\n  \"scheduled\": \"2024-12-01T14:25:00Z\",\n  \"newTime\": \"2024-12-01T14:45:00Z\",\n  \"delay\": 20,\n  \"status\": \"Delayed\",\n  \"url\": \"https://transit.example.com/blue-line/status\"\n}\n```\n\n## Troubleshooting\n\n### Common Issues\n1. **Scraping returns empty data** – Verify CSS selectors/XPath in the Set node and ensure the target site hasn’t changed its markup.\n2. **Teams message not sent** – Check that the stored webhook URL is correct and the connector is still active.\n3. **Todoist task duplicated** – Add a unique key (e.g., route + timestamp) to avoid inserting duplicates.\n\n### Performance Tips\n- Limit the number of URLs per execution when monitoring many routes.\n- Cache previous scrape results to avoid hitting site rate limits.\n\n**Pro Tips:**\n- Use n8n’s built-in Cron instead of Webhook if you only need periodic polling.\n- Add a SplitInBatches node after scraping to process large route lists incrementally.\n- Enable execution logging to an external database for detailed audit trails.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Webhook – Incoming Request",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Validate & Parse Request",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Generate Target URLs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Split URLs",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Scrape Schedules & Delays",
      "type": "n8n-nodes-scrapegraphai.scrapegraphAi",
      "role": "scrapegraphAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Clean & Enrich Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Delay > 0?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Prepare Teams Message",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send Teams Alert",
      "type": "n8n-nodes-base.microsoftTeams",
      "role": "microsoftTeams",
      "configDescription": "Version 2"
    },
    {
      "name": "Prepare Todoist Task",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Create Todoist Task",
      "type": "n8n-nodes-base.todoist",
      "role": "todoist",
      "configDescription": "Version 1"
    },
    {
      "name": "Workflow Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Trigger & Input",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Scraping & Transformation",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Conditional Logic & Storage",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Microsoft Teams Alerts",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}