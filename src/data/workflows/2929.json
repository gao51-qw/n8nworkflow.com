{
  "id": 2929,
  "slug": "2929",
  "title": "Smart email assistant: automate customer support with AI & Supabase",
  "description": "# Intelligent Email Support System with Vector Database\n\n## Overview\n\nThis **n8n workflow** automates email support using **AI and vector database technology** to provide smart, context-aware responses. It seamlessly integrates **email automation** and **document management**, ensuring efficient customer support.\n\n\n## üìå System Components\n\n### ‚úâÔ∏è Email Support System\n\n1. **Email Monitoring & Classification**\n\n   - Gmail trigger node monitoring inbox\n   - AI-powered email classification\n   - Intelligent routing (support vs non-support inquiries)\n\n2. **AI Response Generation**\n\n   - LangChain agent for response automation\n   - OpenAI integration for NLP-driven replies\n   - Vector-based knowledge retrieval\n   - Automated draft creation in Gmail\n\n3. **Vector Database System**\n\n   - Supabase vector store for document management\n   - OpenAI embeddings for vector conversion\n   - Fast and efficient similarity search\n\n### üìÇ Document Management System\n\n1. **Google Drive Integration**\n\n   - Monitors specific folders for new/updated files\n   - Automatic document processing\n   - Supports various file formats\n\n2. **Document Processing Pipeline**\n\n   - Auto file download & text extraction\n   - Smart text chunking for better indexing\n   - Embedding generation via OpenAI\n   - Storage in Supabase vector database\n\n## üîÑ Workflow Processes\n\n### üìß Email Support Flow\n\n1. Monitor Gmail inbox for new emails\n2. AI classification of incoming messages\n3. Route support emails to AI response generator\n4. Perform vector similarity search for knowledge retrieval\n5. Generate personalized AI-driven response\n6. Create email drafts in Gmail\n\n### üìÅ Document Management Flow\n\n1. Monitor Google Drive for new/updated files\n2. Auto-download and process documents\n3. Clean up outdated vector entries for updated files\n4. Extract and split document text efficiently\n5. Generate OpenAI embeddings\n6. Store processed data in Supabase vector DB\n\n## ‚öôÔ∏è Setup Instructions\n\n### 1Ô∏è‚É£ Prerequisites\n\n- **Supabase** account & project\n- **OpenAI API key**\n- **Gmail account** with OAuth2 setup\n- **Google Drive API** access\n- **n8n installation**\n\n### 2Ô∏è‚É£ Supabase Database Setup\n\n```sql\n-- Create the vector extension\ncreate extension if not exists vector;\n\n-- Create the documents table\ncreate table documents (\n  id bigserial primary key,\n  content text,\n  metadata jsonb,\n  embedding vector(1536)\n);\n\n-- Create an index for similarity search\ncreate index on documents using ivfflat (embedding vector_cosine_ops)\n  with (lists = 100);\n```\n\n### 3Ô∏è‚É£ Google Drive Setup\n\n- Create & configure two monitored folders:\n  - **RAG folder** for new documents\ndocuments\n- Assign correct folder permissions\n- Add folder IDs to the workflow\n\n### 4Ô∏è‚É£ Document Processing Configuration\n\n- Set up triggers for **file creation** and **file updates**\n- Configure text extraction:\n  - Define chunk size & overlap settings\n  - Set document metadata processing\n\n## üîç Maintenance & Optimization\n\n### üìå Regular Tasks\n\n- Monitor system performance\n- Update the knowledge base regularly\n- Review AI response quality\n- Optimize vector search parameters\n- Clean up outdated document embeddings\n\n### ‚úÖ Best Practices\n\n1. **Document Organization**\n\n   - Maintain structured folders & naming conventions\n   - Keep knowledge base content updated\n\n2. **System Optimization**\n\n   - Track AI classification accuracy\n   - Tune response times & chunk sizes\n   - Perform regular database maintenance\n\n### üõ†Ô∏è Troubleshooting\n\n1. **Email Issues**\n\n   - Verify Gmail API credentials\n   - Check AI service uptime\n   - Monitor classification performance\n\n2. **Document Processing Issues**\n\n   - Ensure correct file permissions\n   - Validate extraction & embedding processes\n   - Debug vector database insertions\n\n\n",
  "featuredImage": "/data/workflows/2929/2929.webp",
  "author": {
    "id": 101,
    "slug": "b4dr",
    "name": "Badr",
    "avatar": ""
  },
  "categories": [
    "Ticket Management",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 6516,
  "downloads": 651,
  "createdAt": "2025-02-18T00:07:16.517Z",
  "updatedAt": "2026-01-16T08:27:14.851Z",
  "publishedAt": "2025-02-18T00:07:16.517Z",
  "nodes": 23,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2929",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Smart email assistant: automate customer support with AI & Supabase",
    "workflowName": "Smart email assistant: automate customer support with AI & Supabase",
    "description": "# Intelligent Email Support System with Vector Database\n\n## Overview\n\nThis **n8n workflow** automates email support using **AI and vector database technology** to provide smart, context-aware responses. It seamlessly integrates **email automation** and **document management**, ensuring efficient customer support.\n\n\n## üìå System Components\n\n### ‚úâÔ∏è Email Support System\n\n1. **Email Monitoring & Classification**\n\n   - Gmail trigger node monitoring inbox\n   - AI-powered email classification\n   - Intelligent routing (support vs non-support inquiries)\n\n2. **AI Response Generation**\n\n   - LangChain agent for response automation\n   - OpenAI integration for NLP-driven replies\n   - Vector-based knowledge retrieval\n   - Automated draft creation in Gmail\n\n3. **Vector Database System**\n\n   - Supabase vector store for document management\n   - OpenAI embeddings for vector conversion\n   - Fast and efficient similarity search\n\n### üìÇ Document Management System\n\n1. **Google Drive Integration**\n\n   - Monitors specific folders for new/updated files\n   - Automatic document processing\n   - Supports various file formats\n\n2. **Document Processing Pipeline**\n\n   - Auto file download & text extraction\n   - Smart text chunking for better indexing\n   - Embedding generation via OpenAI\n   - Storage in Supabase vector database\n\n## üîÑ Workflow Processes\n\n### üìß Email Support Flow\n\n1. Monitor Gmail inbox for new emails\n2. AI classification of incoming messages\n3. Route support emails to AI response generator\n4. Perform vector similarity search for knowledge retrieval\n5. Generate personalized AI-driven response\n6. Create email drafts in Gmail\n\n### üìÅ Document Management Flow\n\n1. Monitor Google Drive for new/updated files\n2. Auto-download and process documents\n3. Clean up outdated vector entries for updated files\n4. Extract and split document text efficiently\n5. Generate OpenAI embeddings\n6. Store processed data in Supabase vector DB\n\n## ‚öôÔ∏è Setup Instructions\n\n### 1Ô∏è‚É£ Prerequisites\n\n- **Supabase** account & project\n- **OpenAI API key**\n- **Gmail account** with OAuth2 setup\n- **Google Drive API** access\n- **n8n installation**\n\n### 2Ô∏è‚É£ Supabase Database Setup\n\n```sql\n-- Create the vector extension\ncreate extension if not exists vector;\n\n-- Create the documents table\ncreate table documents (\n  id bigserial primary key,\n  content text,\n  metadata jsonb,\n  embedding vector(1536)\n);\n\n-- Create an index for similarity search\ncreate index on documents using ivfflat (embedding vector_cosine_ops)\n  with (lists = 100);\n```\n\n### 3Ô∏è‚É£ Google Drive Setup\n\n- Create & configure two monitored folders:\n  - **RAG folder** for new documents\ndocuments\n- Assign correct folder permissions\n- Add folder IDs to the workflow\n\n### 4Ô∏è‚É£ Document Processing Configuration\n\n- Set up triggers for **file creation** and **file updates**\n- Configure text extraction:\n  - Define chunk size & overlap settings\n  - Set document metadata processing\n\n## üîç Maintenance & Optimization\n\n### üìå Regular Tasks\n\n- Monitor system performance\n- Update the knowledge base regularly\n- Review AI response quality\n- Optimize vector search parameters\n- Clean up outdated document embeddings\n\n### ‚úÖ Best Practices\n\n1. **Document Organization**\n\n   - Maintain structured folders & naming conventions\n   - Keep knowledge base content updated\n\n2. **System Optimization**\n\n   - Track AI classification accuracy\n   - Tune response times & chunk sizes\n   - Perform regular database maintenance\n\n### üõ†Ô∏è Troubleshooting\n\n1. **Email Issues**\n\n   - Verify Gmail API credentials\n   - Check AI service uptime\n   - Monitor classification performance\n\n2. **Document Processing Issues**\n\n   - Ensure correct file permissions\n   - Validate extraction & embedding processes\n   - Debug vector database insertions",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Email Monitor",
      "type": "n8n-nodes-base.gmailTrigger",
      "role": "gmailTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "AI Email Classifier",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Route Email",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "AI Response Generator",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Vector Store Tool1",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "role": "toolVectorStore",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Supabase Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Download File",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "File Created",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "role": "googleDriveTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "File Updated",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "role": "googleDriveTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract Document Text",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Delete Old Doc Rows",
      "type": "n8n-nodes-base.supabase",
      "role": "supabase",
      "configDescription": "Version 1"
    },
    {
      "name": "Set File ID",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Insert into Supabase Vectorstore",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Create Draft",
      "type": "n8n-nodes-base.gmailTool",
      "role": "gmailTool",
      "configDescription": "Version 2.1"
    }
  ]
}