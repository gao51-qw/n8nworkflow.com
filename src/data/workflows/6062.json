{
  "id": 6062,
  "slug": "6062",
  "title": "Automate invoice processing from Gmail with Azure GPT-4.1 and human verification",
  "description": "*This workflow contains community nodes that are only compatible with the self-hosted version of n8n.*\n\nThis n8n workflow automates invoice management by integrating **Gmail**, PDF analysis, and **Azure OpenAI GPT-4.1**, with an optional **human verification** step for accuracy and control. It's ideal for businesses or individuals who regularly receive invoice emails and want to streamline their accounts payable process with minimal manual effort.\n\nThe system continuously monitors Gmail for new messages from specified senders. When it detects an email with a PDF attachment and relevant subject line (e.g., \"Invoice\"), it automatically extracts text from the PDF, analyzes it using Azure OpenAI, and determines if it is a valid invoice. If the AI is uncertain, the workflow sends a manual approval request to a human reviewer. Valid invoices are saved to local storage with a timestamped filename, and a confirmation email is sent upon successful processing.\n\n## üéØ Who This Is For\n1. Small to medium businesses\n2. Freelancers or consultants who receive invoices via email\n3. IT or automation teams looking to streamline document workflows\n4. Anyone using n8n with access to Gmail and Azure OpenAI\n\n## ‚úÖ Features\n- **Gmail Monitoring** ‚Äì Automatically checks for new emails from trusted senders\n- **AI-Powered Invoice Detection** ‚Äì Uses Azure GPT-4.1 to intelligently verify PDF contents\n- **PDF Text Extraction** ‚Äì Extracts readable text for analysis\n- **Human-in-the-Loop Verification** ‚Äì Requests approval when AI confidence is low\n- **Secure File Storag**e ‚Äì Saves invoices locally with structured filenames\n- **Email Notifications** ‚Äì Sends confirmations or manual review alerts\n\n## ‚öôÔ∏è Setup Instructions\n### 1. Prerequisites\n- An active n8n instance (self-hosted or cloud)\n- A Gmail account with OAuth2 credentials\n- An Azure OpenAI account with access to the GPT-4.1 model\n- A local directory for saving invoices (e.g., C:/Test/Invoices/)\n\n### 2. Gmail OAuth2 Setup\n- In n8n, create Gmail OAuth2 credentials.\n- Configure it with Gmail API access (read emails and attachments).\n- Update the Gmail Trigger node to filter by sender email (e.g., sender@gmail.com).\n\n### 3. Azure OpenAI Setup\n- Create Azure OpenAI API credentials in n8n.\n- Ensure your endpoint is correctly set and GPT-4.1 access is enabled.\n- Link the credentials in the AI Analysis node.\n\n### 4. Customize Workflow Settings\n- Sender Email ‚Äì Update in Gmail Trigger\n- Notification Email ‚Äì Update in Send Notification node\n- Save Directory ‚Äì Change in Save Invoice node\n\n### 5. Testing the Workflow\n- Send a test email from the configured sender with a PDF invoice.\n- Wait for the workflow to trigger and check for:\n- File saved in the directory\n- Confirmation email received\n- Manual review request (if needed)\n\n## üîÑ Workflow Steps\nGmail Trigger ‚Üí Check for PDF Invoice ‚Üí Extract PDF Text ‚Üí Analyze with GPT-4.1 ‚Üí\n     ‚Ü≥ If Invoice: Save & Notify\n     ‚Ü≥ If Uncertain: Request Human Review\n     ‚Ü≥ If Not Invoice: Send Invalid Alert",
  "featuredImage": "/data/workflows/6062/6062.webp",
  "author": {
    "id": 101,
    "slug": "sachin",
    "name": "Sachin Shrestha",
    "avatar": ""
  },
  "categories": [
    "Invoice Processing",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 571,
  "downloads": 57,
  "createdAt": "2025-07-16T15:09:47.701Z",
  "updatedAt": "2026-01-16T08:42:55.825Z",
  "publishedAt": "2025-07-16T15:09:47.701Z",
  "nodes": 17,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6062",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate invoice processing from Gmail with Azure GPT-4.1 and human verification",
    "workflowName": "Automate invoice processing from Gmail with Azure GPT-4.1 and human verification",
    "description": "*This workflow contains community nodes that are only compatible with the self-hosted version of n8n.*\n\nThis n8n workflow automates invoice management by integrating **Gmail**, PDF analysis, and **Azure OpenAI GPT-4.1**, with an optional **human verification** step for accuracy and control. It's ideal for businesses or individuals who regularly receive invoice emails and want to streamline their accounts payable process with minimal manual effort.\n\nThe system continuously monitors Gmail for new messages from specified senders. When it detects an email with a PDF attachment and relevant subject line (e.g., \"Invoice\"), it automatically extracts text from the PDF, analyzes it using Azure OpenAI, and determines if it is a valid invoice. If the AI is uncertain, the workflow sends a manual approval request to a human reviewer. Valid invoices are saved to local storage with a timestamped filename, and a confirmation email is sent upon successful processing.\n\n## üéØ Who This Is For\n1. Small to medium businesses\n2. Freelancers or consultants who receive invoices via email\n3. IT or automation teams looking to streamline document workflows\n4. Anyone using n8n with access to Gmail and Azure OpenAI\n\n## ‚úÖ Features\n- **Gmail Monitoring** ‚Äì Automatically checks for new emails from trusted senders\n- **AI-Powered Invoice Detection** ‚Äì Uses Azure GPT-4.1 to intelligently verify PDF contents\n- **PDF Text Extraction** ‚Äì Extracts readable text for analysis\n- **Human-in-the-Loop Verification** ‚Äì Requests approval when AI confidence is low\n- **Secure File Storag**e ‚Äì Saves invoices locally with structured filenames\n- **Email Notifications** ‚Äì Sends confirmations or manual review alerts\n\n## ‚öôÔ∏è Setup Instructions\n### 1. Prerequisites\n- An active n8n instance (self-hosted or cloud)\n- A Gmail account with OAuth2 credentials\n- An Azure OpenAI account with access to the GPT-4.1 model\n- A local directory for saving invoices (e.g., C:/Test/Invoices/)\n\n### 2. Gmail OAuth2 Setup\n- In n8n, create Gmail OAuth2 credentials.\n- Configure it with Gmail API access (read emails and attachments).\n- Update the Gmail Trigger node to filter by sender email (e.g., sender@gmail.com).\n\n### 3. Azure OpenAI Setup\n- Create Azure OpenAI API credentials in n8n.\n- Ensure your endpoint is correctly set and GPT-4.1 access is enabled.\n- Link the credentials in the AI Analysis node.\n\n### 4. Customize Workflow Settings\n- Sender Email ‚Äì Update in Gmail Trigger\n- Notification Email ‚Äì Update in Send Notification node\n- Save Directory ‚Äì Change in Save Invoice node\n\n### 5. Testing the Workflow\n- Send a test email from the configured sender with a PDF invoice.\n- Wait for the workflow to trigger and check for:\n- File saved in the directory\n- Confirmation email received\n- Manual review request (if needed)\n\n## üîÑ Workflow Steps\nGmail Trigger ‚Üí Check for PDF Invoice ‚Üí Extract PDF Text ‚Üí Analyze with GPT-4.1 ‚Üí\n     ‚Ü≥ If Invoice: Save & Notify\n     ‚Ü≥ If Uncertain: Request Human Review\n     ‚Ü≥ If Not Invoice: Send Invalid Alert",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Gmail Trigger",
      "type": "n8n-nodes-base.gmailTrigger",
      "role": "gmailTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "IF: AI Says Yes",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Save PDF Locally",
      "type": "n8n-nodes-base.writeBinaryFile",
      "role": "writeBinaryFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Information Extractor",
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "role": "informationExtractor",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Is this PDF?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Send a message",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Invoice Saved Message",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Azure OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
      "role": "lmChatAzureOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Manual Verification",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Error Handler",
      "type": "n8n-nodes-base.stopAndError",
      "role": "stopAndError",
      "configDescription": "Version 1"
    }
  ]
}