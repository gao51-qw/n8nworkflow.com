{
  "id": 6652,
  "slug": "6652",
  "title": "Plan travel itineraries with Gemini AI, live Amadeus flights, and Airbnb stays",
  "description": "*This workflow contains community nodes that are only compatible with the self-hosted version of n8n.*\n\n### Here is the Full Node-by-Node Breakdown of the workflow Workflow\n\n**Execution Video:** [https://youtu.be/qkZ6UaO7aCE](https://youtu.be/qkZ6UaO7aCE)\n\n---\n\n#### 1. **Webhook** (`Webhook`)\n\n* **Purpose**: Accepts incoming user queries via HTTP GET with the text parameter.\n* **Example input**: `4 people from Germany to Bangkok @14th August 2025`\n\n---\n\n#### 2. **AI Agent** (`AI Agent`)\n\n* **Type**: LangChain Agent\n* **Model**: Google Gemini 2.5 Flash via Vertex AI\n* **Prompt logic**:\n\n  * Extracts structured travel info (origin city, destination, date, number of people)\n  * Determines 3-letter IATA codes\n  * Uses MCP’s Airbnb Tool to scrape listings starting from that date\n* **Returns**:\n\n  * A markdown + bullet-format response with:\n\n    * Structured trip info\n    * List of Airbnb listings with titles, price, rating, and link\n\n---\n\n#### 3. **MCP Client List Tool** (`MCP Client List Tool`)\n\n* **Purpose**: Fetches a list of tools registered with MCP (Multi Channel Parser) client for the AI agent to select from\n* **Used by**: AI Agent as part of `listTools()` phase\n\n---\n\n#### 4. **MCP Execute Tool** (`MCP Execute Tool`)\n\n* **Purpose**: Executes the selected MCP tool (Airbnb scraper)\n* **Tool input**: Dynamic — passed by AI Agent using `$fromAI('Tool_Parameters')`\n\n---\n\n#### 5. **Google Vertex Chat Model** (`Google Vertex Chat Model`)\n\n* **Purpose**: Acts as the LLM behind the AI Agent\n* **Model**: Gemini 2.5 Flash from Vertex AI\n* **Used for**: Language understanding, extraction, decision-making\n\n---\n\n#### 6. **Grabbing Clean Data** (`Code Node`)\n\n* **Purpose**: Parses AI output to extract:\n\n  * Structured trip data\n  * Airbnb listings (with title, rating, price, link)\n* **Handles**:\n\n  * Bullet (•) and asterisk (\\*) formats\n  * New and old markdown styles\n  * Fallbacks for backward compatibility\n* **Output**: Clean JSON:\n\n  ```json\n  {\n    \"tripInformation\": {...},\n    \"listings\": [...],\n    \"totalListings\": X,\n    ...\n  }\n  ```\n\n---\n\n#### 7. **Flight Search with fare** (`HTTP Request`)\n\n* **API**: Amadeus Flight Offers API\n* **Purpose**: Searches live flight offers using:\n\n  * originIataCode\n  * destinationIataCode\n  * travelDate\n  * numberOfPeople\n* **Auth**: OAuth2\n\n---\n\n#### 8. **Flight Data + Airbnb Listings** (`Code Node`)\n\n* **Purpose**:\n\n  * Parses Amadeus flight offers\n  * Formats date, time, and durations\n  * Merges flight results with earlier Airbnb + trip info JSON\n  * Sorts by cheapest total price\n* **Output**:\n\n  ```json\n  {\n    \"tripInformation\": {...},\n    \"listings\": [...],\n    \"allFlightOffers\": [...]\n  }\n  ```\n\n---\n\n#### 9. **Edit Fields** (`Set Node`)\n\n* **Purpose**:\n\n  * Assigns final response fields into clean keys:\n\n    * `traveldetails`\n    * `listings`\n    * `flights`\n\n---\n\n#### 10. **Respond to Webhook**\n\n* **Purpose**: Sends back the final structured JSON response to the caller.\n* **Output**: Combined travel itinerary with flights + Airbnb\n\n---\n\n### Summary\n\nThis end-to-end workflow is a **fully autonomous travel query-to-itinerary engine**. From a plain text like “4 people from Vijayawada to Bangkok @14th August 2025,” it:\n\n* Parses and understands the query using an AI agent\n* Fetches Airbnb stays by scraping live listings\n* Searches real-time flights via Amadeus\n* Merges and formats everything into structured, digestible JSON\n\nNo manual parsing, no frontend — just AI + APIs + automation.\n\n\n\nNOTE: I JUST USED A COMMUNITY NODE \"n8n-nodes-mcp\" + UNOFFICIAL AIRBNB MCP",
  "featuredImage": "/data/workflows/6652/6652.webp",
  "author": {
    "id": 101,
    "slug": "iamvaar",
    "name": "iamvaar",
    "avatar": ""
  },
  "categories": [
    "Personal Productivity",
    "AI Chatbot"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 229,
  "downloads": 22,
  "createdAt": "2025-07-29T15:47:29.978Z",
  "updatedAt": "2026-01-16T08:46:14.055Z",
  "publishedAt": "2025-07-29T15:47:29.978Z",
  "nodes": 10,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6652",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Plan travel itineraries with Gemini AI, live Amadeus flights, and Airbnb stays",
    "workflowName": "Plan travel itineraries with Gemini AI, live Amadeus flights, and Airbnb stays",
    "description": "*This workflow contains community nodes that are only compatible with the self-hosted version of n8n.*\n\n### Here is the Full Node-by-Node Breakdown of the workflow Workflow\n\n**Execution Video:** [https://youtu.be/qkZ6UaO7aCE](https://youtu.be/qkZ6UaO7aCE)\n\n---\n\n#### 1. **Webhook** (`Webhook`)\n\n* **Purpose**: Accepts incoming user queries via HTTP GET with the text parameter.\n* **Example input**: `4 people from Germany to Bangkok @14th August 2025`\n\n---\n\n#### 2. **AI Agent** (`AI Agent`)\n\n* **Type**: LangChain Agent\n* **Model**: Google Gemini 2.5 Flash via Vertex AI\n* **Prompt logic**:\n\n  * Extracts structured travel info (origin city, destination, date, number of people)\n  * Determines 3-letter IATA codes\n  * Uses MCP’s Airbnb Tool to scrape listings starting from that date\n* **Returns**:\n\n  * A markdown + bullet-format response with:\n\n    * Structured trip info\n    * List of Airbnb listings with titles, price, rating, and link\n\n---\n\n#### 3. **MCP Client List Tool** (`MCP Client List Tool`)\n\n* **Purpose**: Fetches a list of tools registered with MCP (Multi Channel Parser) client for the AI agent to select from\n* **Used by**: AI Agent as part of `listTools()` phase\n\n---\n\n#### 4. **MCP Execute Tool** (`MCP Execute Tool`)\n\n* **Purpose**: Executes the selected MCP tool (Airbnb scraper)\n* **Tool input**: Dynamic — passed by AI Agent using `$fromAI('Tool_Parameters')`\n\n---\n\n#### 5. **Google Vertex Chat Model** (`Google Vertex Chat Model`)\n\n* **Purpose**: Acts as the LLM behind the AI Agent\n* **Model**: Gemini 2.5 Flash from Vertex AI\n* **Used for**: Language understanding, extraction, decision-making\n\n---\n\n#### 6. **Grabbing Clean Data** (`Code Node`)\n\n* **Purpose**: Parses AI output to extract:\n\n  * Structured trip data\n  * Airbnb listings (with title, rating, price, link)\n* **Handles**:\n\n  * Bullet (•) and asterisk (\\*) formats\n  * New and old markdown styles\n  * Fallbacks for backward compatibility\n* **Output**: Clean JSON:\n\n  ```json\n  {\n    \"tripInformation\": {...},\n    \"listings\": [...],\n    \"totalListings\": X,\n    ...\n  }\n  ```\n\n---\n\n#### 7. **Flight Search with fare** (`HTTP Request`)\n\n* **API**: Amadeus Flight Offers API\n* **Purpose**: Searches live flight offers using:\n\n  * originIataCode\n  * destinationIataCode\n  * travelDate\n  * numberOfPeople\n* **Auth**: OAuth2\n\n---\n\n#### 8. **Flight Data + Airbnb Listings** (`Code Node`)\n\n* **Purpose**:\n\n  * Parses Amadeus flight offers\n  * Formats date, time, and durations\n  * Merges flight results with earlier Airbnb + trip info JSON\n  * Sorts by cheapest total price\n* **Output**:\n\n  ```json\n  {\n    \"tripInformation\": {...},\n    \"listings\": [...],\n    \"allFlightOffers\": [...]\n  }\n  ```\n\n---\n\n#### 9. **Edit Fields** (`Set Node`)\n\n* **Purpose**:\n\n  * Assigns final response fields into clean keys:\n\n    * `traveldetails`\n    * `listings`\n    * `flights`\n\n---\n\n#### 10. **Respond to Webhook**\n\n* **Purpose**: Sends back the final structured JSON response to the caller.\n* **Output**: Combined travel itinerary with flights + Airbnb\n\n---\n\n### Summary\n\nThis end-to-end workflow is a **fully autonomous travel query-to-itinerary engine**. From a plain text like “4 people from Vijayawada to Bangkok @14th August 2025,” it:\n\n* Parses and understands the query using an AI agent\n* Fetches Airbnb stays by scraping live listings\n* Searches real-time flights via Amadeus\n* Merges and formats everything into structured, digestible JSON\n\nNo manual parsing, no frontend — just AI + APIs + automation.\n\n\n\nNOTE: I JUST USED A COMMUNITY NODE \"n8n-nodes-mcp\" + UNOFFICIAL AIRBNB MCP",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "MCP Client List Tool",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "MCP Execute Tool",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Vertex Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleVertex",
      "role": "lmChatGoogleVertex",
      "configDescription": "Version 1"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Flight Search with fare",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Grabbing Clean Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Flight Data + Airbnb Listings",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.8"
    }
  ]
}