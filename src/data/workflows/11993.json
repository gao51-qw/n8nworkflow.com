{
  "id": 11993,
  "slug": "11993",
  "title": "Create an intelligent Facebook Messenger chatbot with GPT-4o-mini & message memory",
  "description": "  ## Who is this for?\n\n  Businesses and developers who want to automate customer support or engagement on Facebook Messenger using AI-powered responses.\n\n  ## What does it do?\n\n  Creates an intelligent Facebook Messenger chatbot that:\n  - Responds to messages using OpenAI (gpt-4o-mini)\n  - Batches rapid-fire messages into a single AI request\n  - Maintains conversation history (50 messages per user)\n  - Shows professional UX feedback (seen indicators, typing bubbles)\n\n  ## How it works\n\n  1. **Webhook Verification** - Handles Facebook's GET verification request\n  2. **Message Reception** - Receives incoming messages via POST webhook\n  3. **Message Batching** - Waits 3 seconds to collect multiple quick messages\n  4. **AI Processing** - Sends combined message to OpenAI with conversation context\n  5. **Response Delivery** - Formats and sends the AI response back to Messenger\n\n  ## Setup\n\n  1. Configure **Facebook Graph API** credential with your Page Access Token\n  2. Configure **OpenAI API** credential with your API key\n  3. Set your verify token in the \"Is Token Valid?\" node\n  4. Register the webhook URL in Facebook Developer Console\n\n  ## Key Features\n\n  - **Message Batching**: Combines \"Hey\" + \"Can you help\" + \"with my order?\" into one request\n  - **Conversation Memory**: Remembers context from previous messages\n  - **Echo Filtering**: Prevents responding to your own messages\n  - **Response Formatting**: Cleans markdown for Messenger's 2000-char limit\n",
  "featuredImage": "/data/workflows/11993/11993.webp",
  "author": {
    "id": 101,
    "slug": "tristanv",
    "name": "Tristan V",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 291,
  "downloads": 29,
  "createdAt": "2025-12-21T05:42:52.286Z",
  "updatedAt": "2026-01-16T09:10:55.259Z",
  "publishedAt": "2025-12-21T05:42:52.286Z",
  "nodes": 27,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11993",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Create an intelligent Facebook Messenger chatbot with GPT-4o-mini & message memory",
    "workflowName": "Create an intelligent Facebook Messenger chatbot with GPT-4o-mini & message memory",
    "description": "## Who is this for?\n\n  Businesses and developers who want to automate customer support or engagement on Facebook Messenger using AI-powered responses.\n\n  ## What does it do?\n\n  Creates an intelligent Facebook Messenger chatbot that:\n  - Responds to messages using OpenAI (gpt-4o-mini)\n  - Batches rapid-fire messages into a single AI request\n  - Maintains conversation history (50 messages per user)\n  - Shows professional UX feedback (seen indicators, typing bubbles)\n\n  ## How it works\n\n  1. **Webhook Verification** - Handles Facebook's GET verification request\n  2. **Message Reception** - Receives incoming messages via POST webhook\n  3. **Message Batching** - Waits 3 seconds to collect multiple quick messages\n  4. **AI Processing** - Sends combined message to OpenAI with conversation context\n  5. **Response Delivery** - Formats and sends the AI response back to Messenger\n\n  ## Setup\n\n  1. Configure **Facebook Graph API** credential with your Page Access Token\n  2. Configure **OpenAI API** credential with your API key\n  3. Set your verify token in the \"Is Token Valid?\" node\n  4. Register the webhook URL in Facebook Developer Console\n\n  ## Key Features\n\n  - **Message Batching**: Combines \"Hey\" + \"Can you help\" + \"with my order?\" into one request\n  - **Conversation Memory**: Remembers context from previous messages\n  - **Echo Filtering**: Prevents responding to your own messages\n  - **Response Formatting**: Cleans markdown for Messenger's 2000-char limit",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Sticky Note - Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Webhook Verification",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Message Receipt",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Message Batching",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - AI Processing",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - OpenAI Setup",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Response",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Facebook Setup",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Facebook Verification Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Facebook Message Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Is Token Valid?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Respond with Challenge",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Respond Forbidden",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Acknowledge Event",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Filter Valid Messages",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Store Message for Batching",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Seen Indicator",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Wait 3 Seconds",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Retrieve Batched Messages",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Has Messages to Process?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Typing Indicator",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Conversation Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Format Response",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Response to User",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Success",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    }
  ]
}