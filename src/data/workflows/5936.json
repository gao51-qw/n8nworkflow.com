{
  "id": 5936,
  "slug": "5936",
  "title": "Personalized hotel reward emails for high-spenders with Salesforce, Gemini AI & Brevo",
  "description": "This n8n workflow automatically detects highâ€‘spending hotel guests after checkout and emails them a personalized, oneâ€‘time reward offer.\n\n---\n\n### **ðŸ”§ What it does**\n- Watches Salesforce `Guest__c` custom object for checkout updates.\n- Pulls guest spend data on optional paid amenities:\n  - Room Service\n  - Minibar\n  - Laundry\n  - Late Checkout\n  - Extra Bed\n  - Airport Transfer\n- Calculates total spend to identify VIP guests (â‰¥ **$50**).\n- Uses AI to:\n  - Spot unused services.\n  - Randomly pick one unused service.\n  - Generate a realistic, short promo like:  \n    _\"Free late checkout on your next stay\"_\n- Parses AI output into JSON.\n- Sends a polished HTML email to the guest with their personalized offer.\n\n---\n\n### **ðŸ“¦ Key nodes**\n- `Salesforce Trigger` â†’ monitors new checkouts.\n- `Salesforce` â†’ fetches detailed spend data.\n- `Function` â†’ sums up total amenity spend.\n- `IF` â†’ filters for VIP guests.\n- `LangChain LLM` + `Google Vertex AI` â†’ drafts the offer text.\n- `Structured Output Parser` â†’ cleans AI output.\n- `Brevo` â†’ delivers branded email.\n\n---\n\n### **ðŸ“Š Example output**\n&gt; _Subject:_ `John, We Have Something Special for Your Next Stay`  \n&gt; _Offer in email:_ `Enjoy a complimentary minibar selection on your next stay.`\n\n---\n\n### **âœ¨ Why it matters**\nRewarding guests who already spend boosts loyalty and repeat bookings â€” without generic discounts. The offer feels personal, relevant, and exclusive.\n",
  "featuredImage": "/data/workflows/5936/5936.webp",
  "author": {
    "id": 101,
    "slug": "iamvaar",
    "name": "iamvaar",
    "avatar": ""
  },
  "categories": [
    "Social Media",
    "Multimodal AI"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 1250,
  "downloads": 125,
  "createdAt": "2025-07-13T11:15:28.338Z",
  "updatedAt": "2026-01-16T08:42:14.170Z",
  "publishedAt": "2025-07-13T11:15:28.338Z",
  "nodes": 9,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5936",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Personalized hotel reward emails for high-spenders with Salesforce, Gemini AI & Brevo",
    "workflowName": "Personalized hotel reward emails for high-spenders with Salesforce, Gemini AI & Brevo",
    "description": "This n8n workflow automatically detects highâ€‘spending hotel guests after checkout and emails them a personalized, oneâ€‘time reward offer.\n\n---\n\n### **ðŸ”§ What it does**\n- Watches Salesforce `Guest__c` custom object for checkout updates.\n- Pulls guest spend data on optional paid amenities:\n  - Room Service\n  - Minibar\n  - Laundry\n  - Late Checkout\n  - Extra Bed\n  - Airport Transfer\n- Calculates total spend to identify VIP guests (â‰¥ **$50**).\n- Uses AI to:\n  - Spot unused services.\n  - Randomly pick one unused service.\n  - Generate a realistic, short promo like:  \n    _\"Free late checkout on your next stay\"_\n- Parses AI output into JSON.\n- Sends a polished HTML email to the guest with their personalized offer.\n\n---\n\n### **ðŸ“¦ Key nodes**\n- `Salesforce Trigger` â†’ monitors new checkouts.\n- `Salesforce` â†’ fetches detailed spend data.\n- `Function` â†’ sums up total amenity spend.\n- `IF` â†’ filters for VIP guests.\n- `LangChain LLM` + `Google Vertex AI` â†’ drafts the offer text.\n- `Structured Output Parser` â†’ cleans AI output.\n- `Brevo` â†’ delivers branded email.\n\n---\n\n### **ðŸ“Š Example output**\n&gt; _Subject:_ `John, We Have Something Special for Your Next Stay`  \n&gt; _Offer in email:_ `Enjoy a complimentary minibar selection on your next stay.`\n\n---\n\n### **âœ¨ Why it matters**\nRewarding guests who already spend boosts loyalty and repeat bookings â€” without generic discounts. The offer feels personal, relevant, and exclusive.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Basic LLM Chain",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Check for any latest checkouts",
      "type": "n8n-nodes-base.salesforceTrigger",
      "role": "salesforceTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract Checkout information",
      "type": "n8n-nodes-base.salesforce",
      "role": "salesforce",
      "configDescription": "Version 1"
    },
    {
      "name": "Look For VIP Clients",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Check the threshold exceedings",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Give Away Personalised Offers",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleVertex",
      "role": "lmChatGoogleVertex",
      "configDescription": "Version 1"
    },
    {
      "name": "Send offer via email",
      "type": "n8n-nodes-base.sendInBlue",
      "role": "sendInBlue",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}