{
  "id": 8779,
  "slug": "8779",
  "title": "ðŸ¤– Self Improving Email AI Support with Human-in-the-Loop",
  "description": "## How it works\n\nThis workflow creates a sophisticated, self-improving customer support system that automatically handles incoming emails. It's designed to answer common questions using an AI-powered knowledge base and, crucially, to learn from human experts when new or complex questions arise, continuously expanding its capabilities.\n\nThink of it like having an AI assistant with a smart memory and a human mentor. Here's the step-by-step process:\n\n1.  **New Email Received:** The workflow is triggered whenever a new email arrives in your designated support inbox (via Gmail).\n2.  **Classify Request:** An AI model (`Google Gemini 2.5 Flash Lite`) first classifies the incoming email to ensure it's a genuine support request, filtering out irrelevant messages.\n3.  **Retrieve Knowledge Base:** The workflow fetches all existing Question and Answer pairs from your dedicated Google Sheet knowledge base.\n4.  **AI Answer Attempt:** A powerful AI model (`Google Gemini 2.5 Pro`) analyzes the customer's email against the entire knowledge base. It attempts to find a highly relevant answer and drafts a complete HTML email response if successful.\n5.  **Decision Point:** An `IF` node checks if the AI found a confident answer.\n    *   **If Answer Found:** The AI-generated HTML response is immediately sent back to the customer via Gmail.\n    *   **If No Answer Found (Human-in-the-Loop):**\n        *   **Escalate to Human:** The customer's summarized question and original email are forwarded to a human expert (you or your team) via Gmail, requesting their assistance.\n        *   **Human Reply & AI Learning:** The workflow waits for the human expert's reply. Once received, another AI model (`Google Gemini 2.5 Flash`) processes both the original customer question and the expert's reply to distill them into a new, generic, and reusable Question/Answer pair.\n        *   **Update Knowledge Base:** This newly created Q&A pair is then automatically added as a new row to your Google Sheet knowledge base, ensuring the system can answer similar questions automatically in the future.\n\n## Set up steps\n\n**Setup time: ~10-15 minutes**\n\nThis workflow requires connecting your Gmail and Google Sheets accounts, and obtaining a Google AI API key. Follow these steps carefully:\n\n1.  **Connect Your Gmail Account:**\n    *   Select the `On New Email Received` node.\n    *   Click the **Credential** dropdown and select **`+ Create New Credential`** to connect your Gmail account. Grant the necessary permissions.\n    *   Repeat this for the `Send AI Answer` and `Ask Human for Help` nodes, selecting the credential you just created.\n\n2.  **Connect Your Google Sheets Account:**\n    *   Select the `Get Knowledge Base` node.\n    *   Click the **Credential** dropdown and select **`+ Create New Credential`** to connect your Google account. Grant the necessary permissions.\n    *   Repeat this for the `Add to Knowledge Base` node, selecting the credential you just created.\n\n3.  **Set up Your Google Sheet Knowledge Base:**\n    *   **Create a new Google Sheet** in your Google Drive.\n    *   Rename the first sheet (tab) to `QA Database`.\n    *   In the first row of `QA Database`, add two column headers: `Question` (in cell A1) and `Answer` (in cell B1).\n    *   Go back to the `Get Knowledge Base` node in n8n. In the **Document ID** field, select your newly created Google Sheet. Do the same for the `Add to Knowledge Base` node.\n\n4.  **Get Your Google AI API Key (for Gemini Models):**\n    *   Visit Google AI Studio at [aistudio.google.com/app/apikey](https://aistudio.google.com/app/apikey).\n    *   Click **\"Create API key in new project\"** and copy the key.\n    *   In the workflow, go to the `Google Gemini 2.5 Pro` node, click the **Credential** dropdown, and select **`+ Create New Credential`**.\n    *   Paste your key into the **API Key** field and **Save**.\n    *   Repeat this for the `Google Gemini 2.5 Flash Lite` and `Google Gemini 2.5 Flash` nodes, selecting the credential you just created.\n\n5.  **Configure Human Expert Email:**\n    *   Select the `Ask Human for Help` node.\n    *   In the **Send To** field, replace the placeholder email address with the actual email address of your human expert (e.g., your own email or a team support email).\n\n6.  **Activate the Workflow:**\n    *   Once all credentials and configurations are set, activate the workflow using the toggle switch at the top right of your n8n canvas.\n\n**Start Learning!**\nSend a test email to the Gmail account connected to the `On New Email Received` node. Observe how the AI responds, or how it escalates to your expert email and then learns from the reply. Check your Google Sheet to see new Q&A pairs being added!",
  "featuredImage": "/data/workflows/8779/8779.webp",
  "author": {
    "id": 101,
    "slug": "lucaspeyrin",
    "name": "Lucas Peyrin",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1998,
  "downloads": 199,
  "createdAt": "2025-09-20T15:06:17.309Z",
  "updatedAt": "2026-01-16T08:57:38.818Z",
  "publishedAt": "2025-09-20T15:06:17.309Z",
  "nodes": 27,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8779",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "ðŸ¤– Self Improving Email AI Support with Human-in-the-Loop",
    "workflowName": "ðŸ¤– Self Improving Email AI Support with Human-in-the-Loop",
    "description": "## How it works\n\nThis workflow creates a sophisticated, self-improving customer support system that automatically handles incoming emails. It's designed to answer common questions using an AI-powered knowledge base and, crucially, to learn from human experts when new or complex questions arise, continuously expanding its capabilities.\n\nThink of it like having an AI assistant with a smart memory and a human mentor. Here's the step-by-step process:\n\n1.  **New Email Received:** The workflow is triggered whenever a new email arrives in your designated support inbox (via Gmail).\n2.  **Classify Request:** An AI model (`Google Gemini 2.5 Flash Lite`) first classifies the incoming email to ensure it's a genuine support request, filtering out irrelevant messages.\n3.  **Retrieve Knowledge Base:** The workflow fetches all existing Question and Answer pairs from your dedicated Google Sheet knowledge base.\n4.  **AI Answer Attempt:** A powerful AI model (`Google Gemini 2.5 Pro`) analyzes the customer's email against the entire knowledge base. It attempts to find a highly relevant answer and drafts a complete HTML email response if successful.\n5.  **Decision Point:** An `IF` node checks if the AI found a confident answer.\n    *   **If Answer Found:** The AI-generated HTML response is immediately sent back to the customer via Gmail.\n    *   **If No Answer Found (Human-in-the-Loop):**\n        *   **Escalate to Human:** The customer's summarized question and original email are forwarded to a human expert (you or your team) via Gmail, requesting their assistance.\n        *   **Human Reply & AI Learning:** The workflow waits for the human expert's reply. Once received, another AI model (`Google Gemini 2.5 Flash`) processes both the original customer question and the expert's reply to distill them into a new, generic, and reusable Question/Answer pair.\n        *   **Update Knowledge Base:** This newly created Q&A pair is then automatically added as a new row to your Google Sheet knowledge base, ensuring the system can answer similar questions automatically in the future.\n\n## Set up steps\n\n**Setup time: ~10-15 minutes**\n\nThis workflow requires connecting your Gmail and Google Sheets accounts, and obtaining a Google AI API key. Follow these steps carefully:\n\n1.  **Connect Your Gmail Account:**\n    *   Select the `On New Email Received` node.\n    *   Click the **Credential** dropdown and select **`+ Create New Credential`** to connect your Gmail account. Grant the necessary permissions.\n    *   Repeat this for the `Send AI Answer` and `Ask Human for Help` nodes, selecting the credential you just created.\n\n2.  **Connect Your Google Sheets Account:**\n    *   Select the `Get Knowledge Base` node.\n    *   Click the **Credential** dropdown and select **`+ Create New Credential`** to connect your Google account. Grant the necessary permissions.\n    *   Repeat this for the `Add to Knowledge Base` node, selecting the credential you just created.\n\n3.  **Set up Your Google Sheet Knowledge Base:**\n    *   **Create a new Google Sheet** in your Google Drive.\n    *   Rename the first sheet (tab) to `QA Database`.\n    *   In the first row of `QA Database`, add two column headers: `Question` (in cell A1) and `Answer` (in cell B1).\n    *   Go back to the `Get Knowledge Base` node in n8n. In the **Document ID** field, select your newly created Google Sheet. Do the same for the `Add to Knowledge Base` node.\n\n4.  **Get Your Google AI API Key (for Gemini Models):**\n    *   Visit Google AI Studio at [aistudio.google.com/app/apikey](https://aistudio.google.com/app/apikey).\n    *   Click **\"Create API key in new project\"** and copy the key.\n    *   In the workflow, go to the `Google Gemini 2.5 Pro` node, click the **Credential** dropdown, and select **`+ Create New Credential`**.\n    *   Paste your key into the **API Key** field and **Save**.\n    *   Repeat this for the `Google Gemini 2.5 Flash Lite` and `Google Gemini 2.5 Flash` nodes, selecting the credential you just created.\n\n5.  **Configure Human Expert Email:**\n    *   Select the `Ask Human for Help` node.\n    *   In the **Send To** field, replace the placeholder email address with the actual email address of your human expert (e.g., your own email or a team support email).\n\n6.  **Activate the Workflow:**\n    *   Once all credentials and configurations are set, activate the workflow using the toggle switch at the top right of your n8n canvas.\n\n**Start Learning!**\nSend a test email to the Gmail account connected to the `On New Email Received` node. Observe how the AI responds, or how it escalates to your expert email and then learns from the reply. Check your Google Sheet to see new Q&A pairs being added!",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Support Answer Found",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Is it a Support Request?",
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "role": "textClassifier",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Combine into Knowledge Context",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "AI: Create Reusable Q&A",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.7"
    },
    {
      "name": "On New Email Received",
      "type": "n8n-nodes-base.gmailTrigger",
      "role": "gmailTrigger",
      "configDescription": "Version 1.3"
    },
    {
      "name": " Send AI Answer",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Ask Human for Help",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Add to Knowledge Base",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Get Knowledge Base",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Find Answer with AI",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Sticky Note (0)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (3)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (4)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (5)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (6)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (7)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (9)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (10)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note (11)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Parsed AI Response",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Gemini Flash Lite Latest",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Gemini Flash Latest",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Gemini Flash Latest (1)",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Start Again (with Saved Answer)",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}