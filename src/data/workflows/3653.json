{
  "id": 3653,
  "slug": "3653",
  "title": "Collect WhatsApp questionnaire responses in Postgres (Module \"Anketa\")",
  "description": "### Who is this for?\nThis workflow is designed for businesses or organizations looking to collect and store user responses from questionnaires via a WhatsApp bot, with data saved in a Postgres database.\n\n### What problem is this workflow solving?\nThis workflow streamlines the process of collecting and managing user responses to questionnaires. It helps automate data collection from multiple users and stores the responses in a centralized database for easy access and analysis.\n\n### What this workflow does\nBasis version:\n- Add questions to the anketa_question table.\n- Save the responses of users who complete the questionnaire in whatsapp into the database.\n\nAdditional version:\n- All features from basis version.\n- The bot sends a lead magnet from Google Drive after filling out the form.\n- If the user has not answered all the questions, the bot sends a reminder after a certain time (configurable).\n\n### Setup\n1. **Create Tables in Postgres DB**  \n   - Replace \"n8n\" in the provided SQL script with your database schema name.\n   - Run the SQL script in your Postgres database (this is available within the workflow).\n\n2. **Add Credentials**  \n   - Set up WhatsApp OAuth credentials and account details.\n   - Set up Postgres credentials to connect the workflow to your database.\n\n### How to customize this workflow to your needs\n- Modify the questions in the `anketa_question` table to suit your specific survey or data collection requirements.\n- Adjust the WhatsApp link and communication flow to align with your branding or messaging needs.\n- Customize the database table schema if you need to capture additional fields or change the format of the data stored.",
  "featuredImage": "/data/workflows/3653/3653.webp",
  "author": {
    "id": 101,
    "slug": "boanse",
    "name": "Andrew",
    "avatar": ""
  },
  "categories": [
    "Market Research"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 706,
  "downloads": 70,
  "createdAt": "2025-04-21T20:05:33.864Z",
  "updatedAt": "2026-01-16T08:30:51.563Z",
  "publishedAt": "2025-04-21T20:05:33.864Z",
  "nodes": 32,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3653",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Collect WhatsApp questionnaire responses in Postgres (Module \"Anketa\")",
    "workflowName": "Collect WhatsApp questionnaire responses in Postgres (Module \"Anketa\")",
    "description": "### Who is this for?\nThis workflow is designed for businesses or organizations looking to collect and store user responses from questionnaires via a WhatsApp bot, with data saved in a Postgres database.\n\n### What problem is this workflow solving?\nThis workflow streamlines the process of collecting and managing user responses to questionnaires. It helps automate data collection from multiple users and stores the responses in a centralized database for easy access and analysis.\n\n### What this workflow does\nBasis version:\n- Add questions to the anketa_question table.\n- Save the responses of users who complete the questionnaire in whatsapp into the database.\n\nAdditional version:\n- All features from basis version.\n- The bot sends a lead magnet from Google Drive after filling out the form.\n- If the user has not answered all the questions, the bot sends a reminder after a certain time (configurable).\n\n### Setup\n1. **Create Tables in Postgres DB**  \n   - Replace \"n8n\" in the provided SQL script with your database schema name.\n   - Run the SQL script in your Postgres database (this is available within the workflow).\n\n2. **Add Credentials**  \n   - Set up WhatsApp OAuth credentials and account details.\n   - Set up Postgres credentials to connect the workflow to your database.\n\n### How to customize this workflow to your needs\n- Modify the questions in the `anketa_question` table to suit your specific survey or data collection requirements.\n- Adjust the WhatsApp link and communication flow to align with your branding or messaging needs.\n- Customize the database table schema if you need to capture additional fields or change the format of the data stored.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "role": "whatsAppTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Starts",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Bot Status",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Commands",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Main Menu",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Initialization",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Starts Test",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Get First Question",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Update Bot Status on ANKETA",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Define Flow",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Update Bot Status on START",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Get Available Questions",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Is Questions available?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Is Question found? ",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "First Question",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Question",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Add prev Answer",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Add Answer",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Finish Anketa",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Get prev Answer",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Upsert Bot Status on START",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Add prev Answer ",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}