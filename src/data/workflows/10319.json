{
  "id": 10319,
  "slug": "10319",
  "title": "Auto-moderate Instagram comments with Perspective API & Slack alerts",
  "description": "Automatically detects and hides hate speech/toxic comments, alerts your team, and logs flagged content for review.\n\n### Workflow Overview\n- **Trigger**: A Schedule node runs every 15 minutes to poll for new comments (Instagram doesn't natively push notifications easily, so polling is used). You could replace this with a Webhook if you set up Instagram webhooks via Graph API.\n- **Scan Comments**: Uses Instagram Graph API (via HTTP Request) to fetch recent posts and their comments. Assumes you have an Instagram Business Account and a valid access token (from Facebook Developer Portal).\n- **Detect Toxicity**: For each comment, it sends the text to Google's Perspective API (a free toxicity detection API; sign up at https://perspectiveapi.com/ for an API key). Threshold for \"toxic\" is set to &gt;0.7 toxicity score (configurable).\n- **Auto-Hide Offensive Ones**: If toxic, uses Instagram API to hide the comment.\n- **Alert Team**: Sends a Slack notification (or email; configurable) with details.\n- **Store Evidence**: Appends the toxic comment details (text, user, score, timestamp) to a Google Sheet for auditing.\n- **Error Handling**: Basic error node to notify if API calls fail.\n- **Business Value Alignment**: This automates protection, reducing manual moderation and building trust.\n\n### Prerequisites:\n  - n8n installed (self-hosted or cloud).\n  - Instagram Graph API access token (set in n8n credentials or as environment variable).\n  - Perspective API key (free tier available).\n  - Slack webhook or email credentials.\n  - Google Sheets API credentials (for storage).\n\n### How to Import\n1. In n8n, go to the workflows list.\n2. Click \"Import from JSON\" (or paste into a new workflow).\n3. Update placeholders:\n   - Replace `YOUR_INSTAGRAM_ACCESS_TOKEN` with your token.\n   - Replace `YOUR_PERSPECTIVE_API_KEY` with your key.\n   - Set up credentials for HTTP Request (Instagram), Slack, and Google Sheets.\n   - Adjust `YOUR_INSTAGRAM_BUSINESS_ACCOUNT_ID` and `YOUR_MEDIA_ID` (or make it dynamic).\n4. Test and activate.\n\nIf you encounter issues (e.g., API rate limits), adjust the schedule or add waits.\n\n### Notes on Customization\n- **Looping**: The \"Loop Over Comments\" uses SplitInBatches to process comments one by one, avoiding API rate limits.\n- **Toxicity API**: I used Perspective API as it's reliable and free for low volume. If you prefer another (e.g., Hugging Face), swap the HTTP Request body.\n- **Instagram API**: This fetches comments for the first recent post (simplified). To handle multiple posts, add another loop.\n- **Alerts**: Slack is used; change to Email node if preferred.\n- **Storage**: Google Sheets for simplicity; could be swapped for MongoDB or Airtable.\n- **Sticky Notes**: Three notes explain phases – they won't affect execution but help in the UI.\n- **Testing**: Start with test data. Instagram API requires app review for production.\n\n",
  "featuredImage": "/data/workflows/10319/10319.webp",
  "author": {
    "id": 101,
    "slug": "oneclick-ai",
    "name": "Oneclick AI Squad",
    "avatar": ""
  },
  "categories": [
    "Social Media",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 162,
  "downloads": 16,
  "createdAt": "2025-10-30T10:04:08.102Z",
  "updatedAt": "2026-01-16T09:04:29.756Z",
  "publishedAt": "2025-10-30T10:04:08.102Z",
  "nodes": 15,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10319",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Auto-moderate Instagram comments with Perspective API & Slack alerts",
    "workflowName": "Auto-moderate Instagram comments with Perspective API & Slack alerts",
    "description": "Automatically detects and hides hate speech/toxic comments, alerts your team, and logs flagged content for review.\n\n### Workflow Overview\n- **Trigger**: A Schedule node runs every 15 minutes to poll for new comments (Instagram doesn't natively push notifications easily, so polling is used). You could replace this with a Webhook if you set up Instagram webhooks via Graph API.\n- **Scan Comments**: Uses Instagram Graph API (via HTTP Request) to fetch recent posts and their comments. Assumes you have an Instagram Business Account and a valid access token (from Facebook Developer Portal).\n- **Detect Toxicity**: For each comment, it sends the text to Google's Perspective API (a free toxicity detection API; sign up at https://perspectiveapi.com/ for an API key). Threshold for \"toxic\" is set to &gt;0.7 toxicity score (configurable).\n- **Auto-Hide Offensive Ones**: If toxic, uses Instagram API to hide the comment.\n- **Alert Team**: Sends a Slack notification (or email; configurable) with details.\n- **Store Evidence**: Appends the toxic comment details (text, user, score, timestamp) to a Google Sheet for auditing.\n- **Error Handling**: Basic error node to notify if API calls fail.\n- **Business Value Alignment**: This automates protection, reducing manual moderation and building trust.\n\n### Prerequisites:\n  - n8n installed (self-hosted or cloud).\n  - Instagram Graph API access token (set in n8n credentials or as environment variable).\n  - Perspective API key (free tier available).\n  - Slack webhook or email credentials.\n  - Google Sheets API credentials (for storage).\n\n### How to Import\n1. In n8n, go to the workflows list.\n2. Click \"Import from JSON\" (or paste into a new workflow).\n3. Update placeholders:\n   - Replace `YOUR_INSTAGRAM_ACCESS_TOKEN` with your token.\n   - Replace `YOUR_PERSPECTIVE_API_KEY` with your key.\n   - Set up credentials for HTTP Request (Instagram), Slack, and Google Sheets.\n   - Adjust `YOUR_INSTAGRAM_BUSINESS_ACCOUNT_ID` and `YOUR_MEDIA_ID` (or make it dynamic).\n4. Test and activate.\n\nIf you encounter issues (e.g., API rate limits), adjust the schedule or add waits.\n\n### Notes on Customization\n- **Looping**: The \"Loop Over Comments\" uses SplitInBatches to process comments one by one, avoiding API rate limits.\n- **Toxicity API**: I used Perspective API as it's reliable and free for low volume. If you prefer another (e.g., Hugging Face), swap the HTTP Request body.\n- **Instagram API**: This fetches comments for the first recent post (simplified). To handle multiple posts, add another loop.\n- **Alerts**: Slack is used; change to Email node if preferred.\n- **Storage**: Google Sheets for simplicity; could be swapped for MongoDB or Airtable.\n- **Sticky Notes**: Three notes explain phases – they won't affect execution but help in the UI.\n- **Testing**: Start with test data. Instagram API requires app review for production.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.cron",
      "role": "cron",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Comments",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Detect Toxicity",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "IF Toxic",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Hide Comment",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Alert Team (Slack)",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 1"
    },
    {
      "name": "Store Evidence (Google Sheet)",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 1"
    },
    {
      "name": "End (Non-Toxic Path)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Instagram Posts",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Loop Over Comments",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 1"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}