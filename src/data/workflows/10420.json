{
  "id": 10420,
  "slug": "10420",
  "title": "Automated daily financial analysis from Loyverse POS with Google Sheets & email",
  "description": "Automatically fetches daily sales, shifts, and receipts from Loyverse. Calculates gross profit, net operating profit, other key metrics, saves them to a Google Sheet and sends out a daily report via email.\n\n## Whoâ€™s it for\nThis template is for any business owner, manager, or analyst using Loyverse POS who needs more advanced financial reporting. If you're a restaurant, bar, or retail owner who wants to automatically track daily net profit, compare sales to historical averages, and build a custom financial dashboard in Google Sheets, this workflow is for you.\n\n## How it works / What it does\nThis workflow runs automatically on a daily schedule. It fetches all sales data and receipts from your Loyverse account for the previous business day, defined by your custom shift times (even past midnight). \nA powerful Code node then processes all the data to calculate the metrics that Loyverse either doesn't provide at all, or only spreads out across several separate reports instead of in one consolidated place. \n\nAlready set up are metrics like...\n- -Total Revenue, Gross Profit, and Net Operating Profit\n- Cash handling differences (over/under)\n- Average spend per receipt (ATV)\n- 30-day rolling Net Operating Profit (NOP)\n- Performance vs. your historical weekday average\n\nFinally, it appends the single, calculated row of daily metrics to a Google Sheet and sends an easily customizable summary report to your email.\n\n## How to set up\nThis workflow includes detailed Sticky Notes to guide you through the setup process.\n\nBecause every business has a unique POS configuration (different POS devices, categories, and payment types), you'll need to set up a few things manually before executing the workflow. I've tried to make this as easy as possible to follow, and the entire setup should only take about 15 minutes.\n\n### Preparations & Credential setup\n1. Subscribe to \"Integrations\" Add-on in Loyverse ($9 / month) to gain API access.\n2. Create an Access token in Loyverse\n3. Create Credentials: In your n8n instance, create credentials for Loyverse (use \"Generic\" &gt; \"Bearer Auth\"), Google Sheets (OAuth2), and your Email (SMTP or other).\n\n### Make a copy of a prep-configured Google Spreadsheet\n*(Link in the second sticky note inside the workflow).*\n\n### Fill MASTER CONFIG: \nOpen the MASTER CONFIG node. Follow the comments inside to add your Google Sheet ID, Sheet Names, business hours, timezone, and Loyverse IDs (for POS devices, payment types, and categories).\n\n### Configure Google Sheet Nodes\n\n1. **Configure Read Historical Data:** Open this node. Follow the instructions in the nearby Sticky Note to paste the expressions for your Document ID and Sheet Name.\n2. **Configure Save Product List:** Open this node. Paste in the expressions for Document ID and Sheet Name. The column mapper will load; map your sheet columns (e.g., item_name) to the data on the left (e.g., {{ $json.item_name }}).\n3. **Configure Save Latest Sales Data:** Open this node. Paste in the expressions for Document ID and Sheet Name. Save and run the workflow. After that, the column mapper will load. This is the most important step: map your sheet's column names (e.g., \"Total Revenue\") to the calculated metrics from the Calculate All Metrics node (e.g., {{ $json.totalGrossRevenue }}).\n\nActivate the workflow. ðŸ«¡\n\n### Requirements\n- Loyverse Integrations Subscription\n- Loyverse Access Token\n- Credentials for Loyverse (Bearer Auth)\n- Credentials for Google Sheets (OAuth2)\n- Credentials for Email/SMTP sender\n\n## How to customize the workflow\nThis template is designed to be highly flexible.\n\n### Central Configuration:\nAlmost all customization (POS devices, categories, payment types, sheet names) is done in the MASTER CONFIG node. You don't need to dig through other nodes.\n\n### Add/Remove Metrics:\nThe Calculate All Metrics node has additional metrics already set up, just add the relevant collumns to the SalesData sheet or even add your own calculations to the node. Any new metric you add (e.g., metrics.myNewMetric = 123) will be available to map in the Save Latest Sales Data node.\n\n### Email Body:\nYou can easily edit the Send email node to change the text or add new metrics from the Calculate All Metrics node.",
  "featuredImage": "/data/workflows/10420/10420.webp",
  "author": {
    "id": 101,
    "slug": "nikkapoo",
    "name": "Nik B.",
    "avatar": ""
  },
  "categories": [
    "Document Extraction"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 879,
  "downloads": 87,
  "createdAt": "2025-11-01T19:27:12.342Z",
  "updatedAt": "2026-01-16T09:04:58.365Z",
  "publishedAt": "2025-11-01T19:27:12.342Z",
  "nodes": 21,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10420",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automated daily financial analysis from Loyverse POS with Google Sheets & email",
    "workflowName": "Automated daily financial analysis from Loyverse POS with Google Sheets & email",
    "description": "Automatically fetches daily sales, shifts, and receipts from Loyverse. Calculates gross profit, net operating profit, other key metrics, saves them to a Google Sheet and sends out a daily report via email.\n\n## Whoâ€™s it for\nThis template is for any business owner, manager, or analyst using Loyverse POS who needs more advanced financial reporting. If you're a restaurant, bar, or retail owner who wants to automatically track daily net profit, compare sales to historical averages, and build a custom financial dashboard in Google Sheets, this workflow is for you.\n\n## How it works / What it does\nThis workflow runs automatically on a daily schedule. It fetches all sales data and receipts from your Loyverse account for the previous business day, defined by your custom shift times (even past midnight). \nA powerful Code node then processes all the data to calculate the metrics that Loyverse either doesn't provide at all, or only spreads out across several separate reports instead of in one consolidated place. \n\nAlready set up are metrics like...\n- -Total Revenue, Gross Profit, and Net Operating Profit\n- Cash handling differences (over/under)\n- Average spend per receipt (ATV)\n- 30-day rolling Net Operating Profit (NOP)\n- Performance vs. your historical weekday average\n\nFinally, it appends the single, calculated row of daily metrics to a Google Sheet and sends an easily customizable summary report to your email.\n\n## How to set up\nThis workflow includes detailed Sticky Notes to guide you through the setup process.\n\nBecause every business has a unique POS configuration (different POS devices, categories, and payment types), you'll need to set up a few things manually before executing the workflow. I've tried to make this as easy as possible to follow, and the entire setup should only take about 15 minutes.\n\n### Preparations & Credential setup\n1. Subscribe to \"Integrations\" Add-on in Loyverse ($9 / month) to gain API access.\n2. Create an Access token in Loyverse\n3. Create Credentials: In your n8n instance, create credentials for Loyverse (use \"Generic\" &gt; \"Bearer Auth\"), Google Sheets (OAuth2), and your Email (SMTP or other).\n\n### Make a copy of a prep-configured Google Spreadsheet\n*(Link in the second sticky note inside the workflow).*\n\n### Fill MASTER CONFIG: \nOpen the MASTER CONFIG node. Follow the comments inside to add your Google Sheet ID, Sheet Names, business hours, timezone, and Loyverse IDs (for POS devices, payment types, and categories).\n\n### Configure Google Sheet Nodes\n\n1. **Configure Read Historical Data:** Open this node. Follow the instructions in the nearby Sticky Note to paste the expressions for your Document ID and Sheet Name.\n2. **Configure Save Product List:** Open this node. Paste in the expressions for Document ID and Sheet Name. The column mapper will load; map your sheet columns (e.g., item_name) to the data on the left (e.g., {{ $json.item_name }}).\n3. **Configure Save Latest Sales Data:** Open this node. Paste in the expressions for Document ID and Sheet Name. Save and run the workflow. After that, the column mapper will load. This is the most important step: map your sheet's column names (e.g., \"Total Revenue\") to the calculated metrics from the Calculate All Metrics node (e.g., {{ $json.totalGrossRevenue }}).\n\nActivate the workflow. ðŸ«¡\n\n### Requirements\n- Loyverse Integrations Subscription\n- Loyverse Access Token\n- Credentials for Loyverse (Bearer Auth)\n- Credentials for Google Sheets (OAuth2)\n- Credentials for Email/SMTP sender\n\n## How to customize the workflow\nThis template is designed to be highly flexible.\n\n### Central Configuration:\nAlmost all customization (POS devices, categories, payment types, sheet names) is done in the MASTER CONFIG node. You don't need to dig through other nodes.\n\n### Add/Remove Metrics:\nThe Calculate All Metrics node has additional metrics already set up, just add the relevant collumns to the SalesData sheet or even add your own calculations to the node. Any new metric you add (e.g., metrics.myNewMetric = 123) will be available to map in the Save Latest Sales Data node.\n\n### Email Body:\nYou can easily edit the Send email node to change the text or add new metrics from the Calculate All Metrics node.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking â€˜Execute workflowâ€™",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Read Historical Data",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Calculate All Metrics",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Get all products from Loyverse",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.1"
    },
    {
      "name": "Format Product Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Calculate Shift Time",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Get Yesterday's Shifts From Loyverse",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.1"
    },
    {
      "name": "Get Yesterday's Receipts From Loyverse",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.1"
    },
    {
      "name": "Send email",
      "type": "n8n-nodes-base.emailSend",
      "role": "emailSend",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Run Daily at 8:15AM (open to change)",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "MASTER CONFIG",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Save Product List",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Save Latest Sales Data",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    }
  ]
}