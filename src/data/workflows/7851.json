{
  "id": 7851,
  "slug": "7851",
  "title": "Cheaper, faster, accurate answers with memory summarization & dynamic routing!",
  "description": "# ü§ñüí¨ Smart Telegram AI Assistant with Memory Summarization & Dynamic Model Selection\n\n&gt; **Optimize your AI workflows, cut costs, and get faster, more accurate answers.**\n\n---\n\n## üìã Description\n\nTired of expensive AI calls, slow responses, or bots that forget your context?  \nThis **Telegram AI Assistant template** is designed to **optimize cost, speed, and precision** in your AI-powered conversations.  \n\nBy combining **PostgreSQL chat memory**, **AI summarization**, and **dynamic model selection**, this workflow ensures you only pay for what you really need. Simple queries get routed to lightweight models, while complex requests automatically trigger more advanced ones. The result? **Smarter context, lower costs, and better answers.**\n\nThis template is perfect for anyone who wants to:  \n- ‚ö° **Save money** by using cheaper models for easy tasks.  \n- üß† **Keep context relevant** with AI-powered summarization.  \n- ‚è±Ô∏è **Respond faster** thanks to optimized chat memory storage.  \n- üí¨ **Deliver better answers** directly inside Telegram.  \n\n---\n\n### ‚ú® Key Benefits\n- üí∏ **Cost Optimization**: Automatically routes simple requests to Gemini Flash Lite and reserves Gemini Pro only for complex reasoning.  \n- üß† **Smarter Context**: Summarization ensures only the most relevant chat history is used.  \n- ‚è±Ô∏è **Faster Workflows**: Storing user + agent messages in a single row reduces DB queries by half and saves ~0.3s per response.  \n- üé§ **Voice Message Support**: Convert Telegram voice notes to text and reply intelligently.  \n- üõ°Ô∏è **Error-Proof Formatting**: Safe MarkdownV2 ensures Telegram-ready answers.  \n\n---\n\n## üíº Use Case\n\nThis template is for **anyone who needs an AI chatbot on Telegram** that balances **cost, performance, and intelligence**.  \n\n- Customer support teams can **reduce expenses** by using lightweight models for FAQs.  \n- Freelancers and consultants can **offer faster AI-powered chats** without losing context.  \n- Power users can **handle voice + text seamlessly** while keeping conversations memory-aware.  \n\nWhether you‚Äôre scaling a business or just want a smarter assistant, this workflow adapts to your needs and budget.  \n\n---\n\n## üí¨ Example Interactions\n- **Quick Q&A** ‚Üí Routed to Gemini Flash Lite for fast, low-cost answers.  \n- **Complex problem-solving** ‚Üí Sent to Gemini Pro for in-depth reasoning.  \n- **Voice messages** ‚Üí Automatically transcribed, summarized, and answered.  \n- **Long conversations** ‚Üí Context is summarized, ensuring precise and efficient replies.  \n\n---\n\n## üîë Required Credentials\n- **Telegram Bot API** (Bot Token)  \n- **PostgreSQL** (Database connection)  \n- **Google Gemini API** (Flash Lite, Flash, Pro)  \n\n---\n\n## ‚öôÔ∏è Setup Instructions\n1. üóÑÔ∏è **Create the PostgreSQL table** (`chat_memory`) from the Gray section SQL.  \n2. üîå Configure the **Telegram Trigger** with your bot token.  \n3. ü§ñ Connect your **Gemini API credentials**.  \n4. üóÇÔ∏è Set up PostgreSQL nodes with your DB details.  \n5. ‚ñ∂Ô∏è Activate the workflow and start chatting with your AI-powered Telegram bot.  \n\n---\n\n## üè∑ Tags\n`telegram` `ai-assistant` `chatbot` `postgresql`  \n`summarization` `memory` `gemini` `dynamic-routing`  \n`workflow-optimization` `cost-saving` `voice-to-text`\n\n---\n\n## üôè Acknowledgement\n\nA special thank you to Davide for the inspiration behind this template.  \nHis work on the [**AI Orchestrator that dynamically selects models based on input type**](https://n8n.io/workflows/7004-ai-orchestrator-dynamically-selects-models-based-on-input-type/) served as a foundational guide for this architecture.\n\n\n---\n\n## üí° Need Assistance?\n\nWant to customize this workflow for your business or project? Let‚Äôs connect:  \n\nüìß Email: [johnsilva11031@gmail.com](mailto:johnsilva11031@gmail.com)  \nüîó LinkedIn: [John Alejandro Silva Rodr√≠guez](https://www.linkedin.com/in/john-alejandro-silva-rodriguez-48093526b/)  \n",
  "featuredImage": "/data/workflows/7851/7851.webp",
  "author": {
    "id": 101,
    "slug": "alejandro-silva",
    "name": "John Alejandro SIlva",
    "avatar": ""
  },
  "categories": [
    "AI Chatbot",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1211,
  "downloads": 121,
  "createdAt": "2025-08-25T18:31:15.419Z",
  "updatedAt": "2026-01-16T08:52:39.597Z",
  "publishedAt": "2025-08-25T18:31:15.419Z",
  "nodes": 36,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7851",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Cheaper, faster, accurate answers with memory summarization & dynamic routing!",
    "workflowName": "Cheaper, faster, accurate answers with memory summarization & dynamic routing!",
    "description": "# ü§ñüí¨ Smart Telegram AI Assistant with Memory Summarization & Dynamic Model Selection\n\n&gt; **Optimize your AI workflows, cut costs, and get faster, more accurate answers.**\n\n---\n\n## üìã Description\n\nTired of expensive AI calls, slow responses, or bots that forget your context?  \nThis **Telegram AI Assistant template** is designed to **optimize cost, speed, and precision** in your AI-powered conversations.  \n\nBy combining **PostgreSQL chat memory**, **AI summarization**, and **dynamic model selection**, this workflow ensures you only pay for what you really need. Simple queries get routed to lightweight models, while complex requests automatically trigger more advanced ones. The result? **Smarter context, lower costs, and better answers.**\n\nThis template is perfect for anyone who wants to:  \n- ‚ö° **Save money** by using cheaper models for easy tasks.  \n- üß† **Keep context relevant** with AI-powered summarization.  \n- ‚è±Ô∏è **Respond faster** thanks to optimized chat memory storage.  \n- üí¨ **Deliver better answers** directly inside Telegram.  \n\n---\n\n### ‚ú® Key Benefits\n- üí∏ **Cost Optimization**: Automatically routes simple requests to Gemini Flash Lite and reserves Gemini Pro only for complex reasoning.  \n- üß† **Smarter Context**: Summarization ensures only the most relevant chat history is used.  \n- ‚è±Ô∏è **Faster Workflows**: Storing user + agent messages in a single row reduces DB queries by half and saves ~0.3s per response.  \n- üé§ **Voice Message Support**: Convert Telegram voice notes to text and reply intelligently.  \n- üõ°Ô∏è **Error-Proof Formatting**: Safe MarkdownV2 ensures Telegram-ready answers.  \n\n---\n\n## üíº Use Case\n\nThis template is for **anyone who needs an AI chatbot on Telegram** that balances **cost, performance, and intelligence**.  \n\n- Customer support teams can **reduce expenses** by using lightweight models for FAQs.  \n- Freelancers and consultants can **offer faster AI-powered chats** without losing context.  \n- Power users can **handle voice + text seamlessly** while keeping conversations memory-aware.  \n\nWhether you‚Äôre scaling a business or just want a smarter assistant, this workflow adapts to your needs and budget.  \n\n---\n\n## üí¨ Example Interactions\n- **Quick Q&A** ‚Üí Routed to Gemini Flash Lite for fast, low-cost answers.  \n- **Complex problem-solving** ‚Üí Sent to Gemini Pro for in-depth reasoning.  \n- **Voice messages** ‚Üí Automatically transcribed, summarized, and answered.  \n- **Long conversations** ‚Üí Context is summarized, ensuring precise and efficient replies.  \n\n---\n\n## üîë Required Credentials\n- **Telegram Bot API** (Bot Token)  \n- **PostgreSQL** (Database connection)  \n- **Google Gemini API** (Flash Lite, Flash, Pro)  \n\n---\n\n## ‚öôÔ∏è Setup Instructions\n1. üóÑÔ∏è **Create the PostgreSQL table** (`chat_memory`) from the Gray section SQL.  \n2. üîå Configure the **Telegram Trigger** with your bot token.  \n3. ü§ñ Connect your **Gemini API credentials**.  \n4. üóÇÔ∏è Set up PostgreSQL nodes with your DB details.  \n5. ‚ñ∂Ô∏è Activate the workflow and start chatting with your AI-powered Telegram bot.  \n\n---\n\n## üè∑ Tags\n`telegram` `ai-assistant` `chatbot` `postgresql`  \n`summarization` `memory` `gemini` `dynamic-routing`  \n`workflow-optimization` `cost-saving` `voice-to-text`\n\n---\n\n## üôè Acknowledgement\n\nA special thank you to Davide for the inspiration behind this template.  \nHis work on the [**AI Orchestrator that dynamically selects models based on input type**](https://n8n.io/workflows/7004-ai-orchestrator-dynamically-selects-models-based-on-input-type/) served as a foundational guide for this architecture.\n\n\n---\n\n## üí° Need Assistance?\n\nWant to customize this workflow for your business or project? Let‚Äôs connect:  \n\nüìß Email: [johnsilva11031@gmail.com](mailto:johnsilva11031@gmail.com)  \nüîó LinkedIn: [John Alejandro Silva Rodr√≠guez](https://www.linkedin.com/in/john-alejandro-silva-rodriguez-48093526b/)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Model Selector",
      "type": "@n8n/n8n-nodes-langchain.modelSelector",
      "role": "modelSelector",
      "configDescription": "Version 1"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Gemini 2.5 Flash Lite",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Gemini 2.5 Flash",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Gemini 2.5 Pro",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Chat Memory",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "MarkdownV2",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send a text message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Fix mime",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Typing‚Ä¶",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "get_message (Audio/Video message)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Analyze voice message",
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "role": "googleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "get_message (text)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Input Message Router1",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Download Voice Message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Normalize input",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Gemini 2.5 Flash Lite",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "get_error_message",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "When clicking ‚ÄòExecute workflow‚Äô",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Create Chat Memory Table",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Update Chat Memory (User and Agent)",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Summarize & Categorize",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}