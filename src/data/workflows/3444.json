{
  "id": 3444,
  "slug": "3444",
  "title": "Redis locking for concurrent task handling",
  "description": "## üë§ Who is this for?\n\nThis workflow is great for **n8n users who want to prevent duplicate or overlapping workflow runs**. If you're a developer, DevOps engineer, or automation enthusiast managing tasks like **database updates, syncing tools, or hitting rate-limited APIs**, this one‚Äôs for you.\n\n---\n\n## üß© What problem does this solve?\n\nIn the real world, automations can get triggered at the same time‚Äîwhether that‚Äôs because of multiple webhook calls, overlapping schedules, or retries. And when two workflows try to do the same thing at once (like updating a record or syncing data), it can cause **conflicts, data corruption, or wasted API calls**.\n\nThis workflow helps avoid that problem by using **Redis as a lock system**, so **only one instance runs at a time**. Think of it like putting up a ‚Äúüöß Workflow in Progress‚Äù sign while your logic is running.\n\n---\n\n## ‚öôÔ∏è What this workflow does\n\n1. When the workflow starts, it tries to **set a Redis key** as a lock with a short expiry.\n2. If the lock is free:\n   - Your **main business logic runs**.\n   - Once it's done, the lock is cleared.\n3. If the lock is already taken (i.e., another run is in progress):\n   - The workflow will **wait and retry** a few times.\n4. If a duplicate request shows up while one is already being processed:\n   - It **skips that duplicate** to avoid unnecessary work.\n\nYou can customize both the **timeout** and **retry logic** to match your needs.\n\n---\n\n## üõ†Ô∏è Setup guide\n\nTo use this template:\n\n- You‚Äôll need access to a **Redis instance** (either self-hosted or managed like Upstash, Redis Cloud, etc).\n- Set up your Redis credentials in the n8n Redis node.\n- Swap out the webhook node with your actual trigger or logic.\n- Adjust the lock timeout to match how long your task typically takes.\n\n&gt; üí° **Bonus Tip:** Use this pattern wherever you need **idempotency** or want to avoid **duplicate processing**.\n\n---\n\n## üß™ Example use case\n\nLet‚Äôs say you have a workflow that **syncs ClickUp tickets to Google Sheets**. It runs daily at 9 AM and updates tickets, adds notes, and makes sure nothing is missed.\n\nBut what if two runs start at the same time? Or someone triggers a manual sync while the scheduled one is still working?\n\nBy wrapping that whole sync inside this **Redis locking template**, you can make sure it **only runs one at a time**, saving your APIs (and your sanity).",
  "featuredImage": "/data/workflows/3444/3444.webp",
  "author": {
    "id": 101,
    "slug": "geffy",
    "name": "Geoffrey Saxena",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 672,
  "downloads": 67,
  "createdAt": "2025-04-06T08:12:44.136Z",
  "updatedAt": "2026-01-16T08:29:48.262Z",
  "publishedAt": "2025-04-06T08:12:44.136Z",
  "nodes": 18,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3444",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Redis locking for concurrent task handling",
    "workflowName": "Redis locking for concurrent task handling",
    "description": "## üë§ Who is this for?\n\nThis workflow is great for **n8n users who want to prevent duplicate or overlapping workflow runs**. If you're a developer, DevOps engineer, or automation enthusiast managing tasks like **database updates, syncing tools, or hitting rate-limited APIs**, this one‚Äôs for you.\n\n---\n\n## üß© What problem does this solve?\n\nIn the real world, automations can get triggered at the same time‚Äîwhether that‚Äôs because of multiple webhook calls, overlapping schedules, or retries. And when two workflows try to do the same thing at once (like updating a record or syncing data), it can cause **conflicts, data corruption, or wasted API calls**.\n\nThis workflow helps avoid that problem by using **Redis as a lock system**, so **only one instance runs at a time**. Think of it like putting up a ‚Äúüöß Workflow in Progress‚Äù sign while your logic is running.\n\n---\n\n## ‚öôÔ∏è What this workflow does\n\n1. When the workflow starts, it tries to **set a Redis key** as a lock with a short expiry.\n2. If the lock is free:\n   - Your **main business logic runs**.\n   - Once it's done, the lock is cleared.\n3. If the lock is already taken (i.e., another run is in progress):\n   - The workflow will **wait and retry** a few times.\n4. If a duplicate request shows up while one is already being processed:\n   - It **skips that duplicate** to avoid unnecessary work.\n\nYou can customize both the **timeout** and **retry logic** to match your needs.\n\n---\n\n## üõ†Ô∏è Setup guide\n\nTo use this template:\n\n- You‚Äôll need access to a **Redis instance** (either self-hosted or managed like Upstash, Redis Cloud, etc).\n- Set up your Redis credentials in the n8n Redis node.\n- Swap out the webhook node with your actual trigger or logic.\n- Adjust the lock timeout to match how long your task typically takes.\n\n&gt; üí° **Bonus Tip:** Use this pattern wherever you need **idempotency** or want to avoid **duplicate processing**.\n\n---\n\n## üß™ Example use case\n\nLet‚Äôs say you have a workflow that **syncs ClickUp tickets to Google Sheets**. It runs daily at 9 AM and updates tickets, adds notes, and makes sure nothing is missed.\n\nBut what if two runs start at the same time? Or someone triggers a manual sync while the scheduled one is still working?\n\nBy wrapping that whole sync inside this **Redis locking template**, you can make sure it **only runs one at a time**, saving your APIs (and your sanity).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "END",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Workflow 1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Workflow 2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Workflow 3",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Incoming Webhook Data",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Fetch Webhook Data & Declare lockValue",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Check Redis Lock",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "Acquire Redis Lock",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "redisLock existence boolean",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "redisLock acquired booleans",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Poll for lock",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "duplicateWebhook boolean",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Discard Redis Lock",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Workflow Switch",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}