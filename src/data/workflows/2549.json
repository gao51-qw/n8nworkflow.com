{
  "id": 2549,
  "slug": "2549",
  "title": "Automate google analytics reporting",
  "description": "# Automate Google Analytics Reporting with n8n\n\nThis n8n workflow collects, processes, and formats Google Analytics data into a comprehensive HTML report. The report is segmented into three primary categories: Engagement Stats, Search Results, and Country Views. The formatted report can be emailed or saved as a document, and the workflow includes error handling and logging for better debugging.\n\n## Overview\n\n### Purpose\n\nTo automate the extraction, processing, and presentation of Google Analytics data in a visually appealing and structured format for easier insights and decision-making.\n\n### Features\n\n- **Data Parsing**: Individual parsers process raw Google Analytics data for different time periods and categories.\n- **Data Aggregation**: Combines parsed data into a single structured JSON object.\n- **HTML Report Generation**: Formats the aggregated data into an HTML table with color-coded segments for better readability.\n- **Email or Document Output**: The formatted report can be emailed or saved as a Google Doc (will need additional setup).\n- **Error Handling**: Includes checks for missing data and detailed error messages for debugging.\n\n## Workflow Steps\n\n1. **Data Fetching**:\n\n   - Six separate Google Analytics data pulls:\n     - Page Engagement Stats (This Week and Prior Week)\n     - Google Search Results (This Week and Prior Week)\n     - Country Views (This Week and Prior Week)\n\n2. **Data Parsing**:\n\n   - Each data pull is processed using a dedicated parser node to generate a URL-safe string.\n   - Example nodes:\n     - `Parse - Get Page Engagement This Week`\n     - `Parse - Country Views Prior Week`\n\n3. **Data Aggregation**:\n\n   - Aggregates parsed data into a structured JSON object using the `Aggregate Data` node.\n   - Ensures consistency and handles missing or malformed data.\n\n4. **HTML Report Generation**:\n\n   - Creates a formatted HTML report with color-coded tables for each segment:\n     - **Engagement Stats**: Green\n     - **Search Results**: Blue\n     - **Country Views**: Orange\n   - Includes headers and neatly formatted tables for each data set.\n\n5. **Output**:\n\n   - The report can be sent via email using the Gmail API or saved to Google Docs.\n   - Example nodes:\n     - `Gmail` node for email delivery.\n     - `Google Docs` node for saving the report as a document.\n\n## Requirements\n\n### Prerequisites\n\n- **Google Cloud Setup**:\n  - Enable Google Analytics API.\n  - Enable Gmail API (if using email output).\n  - Generate OAuth credentials for API access.\n- **n8n Installation**:\n  - Self-hosted n8n instance with required nodes (Gmail, Google Docs, etc.).\n  - [Free Cloud-based n8n account]( https://n8n.partnerlinks.io/alexk1919).\n\n### Environment Variables\n\n- Ensure API credentials and tokens are set up in the n8n environment.\n- Update the respective nodes with client ID, client secret, and access tokens.\n\n## Configuration\n\n### Google Analytics\n\n- Configure the `Get Report` nodes with the appropriate property ID and metrics.\n- Ensure correct date ranges are selected for each node.\n\n### Formatting Node\n\n- The `Format Data` node processes aggregated data and generates the HTML content.\n- Customize the HTML styling and segment colors as needed.\n\n### Email Node\n\n- Configure the Gmail node with OAuth credentials.\n- Set the recipient email address and subject line dynamically.\n\n## Error Handling\n\n### Common Issues\n\n1. **Authentication Errors**:\n\n   - Ensure OAuth credentials are correct.\n   - Verify that the APIs are enabled in the Google Cloud Console.\n\n2. **Empty Data**:\n\n   - Check the raw data from Google Analytics.\n   - Validate the property ID and query parameters in the `Get Report` nodes.\n\n3. **Parsing Errors**:\n\n   - Ensure the parser nodes are correctly configured and match the expected input format.\n\n### Debugging\n\n- Use debug logs in each node to identify data flow issues.\n- Add error-handling nodes to capture and log issues during execution.\n\n## Example Usage\n\n1. **Run the Workflow**\n   - Trigger the workflow to fetch, process, and format Google Analytics data.\n2. **Verify Output**\n   - Check the formatted HTML output in the debug logs.\n   - Ensure the email or Google Doc contains the correctly formatted report.\n\n## Future Enhancements\n\n- Add support for additional metrics or dimensions.\n- Integrate with Slack for notifications.\n- Enable scheduling for automated reports.\n- Add a visual dashboard for real-time analytics.\n\n---\n",
  "featuredImage": "/data/workflows/2549/2549.webp",
  "author": {
    "id": 101,
    "slug": "alexk1919",
    "name": "Alex Kim",
    "avatar": ""
  },
  "categories": [
    "Document Extraction"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 17174,
  "downloads": 1717,
  "createdAt": "2024-11-15T03:56:10.002Z",
  "updatedAt": "2026-01-16T08:25:19.766Z",
  "publishedAt": "2024-11-15T03:56:10.002Z",
  "nodes": 23,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2549",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate google analytics reporting",
    "workflowName": "Automate google analytics reporting",
    "description": "# Automate Google Analytics Reporting with n8n\n\nThis n8n workflow collects, processes, and formats Google Analytics data into a comprehensive HTML report. The report is segmented into three primary categories: Engagement Stats, Search Results, and Country Views. The formatted report can be emailed or saved as a document, and the workflow includes error handling and logging for better debugging.\n\n## Overview\n\n### Purpose\n\nTo automate the extraction, processing, and presentation of Google Analytics data in a visually appealing and structured format for easier insights and decision-making.\n\n### Features\n\n- **Data Parsing**: Individual parsers process raw Google Analytics data for different time periods and categories.\n- **Data Aggregation**: Combines parsed data into a single structured JSON object.\n- **HTML Report Generation**: Formats the aggregated data into an HTML table with color-coded segments for better readability.\n- **Email or Document Output**: The formatted report can be emailed or saved as a Google Doc (will need additional setup).\n- **Error Handling**: Includes checks for missing data and detailed error messages for debugging.\n\n## Workflow Steps\n\n1. **Data Fetching**:\n\n   - Six separate Google Analytics data pulls:\n     - Page Engagement Stats (This Week and Prior Week)\n     - Google Search Results (This Week and Prior Week)\n     - Country Views (This Week and Prior Week)\n\n2. **Data Parsing**:\n\n   - Each data pull is processed using a dedicated parser node to generate a URL-safe string.\n   - Example nodes:\n     - `Parse - Get Page Engagement This Week`\n     - `Parse - Country Views Prior Week`\n\n3. **Data Aggregation**:\n\n   - Aggregates parsed data into a structured JSON object using the `Aggregate Data` node.\n   - Ensures consistency and handles missing or malformed data.\n\n4. **HTML Report Generation**:\n\n   - Creates a formatted HTML report with color-coded tables for each segment:\n     - **Engagement Stats**: Green\n     - **Search Results**: Blue\n     - **Country Views**: Orange\n   - Includes headers and neatly formatted tables for each data set.\n\n5. **Output**:\n\n   - The report can be sent via email using the Gmail API or saved to Google Docs.\n   - Example nodes:\n     - `Gmail` node for email delivery.\n     - `Google Docs` node for saving the report as a document.\n\n## Requirements\n\n### Prerequisites\n\n- **Google Cloud Setup**:\n  - Enable Google Analytics API.\n  - Enable Gmail API (if using email output).\n  - Generate OAuth credentials for API access.\n- **n8n Installation**:\n  - Self-hosted n8n instance with required nodes (Gmail, Google Docs, etc.).\n  - [Free Cloud-based n8n account]( https://n8n.partnerlinks.io/alexk1919).\n\n### Environment Variables\n\n- Ensure API credentials and tokens are set up in the n8n environment.\n- Update the respective nodes with client ID, client secret, and access tokens.\n\n## Configuration\n\n### Google Analytics\n\n- Configure the `Get Report` nodes with the appropriate property ID and metrics.\n- Ensure correct date ranges are selected for each node.\n\n### Formatting Node\n\n- The `Format Data` node processes aggregated data and generates the HTML content.\n- Customize the HTML styling and segment colors as needed.\n\n### Email Node\n\n- Configure the Gmail node with OAuth credentials.\n- Set the recipient email address and subject line dynamically.\n\n## Error Handling\n\n### Common Issues\n\n1. **Authentication Errors**:\n\n   - Ensure OAuth credentials are correct.\n   - Verify that the APIs are enabled in the Google Cloud Console.\n\n2. **Empty Data**:\n\n   - Check the raw data from Google Analytics.\n   - Validate the property ID and query parameters in the `Get Report` nodes.\n\n3. **Parsing Errors**:\n\n   - Ensure the parser nodes are correctly configured and match the expected input format.\n\n### Debugging\n\n- Use debug logs in each node to identify data flow issues.\n- Add error-handling nodes to capture and log issues during execution.\n\n## Example Usage\n\n1. **Run the Workflow**\n   - Trigger the workflow to fetch, process, and format Google Analytics data.\n2. **Verify Output**\n   - Check the formatted HTML output in the debug logs.\n   - Ensure the email or Google Doc contains the correctly formatted report.\n\n## Future Enhancements\n\n- Add support for additional metrics or dimensions.\n- Integrate with Slack for notifications.\n- Enable scheduling for automated reports.\n- Add a visual dashboard for real-time analytics.\n\n---",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Page Engagement Stats for this week",
      "type": "n8n-nodes-base.googleAnalytics",
      "role": "googleAnalytics",
      "configDescription": "Version 2"
    },
    {
      "name": "Get Page Engagement Stats for prior week",
      "type": "n8n-nodes-base.googleAnalytics",
      "role": "googleAnalytics",
      "configDescription": "Version 2"
    },
    {
      "name": "Get Google Search Results for this week",
      "type": "n8n-nodes-base.googleAnalytics",
      "role": "googleAnalytics",
      "configDescription": "Version 2"
    },
    {
      "name": "Get Country views data for this week",
      "type": "n8n-nodes-base.googleAnalytics",
      "role": "googleAnalytics",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Aggregate Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Get Google Search Results for prior week",
      "type": "n8n-nodes-base.googleAnalytics",
      "role": "googleAnalytics",
      "configDescription": "Version 2"
    },
    {
      "name": "Get Country views data for prior week",
      "type": "n8n-nodes-base.googleAnalytics",
      "role": "googleAnalytics",
      "configDescription": "Version 2"
    },
    {
      "name": "Parse - Get Page Engagement This Week",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Parse - Get Page Engagement Prior Week",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Parse - Get Google Search This Week",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Parse - Get Google Search Prior Week",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Parse - Country Views This Week",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Parse - Country Views Prior Week",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Set urlStrings",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Format Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Input All",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Email the Report",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    }
  ]
}