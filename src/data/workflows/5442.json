{
  "id": 5442,
  "slug": "5442",
  "title": "Automated expense tracking with AI receipt analysis & Google Sheets",
  "description": "*This workflow contains community nodes that are only compatible with the self-hosted version of n8n.* \n\n**Your Pocket Bookkeeper** is workflow designed to automate expense tracking for freelancers and small businesses. It transforms your favorite chat app into a smart financial assistant, eliminating tedious manual data entry and ensuring your records are always organized, up-to-date, and secure. Just send a photo or a text, and let AI handle the rest.\n\n### Why Your Pocket Bookkeeper? ü§î\n\nFor a freelancer or small business owner, time is money. Administrative tasks like logging receipts and updating spreadsheets steal valuable hours that could be spent on billable work. This workflow solves these critical problems:\n\n*   **Saves Significant Time:** Drastically reduces the hours spent on manual bookkeeping.\n*   **Eliminates Human Error:** AI-powered data extraction is more accurate than manual entry, preventing costly mistakes.\n*   **Ensures Audit-Readiness:** Creates a secure, digital archive of every receipt, linked directly to its corresponding transaction.\n*   **Provides Real-Time Financial Clarity:** Your expense log is always current, giving you an accurate snapshot of your business spending at any moment.\n*   **Simplifies Tax Season:** With perfectly organized records, preparing your tax return becomes a straightforward, stress-free process.\n\n### Core Features & Automations üß©\n\nThis workflow bundle is built around a simple yet powerful \"Capture &gt; Process &gt; Log\" model:\n\nüßæ **Multi-Modal Expense Capture:**\n*   **Photo Capture:** Snap a photo of a receipt. The workflow automatically extracts the text using Optical Character Recognition (OCR).\n*   **Text Capture:** Send a simple text message describing an expense (e.g., \"Software subscription for $15\").\n\nü§ñ **AI-Powered Processing:**\n*   **Intelligent Data Extraction:** An advanced AI Agent (powered by Mistral) analyzes the text from your photo or message to identify and structure key financial data.\n*   **Structured Output:** The AI formats the extracted information into a clean JSON object, identifying fields like:\n    *   `store_name`, `date`, `time`, `total_price`, `currency`, `item_description`, `category`, and more.\n*   **Smart Validation:** A built-in check flags potential errors, like a transaction with a total of zero, and prompts you to double-check.\n\nüóÑÔ∏è **Automated Logging & Archiving:**\n*   **Google Sheets Integration:** Every valid expense is automatically appended as a new, neatly organized row in a designated Google Sheet.\n*   **Google Drive Archiving:** If a photo was submitted, the original receipt image is automatically saved to a specified Google Drive folder.\n*   **Linked Records:** The Google Sheet entry includes a direct hyperlink to the corresponding receipt image in Google Drive, creating a seamless, interconnected record.\n*   **User Confirmation:** The system sends a summary of the logged expense or a success/error message back to you via Telegram, closing the loop on every transaction.\n\n### Getting Started: Setup & Customization üõ†Ô∏è\n\nSetting up your Pocket Bookkeeper is designed to be quick and easy:\n\n1.  **Import the Workflow:** Add the provided `.json` file to your n8n instance.\n2.  **Configure Credentials:**\n    *   **Telegram:** Create a new bot via `@BotFather` on Telegram to get a Bot Token. Add this token to the `Telegram Trigger` and all `Telegram` sender nodes.\n    *   **Mistral AI:** Obtain an API key from your Mistral AI console and create a `Mistral Cloud API` credential. Assign this to the `Mistral Cloud Chat Model` nodes.\n    *   **Google Drive & Google Sheets:** Set up OAuth 2.0 credentials for the Google Drive and Google Sheets APIs in your Google Cloud Console. Create the corresponding credentials in n8n and assign them to the `Google Drive` and `Google Sheets` nodes.\n3.  **Personalize Your Setup (Crucial!):**\n    *   **Google Drive Folder:** In the `Save Receipt` (Google Drive) node, specify the **Folder ID** where you want your receipt images to be saved.\n    *   **Google Sheet:** In the `Google Sheets` node, enter your **Spreadsheet ID** and **Sheet Name**. Ensure your sheet has columns matching the data fields (e.g., `store_name`, `date`, `total_price`, etc.).\n    *   **(Optional) AI Prompting:** Fine-tune the system message in the `AI Agent` node to better guide the AI on how to categorize your specific business expenses.\n4.  **Activate the Workflow:**\n    *   The workflow is inactive by default. Toggle the **Active** switch to `ON` at the top left of the n8n canvas to start listening for messages.\n\n### How The Workflow Operates ‚öôÔ∏è\n\n1.  **TRIGGER:** The `Telegram Trigger` node listens for incoming messages (text or photo).\n2.  **ROUTE:** An `IF` node checks if the message contains a photo.\n    *   **If Photo:** The image is downloaded, and OCR is used to extract text.\n    *   **If Text:** The message text is used directly.\n3.  **PROCESS:** The extracted text is sent to the `AI Agent` node. The agent, using the Mistral LLM, parses the text and structures it into a predefined JSON format.\n4.  **VALIDATE & FORMAT:** The structured data flows to a `Code` node that formats a user-friendly summary message. An `IF` node then checks for invalid data (e.g., total = 0).\n5.  **LOG & ARCHIVE:**\n    *   A sub-workflow is triggered via the `Execute Workflow` node.\n    *   The `Save Receipt` node uploads the image to Google Drive (if one was sent).\n    *   The `Google Sheets` node appends the final structured data to your spreadsheet.\n6.  **RESPOND:** A `Telegram` node sends a confirmation message back to you, confirming that the expense has been successfully logged or notifying you of an error.\n\n### Expanding Your Bookkeeper üöÄ\n\nThis workflow is a powerful foundation. Consider these enhancements:\n\n*   **Multi-Currency Handling:** Add a function to convert all expenses to a single base currency.\n*   **Advanced Reporting:** Schedule a monthly summary of your expenses to be emailed to you.\n*   **Invoice OCR:** Expand the AI prompt and workflow to handle and log incoming invoices from vendors.\n*   **Bank Statement Reconciliation:** Create a separate workflow to import bank statements and automatically match them against your logged receipts.\n*   **Different Notifiers:** Easily swap Telegram for WhatsApp, Slack, or email.\n\n### Requirements üìã\n\n*   An active n8n instance (self-hosted or cloud).\n*   Credentials for Telegram, Mistral AI/Open Router/Open AI, Google Drive, and Google Sheets.\n*   A few minutes to customize the workflow with your specific IDs and preferences!\n\nTake control of your business finances and let your **Pocket Bookkeeper** turn a tedious chore into a simple, automated task.",
  "featuredImage": "/data/workflows/5442/5442.webp",
  "author": {
    "id": 101,
    "slug": "devgor",
    "name": "Issam AGGOUR",
    "avatar": ""
  },
  "categories": [
    "Invoice Processing",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 303,
  "downloads": 30,
  "createdAt": "2025-06-28T21:14:53.903Z",
  "updatedAt": "2026-01-16T08:39:43.948Z",
  "publishedAt": "2025-06-28T21:14:53.903Z",
  "nodes": 51,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5442",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automated expense tracking with AI receipt analysis & Google Sheets",
    "workflowName": "Automated expense tracking with AI receipt analysis & Google Sheets",
    "description": "*This workflow contains community nodes that are only compatible with the self-hosted version of n8n.* \n\n**Your Pocket Bookkeeper** is workflow designed to automate expense tracking for freelancers and small businesses. It transforms your favorite chat app into a smart financial assistant, eliminating tedious manual data entry and ensuring your records are always organized, up-to-date, and secure. Just send a photo or a text, and let AI handle the rest.\n\n### Why Your Pocket Bookkeeper? ü§î\n\nFor a freelancer or small business owner, time is money. Administrative tasks like logging receipts and updating spreadsheets steal valuable hours that could be spent on billable work. This workflow solves these critical problems:\n\n*   **Saves Significant Time:** Drastically reduces the hours spent on manual bookkeeping.\n*   **Eliminates Human Error:** AI-powered data extraction is more accurate than manual entry, preventing costly mistakes.\n*   **Ensures Audit-Readiness:** Creates a secure, digital archive of every receipt, linked directly to its corresponding transaction.\n*   **Provides Real-Time Financial Clarity:** Your expense log is always current, giving you an accurate snapshot of your business spending at any moment.\n*   **Simplifies Tax Season:** With perfectly organized records, preparing your tax return becomes a straightforward, stress-free process.\n\n### Core Features & Automations üß©\n\nThis workflow bundle is built around a simple yet powerful \"Capture &gt; Process &gt; Log\" model:\n\nüßæ **Multi-Modal Expense Capture:**\n*   **Photo Capture:** Snap a photo of a receipt. The workflow automatically extracts the text using Optical Character Recognition (OCR).\n*   **Text Capture:** Send a simple text message describing an expense (e.g., \"Software subscription for $15\").\n\nü§ñ **AI-Powered Processing:**\n*   **Intelligent Data Extraction:** An advanced AI Agent (powered by Mistral) analyzes the text from your photo or message to identify and structure key financial data.\n*   **Structured Output:** The AI formats the extracted information into a clean JSON object, identifying fields like:\n    *   `store_name`, `date`, `time`, `total_price`, `currency`, `item_description`, `category`, and more.\n*   **Smart Validation:** A built-in check flags potential errors, like a transaction with a total of zero, and prompts you to double-check.\n\nüóÑÔ∏è **Automated Logging & Archiving:**\n*   **Google Sheets Integration:** Every valid expense is automatically appended as a new, neatly organized row in a designated Google Sheet.\n*   **Google Drive Archiving:** If a photo was submitted, the original receipt image is automatically saved to a specified Google Drive folder.\n*   **Linked Records:** The Google Sheet entry includes a direct hyperlink to the corresponding receipt image in Google Drive, creating a seamless, interconnected record.\n*   **User Confirmation:** The system sends a summary of the logged expense or a success/error message back to you via Telegram, closing the loop on every transaction.\n\n### Getting Started: Setup & Customization üõ†Ô∏è\n\nSetting up your Pocket Bookkeeper is designed to be quick and easy:\n\n1.  **Import the Workflow:** Add the provided `.json` file to your n8n instance.\n2.  **Configure Credentials:**\n    *   **Telegram:** Create a new bot via `@BotFather` on Telegram to get a Bot Token. Add this token to the `Telegram Trigger` and all `Telegram` sender nodes.\n    *   **Mistral AI:** Obtain an API key from your Mistral AI console and create a `Mistral Cloud API` credential. Assign this to the `Mistral Cloud Chat Model` nodes.\n    *   **Google Drive & Google Sheets:** Set up OAuth 2.0 credentials for the Google Drive and Google Sheets APIs in your Google Cloud Console. Create the corresponding credentials in n8n and assign them to the `Google Drive` and `Google Sheets` nodes.\n3.  **Personalize Your Setup (Crucial!):**\n    *   **Google Drive Folder:** In the `Save Receipt` (Google Drive) node, specify the **Folder ID** where you want your receipt images to be saved.\n    *   **Google Sheet:** In the `Google Sheets` node, enter your **Spreadsheet ID** and **Sheet Name**. Ensure your sheet has columns matching the data fields (e.g., `store_name`, `date`, `total_price`, etc.).\n    *   **(Optional) AI Prompting:** Fine-tune the system message in the `AI Agent` node to better guide the AI on how to categorize your specific business expenses.\n4.  **Activate the Workflow:**\n    *   The workflow is inactive by default. Toggle the **Active** switch to `ON` at the top left of the n8n canvas to start listening for messages.\n\n### How The Workflow Operates ‚öôÔ∏è\n\n1.  **TRIGGER:** The `Telegram Trigger` node listens for incoming messages (text or photo).\n2.  **ROUTE:** An `IF` node checks if the message contains a photo.\n    *   **If Photo:** The image is downloaded, and OCR is used to extract text.\n    *   **If Text:** The message text is used directly.\n3.  **PROCESS:** The extracted text is sent to the `AI Agent` node. The agent, using the Mistral LLM, parses the text and structures it into a predefined JSON format.\n4.  **VALIDATE & FORMAT:** The structured data flows to a `Code` node that formats a user-friendly summary message. An `IF` node then checks for invalid data (e.g., total = 0).\n5.  **LOG & ARCHIVE:**\n    *   A sub-workflow is triggered via the `Execute Workflow` node.\n    *   The `Save Receipt` node uploads the image to Google Drive (if one was sent).\n    *   The `Google Sheets` node appends the final structured data to your spreadsheet.\n6.  **RESPOND:** A `Telegram` node sends a confirmation message back to you, confirming that the expense has been successfully logged or notifying you of an error.\n\n### Expanding Your Bookkeeper üöÄ\n\nThis workflow is a powerful foundation. Consider these enhancements:\n\n*   **Multi-Currency Handling:** Add a function to convert all expenses to a single base currency.\n*   **Advanced Reporting:** Schedule a monthly summary of your expenses to be emailed to you.\n*   **Invoice OCR:** Expand the AI prompt and workflow to handle and log incoming invoices from vendors.\n*   **Bank Statement Reconciliation:** Create a separate workflow to import bank statements and automatically match them against your logged receipts.\n*   **Different Notifiers:** Easily swap Telegram for WhatsApp, Slack, or email.\n\n### Requirements üìã\n\n*   An active n8n instance (self-hosted or cloud).\n*   Credentials for Telegram, Mistral AI/Open Router/Open AI, Google Drive, and Google Sheets.\n*   A few minutes to customize the workflow with your specific IDs and preferences!\n\nTake control of your business finances and let your **Pocket Bookkeeper** turn a tedious chore into a simple, automated task.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Format Summary Message",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Start: Telegram Input",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Check Invalid Input",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Extract Text Input",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Check for Image",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Input Type Check",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Receipt Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send Error Message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send Expense Summary",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Extract Value From Image",
      "type": "n8n-nodes-tesseractjs.tesseractNode",
      "role": "tesseractNode",
      "configDescription": "Version 1"
    },
    {
      "name": "Notify User: Send Summary",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Handle Text Input",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Structure AI Output",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Download Receipt Image",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract Text from Image (OCR)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Format Summary for User",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "AI Data Extraction",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Notify User: Send Error",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate Extracted Data",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Configure AI Model",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Telegram Trigger1",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Telegram",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Auto-fixing Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "role": "outputParserAutofixing",
      "configDescription": "Version 1"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Think",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1"
    },
    {
      "name": "Date & Time",
      "type": "n8n-nodes-base.dateTimeTool",
      "role": "dateTimeTool",
      "configDescription": "Version 2"
    },
    {
      "name": "Mistral Cloud Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "role": "lmChatMistralCloud",
      "configDescription": "Version 1"
    },
    {
      "name": "Mistral Cloud Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "role": "lmChatMistralCloud",
      "configDescription": "Version 1"
    },
    {
      "name": "Send Expense Summary1",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Save Image to Cloud",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Execute Workflow",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Save Receipt",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Merge Data Streams",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Trigger Save Workflow",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Prepare Data for Sheet",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Save Data to Google Sheets",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Send Confirmation",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Future Ideas & Improvements",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Mistral Upload",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Mistral Signed URL",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Mistral DOC OCR",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Code",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Extract Text via API (OCR)",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}