{
  "id": 695,
  "slug": "695",
  "title": "Get local datetime into Function node using moment.js",
  "description": "![workflow-screenshot](fileId:260)\n\nA quick example showing how to get the local date and time into a Function node using moment.js.\n\nThis relies on the `GENERIC_TIMEZONE` environment variable being correctly configured (see the docs [here](https://docs.n8n.io/reference/configuration.html#timezone))\n\n**NOTE**: In order for this to work, you must whitelist the moment library for use by setting the following environment variable:\n\n```bash\nNODE_FUNCTION_ALLOW_EXTERNAL=moment\n```\n\nFor convenience, the Function code is as follows:\n\n```javascript\nconst moment = require('moment');\n\nlet date = moment().tz($env['GENERIC_TIMEZONE']);\n\nlet year = date.year();\nlet month = date.month(); // zero-indexed!\nlet day = date.date();\nlet hour = date.hours();\nlet minute = date.minutes();\nlet second = date.seconds();\nlet millisecond = date.millisecond();\nlet formatted = date.format('YYYY-MM-DD HH:mm:ss.SSS Z');\n\nreturn [\n  {\n    json: {\n      utc: date,\n      year: year,\n      month: month, // zero-indexed!\n      day: day,\n      hour: hour,\n      minute: minute,\n      second: second,\n      millisecond: millisecond,\n      formatted: formatted\n    }\n  }\n];\n```",
  "featuredImage": "/data/workflows/695/695.webp",
  "author": {
    "id": 101,
    "slug": "trey",
    "name": "Trey",
    "avatar": ""
  },
  "categories": [
    "Engineering"
  ],
  "complexityLevel": "beginner",
  "price": 0,
  "visitors": 1924,
  "downloads": 192,
  "createdAt": "2020-10-01T17:03:43.754Z",
  "updatedAt": "2026-01-16T08:19:36.578Z",
  "publishedAt": "2020-10-01T17:03:43.754Z",
  "nodes": 2,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/695",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Get local datetime into Function node using moment.js",
    "workflowName": "Get local datetime into Function node using moment.js",
    "description": "![workflow-screenshot](fileId:260)\n\nA quick example showing how to get the local date and time into a Function node using moment.js.\n\nThis relies on the `GENERIC_TIMEZONE` environment variable being correctly configured (see the docs [here](https://docs.n8n.io/reference/configuration.html#timezone))\n\n**NOTE**: In order for this to work, you must whitelist the moment library for use by setting the following environment variable:\n\n```bash\nNODE_FUNCTION_ALLOW_EXTERNAL=moment\n```\n\nFor convenience, the Function code is as follows:\n\n```javascript\nconst moment = require('moment');\n\nlet date = moment().tz($env['GENERIC_TIMEZONE']);\n\nlet year = date.year();\nlet month = date.month(); // zero-indexed!\nlet day = date.date();\nlet hour = date.hours();\nlet minute = date.minutes();\nlet second = date.seconds();\nlet millisecond = date.millisecond();\nlet formatted = date.format('YYYY-MM-DD HH:mm:ss.SSS Z');\n\nreturn [\n  {\n    json: {\n      utc: date,\n      year: year,\n      month: month, // zero-indexed!\n      day: day,\n      hour: hour,\n      minute: minute,\n      second: second,\n      millisecond: millisecond,\n      formatted: formatted\n    }\n  }\n];\n```",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "On clicking 'execute'",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Local Datetime",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    }
  ]
}