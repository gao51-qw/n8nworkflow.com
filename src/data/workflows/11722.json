{
  "id": 11722,
  "slug": "11722",
  "title": "Healthcare policy monitoring with ScrapeGraphAI, Pipedrive and Matrix alerts",
  "description": "# Medical Research Tracker with Matrix and Pipedrive\n\n**⚠️ COMMUNITY TEMPLATE DISCLAIMER: This is a community-contributed template that uses ScrapeGraphAI (a community node). Please ensure you have the ScrapeGraphAI community node installed in your n8n instance before using this template.**\n\nThis workflow automatically monitors selected government and healthcare-policy websites, extracts newly published or updated policy documents, logs them as deals in a Pipedrive pipeline, and announces critical changes in a Matrix room. It gives healthcare administrators and policy analysts a near real-time view of policy developments without manual web checks.\n\n## Pre-conditions/Requirements\n\n### Prerequisites\n- n8n instance (self-hosted or n8n cloud)\n- ScrapeGraphAI community node installed\n- Active Pipedrive account with at least one pipeline\n- Matrix account & accessible room for notifications\n- Basic knowledge of n8n credential setup\n\n### Required Credentials\n- **ScrapeGraphAI API Key** – Enables the scraping engine  \n- **Pipedrive OAuth2 / API Token** – Creates & updates deals  \n- **Matrix Credentials** – Homeserver URL, user, access token (or password)\n\n### Specific Setup Requirements\n| Variable | Description | Example |\n|----------|-------------|---------|\n| `POLICY_SITES` | Comma-separated list of URLs to scrape | `https://health.gov/policies,https://who.int/proposals` |\n| `PD_PIPELINE_ID` | Pipedrive pipeline where deals are created | `5` |\n| `PD_STAGE_ID_ALERT` | Stage ID for “Review Needed” | `17` |\n| `MATRIX_ROOM_ID` | Room to send alerts (incl. leading `!`) | `!policy:matrix.org` |\n\nEdit the initial *Set* node to provide these values before running.\n\n## How it works\n\nThis workflow automatically monitors selected government and healthcare-policy websites, extracts newly published or updated policy documents, logs them as deals in a Pipedrive pipeline, and announces critical changes in a Matrix room. It gives healthcare administrators and policy analysts a near real-time view of policy developments without manual web checks.\n\n## Key Steps:\n- **Scheduled Trigger**: Runs every 6 hours (configurable) to start the monitoring cycle.\n- **Code (URL List Builder)**: Generates an array from `POLICY_SITES` for downstream batching.\n- **SplitInBatches**: Iterates through each policy URL individually.\n- **ScrapeGraphAI**: Scrapes page titles, publication dates, and summary paragraphs.\n- **If (New vs Existing)**: Compares scraped hash with last run; continues only for fresh content.\n- **Merge (Aggregate Results)**: Collects all “new” policies into a single payload.\n- **Set (Deal Formatter)**: Maps scraped data to Pipedrive deal fields.\n- **Pipedrive Node**: Creates or updates a deal per policy item.\n- **Matrix Node**: Posts a formatted alert message in the specified Matrix room.\n\n## Set up steps\n\n**Setup Time: 15-20 minutes**\n\n1. **Install Community Node**  \n   – In n8n, go to *Settings → Community Nodes → Install* and search for **ScrapeGraphAI**.\n\n2. **Add Credentials**  \n   – *Create New* credentials for ScrapeGraphAI, Pipedrive, and Matrix under *Credentials*.\n\n3. **Configure Environment Variables**  \n   – Open the *Set (Initial Config)* node and replace placeholders (`POLICY_SITES`, `PD_PIPELINE_ID`, etc.) with your values.\n\n4. **Review Schedule**  \n   – Double-click the *Schedule Trigger* node to adjust the interval if needed.\n\n5. **Activate Workflow**  \n   – Click *Activate*. The workflow will run at the next scheduled interval.\n\n6. **Verify Outputs**  \n   – Check Pipedrive for new deals and the Matrix room for alert messages after the first run.\n\n## Node Descriptions\n\n### Core Workflow Nodes:\n- **stickyNote** – Provides an at-a-glance description of the workflow logic directly on the canvas.\n- **scheduleTrigger** – Fires the workflow periodically (default 6 hours).\n- **code (URL List Builder)** – Splits the `POLICY_SITES` variable into an array.\n- **splitInBatches** – Ensures each URL is processed individually to avoid timeouts.\n- **scrapegraphAi** – Parses HTML and extracts policy metadata using XPath/CSS selectors.\n- **if (New vs Existing)** – Uses hashing to ignore unchanged pages.\n- **merge** – Combines all new items so they can be processed in bulk.\n- **set (Deal Formatter)** – Maps scraped fields to Pipedrive deal properties.\n- **matrix** – Sends formatted messages to a Matrix room for team visibility.\n- **pipedrive** – Creates or updates deals representing each policy update.\n\n### Data Flow:\n1. **scheduleTrigger** → **code** → **splitInBatches** → **scrapegraphAi** → **if** → **merge** → **set** → **pipedrive** → **matrix**\n\n## Customization Examples\n\n### 1. Add another data field (e.g., policy author)\n```javascript\n// Inside ScrapeGraphAI node → Selectors\n{\n  \"title\": \"//h1/text()\",\n  \"date\": \"//time/@datetime\",\n  \"summary\": \"//p[1]/text()\",\n  \"author\": \"//span[@class='author']/text()\"   // new line\n}\n```\n\n### 2. Switch notifications from Matrix to Email\n```javascript\n// Replace Matrix node with “Send Email”\n{\n  \"to\": \"policy-team@example.com\",\n  \"subject\": \"New Healthcare Policy Detected: {{$json.title}}\",\n  \"text\": \"Summary:\\n{{$json.summary}}\\n\\nRead more at {{$json.url}}\"\n}\n```\n\n## Data Output Format\n\nThe workflow outputs structured JSON data for each new policy article:\n\n```json\n{\n  \"title\": \"Affordable Care Expansion Act – 2024\",\n  \"url\": \"https://health.gov/policies/acea-2024\",\n  \"date\": \"2024-06-14T09:00:00Z\",\n  \"summary\": \"Proposes expansion of coverage to rural areas...\",\n  \"source\": \"health.gov\",\n  \"hash\": \"2d6f1c8e3b...\"\n}\n```\n\n## Troubleshooting\n\n### Common Issues\n1. **ScrapeGraphAI returns empty objects**  \n   – Verify selectors match the current HTML structure; inspect the site with developer tools and update the node configuration.\n\n2. **Duplicate deals appear in Pipedrive**  \n   – Ensure the “Find or Create” option is enabled in the Pipedrive node, using the page `hash` or `url` as a unique key.\n\n### Performance Tips\n- Limit `POLICY_SITES` to under 50 URLs per run to avoid hitting rate limits.\n- Increase Schedule Trigger interval if you notice ScrapeGraphAI rate-limiting.\n\n**Pro Tips:**\n- Store historical scraped data in a database node for long-term audit trails.\n- Use the n8n *Workflow Executions* page to replay failed runs without waiting for the next schedule.\n- Add an *Error Trigger* node to emit alerts if scraping or API calls fail.",
  "featuredImage": "/data/workflows/11722/11722.webp",
  "author": {
    "id": 101,
    "slug": "vinci-king-01",
    "name": "vinci-king-01",
    "avatar": ""
  },
  "categories": [
    "Market Research",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 24,
  "downloads": 2,
  "createdAt": "2025-12-11T21:32:03.251Z",
  "updatedAt": "2026-01-16T09:09:52.996Z",
  "publishedAt": "2025-12-11T21:32:03.251Z",
  "nodes": 16,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11722",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Healthcare policy monitoring with ScrapeGraphAI, Pipedrive and Matrix alerts",
    "workflowName": "Healthcare policy monitoring with ScrapeGraphAI, Pipedrive and Matrix alerts",
    "description": "# Medical Research Tracker with Matrix and Pipedrive\n\n**⚠️ COMMUNITY TEMPLATE DISCLAIMER: This is a community-contributed template that uses ScrapeGraphAI (a community node). Please ensure you have the ScrapeGraphAI community node installed in your n8n instance before using this template.**\n\nThis workflow automatically monitors selected government and healthcare-policy websites, extracts newly published or updated policy documents, logs them as deals in a Pipedrive pipeline, and announces critical changes in a Matrix room. It gives healthcare administrators and policy analysts a near real-time view of policy developments without manual web checks.\n\n## Pre-conditions/Requirements\n\n### Prerequisites\n- n8n instance (self-hosted or n8n cloud)\n- ScrapeGraphAI community node installed\n- Active Pipedrive account with at least one pipeline\n- Matrix account & accessible room for notifications\n- Basic knowledge of n8n credential setup\n\n### Required Credentials\n- **ScrapeGraphAI API Key** – Enables the scraping engine  \n- **Pipedrive OAuth2 / API Token** – Creates & updates deals  \n- **Matrix Credentials** – Homeserver URL, user, access token (or password)\n\n### Specific Setup Requirements\n| Variable | Description | Example |\n|----------|-------------|---------|\n| `POLICY_SITES` | Comma-separated list of URLs to scrape | `https://health.gov/policies,https://who.int/proposals` |\n| `PD_PIPELINE_ID` | Pipedrive pipeline where deals are created | `5` |\n| `PD_STAGE_ID_ALERT` | Stage ID for “Review Needed” | `17` |\n| `MATRIX_ROOM_ID` | Room to send alerts (incl. leading `!`) | `!policy:matrix.org` |\n\nEdit the initial *Set* node to provide these values before running.\n\n## How it works\n\nThis workflow automatically monitors selected government and healthcare-policy websites, extracts newly published or updated policy documents, logs them as deals in a Pipedrive pipeline, and announces critical changes in a Matrix room. It gives healthcare administrators and policy analysts a near real-time view of policy developments without manual web checks.\n\n## Key Steps:\n- **Scheduled Trigger**: Runs every 6 hours (configurable) to start the monitoring cycle.\n- **Code (URL List Builder)**: Generates an array from `POLICY_SITES` for downstream batching.\n- **SplitInBatches**: Iterates through each policy URL individually.\n- **ScrapeGraphAI**: Scrapes page titles, publication dates, and summary paragraphs.\n- **If (New vs Existing)**: Compares scraped hash with last run; continues only for fresh content.\n- **Merge (Aggregate Results)**: Collects all “new” policies into a single payload.\n- **Set (Deal Formatter)**: Maps scraped data to Pipedrive deal fields.\n- **Pipedrive Node**: Creates or updates a deal per policy item.\n- **Matrix Node**: Posts a formatted alert message in the specified Matrix room.\n\n## Set up steps\n\n**Setup Time: 15-20 minutes**\n\n1. **Install Community Node**  \n   – In n8n, go to *Settings → Community Nodes → Install* and search for **ScrapeGraphAI**.\n\n2. **Add Credentials**  \n   – *Create New* credentials for ScrapeGraphAI, Pipedrive, and Matrix under *Credentials*.\n\n3. **Configure Environment Variables**  \n   – Open the *Set (Initial Config)* node and replace placeholders (`POLICY_SITES`, `PD_PIPELINE_ID`, etc.) with your values.\n\n4. **Review Schedule**  \n   – Double-click the *Schedule Trigger* node to adjust the interval if needed.\n\n5. **Activate Workflow**  \n   – Click *Activate*. The workflow will run at the next scheduled interval.\n\n6. **Verify Outputs**  \n   – Check Pipedrive for new deals and the Matrix room for alert messages after the first run.\n\n## Node Descriptions\n\n### Core Workflow Nodes:\n- **stickyNote** – Provides an at-a-glance description of the workflow logic directly on the canvas.\n- **scheduleTrigger** – Fires the workflow periodically (default 6 hours).\n- **code (URL List Builder)** – Splits the `POLICY_SITES` variable into an array.\n- **splitInBatches** – Ensures each URL is processed individually to avoid timeouts.\n- **scrapegraphAi** – Parses HTML and extracts policy metadata using XPath/CSS selectors.\n- **if (New vs Existing)** – Uses hashing to ignore unchanged pages.\n- **merge** – Combines all new items so they can be processed in bulk.\n- **set (Deal Formatter)** – Maps scraped fields to Pipedrive deal properties.\n- **matrix** – Sends formatted messages to a Matrix room for team visibility.\n- **pipedrive** – Creates or updates deals representing each policy update.\n\n### Data Flow:\n1. **scheduleTrigger** → **code** → **splitInBatches** → **scrapegraphAi** → **if** → **merge** → **set** → **pipedrive** → **matrix**\n\n## Customization Examples\n\n### 1. Add another data field (e.g., policy author)\n```javascript\n// Inside ScrapeGraphAI node → Selectors\n{\n  \"title\": \"//h1/text()\",\n  \"date\": \"//time/@datetime\",\n  \"summary\": \"//p[1]/text()\",\n  \"author\": \"//span[@class='author']/text()\"   // new line\n}\n```\n\n### 2. Switch notifications from Matrix to Email\n```javascript\n// Replace Matrix node with “Send Email”\n{\n  \"to\": \"policy-team@example.com\",\n  \"subject\": \"New Healthcare Policy Detected: {{$json.title}}\",\n  \"text\": \"Summary:\\n{{$json.summary}}\\n\\nRead more at {{$json.url}}\"\n}\n```\n\n## Data Output Format\n\nThe workflow outputs structured JSON data for each new policy article:\n\n```json\n{\n  \"title\": \"Affordable Care Expansion Act – 2024\",\n  \"url\": \"https://health.gov/policies/acea-2024\",\n  \"date\": \"2024-06-14T09:00:00Z\",\n  \"summary\": \"Proposes expansion of coverage to rural areas...\",\n  \"source\": \"health.gov\",\n  \"hash\": \"2d6f1c8e3b...\"\n}\n```\n\n## Troubleshooting\n\n### Common Issues\n1. **ScrapeGraphAI returns empty objects**  \n   – Verify selectors match the current HTML structure; inspect the site with developer tools and update the node configuration.\n\n2. **Duplicate deals appear in Pipedrive**  \n   – Ensure the “Find or Create” option is enabled in the Pipedrive node, using the page `hash` or `url` as a unique key.\n\n### Performance Tips\n- Limit `POLICY_SITES` to under 50 URLs per run to avoid hitting rate limits.\n- Increase Schedule Trigger interval if you notice ScrapeGraphAI rate-limiting.\n\n**Pro Tips:**\n- Store historical scraped data in a database node for long-term audit trails.\n- Use the n8n *Workflow Executions* page to replay failed runs without waiting for the next schedule.\n- Add an *Error Trigger* node to emit alerts if scraping or API calls fail.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Workflow Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Trigger & URL Prep",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Scraping",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Processing & Detection",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section – Storage & Alerts",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Daily Policy Check",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Define Policy URLs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Split URLs",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Fetch Policy Data",
      "type": "n8n-nodes-scrapegraphai.scrapegraphAi",
      "role": "scrapegraphAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Normalize Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Merge Results",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Deduplicate Policies",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Is New Policy?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Prepare Matrix Message",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send Matrix Alert",
      "type": "n8n-nodes-base.matrix",
      "role": "matrix",
      "configDescription": "Version 1"
    },
    {
      "name": "Upsert Policy Deal",
      "type": "n8n-nodes-base.pipedrive",
      "role": "pipedrive",
      "configDescription": "Version 1"
    }
  ]
}