{
  "id": 6320,
  "slug": "6320",
  "title": "Google Drive workflow with nested folder support",
  "description": "## üë§ Who‚Äôs it for\n\n- **Anyone** who needs to recursively fetch **all files** from a specific Google Drive folder, including files inside all its nested (child) folders.\n- Ideal for **automation builders**, **admins**, and **integrators** who want to process, move, list, or report on all files in a complex folder tree.\n\n---\n\n## ‚öôÔ∏è How it works / What it does\n\nThis workflow will:\n1. **Accept a Google Drive Folder ID** as an input (from another workflow or trigger).\n2. **Recursively discover all child folders** starting from the parent, no matter how many levels deep.\n3. **Collect all file IDs & names** from every folder (parent + all descendants).\n4. **Return a clean list** of all found files (with IDs and names) for further automation, downloading, or processing.\n\n**Key features:**\n- üí° **Works recursively** (handles any depth of nested folders).\n- üè∑Ô∏è **Outputs file ID & file name** for each discovered file.\n- üîÑ **Can be triggered by other workflows** (great for modular automation).\n\n---\n\n## üõ†Ô∏è How to set up\n\n#### 1. **Google Drive Credentials**\n- Make sure you‚Äôve set up a **Google Drive OAuth2 credential** in n8n.\n- Connect this credential to all Google Drive nodes in the workflow.\n\n#### 2. **Parent Folder ID**\n- Input the Google Drive folder ID you want to start from.\n- **How to pass it:**  \n  - If running standalone: update the `When Executed by Another Workflow` node with your folder ID.\n  - If called from another workflow: pass the folder ID as an input named `id`.\n\n#### 3. **Check Set Nodes**\n- There are two Set nodes (`Return parent` and `Return parent1`) and one trigger (`When Executed by Another Workflow`) where you might want to update the hardcoded folder ID.\n- ‚ö†Ô∏è **Change these IDs to match your use case.**\n\n#### 4. **Run the Workflow**\n- Start the workflow (or execute it via another workflow).\n- The result will be a flat list of files in all subfolders.\n\n---\n\n## ‚úÖ Requirements\n\n- üü¢ **n8n instance**\n- üü¢ **Google Drive OAuth2 credentials** connected in n8n\n- üü¢ **A valid Google Drive folder ID** to start from\n\n---\n\n## üßë‚Äçüíª How to customize\n\n- **Return Extra Data:**  \n  Add fields in the ‚ÄúSearch files‚Äù node options to return more Google Drive file metadata (e.g., size, webViewLink).\n- **Filter by File Type:**  \n  Adjust the search query or add a filter node to only include certain file types (e.g., PDFs, Docs).\n- **Change Output Format:**  \n  Edit the ‚ÄúEdit Fields‚Äù Set node to structure your output differently.\n- **Integrate Further:**  \n  Add new nodes after the Loop to, for example, download, email, or sync files as needed.\n\n---\n\n## üö® Notes & Tips\n\n- **Performance:**  \n  This workflow is optimized for up to hundreds of folders. For very large Drive accounts (thousands of folders/files), consider pagination or batching.\n- **Credential Security:**  \n  Always use n8n‚Äôs built-in credential manager‚Äînever hard-code sensitive data.\n- **Static IDs:**  \n  As noted in the sticky note, make sure to update all hardcoded folder IDs for your production use.\n\n---\n\n## üóÇÔ∏è Node Overview\n\n- **When Executed by Another Workflow:** Accepts a folder ID (entry point).\n- **Google Drive ‚Äì Get children folders:** Lists subfolders of the given folder.\n- **If:** Checks if the folder contains any subfolders.\n- **Execute Workflow:** Handles recursion (calls itself on child folders).\n- **Code:** Flattens all discovered folder IDs for next step.\n- **Loop Over Items:** Iterates over all folders to process files.\n- **Google Drive ‚Äì Search files:** Finds all files in each folder.\n- **Edit Fields (Set):** Structures file data for output.\n- **Sticky Note:** Documentation and reminders inside your workflow.\n\n---\n\n## üîÑ Example Output\n\n```json\n[\n  {\n    \"file_id\": \"1A2B3C...\",\n    \"file_name\": \"MyDoc.pdf\"\n  },\n  {\n    \"file_id\": \"2B3C4D...\",\n    \"file_name\": \"Presentation.pptx\"\n  }\n]\n",
  "featuredImage": "/data/workflows/6320/6320.webp",
  "author": {
    "id": 101,
    "slug": "zain104",
    "name": "Zain Ali",
    "avatar": ""
  },
  "categories": [
    "File Management"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 192,
  "downloads": 19,
  "createdAt": "2025-07-23T13:13:22.185Z",
  "updatedAt": "2026-01-16T08:44:24.913Z",
  "publishedAt": "2025-07-23T13:13:22.185Z",
  "nodes": 14,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6320",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Google Drive workflow with nested folder support",
    "workflowName": "Google Drive workflow with nested folder support",
    "description": "## üë§ Who‚Äôs it for\n\n- **Anyone** who needs to recursively fetch **all files** from a specific Google Drive folder, including files inside all its nested (child) folders.\n- Ideal for **automation builders**, **admins**, and **integrators** who want to process, move, list, or report on all files in a complex folder tree.\n\n---\n\n## ‚öôÔ∏è How it works / What it does\n\nThis workflow will:\n1. **Accept a Google Drive Folder ID** as an input (from another workflow or trigger).\n2. **Recursively discover all child folders** starting from the parent, no matter how many levels deep.\n3. **Collect all file IDs & names** from every folder (parent + all descendants).\n4. **Return a clean list** of all found files (with IDs and names) for further automation, downloading, or processing.\n\n**Key features:**\n- üí° **Works recursively** (handles any depth of nested folders).\n- üè∑Ô∏è **Outputs file ID & file name** for each discovered file.\n- üîÑ **Can be triggered by other workflows** (great for modular automation).\n\n---\n\n## üõ†Ô∏è How to set up\n\n#### 1. **Google Drive Credentials**\n- Make sure you‚Äôve set up a **Google Drive OAuth2 credential** in n8n.\n- Connect this credential to all Google Drive nodes in the workflow.\n\n#### 2. **Parent Folder ID**\n- Input the Google Drive folder ID you want to start from.\n- **How to pass it:**  \n  - If running standalone: update the `When Executed by Another Workflow` node with your folder ID.\n  - If called from another workflow: pass the folder ID as an input named `id`.\n\n#### 3. **Check Set Nodes**\n- There are two Set nodes (`Return parent` and `Return parent1`) and one trigger (`When Executed by Another Workflow`) where you might want to update the hardcoded folder ID.\n- ‚ö†Ô∏è **Change these IDs to match your use case.**\n\n#### 4. **Run the Workflow**\n- Start the workflow (or execute it via another workflow).\n- The result will be a flat list of files in all subfolders.\n\n---\n\n## ‚úÖ Requirements\n\n- üü¢ **n8n instance**\n- üü¢ **Google Drive OAuth2 credentials** connected in n8n\n- üü¢ **A valid Google Drive folder ID** to start from\n\n---\n\n## üßë‚Äçüíª How to customize\n\n- **Return Extra Data:**  \n  Add fields in the ‚ÄúSearch files‚Äù node options to return more Google Drive file metadata (e.g., size, webViewLink).\n- **Filter by File Type:**  \n  Adjust the search query or add a filter node to only include certain file types (e.g., PDFs, Docs).\n- **Change Output Format:**  \n  Edit the ‚ÄúEdit Fields‚Äù Set node to structure your output differently.\n- **Integrate Further:**  \n  Add new nodes after the Loop to, for example, download, email, or sync files as needed.\n\n---\n\n## üö® Notes & Tips\n\n- **Performance:**  \n  This workflow is optimized for up to hundreds of folders. For very large Drive accounts (thousands of folders/files), consider pagination or batching.\n- **Credential Security:**  \n  Always use n8n‚Äôs built-in credential manager‚Äînever hard-code sensitive data.\n- **Static IDs:**  \n  As noted in the sticky note, make sure to update all hardcoded folder IDs for your production use.\n\n---\n\n## üóÇÔ∏è Node Overview\n\n- **When Executed by Another Workflow:** Accepts a folder ID (entry point).\n- **Google Drive ‚Äì Get children folders:** Lists subfolders of the given folder.\n- **If:** Checks if the folder contains any subfolders.\n- **Execute Workflow:** Handles recursion (calls itself on child folders).\n- **Code:** Flattens all discovered folder IDs for next step.\n- **Loop Over Items:** Iterates over all folders to process files.\n- **Google Drive ‚Äì Search files:** Finds all files in each folder.\n- **Edit Fields (Set):** Structures file data for output.\n- **Sticky Note:** Documentation and reminders inside your workflow.\n\n---\n\n## üîÑ Example Output\n\n```json\n[\n  {\n    \"file_id\": \"1A2B3C...\",\n    \"file_name\": \"MyDoc.pdf\"\n  },\n  {\n    \"file_id\": \"2B3C4D...\",\n    \"file_name\": \"Presentation.pptx\"\n  }\n]",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "If parent folder has no folder",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "If parent folder has nested folders or not",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Start Execution",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Get all folder ids",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Return parent folder id",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Return parent folder id to sub-workflow",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Start sub-execution",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Get children folders from folder id",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Loop Over folder ids",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Get all files inside a folder",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Return all file ids",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}