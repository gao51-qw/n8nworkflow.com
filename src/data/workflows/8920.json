{
  "id": 8920,
  "slug": "8920",
  "title": "WhatsApp AI assistant with Claude & GPT4O: multi-format processing & productivity suite",
  "description": "# WhatsApp AI Personal Assistant - n8n Workflow Instructions\n\n## Who's it for\n\nThis workflow is designed for business professionals, entrepreneurs, and individuals who want to transform their WhatsApp into a powerful AI-powered personal assistant. Perfect for users who need to manage emails, calendar events, document searches, and various productivity tasks through a single messaging interface.\n\n## What it does\n\nThis comprehensive n8n workflow creates an intelligent WhatsApp bot that can process multiple message types (text, voice, images, PDF documents) and execute complex tasks using integrated tools including Gmail, Google Calendar, Google Drive, Airtable, Discord, and internet search capabilities. The assistant maintains conversation context and can handle sophisticated requests through natural language processing.\n\n## How it works\n\n### Phase 1: Message Reception and Classification\nThe workflow begins when a message is received through the WhatsApp Trigger. A Switch node automatically classifies the incoming message type (text, audio, image, or document) and routes it to the appropriate processing pathway.\n\n### Phase 2: Content Processing by Format\n\n**Text Messages**: Direct extraction and formatting for AI processing\n**Voice Messages**: \n- Retrieves audio URL from WhatsApp API\n- Downloads audio file with authenticated requests\n- Transcribes speech to text using OpenAI Whisper\n- Formats transcribed content for AI agent\n\n**Images**:\n- Downloads image from WhatsApp API\n- Analyzes visual content using GPT-4O-mini vision model\n- Generates detailed French descriptions covering composition, objects, people, and atmosphere\n- Combines user requests with AI analysis\n\n**PDF Documents**:\n- Validates file format (rejects non-PDF files)\n- Downloads and extracts text content\n- Processes document text for AI analysis\n\n### Phase 3: AI Assistant Processing\nThe processed content is handled by a Claude Sonnet 4-powered agent with access to:\n\n- **SerpAPI** for internet searches\n- **Airtable database** for email contact management\n- **Gmail integration** for email operations\n- **Google Calendar** for event scheduling and management\n- **Google Drive** for document searches\n- **Discord messaging** for notifications\n- **Calculator** for mathematical operations\n- **PostgreSQL chat memory** for conversation context\n\n### Phase 4: Response Delivery\nThe system intelligently determines response format:\n- For voice inputs: Converts AI response to speech using OpenAI TTS\n- For other inputs: Sends text responses directly\n- Handles technical requirements like MIME type compatibility for WhatsApp\n\n## Requirements\n\n### API Credentials Required:\n- **WhatsApp Business API** (Trigger and messaging)\n- **OpenAI API** (GPT-4O-mini, Whisper, TTS)\n- **Anthropic API** (Claude Sonnet 4)\n- **Google APIs** (Gmail, Calendar, Drive OAuth2)\n- **Airtable API** (Database operations)\n- **Discord Bot API** (Messaging)\n- **SerpAPI** (Internet search)\n- **PostgreSQL Database** (Conversation memory)\n\n### Self-hosted n8n Instance\nThis workflow requires a self-hosted n8n installation as it uses community nodes and advanced integrations not available in n8n Cloud.\n\n## How to set up\n\n### 1. Prerequisites Setup\n- Deploy n8n on a server with public access\n- Obtain WhatsApp Business API credentials\n- Create developer accounts for all required services\n- Set up a PostgreSQL database for conversation memory\n\n### 2. Credential Configuration\nConfigure the following credentials in n8n:\n- WhatsApp API credentials for both trigger and messaging nodes\n- OpenAI API key with access to GPT-4O-mini, Whisper, and TTS\n- Anthropic API key for Claude Sonnet 4\n- Google OAuth2 credentials for Gmail, Calendar, and Drive\n- Airtable Personal Access Token\n- Discord Bot token\n- SerpAPI key\n- PostgreSQL database connection\n\n### 3. WhatsApp Configuration\n- Configure webhook URLs in WhatsApp Business API settings\n- Set up phone number verification\n- Configure message templates if required\n\n### 4. Tool Configuration\n- **Airtable**: Set up email database with 'Nom' and 'Mails' columns\n- **Google Calendar**: Configure calendar access permissions\n- **Google Drive**: Set up appropriate folder permissions\n- **Discord**: Configure bot permissions and channel access\n\n### 5. Testing and Validation\n- Test each message type (text, audio, image, PDF)\n- Verify all tool integrations work correctly\n- Test conversation memory persistence\n- Validate response delivery in both text and audio formats\n\n## How to customize the workflow\n\n### Modify AI Assistant Personality\nEdit the system message in the \"Agent personnel\" node to customize the assistant's behavior, tone, and capabilities according to your needs.\n\n### Add New Tools\nIntegrate additional n8n tool nodes to extend functionality:\n- CRM systems (Salesforce, HubSpot)\n- Project management tools (Notion, Trello)\n- File storage services (Dropbox, OneDrive)\n- Communication platforms (Slack, Microsoft Teams)\n\n### Customize Content Processing\n- Modify image analysis prompts for specific use cases\n- Add document format support beyond PDF\n- Implement content filtering or moderation\n- Add language detection and multi-language support\n\n### Enhance Memory and Context\n- Implement user-specific memory sessions\n- Add conversation summaries for long interactions\n- Create user preference storage\n- Implement conversation analytics\n\n### Response Customization\n- Add multimedia response capabilities\n- Implement response templates for common queries\n- Add typing indicators or read receipts\n- Create custom response formatting\n\n### Security Enhancements\n- Implement user authentication\n- Add rate limiting for API calls\n- Create audit logs for sensitive operations\n- Implement data encryption for stored conversations\n\n### Performance Optimization\n- Add caching for frequently accessed data\n- Implement queue management for high-volume usage\n- Add error handling and retry mechanisms\n- Create monitoring and alerting systems\n\n## Important Notes\n\n- This workflow processes sensitive data; ensure proper security measures are in place\n- Monitor API usage limits across all integrated services\n- Regularly backup conversation memory data\n- Test thoroughly before deploying to production\n- Consider implementing user access controls for business environments\n- Keep all API credentials secure and rotate them regularly\n\n## Troubleshooting\n\n- **Audio Issues**: Verify MIME type handling in the \"Fix mimeType for Audio\" node\n- **WhatsApp Delivery**: Check webhook configurations and phone number verification\n- **Tool Failures**: Validate all API credentials and permissions\n- **Memory Issues**: Monitor PostgreSQL database performance and storage\n- **Response Delays**: Optimize tool timeout settings and add proper error handling",
  "featuredImage": "/data/workflows/8920/8920.webp",
  "author": {
    "id": 101,
    "slug": "growthai",
    "name": "Growth AI",
    "avatar": ""
  },
  "categories": [
    "Personal Productivity",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 718,
  "downloads": 71,
  "createdAt": "2025-09-25T09:57:25.788Z",
  "updatedAt": "2026-01-16T08:58:25.886Z",
  "publishedAt": "2025-09-25T09:57:25.788Z",
  "nodes": 51,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8920",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "WhatsApp AI assistant with Claude & GPT4O: multi-format processing & productivity suite",
    "workflowName": "WhatsApp AI assistant with Claude & GPT4O: multi-format processing & productivity suite",
    "description": "# WhatsApp AI Personal Assistant - n8n Workflow Instructions\n\n## Who's it for\n\nThis workflow is designed for business professionals, entrepreneurs, and individuals who want to transform their WhatsApp into a powerful AI-powered personal assistant. Perfect for users who need to manage emails, calendar events, document searches, and various productivity tasks through a single messaging interface.\n\n## What it does\n\nThis comprehensive n8n workflow creates an intelligent WhatsApp bot that can process multiple message types (text, voice, images, PDF documents) and execute complex tasks using integrated tools including Gmail, Google Calendar, Google Drive, Airtable, Discord, and internet search capabilities. The assistant maintains conversation context and can handle sophisticated requests through natural language processing.\n\n## How it works\n\n### Phase 1: Message Reception and Classification\nThe workflow begins when a message is received through the WhatsApp Trigger. A Switch node automatically classifies the incoming message type (text, audio, image, or document) and routes it to the appropriate processing pathway.\n\n### Phase 2: Content Processing by Format\n\n**Text Messages**: Direct extraction and formatting for AI processing\n**Voice Messages**: \n- Retrieves audio URL from WhatsApp API\n- Downloads audio file with authenticated requests\n- Transcribes speech to text using OpenAI Whisper\n- Formats transcribed content for AI agent\n\n**Images**:\n- Downloads image from WhatsApp API\n- Analyzes visual content using GPT-4O-mini vision model\n- Generates detailed French descriptions covering composition, objects, people, and atmosphere\n- Combines user requests with AI analysis\n\n**PDF Documents**:\n- Validates file format (rejects non-PDF files)\n- Downloads and extracts text content\n- Processes document text for AI analysis\n\n### Phase 3: AI Assistant Processing\nThe processed content is handled by a Claude Sonnet 4-powered agent with access to:\n\n- **SerpAPI** for internet searches\n- **Airtable database** for email contact management\n- **Gmail integration** for email operations\n- **Google Calendar** for event scheduling and management\n- **Google Drive** for document searches\n- **Discord messaging** for notifications\n- **Calculator** for mathematical operations\n- **PostgreSQL chat memory** for conversation context\n\n### Phase 4: Response Delivery\nThe system intelligently determines response format:\n- For voice inputs: Converts AI response to speech using OpenAI TTS\n- For other inputs: Sends text responses directly\n- Handles technical requirements like MIME type compatibility for WhatsApp\n\n## Requirements\n\n### API Credentials Required:\n- **WhatsApp Business API** (Trigger and messaging)\n- **OpenAI API** (GPT-4O-mini, Whisper, TTS)\n- **Anthropic API** (Claude Sonnet 4)\n- **Google APIs** (Gmail, Calendar, Drive OAuth2)\n- **Airtable API** (Database operations)\n- **Discord Bot API** (Messaging)\n- **SerpAPI** (Internet search)\n- **PostgreSQL Database** (Conversation memory)\n\n### Self-hosted n8n Instance\nThis workflow requires a self-hosted n8n installation as it uses community nodes and advanced integrations not available in n8n Cloud.\n\n## How to set up\n\n### 1. Prerequisites Setup\n- Deploy n8n on a server with public access\n- Obtain WhatsApp Business API credentials\n- Create developer accounts for all required services\n- Set up a PostgreSQL database for conversation memory\n\n### 2. Credential Configuration\nConfigure the following credentials in n8n:\n- WhatsApp API credentials for both trigger and messaging nodes\n- OpenAI API key with access to GPT-4O-mini, Whisper, and TTS\n- Anthropic API key for Claude Sonnet 4\n- Google OAuth2 credentials for Gmail, Calendar, and Drive\n- Airtable Personal Access Token\n- Discord Bot token\n- SerpAPI key\n- PostgreSQL database connection\n\n### 3. WhatsApp Configuration\n- Configure webhook URLs in WhatsApp Business API settings\n- Set up phone number verification\n- Configure message templates if required\n\n### 4. Tool Configuration\n- **Airtable**: Set up email database with 'Nom' and 'Mails' columns\n- **Google Calendar**: Configure calendar access permissions\n- **Google Drive**: Set up appropriate folder permissions\n- **Discord**: Configure bot permissions and channel access\n\n### 5. Testing and Validation\n- Test each message type (text, audio, image, PDF)\n- Verify all tool integrations work correctly\n- Test conversation memory persistence\n- Validate response delivery in both text and audio formats\n\n## How to customize the workflow\n\n### Modify AI Assistant Personality\nEdit the system message in the \"Agent personnel\" node to customize the assistant's behavior, tone, and capabilities according to your needs.\n\n### Add New Tools\nIntegrate additional n8n tool nodes to extend functionality:\n- CRM systems (Salesforce, HubSpot)\n- Project management tools (Notion, Trello)\n- File storage services (Dropbox, OneDrive)\n- Communication platforms (Slack, Microsoft Teams)\n\n### Customize Content Processing\n- Modify image analysis prompts for specific use cases\n- Add document format support beyond PDF\n- Implement content filtering or moderation\n- Add language detection and multi-language support\n\n### Enhance Memory and Context\n- Implement user-specific memory sessions\n- Add conversation summaries for long interactions\n- Create user preference storage\n- Implement conversation analytics\n\n### Response Customization\n- Add multimedia response capabilities\n- Implement response templates for common queries\n- Add typing indicators or read receipts\n- Create custom response formatting\n\n### Security Enhancements\n- Implement user authentication\n- Add rate limiting for API calls\n- Create audit logs for sensitive operations\n- Implement data encryption for stored conversations\n\n### Performance Optimization\n- Add caching for frequently accessed data\n- Implement queue management for high-volume usage\n- Add error handling and retry mechanisms\n- Create monitoring and alerting systems\n\n## Important Notes\n\n- This workflow processes sensitive data; ensure proper security measures are in place\n- Monitor API usage limits across all integrated services\n- Regularly backup conversation memory data\n- Test thoroughly before deploying to production\n- Consider implementing user access controls for business environments\n- Keep all API credentials secure and rotate them regularly\n\n## Troubleshooting\n\n- **Audio Issues**: Verify MIME type handling in the \"Fix mimeType for Audio\" node\n- **WhatsApp Delivery**: Check webhook configurations and phone number verification\n- **Tool Failures**: Validate all API credentials and permissions\n- **Memory Issues**: Monitor PostgreSQL database performance and storage\n- **Response Delays**: Optimize tool timeout settings and add proper error handling",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Download Image",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Analyze Image",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Download Audio",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Transcribe Audio",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Download File",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Extract from File",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Get File Url",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Only PDF File",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Fix mimeType for Audio",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send audio",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Incorrect format",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Audio",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Image",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "File",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Get Image Url",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Audio Url",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Generate Audio Response",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "From audio to audio?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Input type",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "SerpAPI",
      "type": "@n8n/n8n-nodes-langchain.toolSerpApi",
      "role": "toolSerpApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Anthropic Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "role": "lmChatAnthropic",
      "configDescription": "Version 1.3"
    },
    {
      "name": "BDD mails",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Ajouter un mail",
      "type": "n8n-nodes-base.airtableTool",
      "role": "airtableTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Search drive",
      "type": "n8n-nodes-base.googleDriveTool",
      "role": "googleDriveTool",
      "configDescription": "Version 3"
    },
    {
      "name": "Create event Google Calendar",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Send a mail",
      "type": "n8n-nodes-base.gmailTool",
      "role": "gmailTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "MP Discord",
      "type": "n8n-nodes-base.discordTool",
      "role": "discordTool",
      "configDescription": "Version 2"
    },
    {
      "name": "Search mails",
      "type": "n8n-nodes-base.gmailTool",
      "role": "gmailTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Get many events in Google Calendar",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Calculator",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "role": "toolCalculator",
      "configDescription": "Version 1"
    },
    {
      "name": "WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "role": "whatsAppTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Agent personnel",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Send message",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note16",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}