{
  "id": 8411,
  "slug": "8411",
  "title": "Voice & text control for Home Assistant using Telegram, Whisper & Gemini",
  "description": "## üìù Workflow Description\n\nThis workflow creates a conversational bridge between Telegram / n8n Chat and Home Assistant.\nIt allows users to control smart home devices or request information using natural language (text or voice).\n\n‚∏ª\n\n## üîë Key Features\n- Multi-channel input: Works with both Telegram and n8n‚Äôs chat interface.\n- Voice support: Telegram voice messages are transcribed to text using OpenAI Whisper.\n- AI-driven assistant: Google Gemini processes queries in natural language.\n- Home Assistant integration: Uses MCP client tools to execute actions like turning devices on/off, adjusting lights, or broadcasting messages.\n- Memory management: Short-term memory keeps context within conversations.\n- Smart reply routing: Responses are automatically sent back to the correct channel (Telegram or chat).\n- Message formatting: Telegram replies are beautified (bold, bullet points, inline code, links).\n\n‚∏ª\n\n## üìå Node Overview\n- Telegram Trigger: Captures incoming Telegram messages (text or voice).\n- Bot Is Typing: Sends a ‚Äútyping‚Ä¶‚Äù action to indicate the bot is working.\n- Voice or Text: Separates voice and text inputs.\n- Get Voice File ‚Üí Speech to Text ‚Üí Transcription to ChatInput: Handles Telegram voice notes by downloading the file, transcribing it, and preparing it for the chat pipeline.\n- When Chat Message Received: Captures messages from n8n‚Äôs built-in chat interface.\n- Process Messages: Normalizes incoming data (input text, source, session ID, voice flag).\n- Home Agent: Main AI agent that processes queries.\n- Google Gemini Chat Model: Language model for intent understanding and conversation.\n- Simple Memory & Simple Memory1: Buffer memories to preserve conversation context.\n- Home Assistant Connector: MCP client node that executes smart home actions (turn on/off devices, adjust lights, etc.).\n- Reply Router: Routes the assistant‚Äôs response either to Telegram or to the n8n chat webhook.\n- Telegram Message Beautifier ‚Üí Telegram Send: Formats and sends responses back to Telegram.\n- Respond to Webhook: Sends responses to n8n chat.\n\n‚∏ª\n\n## üöÄ Example Use Cases\n- Send ‚ÄúTurn on the living room lights‚Äù via Telegram ‚Üí Bot triggers Home Assistant action.\n- Ask ‚ÄúWhat‚Äôs the temperature in the bedroom?‚Äù ‚Üí Response comes back formatted in Telegram.\n- Record a voice note ‚ÄúGoodnight mode‚Äù ‚Üí Automatically transcribed and executed by Home Assistant.\n- Use n8n chat to quickly trigger automations or check device statuses.\n\n‚∏ª\n\n## ‚ö°Ô∏è Benefits\n- Unified chat & voice control for Home Assistant.\n- AI-powered natural language understanding.\n- Works seamlessly across platforms (Telegram & n8n chat).\n- Extensible: new tools or intents can be added easily.\n",
  "featuredImage": "/data/workflows/8411/8411.webp",
  "author": {
    "id": 101,
    "slug": "akadiusz",
    "name": "Arkadiusz",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 878,
  "downloads": 87,
  "createdAt": "2025-09-09T12:30:52.857Z",
  "updatedAt": "2026-01-16T08:55:40.538Z",
  "publishedAt": "2025-09-09T12:30:52.857Z",
  "nodes": 30,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8411",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Voice & text control for Home Assistant using Telegram, Whisper & Gemini",
    "workflowName": "Voice & text control for Home Assistant using Telegram, Whisper & Gemini",
    "description": "## üìù Workflow Description\n\nThis workflow creates a conversational bridge between Telegram / n8n Chat and Home Assistant.\nIt allows users to control smart home devices or request information using natural language (text or voice).\n\n‚∏ª\n\n## üîë Key Features\n- Multi-channel input: Works with both Telegram and n8n‚Äôs chat interface.\n- Voice support: Telegram voice messages are transcribed to text using OpenAI Whisper.\n- AI-driven assistant: Google Gemini processes queries in natural language.\n- Home Assistant integration: Uses MCP client tools to execute actions like turning devices on/off, adjusting lights, or broadcasting messages.\n- Memory management: Short-term memory keeps context within conversations.\n- Smart reply routing: Responses are automatically sent back to the correct channel (Telegram or chat).\n- Message formatting: Telegram replies are beautified (bold, bullet points, inline code, links).\n\n‚∏ª\n\n## üìå Node Overview\n- Telegram Trigger: Captures incoming Telegram messages (text or voice).\n- Bot Is Typing: Sends a ‚Äútyping‚Ä¶‚Äù action to indicate the bot is working.\n- Voice or Text: Separates voice and text inputs.\n- Get Voice File ‚Üí Speech to Text ‚Üí Transcription to ChatInput: Handles Telegram voice notes by downloading the file, transcribing it, and preparing it for the chat pipeline.\n- When Chat Message Received: Captures messages from n8n‚Äôs built-in chat interface.\n- Process Messages: Normalizes incoming data (input text, source, session ID, voice flag).\n- Home Agent: Main AI agent that processes queries.\n- Google Gemini Chat Model: Language model for intent understanding and conversation.\n- Simple Memory & Simple Memory1: Buffer memories to preserve conversation context.\n- Home Assistant Connector: MCP client node that executes smart home actions (turn on/off devices, adjust lights, etc.).\n- Reply Router: Routes the assistant‚Äôs response either to Telegram or to the n8n chat webhook.\n- Telegram Message Beautifier ‚Üí Telegram Send: Formats and sends responses back to Telegram.\n- Respond to Webhook: Sends responses to n8n chat.\n\n‚∏ª\n\n## üöÄ Example Use Cases\n- Send ‚ÄúTurn on the living room lights‚Äù via Telegram ‚Üí Bot triggers Home Assistant action.\n- Ask ‚ÄúWhat‚Äôs the temperature in the bedroom?‚Äù ‚Üí Response comes back formatted in Telegram.\n- Record a voice note ‚ÄúGoodnight mode‚Äù ‚Üí Automatically transcribed and executed by Home Assistant.\n- Use n8n chat to quickly trigger automations or check device statuses.\n\n‚∏ª\n\n## ‚ö°Ô∏è Benefits\n- Unified chat & voice control for Home Assistant.\n- AI-powered natural language understanding.\n- Works seamlessly across platforms (Telegram & n8n chat).\n- Extensible: new tools or intents can be added easily.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Telegram Send",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1"
    },
    {
      "name": "Reply Router",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Telegram Message Beautifier",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Transcription to ChatInput",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Get Voice File",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Voice or Text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Speech to Text",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.3"
    },
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Process messages",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Bot Is typing",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Simple Memory1",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Home assistant Connector",
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Home Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}