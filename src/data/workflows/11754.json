{
  "id": 11754,
  "slug": "11754",
  "title": "Build a WhatsApp assistant for text, audio & images using GPT-4o & Evolution API",
  "description": "Build an intelligent WhatsApp assistant that automatically responds to customer messages using AI. This template uses the Evolution API community node for WhatsApp integration and OpenAI for natural language processing, with built-in conversation memory powered by Redis to maintain context across messages.\n\n&gt; ⚠️ **Self-hosted requirement:** This workflow uses the Evolution API community node, which is only available on self-hosted n8n instances. It will not work on n8n Cloud.\n\n## What this workflow does\n\n1. Receives incoming WhatsApp messages via Evolution API webhook\n2. Filters and processes text, audio, and image messages\n3. Transcribes audio messages using OpenAI Whisper\n4. Analyzes images using GPT-4 Vision\n5. Generates contextual responses with conversation memory\n6. Sends replies back through WhatsApp\n\n## Who is this for?\n\n- Businesses wanting to automate customer support on WhatsApp\n- Teams needing 24/7 automated responses with AI\n- Developers building multimodal chat assistants\n- Companies looking to reduce response time on WhatsApp\n\n## Setup instructions\n\n1. **Evolution API**: Install and configure Evolution API on your server. Create an instance and obtain your API key and instance name.\n2. **Redis**: Set up a Redis instance for conversation memory. You can use a local installation or a cloud service like Redis Cloud.\n3. **OpenAI**: Get your API key from platform.openai.com with access to GPT and Whisper models.\n4. **Webhook**: Configure your Evolution API instance to send webhooks to your n8n webhook URL.\n\n## Customization options\n\n- Modify the system prompt in the AI node to change the assistant's personality and responses\n- Adjust the Redis TTL to control how long conversation history is retained\n- Add additional message type handlers for documents, locations, or contacts\n- Integrate with your CRM or database to personalize responses\n\n## Credentials required\n\n- Evolution API credentials (self-hosted)\n- OpenAI API key\n- Redis connection",
  "featuredImage": "/data/workflows/11754/11754.webp",
  "author": {
    "id": 101,
    "slug": "akav",
    "name": "Antonio Gasso",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1223,
  "downloads": 122,
  "createdAt": "2025-12-12T21:12:02.514Z",
  "updatedAt": "2026-01-16T09:09:59.904Z",
  "publishedAt": "2025-12-12T21:12:02.514Z",
  "nodes": 54,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11754",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Build a WhatsApp assistant for text, audio & images using GPT-4o & Evolution API",
    "workflowName": "Build a WhatsApp assistant for text, audio & images using GPT-4o & Evolution API",
    "description": "Build an intelligent WhatsApp assistant that automatically responds to customer messages using AI. This template uses the Evolution API community node for WhatsApp integration and OpenAI for natural language processing, with built-in conversation memory powered by Redis to maintain context across messages.\n\n&gt; ⚠️ **Self-hosted requirement:** This workflow uses the Evolution API community node, which is only available on self-hosted n8n instances. It will not work on n8n Cloud.\n\n## What this workflow does\n\n1. Receives incoming WhatsApp messages via Evolution API webhook\n2. Filters and processes text, audio, and image messages\n3. Transcribes audio messages using OpenAI Whisper\n4. Analyzes images using GPT-4 Vision\n5. Generates contextual responses with conversation memory\n6. Sends replies back through WhatsApp\n\n## Who is this for?\n\n- Businesses wanting to automate customer support on WhatsApp\n- Teams needing 24/7 automated responses with AI\n- Developers building multimodal chat assistants\n- Companies looking to reduce response time on WhatsApp\n\n## Setup instructions\n\n1. **Evolution API**: Install and configure Evolution API on your server. Create an instance and obtain your API key and instance name.\n2. **Redis**: Set up a Redis instance for conversation memory. You can use a local installation or a cloud service like Redis Cloud.\n3. **OpenAI**: Get your API key from platform.openai.com with access to GPT and Whisper models.\n4. **Webhook**: Configure your Evolution API instance to send webhooks to your n8n webhook URL.\n\n## Customization options\n\n- Modify the system prompt in the AI node to change the assistant's personality and responses\n- Adjust the Redis TTL to control how long conversation history is retained\n- Add additional message type handlers for documents, locations, or contacts\n- Integrate with your CRM or database to personalize responses\n\n## Credentials required\n\n- Evolution API credentials (self-hosted)\n- OpenAI API key\n- Redis connection",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Main Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Warning - Setup",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 1 - Receive",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 2 - Mark Read",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 3 - Router",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 4 - Media Processing",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 5 - Queue",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 6 - Check",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 7 - AI",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 8 - Format",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Section 9 - Send",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Receive WhatsApp",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Parse Message Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Filter Allowed Numbers",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Wait 2s",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Mark as Read",
      "type": "n8n-nodes-evolution-api.evolutionApi",
      "role": "evolutionApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Route by Message Type",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.3"
    },
    {
      "name": "Extract Text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Audio Base64",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Convert to Audio",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Transcribe Audio",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 2"
    },
    {
      "name": "Format Audio Input",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Image Base64",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Convert to Image",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Analyze Image",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 2"
    },
    {
      "name": "Format Image Input",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Extract Document Base64",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Convert to Document",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Transcribe Document",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 2"
    },
    {
      "name": "Format Document Input",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send Unsupported Message",
      "type": "n8n-nodes-evolution-api.evolutionApi",
      "role": "evolutionApi",
      "configDescription": "Version 1"
    },
    {
      "name": "End Unsupported",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Unify Input",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Queue Message",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "Wait for More Messages",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Get Queued Messages",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "Is Last Message?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Not Last - Stop",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Concatenate Messages",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 3"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Format Response",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.7"
    },
    {
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Split Messages",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Loop Messages",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Is Image URL?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Send Image",
      "type": "n8n-nodes-evolution-api.evolutionApi",
      "role": "evolutionApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Send Text",
      "type": "n8n-nodes-evolution-api.evolutionApi",
      "role": "evolutionApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Wait Between Messages",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Clear Queue",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "Done",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    }
  ]
}