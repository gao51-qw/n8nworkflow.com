{
  "id": 6771,
  "slug": "6771",
  "title": "WhatsApp RAG chatbot with Supabase, Gemini 2.5 Flash, and OpenAI embeddings",
  "description": "## WhatsApp RAG Chatbot with Supabase, Gemini 2.5 Flash, and OpenAI Embeddings\n\nThis n8n template demonstrates how to build a **WhatsApp-based AI chatbot** that answers user questions using **document retrieval (RAG)** powered by **Supabase** for storage, **OpenAI embeddings** for semantic search, and **Gemini 2.5 Flash LLM** for generating high-quality responses.\n\nUse cases are many: Turn your WhatsApp into a **knowledge assistant** for FAQs, customer support, or internal company documents — all without coding.\n\n---\n\n### Good to know\n\n- The workflow uses **OpenAI embeddings** for both document embeddings and query embeddings, ensuring accurate semantic search.  \n- **Gemini 2.5 Flash LLM** is used to generate user-friendly answers from the retrieved context.  \n- Messages are processed in **real-time** and sent back directly to WhatsApp.  \n- Workflow is modular — you can split document ingestion and query handling for large-scale setups.  \n- Supabase and WhatsApp API credentials must be configured before running.  \n\n---\n\n### How it works\n\n1. **Trigger**: A new WhatsApp message triggers the workflow via webhook.  \n2. **Message Check**: Determines if the message is a query or a document upload.  \n3. **Document Handling**:  \n   - Fetch file URL from WhatsApp.  \n   - Convert binary to text.  \n   - Generate embeddings with **OpenAI** and store them in **Supabase**.  \n4. **Query Handling**:  \n   - Generate query embeddings with **OpenAI**.  \n   - Retrieve relevant context from **Supabase**.  \n   - Pass context to **Gemini 2.5 Flash LLM** to compose a response.  \n5. **Response**: Send the answer back to the user on WhatsApp.  \n\n*Optional:* Add Gmail node to forward chat logs or daily summaries.\n\n---\n\n### How to use\n\n- Configure **WhatsApp Business API** webhook for incoming messages.  \n- Add your **Supabase** and **OpenAI** credentials in n8n’s credentials manager.  \n- Upload documents via WhatsApp to populate the Supabase vector store.  \n- Ask queries — the bot retrieves context and answers using **Gemini 2.5 Flash**.\n\n---\n\n### Requirements\n\n- **WhatsApp Business API** (or Twilio WhatsApp Sandbox)  \n- **Supabase account** (vector storage for embeddings)  \n- **OpenAI API key** (for generating embeddings)  \n- **Gemini API access** (for LLM responses)  \n\n---\n\n### Customising this workflow\n\n- Swap WhatsApp with **Telegram, Slack, or email** for different chat channels.  \n- Extend ingestion to other sources like **Google Drive or Notion**.  \n- Adjust the number of retrieved documents or prompt style in Gemini for tone control.  \n- Add a **Gmail output node** to send logs or alerts automatically.  \n",
  "featuredImage": "/data/workflows/6771/6771.webp",
  "author": {
    "id": 101,
    "slug": "manavdesai17",
    "name": "Manav Desai",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 6140,
  "downloads": 614,
  "createdAt": "2025-08-01T09:17:50.511Z",
  "updatedAt": "2026-01-16T08:47:01.760Z",
  "publishedAt": "2025-08-01T09:17:50.511Z",
  "nodes": 17,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6771",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "WhatsApp RAG chatbot with Supabase, Gemini 2.5 Flash, and OpenAI embeddings",
    "workflowName": "WhatsApp RAG chatbot with Supabase, Gemini 2.5 Flash, and OpenAI embeddings",
    "description": "## WhatsApp RAG Chatbot with Supabase, Gemini 2.5 Flash, and OpenAI Embeddings\n\nThis n8n template demonstrates how to build a **WhatsApp-based AI chatbot** that answers user questions using **document retrieval (RAG)** powered by **Supabase** for storage, **OpenAI embeddings** for semantic search, and **Gemini 2.5 Flash LLM** for generating high-quality responses.\n\nUse cases are many: Turn your WhatsApp into a **knowledge assistant** for FAQs, customer support, or internal company documents — all without coding.\n\n---\n\n### Good to know\n\n- The workflow uses **OpenAI embeddings** for both document embeddings and query embeddings, ensuring accurate semantic search.  \n- **Gemini 2.5 Flash LLM** is used to generate user-friendly answers from the retrieved context.  \n- Messages are processed in **real-time** and sent back directly to WhatsApp.  \n- Workflow is modular — you can split document ingestion and query handling for large-scale setups.  \n- Supabase and WhatsApp API credentials must be configured before running.  \n\n---\n\n### How it works\n\n1. **Trigger**: A new WhatsApp message triggers the workflow via webhook.  \n2. **Message Check**: Determines if the message is a query or a document upload.  \n3. **Document Handling**:  \n   - Fetch file URL from WhatsApp.  \n   - Convert binary to text.  \n   - Generate embeddings with **OpenAI** and store them in **Supabase**.  \n4. **Query Handling**:  \n   - Generate query embeddings with **OpenAI**.  \n   - Retrieve relevant context from **Supabase**.  \n   - Pass context to **Gemini 2.5 Flash LLM** to compose a response.  \n5. **Response**: Send the answer back to the user on WhatsApp.  \n\n*Optional:* Add Gmail node to forward chat logs or daily summaries.\n\n---\n\n### How to use\n\n- Configure **WhatsApp Business API** webhook for incoming messages.  \n- Add your **Supabase** and **OpenAI** credentials in n8n’s credentials manager.  \n- Upload documents via WhatsApp to populate the Supabase vector store.  \n- Ask queries — the bot retrieves context and answers using **Gemini 2.5 Flash**.\n\n---\n\n### Requirements\n\n- **WhatsApp Business API** (or Twilio WhatsApp Sandbox)  \n- **Supabase account** (vector storage for embeddings)  \n- **OpenAI API key** (for generating embeddings)  \n- **Gemini API access** (for LLM responses)  \n\n---\n\n### Customising this workflow\n\n- Swap WhatsApp with **Telegram, Slack, or email** for different chat channels.  \n- Extend ingestion to other sources like **Google Drive or Notion**.  \n- Adjust the number of retrieved documents or prompt style in Gemini for tone control.  \n- Add a **Gmail output node** to send logs or alerts automatically.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Retrieve Context from Supabase",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1.3"
    },
    {
      "name": "New WhatsApp Message",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "role": "whatsAppTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Check if Query or Document",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Convert File to Text",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Generate OpenAI Embeddings",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Store Embeddings in Supabase",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Google Gemini LLM",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "RAG Query Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Send WhatsApp Reply",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Document URL",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Download WhatsApp Document",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}