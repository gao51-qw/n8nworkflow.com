{
  "id": 6774,
  "slug": "6774",
  "title": "Automate construction site attendance tracking with geofencing, Google Sheets & email alerts",
  "description": "This n8n workflow automates attendance tracking for construction workers at a designated site in Thaltej, Ahmedabad (GPS coordinates: 23.0489, 72.5118). Using geofencing technology, it logs \"Punch In\" and \"Punch Out\" times when workers enter or exit a predefined 100-meter radius around the site, requiring no manual input. Attendance data is stored in Google Sheets for easy access and reporting, and error notifications are sent via email to ensure reliable operation.\n\n## Good to Know\n\n- **Fully Automated**: Tracks attendance without worker intervention using GPS data from a mobile app.\n- **Geofence-Based**: Only logs entries/exits within the Thaltej, Ahmedabad site radius.\n- **Structured Logs**: Stores data in Google Sheets with columns for User ID, Punch Type, Punch Date, and Punch Time.\n- **Error Handling**: Sends email notifications for any issues in the workflow.\n- **Scalable**: Supports multiple workers with unique IDs sent by the GPS app.\n- **Real-Time**: Processes location updates instantly for accurate time tracking.\n\n## How It Works\n\n### Attendance Tracking Flow\n\n1. **Webhook Trigger**:\n   - Listens for POST requests from a GPS tracking app at the endpoint `/webhook/geofence-thaltej-attendance`.\n   - Expects a JSON payload with:\n     ```json\n     {\n       \"latitude\": 23.0489,\n       \"longitude\": 72.5118,\n       \"event\": \"enter\", // or \"exit\"\n       \"userId\": \"worker123\"\n     }\n     ```\n\n2. **Validate Geofence & Format Log**:\n   - Validates the received payload for required fields (`latitude`, `longitude`, `event`, `userId`).\n   - Uses the Haversine formula to check if the coordinates are within 100 meters of Thaltej, Ahmedabad (23.0489, 72.5118).\n   - Maps `event` (\"enter\" to \"in\", \"exit\" to \"out\") and formats the log with current date and time (e.g., Punch Type: \"in\", Punch Date: \"2025-08-01\", Punch Time: \"11:53:07\").\n   - Skips invalid or out-of-geofence data.\n\n3. **Save to Google Sheets**:\n   - Appends the formatted log to a Google Sheet in the \"Attendance\" tab, under columns: `User ID`, `Punch Type`, `Punch Date`, `Punch Time`.\n\n4. **Error Notification via Email**:\n   - Sends an email to a specified address if the workflow encounters errors (e.g., invalid payload or geofence mismatch).\n   - Includes error details for troubleshooting.\n\n### Example Log Output in Google Sheets\n\n| User ID    | Punch Type | Punch Date  | Punch Time |\n|------------|------------|-------------|------------|\n| worker123  | in         | 2025-08-01  | 11:53:07   |\n| worker123  | out        | 2025-08-01  | 13:30:20   |\n| worker123  | in         | 2025-08-01  | 13:50:21   |\n\n## How to Use\n\n1. **Import Workflow**:\n   - Copy the workflow JSON (provided below) and import it into n8n via the \"Import Workflow\" feature.\n\n2. **Configure GPS Tracking App**:\n   - Use a GPS app (e.g., allGeo, Truein, or a custom solution) that supports geofencing and webhook integration.\n   - Set the geofence to Thaltej, Ahmedabad (latitude: 23.0489, longitude: 72.5118, radius: 100 meters).\n   - Configure the app to send POST requests to the n8n webhook URL (`/webhook/geofence-thaltej-attendance`) with the payload:\n     ```json\n     {\n       \"latitude\": 23.0489,\n       \"longitude\": 72.5118,\n       \"event\": \"enter\", // or \"exit\"\n       \"userId\": \"worker123\"\n     }\n     ```\n   - Ensure the app is installed on workers’ devices and running in the background.\n\n3. **Set Up Google Sheets**:\n   - Create a Google Sheet with a tab named \"Attendance\".\n   - Add headers in columns A to D: `User ID`, `Punch Type`, `Punch Date`, `Punch Time`.\n   - Copy the Sheet ID from the URL (e.g., `https://docs.google.com/spreadsheets/d/[your_sheet_id]/edit`).\n   - In n8n, configure Google Sheets OAuth2 credentials and update the `sheetId` in the workflow.\n\n4. **Configure Email Notifications**:\n   - Set up an email service (e.g., Gmail, SendGrid) in n8n with appropriate credentials.\n   - Update the email node with your recipient email address and SMTP settings.\n\n5. **Activate Workflow**:\n   - Save and activate the workflow in n8n.\n   - Test by simulating a webhook call or using the GPS app to send a sample payload.\n\n6. **Monitor and Verify**:\n   - Check Google Sheets for attendance logs after workers enter/exit the geofence.\n   - Verify error emails are received if issues occur.\n\n## Requirements\n\n- **n8n Instance**: Self-hosted or cloud-based n8n setup.\n- **GPS Tracking App**: A mobile app or service (e.g., allGeo, Truein) that sends geofence events via webhooks.\n- **Google Sheets API**:\n  - Google Cloud project with Sheets API enabled.\n  - OAuth2 credentials configured in n8n.\n- **Email Service**:\n  - SMTP credentials for an email provider (e.g., Gmail, SendGrid).\n- **Worker Devices**: Smartphones with GPS enabled and the tracking app installed.\n\n## Customizing This Workflow\n\n- **Adjust Geofence Radius**: Modify the `radius` value in the Function node (e.g., change from 100 meters to 200 meters).\n- **Change Location**: Update `latitude` and `longitude` in the Function node for a different site.\n- **Alternative Storage**: Replace Google Sheets with a database (e.g., MySQL, PostgreSQL) by adding a database node.\n- **Custom Email Content**: Modify the email node’s message template for specific error details or branding.\n- **Add Authentication**: Secure the webhook with an API key or basic auth in the Webhook node.\n- **Multi-Site Support**: Add a Switch node to handle multiple geofence locations by checking coordinates against different sites.\n",
  "featuredImage": "/data/workflows/6774/6774.webp",
  "author": {
    "id": 101,
    "slug": "oneclick-ai",
    "name": "Oneclick AI Squad",
    "avatar": ""
  },
  "categories": [
    "HR"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 574,
  "downloads": 57,
  "createdAt": "2025-08-01T10:53:22.963Z",
  "updatedAt": "2026-01-16T08:47:04.087Z",
  "publishedAt": "2025-08-01T10:53:22.963Z",
  "nodes": 8,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6774",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate construction site attendance tracking with geofencing, Google Sheets & email alerts",
    "workflowName": "Automate construction site attendance tracking with geofencing, Google Sheets & email alerts",
    "description": "This n8n workflow automates attendance tracking for construction workers at a designated site in Thaltej, Ahmedabad (GPS coordinates: 23.0489, 72.5118). Using geofencing technology, it logs \"Punch In\" and \"Punch Out\" times when workers enter or exit a predefined 100-meter radius around the site, requiring no manual input. Attendance data is stored in Google Sheets for easy access and reporting, and error notifications are sent via email to ensure reliable operation.\n\n## Good to Know\n\n- **Fully Automated**: Tracks attendance without worker intervention using GPS data from a mobile app.\n- **Geofence-Based**: Only logs entries/exits within the Thaltej, Ahmedabad site radius.\n- **Structured Logs**: Stores data in Google Sheets with columns for User ID, Punch Type, Punch Date, and Punch Time.\n- **Error Handling**: Sends email notifications for any issues in the workflow.\n- **Scalable**: Supports multiple workers with unique IDs sent by the GPS app.\n- **Real-Time**: Processes location updates instantly for accurate time tracking.\n\n## How It Works\n\n### Attendance Tracking Flow\n\n1. **Webhook Trigger**:\n   - Listens for POST requests from a GPS tracking app at the endpoint `/webhook/geofence-thaltej-attendance`.\n   - Expects a JSON payload with:\n     ```json\n     {\n       \"latitude\": 23.0489,\n       \"longitude\": 72.5118,\n       \"event\": \"enter\", // or \"exit\"\n       \"userId\": \"worker123\"\n     }\n     ```\n\n2. **Validate Geofence & Format Log**:\n   - Validates the received payload for required fields (`latitude`, `longitude`, `event`, `userId`).\n   - Uses the Haversine formula to check if the coordinates are within 100 meters of Thaltej, Ahmedabad (23.0489, 72.5118).\n   - Maps `event` (\"enter\" to \"in\", \"exit\" to \"out\") and formats the log with current date and time (e.g., Punch Type: \"in\", Punch Date: \"2025-08-01\", Punch Time: \"11:53:07\").\n   - Skips invalid or out-of-geofence data.\n\n3. **Save to Google Sheets**:\n   - Appends the formatted log to a Google Sheet in the \"Attendance\" tab, under columns: `User ID`, `Punch Type`, `Punch Date`, `Punch Time`.\n\n4. **Error Notification via Email**:\n   - Sends an email to a specified address if the workflow encounters errors (e.g., invalid payload or geofence mismatch).\n   - Includes error details for troubleshooting.\n\n### Example Log Output in Google Sheets\n\n| User ID    | Punch Type | Punch Date  | Punch Time |\n|------------|------------|-------------|------------|\n| worker123  | in         | 2025-08-01  | 11:53:07   |\n| worker123  | out        | 2025-08-01  | 13:30:20   |\n| worker123  | in         | 2025-08-01  | 13:50:21   |\n\n## How to Use\n\n1. **Import Workflow**:\n   - Copy the workflow JSON (provided below) and import it into n8n via the \"Import Workflow\" feature.\n\n2. **Configure GPS Tracking App**:\n   - Use a GPS app (e.g., allGeo, Truein, or a custom solution) that supports geofencing and webhook integration.\n   - Set the geofence to Thaltej, Ahmedabad (latitude: 23.0489, longitude: 72.5118, radius: 100 meters).\n   - Configure the app to send POST requests to the n8n webhook URL (`/webhook/geofence-thaltej-attendance`) with the payload:\n     ```json\n     {\n       \"latitude\": 23.0489,\n       \"longitude\": 72.5118,\n       \"event\": \"enter\", // or \"exit\"\n       \"userId\": \"worker123\"\n     }\n     ```\n   - Ensure the app is installed on workers’ devices and running in the background.\n\n3. **Set Up Google Sheets**:\n   - Create a Google Sheet with a tab named \"Attendance\".\n   - Add headers in columns A to D: `User ID`, `Punch Type`, `Punch Date`, `Punch Time`.\n   - Copy the Sheet ID from the URL (e.g., `https://docs.google.com/spreadsheets/d/[your_sheet_id]/edit`).\n   - In n8n, configure Google Sheets OAuth2 credentials and update the `sheetId` in the workflow.\n\n4. **Configure Email Notifications**:\n   - Set up an email service (e.g., Gmail, SendGrid) in n8n with appropriate credentials.\n   - Update the email node with your recipient email address and SMTP settings.\n\n5. **Activate Workflow**:\n   - Save and activate the workflow in n8n.\n   - Test by simulating a webhook call or using the GPS app to send a sample payload.\n\n6. **Monitor and Verify**:\n   - Check Google Sheets for attendance logs after workers enter/exit the geofence.\n   - Verify error emails are received if issues occur.\n\n## Requirements\n\n- **n8n Instance**: Self-hosted or cloud-based n8n setup.\n- **GPS Tracking App**: A mobile app or service (e.g., allGeo, Truein) that sends geofence events via webhooks.\n- **Google Sheets API**:\n  - Google Cloud project with Sheets API enabled.\n  - OAuth2 credentials configured in n8n.\n- **Email Service**:\n  - SMTP credentials for an email provider (e.g., Gmail, SendGrid).\n- **Worker Devices**: Smartphones with GPS enabled and the tracking app installed.\n\n## Customizing This Workflow\n\n- **Adjust Geofence Radius**: Modify the `radius` value in the Function node (e.g., change from 100 meters to 200 meters).\n- **Change Location**: Update `latitude` and `longitude` in the Function node for a different site.\n- **Alternative Storage**: Replace Google Sheets with a database (e.g., MySQL, PostgreSQL) by adding a database node.\n- **Custom Email Content**: Modify the email node’s message template for specific error details or branding.\n- **Add Authentication**: Secure the webhook with an API key or basic auth in the Webhook node.\n- **Multi-Site Support**: Add a Switch node to handle multiple geofence locations by checking coordinates against different sites.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate Geofence & Format Log",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    },
    {
      "name": "Send email",
      "type": "n8n-nodes-base.emailSend",
      "role": "emailSend",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Append data to a sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}