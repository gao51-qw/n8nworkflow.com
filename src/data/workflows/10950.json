{
  "id": 10950,
  "slug": "10950",
  "title": "Automate LINE & Google account linking with OAuth2 authentication",
  "description": "# LINE x Google Account Linking Workflow\n\nThis workflow automates the process of linking a new user on your LINE Official Account to their Google Account. When a user adds your LINE account as a friend, this workflow automatically sends them a message with a unique authentication link. After the user approves the connection, their Google profile information is fetched, and a confirmation message is sent, completing the loop.\n\n## Prerequisites\n\nBefore you begin, ensure you have the following:\n\n*   **An n8n instance:** Either on n8n.cloud or a self-hosted environment.\n*   **A LINE Developers Account:**\n    *   A Messaging API channel.\n    *   Your Channel Access Token (long-lived).\n*   **A Google Cloud Platform (GCP) Account:**\n    *   A configured OAuth consent screen.\n    *   An OAuth 2.0 Client ID and Client Secret.\n\n## Setup Instructions\n\nFollow these steps to configure the workflow.\n\n### Step 1: Configure LINE Developers Console\n\n1.  Log in to the [LINE Developers Console](https://developers.line.biz/console/).\n2.  Navigate to your provider and select your **Messaging API channel**.\n3.  Go to the **Messaging API** tab.\n4.  Issue a **Channel access token (long-lived)** and copy the value.\n5.  In the **Webhook URL** field, paste the Test URL from the `LINE Webhook` node in your n8n workflow.\n6.  Enable **Use webhook**.\n\n### Step 2: Configure Google Cloud Platform (GCP)\n\n1.  Log in to the [Google Cloud Console](https://console.cloud.google.com/) and select your project.\n2.  Navigate to **APIs & Services** &gt; **OAuth consent screen**. Configure it if you haven't already, ensuring you add your own Google account as a test user.\n3.  Go to **APIs & Services** &gt; **Credentials**.\n4.  Click **+ CREATE CREDENTIALS** and select **OAuth 2.0 Client ID**.\n5.  For **Application type**, choose **Web application**.\n6.  Under **Authorized redirect URIs**, click **+ ADD URI** and paste the Test URL from the `Google Auth Callback` node in your n8n workflow.\n7.  Click **Create**. Copy your **Client ID** and **Client Secret**.\n\n### Step 3: Configure the n8n Workflow\n\nImport the workflow JSON into your n8n canvas and follow these steps to set it up.\n\n#### 1. Configure n8n Credentials\n\nFirst, set up the credentials that the HTTP Request nodes will use.\n\n*   **For the LINE Messaging API:**\n    1.  In n8n, go to **Credentials** &gt; **Add credential**.\n    2.  Search for and select **Header Auth**.\n    3.  Set `Name` to `Authorization`.\n    4.  Set `Value` to `Bearer YOUR_LINE_CHANNEL_ACCESS_TOKEN` (replace with the token from Step 1).\n    5.  Save the credential with a memorable name like \"LINE Messaging API Auth\".\n\n*   **For the Google API (Dynamic Token):**\n    1.  Create another **Header Auth** credential.\n    2.  Set `Name` to `Authorization`.\n    3.  For `Value`, enter a placeholder like `Bearer dummy_token`. This will be replaced dynamically by the workflow.\n    4.  Save the credential with a name like \"Google API Dynamic Token\".\n\n#### 2. Update Node Parameters\n\nNow, update the parameters in the following nodes:\n\n*   **`Create Google Auth URL` node:**\n    *   In the `value` field, replace `YOUR_N8N_WEBHOOK_URL_FOR_GOOGLE` with the webhook URL of the `Google Auth Callback` node.\n    *   Replace `YOUR_GOOGLE_CLIENT_ID` with the Client ID from GCP (Step 2).\n\n*   **`Get Google Access Token` node:**\n    *   In the `jsonBody` field, replace `YOUR_GOOGLE_CLIENT_ID`, `YOUR_GOOGLE_CLIENT_SECRET`, and `YOUR_N8N_WEBHOOK_URL_FOR_GOOGLE` with your actual GCP credentials and callback URL.\n\n*   **`Get Google User Info` node:**\n    *   For **Authentication**, select `Header Auth`.\n    *   For **Credential for Header Auth**, choose the \"Google API Dynamic Token\" credential you created.\n    *   **Important:** Click **Add Option** &gt; **Header To Append**. Set the `Name` to `Authorization` and the `Value` to the following expression to use the token from the previous step: `Bearer {{ $node[\"Get Google Access Token\"].json[\"access_token\"] }}`.\n\n*   **`Send Auth Link to LINE` & `Send Completion Message to LINE` nodes:**\n    *   For **Credential for Header Auth**, choose the \"LINE Messaging API Auth\" credential.\n\n*   **`Redirect to LINE OA` node:**\n    *   In the `redirectURL` parameter, replace `YOUR_LINE_OFFICIAL_ACCOUNT_ID` with your LINE OA's ID (e.g., `@123abcde`).\n\n### Step 4: Activate and Test\n\n1.  Save the workflow by clicking the **Save** button.\n2.  **Activate** the workflow using the toggle in the top-right corner.\n3.  On your phone, add your LINE Official Account as a friend. You should receive a message with a link.\n4.  Follow the link to authorize with your Google account. After successful authorization, you should receive a completion message in LINE and be redirected.\n\n&gt; **Note:** When you are ready for production, remember to replace the \"Test\" webhook URLs in the LINE and GCP consoles with the \"Production\" URLs from the n8n webhook nodes.",
  "featuredImage": "/data/workflows/10950/10950.webp",
  "author": {
    "id": 101,
    "slug": "s3110",
    "name": "s3110",
    "avatar": ""
  },
  "categories": [
    "Miscellaneous"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 53,
  "downloads": 5,
  "createdAt": "2025-11-18T07:41:25.763Z",
  "updatedAt": "2026-01-16T09:06:54.788Z",
  "publishedAt": "2025-11-18T07:41:25.763Z",
  "nodes": 12,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10950",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate LINE & Google account linking with OAuth2 authentication",
    "workflowName": "Automate LINE & Google account linking with OAuth2 authentication",
    "description": "# LINE x Google Account Linking Workflow\n\nThis workflow automates the process of linking a new user on your LINE Official Account to their Google Account. When a user adds your LINE account as a friend, this workflow automatically sends them a message with a unique authentication link. After the user approves the connection, their Google profile information is fetched, and a confirmation message is sent, completing the loop.\n\n## Prerequisites\n\nBefore you begin, ensure you have the following:\n\n*   **An n8n instance:** Either on n8n.cloud or a self-hosted environment.\n*   **A LINE Developers Account:**\n    *   A Messaging API channel.\n    *   Your Channel Access Token (long-lived).\n*   **A Google Cloud Platform (GCP) Account:**\n    *   A configured OAuth consent screen.\n    *   An OAuth 2.0 Client ID and Client Secret.\n\n## Setup Instructions\n\nFollow these steps to configure the workflow.\n\n### Step 1: Configure LINE Developers Console\n\n1.  Log in to the [LINE Developers Console](https://developers.line.biz/console/).\n2.  Navigate to your provider and select your **Messaging API channel**.\n3.  Go to the **Messaging API** tab.\n4.  Issue a **Channel access token (long-lived)** and copy the value.\n5.  In the **Webhook URL** field, paste the Test URL from the `LINE Webhook` node in your n8n workflow.\n6.  Enable **Use webhook**.\n\n### Step 2: Configure Google Cloud Platform (GCP)\n\n1.  Log in to the [Google Cloud Console](https://console.cloud.google.com/) and select your project.\n2.  Navigate to **APIs & Services** &gt; **OAuth consent screen**. Configure it if you haven't already, ensuring you add your own Google account as a test user.\n3.  Go to **APIs & Services** &gt; **Credentials**.\n4.  Click **+ CREATE CREDENTIALS** and select **OAuth 2.0 Client ID**.\n5.  For **Application type**, choose **Web application**.\n6.  Under **Authorized redirect URIs**, click **+ ADD URI** and paste the Test URL from the `Google Auth Callback` node in your n8n workflow.\n7.  Click **Create**. Copy your **Client ID** and **Client Secret**.\n\n### Step 3: Configure the n8n Workflow\n\nImport the workflow JSON into your n8n canvas and follow these steps to set it up.\n\n#### 1. Configure n8n Credentials\n\nFirst, set up the credentials that the HTTP Request nodes will use.\n\n*   **For the LINE Messaging API:**\n    1.  In n8n, go to **Credentials** &gt; **Add credential**.\n    2.  Search for and select **Header Auth**.\n    3.  Set `Name` to `Authorization`.\n    4.  Set `Value` to `Bearer YOUR_LINE_CHANNEL_ACCESS_TOKEN` (replace with the token from Step 1).\n    5.  Save the credential with a memorable name like \"LINE Messaging API Auth\".\n\n*   **For the Google API (Dynamic Token):**\n    1.  Create another **Header Auth** credential.\n    2.  Set `Name` to `Authorization`.\n    3.  For `Value`, enter a placeholder like `Bearer dummy_token`. This will be replaced dynamically by the workflow.\n    4.  Save the credential with a name like \"Google API Dynamic Token\".\n\n#### 2. Update Node Parameters\n\nNow, update the parameters in the following nodes:\n\n*   **`Create Google Auth URL` node:**\n    *   In the `value` field, replace `YOUR_N8N_WEBHOOK_URL_FOR_GOOGLE` with the webhook URL of the `Google Auth Callback` node.\n    *   Replace `YOUR_GOOGLE_CLIENT_ID` with the Client ID from GCP (Step 2).\n\n*   **`Get Google Access Token` node:**\n    *   In the `jsonBody` field, replace `YOUR_GOOGLE_CLIENT_ID`, `YOUR_GOOGLE_CLIENT_SECRET`, and `YOUR_N8N_WEBHOOK_URL_FOR_GOOGLE` with your actual GCP credentials and callback URL.\n\n*   **`Get Google User Info` node:**\n    *   For **Authentication**, select `Header Auth`.\n    *   For **Credential for Header Auth**, choose the \"Google API Dynamic Token\" credential you created.\n    *   **Important:** Click **Add Option** &gt; **Header To Append**. Set the `Name` to `Authorization` and the `Value` to the following expression to use the token from the previous step: `Bearer {{ $node[\"Get Google Access Token\"].json[\"access_token\"] }}`.\n\n*   **`Send Auth Link to LINE` & `Send Completion Message to LINE` nodes:**\n    *   For **Credential for Header Auth**, choose the \"LINE Messaging API Auth\" credential.\n\n*   **`Redirect to LINE OA` node:**\n    *   In the `redirectURL` parameter, replace `YOUR_LINE_OFFICIAL_ACCOUNT_ID` with your LINE OA's ID (e.g., `@123abcde`).\n\n### Step 4: Activate and Test\n\n1.  Save the workflow by clicking the **Save** button.\n2.  **Activate** the workflow using the toggle in the top-right corner.\n3.  On your phone, add your LINE Official Account as a friend. You should receive a message with a link.\n4.  Follow the link to authorize with your Google account. After successful authorization, you should receive a completion message in LINE and be redirected.\n\n&gt; **Note:** When you are ready for production, remember to replace the \"Test\" webhook URLs in the LINE and GCP consoles with the \"Production\" URLs from the n8n webhook nodes.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Redirect to LINE OA",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Get Google Access Token",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Get Google User Info",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Send Completion Message to LINE",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "If Follow Event",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Create Google Auth URL",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send Auth Link to LINE",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "LINE Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Google Auth Callback",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}