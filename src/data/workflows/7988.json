{
  "id": 7988,
  "slug": "7988",
  "title": "Query PostgreSQL database with natural language using GPT-4o-mini",
  "description": "## This Database SQL Query Agent convert natural language into sql query to get results\n\nTurn your PostgreSQL database into a conversational AI agent! Ask questions in plain English and get instant data results without writing SQL.\n\n## ‚ú® What It Does\n\n- **Natural Language Queries**: \"Show laptops under $500 in stock\" ‚Üí Automatic SQL generation\n- **Smart Column Mapping**: Understands your terms and maps them to actual database columns\n- **Conversational Memory**: Maintains context across multiple questions\n- **Universal Compatibility**: Works with any PostgreSQL table structure\n\n## üéØ Perfect For\n\n- Business analysts querying data without SQL knowledge\n- Customer support finding information quickly\n- Product managers analyzing inventory/sales data\n- Anyone who needs database insights fast\n\n## üöÄ Quick Setup\n\n### Step 1: Prerequisites\n- n8n instance (cloud/self-hosted)\n- PostgreSQL database with read access\n- OpenAI API key/You can use other LLM as well\n\n### Step 2: Import & Configure\n1. Import this workflow template into n8n\n2. **Add Credentials**:\n   - OpenAI API: Add your API key\n   - PostgreSQL: Configure database connection\n3. **Set Table Name**: Edit \"Set Table Name\" node ‚Üí Replace `\"table_name\"` with your actual table\n4. **Test Connection**: Ensure your database user has SELECT permissions\n\n### Step 3: Deploy & Use\n1. Start the workflow\n2. Open the chat interface\n3. Ask questions like:\n   - *\"Show all active users\"*\n   - *\"Find orders from last month over $100\"*\n   - *\"List products with low inventory\"*\n\n## üîß Configuration Details\n\n### Required Settings\n- **Table Name**: Update in \"Set Table Name\" node\n- **Database Schema**: Default is 'public' (modify SQL if different)\n- **Result Limit**: Default 50 rows (adjustable in system prompt)\n\n### Optional Customizations\n- **Multi-table Support**: Modify system prompt and add table selection logic\n- **Custom Filters**: Add business rules to restrict data access\n- **Output Format**: Customize response formatting in the agent prompt\n\n## üí° Example Queries\n\n### E-commerce\n*\"Show me all electronics under $200 that are in stock\"*\n\n### HR Database\n*\"List employees hired in 2024 with salary over 70k\"*\n\n### Customer Data\n*\"Find VIP customers from California with recent orders\"*\n\n## üõ°Ô∏è Security Features\n\n- **Read-only Operations**: Only SELECT queries allowed\n- **SQL Injection Prevention**: Parameterized queries and validation\n- **Result Limits**: Prevents overwhelming queries\n- **Safe Schema Discovery**: Uses information_schema tables\n\n## üîç How It Works\n\n1. **Schema Discovery**: Agent fetches table structure and column info\n2. **Query Planning**: Maps natural language to database columns\n3. **SQL Generation**: Creates safe, optimized queries\n4. **Result Formatting**: Returns clean, user-friendly data\n\n## ‚ö° Quick Troubleshooting\n\n- **No Results**: Check table name and ensure data exists\n- **Permission Error**: Verify database user has SELECT access\n- **Connection Failed**: Confirm PostgreSQL credentials and network access\n- **Unexpected Results**: Try more specific queries with exact column names\n\n## üé® Use Cases\n\n- **Inventory Management**: \"Show low-stock items by category\"\n- **Sales Analysis**: \"Top 10 products by revenue this quarter\" \n- **Customer Support**: \"Find customer orders with status 'pending'\"\n- **Data Exploration**: \"What are the unique product categories?\"\n\n## üîß Advanced Tips\n\n- **Performance**: Add database indexes on frequently queried columns\n- **Customization**: Modify the system prompt for domain-specific terminology\n- **Scaling**: Use read replicas for high-query volumes\n- **Integration**: Connect to Slack/Teams for team-wide data access\n\n---\n\n**Tags**: AI, PostgreSQL, Natural Language, SQL, Business Intelligence, LangChain, Database Query\n\n**Difficulty**: Beginner to Intermediate  \n**Setup Time**: 10-15 minutes",
  "featuredImage": "/data/workflows/7988/7988.webp",
  "author": {
    "id": 101,
    "slug": "bbz",
    "name": "Babish Shrestha",
    "avatar": ""
  },
  "categories": [
    "AI Chatbot",
    "Multimodal AI"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 512,
  "downloads": 51,
  "createdAt": "2025-08-28T10:34:56.059Z",
  "updatedAt": "2026-01-16T08:53:24.985Z",
  "publishedAt": "2025-08-28T10:34:56.059Z",
  "nodes": 9,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7988",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Query PostgreSQL database with natural language using GPT-4o-mini",
    "workflowName": "Query PostgreSQL database with natural language using GPT-4o-mini",
    "description": "## This Database SQL Query Agent convert natural language into sql query to get results\n\nTurn your PostgreSQL database into a conversational AI agent! Ask questions in plain English and get instant data results without writing SQL.\n\n## ‚ú® What It Does\n\n- **Natural Language Queries**: \"Show laptops under $500 in stock\" ‚Üí Automatic SQL generation\n- **Smart Column Mapping**: Understands your terms and maps them to actual database columns\n- **Conversational Memory**: Maintains context across multiple questions\n- **Universal Compatibility**: Works with any PostgreSQL table structure\n\n## üéØ Perfect For\n\n- Business analysts querying data without SQL knowledge\n- Customer support finding information quickly\n- Product managers analyzing inventory/sales data\n- Anyone who needs database insights fast\n\n## üöÄ Quick Setup\n\n### Step 1: Prerequisites\n- n8n instance (cloud/self-hosted)\n- PostgreSQL database with read access\n- OpenAI API key/You can use other LLM as well\n\n### Step 2: Import & Configure\n1. Import this workflow template into n8n\n2. **Add Credentials**:\n   - OpenAI API: Add your API key\n   - PostgreSQL: Configure database connection\n3. **Set Table Name**: Edit \"Set Table Name\" node ‚Üí Replace `\"table_name\"` with your actual table\n4. **Test Connection**: Ensure your database user has SELECT permissions\n\n### Step 3: Deploy & Use\n1. Start the workflow\n2. Open the chat interface\n3. Ask questions like:\n   - *\"Show all active users\"*\n   - *\"Find orders from last month over $100\"*\n   - *\"List products with low inventory\"*\n\n## üîß Configuration Details\n\n### Required Settings\n- **Table Name**: Update in \"Set Table Name\" node\n- **Database Schema**: Default is 'public' (modify SQL if different)\n- **Result Limit**: Default 50 rows (adjustable in system prompt)\n\n### Optional Customizations\n- **Multi-table Support**: Modify system prompt and add table selection logic\n- **Custom Filters**: Add business rules to restrict data access\n- **Output Format**: Customize response formatting in the agent prompt\n\n## üí° Example Queries\n\n### E-commerce\n*\"Show me all electronics under $200 that are in stock\"*\n\n### HR Database\n*\"List employees hired in 2024 with salary over 70k\"*\n\n### Customer Data\n*\"Find VIP customers from California with recent orders\"*\n\n## üõ°Ô∏è Security Features\n\n- **Read-only Operations**: Only SELECT queries allowed\n- **SQL Injection Prevention**: Parameterized queries and validation\n- **Result Limits**: Prevents overwhelming queries\n- **Safe Schema Discovery**: Uses information_schema tables\n\n## üîç How It Works\n\n1. **Schema Discovery**: Agent fetches table structure and column info\n2. **Query Planning**: Maps natural language to database columns\n3. **SQL Generation**: Creates safe, optimized queries\n4. **Result Formatting**: Returns clean, user-friendly data\n\n## ‚ö° Quick Troubleshooting\n\n- **No Results**: Check table name and ensure data exists\n- **Permission Error**: Verify database user has SELECT access\n- **Connection Failed**: Confirm PostgreSQL credentials and network access\n- **Unexpected Results**: Try more specific queries with exact column names\n\n## üé® Use Cases\n\n- **Inventory Management**: \"Show low-stock items by category\"\n- **Sales Analysis**: \"Top 10 products by revenue this quarter\" \n- **Customer Support**: \"Find customer orders with status 'pending'\"\n- **Data Exploration**: \"What are the unique product categories?\"\n\n## üîß Advanced Tips\n\n- **Performance**: Add database indexes on frequently queried columns\n- **Customization**: Modify the system prompt for domain-specific terminology\n- **Scaling**: Use read replicas for high-query volumes\n- **Integration**: Connect to Slack/Teams for team-wide data access\n\n---\n\n**Tags**: AI, PostgreSQL, Natural Language, SQL, Business Intelligence, LangChain, Database Query\n\n**Difficulty**: Beginner to Intermediate  \n**Setup Time**: 10-15 minutes",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Table Name",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Execute SQL Query",
      "type": "n8n-nodes-base.postgresTool",
      "role": "postgresTool",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Get Table Definition",
      "type": "n8n-nodes-base.postgresTool",
      "role": "postgresTool",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Database Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}