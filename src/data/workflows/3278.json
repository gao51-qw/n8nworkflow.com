{
  "id": 3278,
  "slug": "3278",
  "title": "Automated image optimizer: convert JPG/PNG to WebP with APYHub and Google Drive",
  "description": "This workflow automates the process of converting images from **JPG/PNG** format to **WEBP** using the **APYHub API**. It retrieves image URLs from a **Google Sheet**, converts the images, and uploads the converted files to **Google Drive**. \n\nThis workflow is a powerful tool for automating image conversion tasks, saving time and ensuring that images are efficiently converted and stored in the desired format.\n\nUsing WebP images on a website provides several SEO benefits:  \n\n1. **Faster Loading Speed** – WebP files are smaller than JPG and PNG, reducing page load times and improving user experience.  \n2. **Better Core Web Vitals** – Google prioritizes websites with good performance metrics like LCP (Largest Contentful Paint).  \n3. **Improved Mobile Performance** – Smaller images consume less bandwidth, enhancing mobile usability.  \n4. **Higher Search Rankings** – Faster sites tend to rank better on Google due to improved user experience.  \n5. **Reduced Server Load** – Lighter images lower hosting and CDN costs while improving site efficiency.\n\nBelow is a breakdown of the workflow:\n\n---\n\n#### **1. How It Works**\nThe workflow is designed to convert images from JPG/PNG to WEBP format and manage the converted files. Here's how it works:\n\n1. **Manual Trigger**:\n   - The workflow starts with a **Manual Trigger** node, which initiates the process when the user clicks \"Test workflow.\"\n\n2. **Set API Key**:\n   - The **Set API KEY** node defines the API key required to access the APYHub API.\n\n3. **Get Images**:\n   - The **Get Images** node retrieves a list of image URLs from a **Google Sheet**. The sheet contains columns for the original image URL (`FROM`), the converted image URL (`TO`), and a status flag (`DONE`).\n\n4. **Get Extension**:\n   - The **Get Extension** node extracts the file extension (JPG, JPEG, or PNG) from the image URL and adds it to the JSON data.\n\n5. **Determine Image Type**:\n   - The **JPG or PNG?** node checks the file extension and routes the workflow to the appropriate conversion node:\n     - **JPG/JPEG**: Routes to the **From JPG to WEBP** node.\n     - **PNG**: Routes to the **PNG to WEBP** node.\n\n6. **Convert Image**:\n   - The **From JPG to WEBP** and **PNG to WEBP** nodes send POST requests to the **APYHub API** to convert the images to WEBP format.\n   - The API returns the URL of the converted image.\n\n7. **Update Google Sheet**:\n   - The **Update Sheet** node updates the Google Sheet with the URL of the converted image and marks the row as done (`DONE`).\n\n8. **Get Converted Image**:\n   - The **Get File Image** node downloads the converted WEBP image from the URL provided by the APYHub API.\n\n9. **Upload to Google Drive**:\n   - The **Upload Image** node uploads the converted WEBP image to a specified folder in **Google Drive**.\n\n---\n\n#### **2. Set Up Steps**\nTo set up and use this workflow in n8n, follow these steps:\n\n1. **APYHub API Key**:\n   - Obtain an **API Key** from [APYHub](https://apyhub.com/).\n   - In the **Set API KEY** node, define the API key.\n\n2. **Google Sheets Integration**:\n   - Set up **Google Sheets** credentials in n8n for the **Get Images** and **Update Sheet** nodes.\n   - Create a Google Sheet with columns for `FROM` (original image URL), `TO` (converted image URL), and `DONE` (status flag).\n   - Provide the **Document ID** and **Sheet Name** in the **Get Images** node.\n\n3. **Google Drive Integration**:\n   - Set up **Google Drive** credentials in n8n for the **Upload Image** node.\n   - Specify the folder ID in Google Drive where the converted images will be uploaded.\n\n4. **Test the Workflow**:\n   - Click the **\"Test workflow\"** button in n8n to trigger the workflow.\n   - The workflow will:\n     - Retrieve image URLs from the Google Sheet.\n     - Convert the images to WEBP format using the APYHub API.\n     - Update the Google Sheet with the converted image URLs.\n     - Upload the converted images to Google Drive.\n\n5. **Optional Customization**:\n   - Modify the workflow to include additional features, such as:\n     - Adding more image formats for conversion.\n     - Sending notifications when the conversion is complete.\n     - Integrating with other storage services (e.g., Dropbox, AWS S3).\n",
  "featuredImage": "/data/workflows/3278/3278.webp",
  "author": {
    "id": 101,
    "slug": "n3witalia",
    "name": "Davide",
    "avatar": ""
  },
  "categories": [
    "File Management",
    "Multimodal AI"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 2313,
  "downloads": 231,
  "createdAt": "2025-03-21T14:41:27.832Z",
  "updatedAt": "2026-01-16T08:28:58.630Z",
  "publishedAt": "2025-03-21T14:41:27.832Z",
  "nodes": 12,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3278",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automated image optimizer: convert JPG/PNG to WebP with APYHub and Google Drive",
    "workflowName": "Automated image optimizer: convert JPG/PNG to WebP with APYHub and Google Drive",
    "description": "This workflow automates the process of converting images from **JPG/PNG** format to **WEBP** using the **APYHub API**. It retrieves image URLs from a **Google Sheet**, converts the images, and uploads the converted files to **Google Drive**. \n\nThis workflow is a powerful tool for automating image conversion tasks, saving time and ensuring that images are efficiently converted and stored in the desired format.\n\nUsing WebP images on a website provides several SEO benefits:  \n\n1. **Faster Loading Speed** – WebP files are smaller than JPG and PNG, reducing page load times and improving user experience.  \n2. **Better Core Web Vitals** – Google prioritizes websites with good performance metrics like LCP (Largest Contentful Paint).  \n3. **Improved Mobile Performance** – Smaller images consume less bandwidth, enhancing mobile usability.  \n4. **Higher Search Rankings** – Faster sites tend to rank better on Google due to improved user experience.  \n5. **Reduced Server Load** – Lighter images lower hosting and CDN costs while improving site efficiency.\n\nBelow is a breakdown of the workflow:\n\n---\n\n#### **1. How It Works**\nThe workflow is designed to convert images from JPG/PNG to WEBP format and manage the converted files. Here's how it works:\n\n1. **Manual Trigger**:\n   - The workflow starts with a **Manual Trigger** node, which initiates the process when the user clicks \"Test workflow.\"\n\n2. **Set API Key**:\n   - The **Set API KEY** node defines the API key required to access the APYHub API.\n\n3. **Get Images**:\n   - The **Get Images** node retrieves a list of image URLs from a **Google Sheet**. The sheet contains columns for the original image URL (`FROM`), the converted image URL (`TO`), and a status flag (`DONE`).\n\n4. **Get Extension**:\n   - The **Get Extension** node extracts the file extension (JPG, JPEG, or PNG) from the image URL and adds it to the JSON data.\n\n5. **Determine Image Type**:\n   - The **JPG or PNG?** node checks the file extension and routes the workflow to the appropriate conversion node:\n     - **JPG/JPEG**: Routes to the **From JPG to WEBP** node.\n     - **PNG**: Routes to the **PNG to WEBP** node.\n\n6. **Convert Image**:\n   - The **From JPG to WEBP** and **PNG to WEBP** nodes send POST requests to the **APYHub API** to convert the images to WEBP format.\n   - The API returns the URL of the converted image.\n\n7. **Update Google Sheet**:\n   - The **Update Sheet** node updates the Google Sheet with the URL of the converted image and marks the row as done (`DONE`).\n\n8. **Get Converted Image**:\n   - The **Get File Image** node downloads the converted WEBP image from the URL provided by the APYHub API.\n\n9. **Upload to Google Drive**:\n   - The **Upload Image** node uploads the converted WEBP image to a specified folder in **Google Drive**.\n\n---\n\n#### **2. Set Up Steps**\nTo set up and use this workflow in n8n, follow these steps:\n\n1. **APYHub API Key**:\n   - Obtain an **API Key** from [APYHub](https://apyhub.com/).\n   - In the **Set API KEY** node, define the API key.\n\n2. **Google Sheets Integration**:\n   - Set up **Google Sheets** credentials in n8n for the **Get Images** and **Update Sheet** nodes.\n   - Create a Google Sheet with columns for `FROM` (original image URL), `TO` (converted image URL), and `DONE` (status flag).\n   - Provide the **Document ID** and **Sheet Name** in the **Get Images** node.\n\n3. **Google Drive Integration**:\n   - Set up **Google Drive** credentials in n8n for the **Upload Image** node.\n   - Specify the folder ID in Google Drive where the converted images will be uploaded.\n\n4. **Test the Workflow**:\n   - Click the **\"Test workflow\"** button in n8n to trigger the workflow.\n   - The workflow will:\n     - Retrieve image URLs from the Google Sheet.\n     - Convert the images to WEBP format using the APYHub API.\n     - Update the Google Sheet with the converted image URLs.\n     - Upload the converted images to Google Drive.\n\n5. **Optional Customization**:\n   - Modify the workflow to include additional features, such as:\n     - Adding more image formats for conversion.\n     - Sending notifications when the conversion is complete.\n     - Integrating with other storage services (e.g., Dropbox, AWS S3).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Set API KEY",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Get images",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.5"
    },
    {
      "name": "Get extension",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "JPG or PNG?",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "From JPG to WEBP",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "PNG to WEBP",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Update Sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.5"
    },
    {
      "name": "Get file image",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Upload image",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}