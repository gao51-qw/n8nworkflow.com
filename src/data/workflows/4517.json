{
  "id": 4517,
  "slug": "4517",
  "title": "Automated n8n credential backups to Google Drive with scheduled execution",
  "description": "**This n8n workflow template uses community nodes and is only compatible with the self-hosted version of n8n.** \n## **Auto Backup n8n Credentials to Google Drive**\n\nThis workflow automates the backup of all your n8n credentials. It can be triggered manually for on-demand backups or will run automatically on a schedule (default to daily execution). It executes a command to export decrypted credentials, formats them into a JSON file, and then uploads this file to a specified Google Drive folder. This process is essential for creating secure backups of your sensitive credential data, facilitating instance recovery or migration.\n\nWe recommend you use this backup workflow in conjunction with a restore solution like our [\"Restore Credentials from Google Drive Backups\" template](https://aiautomationpro.org/products/n8n-restore-credentials-from-google-drive-backups/).\n\nFor more powerful n8n templates, visit our website or contact us at [**AI Automation Pro**](https://aiautomationpro.org/). We help your business build custom AI workflow automation and apps.\n\n### Who is this for?\n\nThis workflow is designed for n8n administrators and users who require a reliable method to back up their n8n credentials. It is particularly beneficial for those managing self-hosted n8n instances, where direct server access allows for command-line operations.\n\n### What problem is this workflow solving? / use case\n\nManaging and backing up n8n credentials manually can be a tedious task, susceptible to errors and often overlooked. This workflow solves the problem by providing an automated, secure, and consistent way to back up all credential data. The primary use case is to ensure that a recovery point for credentials exists, safeguarding against data loss, assisting in instance migrations, or for general disaster recovery preparedness, ideally on a regular, automated basis.\n\n### What this workflow does\n\nThe workflow proceeds through the following steps:\n\n1. **Triggers:** The workflow includes two types of triggers:  \n   * **Manual Trigger:** An \"On Click Trigger\" allows for on-demand execution whenever needed.  \n   * **Scheduled Trigger:** A \"Schedule Trigger\" is included, designed for automated daily backups.   \n2. **Export Credentials:** An \"Execute Command\" node runs the shell command `npx n8n export:credentials --all --decrypted`. This command exports all credentials from the n8n instance in a decrypted JSON format.  \n3. **Format JSON Data:** The output from the command is processed by a \"Code\" node (\"JSON Formatting Data\"). This node extracts, parses, and formats the JSON to ensure it is well-structured.  \n4. **Aggregate Credentials:** An \"Aggregate\" node (\"Aggregate Cridentials\") combines individual credential entries into a single JSON array.  \n5. **Convert to File:** The \"Convert To File\" node transforms the aggregated JSON array into a binary file, preparing it as `n8n_backup_credentials.json`.  \n6. **Upload to Google Drive:** The \"Google Drive Upload File\" node uploads the generated JSON file to a specified folder in Google Drive.\n\n### Step-by-step setup\n\nTo use this workflow, you'll need to configure a few things:\n\n1. **n8n Instance Environment:**  \n   * The n8n instance must have access to the `npx` command and the `n8n-cli` package.  \n   * The \"Execute Command\" node must be able to run shell commands on the server where n8n is hosted.  \n2. **Google Drive Credentials:**  \n   * In the \"Google Drive Upload File\" node, select or create your Google Drive OAuth2 API credentials.   \n3. **Google Drive Folder ID:**  \n   * Update the `folderId` parameter in the \"Google Drive Upload File\" node with the ID of your desired Google Drive folder.  \n4. **File Name (Optional):**  \n   * The backup file will be named `n8n_backup_credentials.json`. You can customize this in the \"Google Drive Upload File\" node.  \n5. **Configure Schedule Trigger:**  \n   * The workflow includes a \"Schedule Trigger\". Review its configuration to ensure it runs daily at your preferred time.\n\n### How to customize this workflow to your needs\n\n* **Adjust Schedule:** Fine-tune the \"Schedule Trigger\" for different intervals (e.g., weekly, hourly) or specific days/times as per your requirements.  \n* **Notifications:** Add notification nodes (e.g., Slack, Email, Discord) after the \"Google Drive Upload File\" node to receive alerts upon successful backup or in case of failures.  \n* **Enhanced Error Handling:** Incorporate error handling branches using \"Error Trigger\" nodes or conditional logic to manage potential failures.  \n* **Client-Side Encryption (Advanced):** If your security policy requires the backup file itself to be encrypted at rest in Google Drive, you can add a step *before* uploading. Insert a \"Code\" node or use an \"Execute Command\" node with an encryption utility (like GPG) to encrypt the `n8n_backup_credentials.json` file. Remember that you would then need a corresponding decryption process.  \n* **Dynamic File Naming:** Modify the \"Google Drive Upload File\" node to include a timestamp in the filename (e.g., `n8n_backup_credentials_{{$now.toFormat('yyyyMMddHHmmss')}}.json`) to keep multiple versions of backups.\n\n### Important Note on Credential Security \n\nTo simplify the setup and use of this backup workflow, the exported credentials are stored in the resulting JSON file in a **decrypted state**. This means the backup file itself is not further encrypted by this workflow. Consequently, it is **critically important** to:\n\n* Ensure the Google Drive account used for backups is highly secure (e.g., strong password, two-factor authentication).  \n* Restrict access to the Google Drive folder where these backups are stored to only authorized personnel.",
  "featuredImage": "/data/workflows/4517/4517.webp",
  "author": {
    "id": 101,
    "slug": "danielng",
    "name": "Daniel Ng",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 1924,
  "downloads": 192,
  "createdAt": "2025-05-30T14:34:53.719Z",
  "updatedAt": "2026-01-16T08:34:48.623Z",
  "publishedAt": "2025-05-30T14:34:53.719Z",
  "nodes": 9,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4517",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automated n8n credential backups to Google Drive with scheduled execution",
    "workflowName": "Automated n8n credential backups to Google Drive with scheduled execution",
    "description": "**This n8n workflow template uses community nodes and is only compatible with the self-hosted version of n8n.** \n## **Auto Backup n8n Credentials to Google Drive**\n\nThis workflow automates the backup of all your n8n credentials. It can be triggered manually for on-demand backups or will run automatically on a schedule (default to daily execution). It executes a command to export decrypted credentials, formats them into a JSON file, and then uploads this file to a specified Google Drive folder. This process is essential for creating secure backups of your sensitive credential data, facilitating instance recovery or migration.\n\nWe recommend you use this backup workflow in conjunction with a restore solution like our [\"Restore Credentials from Google Drive Backups\" template](https://aiautomationpro.org/products/n8n-restore-credentials-from-google-drive-backups/).\n\nFor more powerful n8n templates, visit our website or contact us at [**AI Automation Pro**](https://aiautomationpro.org/). We help your business build custom AI workflow automation and apps.\n\n### Who is this for?\n\nThis workflow is designed for n8n administrators and users who require a reliable method to back up their n8n credentials. It is particularly beneficial for those managing self-hosted n8n instances, where direct server access allows for command-line operations.\n\n### What problem is this workflow solving? / use case\n\nManaging and backing up n8n credentials manually can be a tedious task, susceptible to errors and often overlooked. This workflow solves the problem by providing an automated, secure, and consistent way to back up all credential data. The primary use case is to ensure that a recovery point for credentials exists, safeguarding against data loss, assisting in instance migrations, or for general disaster recovery preparedness, ideally on a regular, automated basis.\n\n### What this workflow does\n\nThe workflow proceeds through the following steps:\n\n1. **Triggers:** The workflow includes two types of triggers:  \n   * **Manual Trigger:** An \"On Click Trigger\" allows for on-demand execution whenever needed.  \n   * **Scheduled Trigger:** A \"Schedule Trigger\" is included, designed for automated daily backups.   \n2. **Export Credentials:** An \"Execute Command\" node runs the shell command `npx n8n export:credentials --all --decrypted`. This command exports all credentials from the n8n instance in a decrypted JSON format.  \n3. **Format JSON Data:** The output from the command is processed by a \"Code\" node (\"JSON Formatting Data\"). This node extracts, parses, and formats the JSON to ensure it is well-structured.  \n4. **Aggregate Credentials:** An \"Aggregate\" node (\"Aggregate Cridentials\") combines individual credential entries into a single JSON array.  \n5. **Convert to File:** The \"Convert To File\" node transforms the aggregated JSON array into a binary file, preparing it as `n8n_backup_credentials.json`.  \n6. **Upload to Google Drive:** The \"Google Drive Upload File\" node uploads the generated JSON file to a specified folder in Google Drive.\n\n### Step-by-step setup\n\nTo use this workflow, you'll need to configure a few things:\n\n1. **n8n Instance Environment:**  \n   * The n8n instance must have access to the `npx` command and the `n8n-cli` package.  \n   * The \"Execute Command\" node must be able to run shell commands on the server where n8n is hosted.  \n2. **Google Drive Credentials:**  \n   * In the \"Google Drive Upload File\" node, select or create your Google Drive OAuth2 API credentials.   \n3. **Google Drive Folder ID:**  \n   * Update the `folderId` parameter in the \"Google Drive Upload File\" node with the ID of your desired Google Drive folder.  \n4. **File Name (Optional):**  \n   * The backup file will be named `n8n_backup_credentials.json`. You can customize this in the \"Google Drive Upload File\" node.  \n5. **Configure Schedule Trigger:**  \n   * The workflow includes a \"Schedule Trigger\". Review its configuration to ensure it runs daily at your preferred time.\n\n### How to customize this workflow to your needs\n\n* **Adjust Schedule:** Fine-tune the \"Schedule Trigger\" for different intervals (e.g., weekly, hourly) or specific days/times as per your requirements.  \n* **Notifications:** Add notification nodes (e.g., Slack, Email, Discord) after the \"Google Drive Upload File\" node to receive alerts upon successful backup or in case of failures.  \n* **Enhanced Error Handling:** Incorporate error handling branches using \"Error Trigger\" nodes or conditional logic to manage potential failures.  \n* **Client-Side Encryption (Advanced):** If your security policy requires the backup file itself to be encrypted at rest in Google Drive, you can add a step *before* uploading. Insert a \"Code\" node or use an \"Execute Command\" node with an encryption utility (like GPG) to encrypt the `n8n_backup_credentials.json` file. Remember that you would then need a corresponding decryption process.  \n* **Dynamic File Naming:** Modify the \"Google Drive Upload File\" node to include a timestamp in the filename (e.g., `n8n_backup_credentials_{{$now.toFormat('yyyyMMddHHmmss')}}.json`) to keep multiple versions of backups.\n\n### Important Note on Credential Security \n\nTo simplify the setup and use of this backup workflow, the exported credentials are stored in the resulting JSON file in a **decrypted state**. This means the backup file itself is not further encrypted by this workflow. Consequently, it is **critically important** to:\n\n* Ensure the Google Drive account used for backups is highly secure (e.g., strong password, two-factor authentication).  \n* Restrict access to the Google Drive folder where these backups are stored to only authorized personnel.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "On Click Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Execute Command Get All Cridentials",
      "type": "n8n-nodes-base.executeCommand",
      "role": "executeCommand",
      "configDescription": "Version 1"
    },
    {
      "name": "JSON Formatting Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Aggregate Cridentials",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert To File",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Drive Upload File",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    }
  ]
}