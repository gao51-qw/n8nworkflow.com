{
  "id": 2637,
  "slug": "2637",
  "title": "Chat assistant (OpenAI assistant) with Postgres memory and API calling capabalities",
  "description": "# Workflow Description\n\nYour workflow is an intelligent chatbot, using ++OpenAI assistant++, integrated with a backend that supports WhatsApp Business, designed to handle various use cases such as sales and customer support. Below is a breakdown of its functionality and key components:\n\n---\n\n## Workflow Structure and Functionality\n\n### Chat Input (Chat Trigger)\n- The flow starts by receiving messages from customers via WhatsApp Business.\n- Collects basic information, such as `session_id`, to organize interactions.\n\n### Condition Check (If Node)\n- Checks if additional customer data (e.g., name, age, dependents) is sent along with the message.\n- If additional data is present, a customized prompt is generated, which includes this information. The prompt specifies that this data is for the assistant's awareness and doesn‚Äôt require a response.\n\n### Data Preparation (Edit Fields Nodes)\n- Formats customer data and the interaction details to be processed by the AI assistant.\n- Compiles the customer data and their query into a single text block.\n\n### AI Responses (OpenAI Nodes)\n- The assistant‚Äôs prompt is carefully designed to guide the AI in providing accurate and relevant responses based on the customer‚Äôs query and data provided.\n- Prompts describe the available functionalities, including which APIs to call and their specific purposes, helping to prevent ‚Äúhallucinated‚Äù or irrelevant responses.\n\n### Memory and Context (Postgres Chat Memory)\n- Stores context and messages in continuous sessions using a database, ensuring the chatbot maintains conversation history.\n\n### API Calls\n- The workflow allows the use of **APIs** with any endpoints you choose, depending on your specific use case. This flexibility enables integration with various services tailored to your needs.\n- The OpenAI assistant understands JSON structures, and you can define in the prompt how the responses should be formatted. This allows you to structure responses neatly for the client, ensuring clarity and professionalism.\n- Make sure to describe the purpose of each endpoint in the assistant‚Äôs prompt to help guide the AI and prevent misinterpretation.\n\n\n### Customer Response Delivery\n- After processing and querying APIs, the generated response is sent to the backend and ultimately delivered to the customer through WhatsApp Business.\n\n---\n\n## Best Practices Implemented\n\n- **Preventing Hallucinations**  \n  Every API has a clear description in its prompt, ensuring the AI understands its intended use case.\n\n- **Versatile Functionality**  \n  The chatbot is modular and flexible, capable of handling both sales and general customer inquiries.\n\n- **Context Persistence**  \n  By utilizing persistent memory, the flow maintains continuous interaction context, which is crucial for longer conversations or follow-up queries.\n\n---\n\n## Additional Recommendations\n\n- Include practical examples in the assistant‚Äôs prompt, such as frequently asked questions or decision-making flows based on API calls.\n- Ensure all responses align with the customer‚Äôs objectives (e.g., making a purchase or resolving technical queries).\n- Log interactions in detail for future analysis and workflow optimization.\n\n---\n\nThis workflow provides a solid foundation for a robust and multifunctional virtual assistant üöÄ\n",
  "featuredImage": "/data/workflows/2637/2637.webp",
  "author": {
    "id": 101,
    "slug": "ferzinia",
    "name": "Fernanda Silva",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 6256,
  "downloads": 625,
  "createdAt": "2024-12-13T14:59:00.443Z",
  "updatedAt": "2026-01-16T08:25:47.119Z",
  "publishedAt": "2024-12-13T14:59:00.443Z",
  "nodes": 12,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2637",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Chat assistant (OpenAI assistant) with Postgres memory and API calling capabalities",
    "workflowName": "Chat assistant (OpenAI assistant) with Postgres memory and API calling capabalities",
    "description": "# Workflow Description\n\nYour workflow is an intelligent chatbot, using ++OpenAI assistant++, integrated with a backend that supports WhatsApp Business, designed to handle various use cases such as sales and customer support. Below is a breakdown of its functionality and key components:\n\n---\n\n## Workflow Structure and Functionality\n\n### Chat Input (Chat Trigger)\n- The flow starts by receiving messages from customers via WhatsApp Business.\n- Collects basic information, such as `session_id`, to organize interactions.\n\n### Condition Check (If Node)\n- Checks if additional customer data (e.g., name, age, dependents) is sent along with the message.\n- If additional data is present, a customized prompt is generated, which includes this information. The prompt specifies that this data is for the assistant's awareness and doesn‚Äôt require a response.\n\n### Data Preparation (Edit Fields Nodes)\n- Formats customer data and the interaction details to be processed by the AI assistant.\n- Compiles the customer data and their query into a single text block.\n\n### AI Responses (OpenAI Nodes)\n- The assistant‚Äôs prompt is carefully designed to guide the AI in providing accurate and relevant responses based on the customer‚Äôs query and data provided.\n- Prompts describe the available functionalities, including which APIs to call and their specific purposes, helping to prevent ‚Äúhallucinated‚Äù or irrelevant responses.\n\n### Memory and Context (Postgres Chat Memory)\n- Stores context and messages in continuous sessions using a database, ensuring the chatbot maintains conversation history.\n\n### API Calls\n- The workflow allows the use of **APIs** with any endpoints you choose, depending on your specific use case. This flexibility enables integration with various services tailored to your needs.\n- The OpenAI assistant understands JSON structures, and you can define in the prompt how the responses should be formatted. This allows you to structure responses neatly for the client, ensuring clarity and professionalism.\n- Make sure to describe the purpose of each endpoint in the assistant‚Äôs prompt to help guide the AI and prevent misinterpretation.\n\n\n### Customer Response Delivery\n- After processing and querying APIs, the generated response is sent to the backend and ultimately delivered to the customer through WhatsApp Business.\n\n---\n\n## Best Practices Implemented\n\n- **Preventing Hallucinations**  \n  Every API has a clear description in its prompt, ensuring the AI understands its intended use case.\n\n- **Versatile Functionality**  \n  The chatbot is modular and flexible, capable of handling both sales and general customer inquiries.\n\n- **Context Persistence**  \n  By utilizing persistent memory, the flow maintains continuous interaction context, which is crucial for longer conversations or follow-up queries.\n\n---\n\n## Additional Recommendations\n\n- Include practical examples in the assistant‚Äôs prompt, such as frequently asked questions or decision-making flows based on API calls.\n- Ensure all responses align with the customer‚Äôs objectives (e.g., making a purchase or resolving technical queries).\n- Log interactions in detail for future analysis and workflow optimization.\n\n---\n\nThis workflow provides a solid foundation for a robust and multifunctional virtual assistant üöÄ",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Edit Fields1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Edit Fields2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "OpenAI",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Chat Trigger",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Postgres Chat Memory1",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Products in Daatabase",
      "type": "n8n-nodes-base.mySqlTool",
      "role": "mySqlTool",
      "configDescription": "Version 2.4"
    },
    {
      "name": "Knowledge Base",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "role": "toolHttpRequest",
      "configDescription": "Version 1.1"
    },
    {
      "name": "External API",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "role": "toolHttpRequest",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI2",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.4"
    }
  ]
}