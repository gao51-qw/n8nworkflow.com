{
  "id": 2331,
  "slug": "2331",
  "title": "Build your own image search using AI object detection, CDN and ElasticSearch",
  "description": "This n8n workflow demonstrates how to automate indexing of images to build a object-based image search.\n\nBy utilising a Detr-Resnet-50 Object Classification model, we can identify objects within an image and store these associations in Elasticsearch along with a reference to the image.\n\n## How it works\n\n* An image is imported into the workflow via HTTP request node.\n* The image is then sent to Cloudflare's Worker AI API where the service runs the image through the Detr-Resnet-50 object classification model.\n* The API returns the object associations with their positions in the image, labels and confidence score of the classification.\n* Confidence scores of less the 0.9 are discarded for brevity.\n* The image's URL and its associations are then index in an ElasticSearch server ready for searching.\n\n## Requirements\n* A Cloudflare account with Workers AI enabled to access the object classification model.\n* An ElasticSearch instance to store the image url and related associations.\n\n## Extending this workflow\nFurther enrich your indexed data with additional attributes or metrics relevant to your users.\n\nUse a vectorstore to provide similarity search over the images.",
  "featuredImage": "/data/workflows/2331/2331.webp",
  "author": {
    "id": 101,
    "slug": "jimleuk",
    "name": "Jimleuk",
    "avatar": ""
  },
  "categories": [
    "Engineering",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 8258,
  "downloads": 825,
  "createdAt": "2024-07-10T12:35:33.563Z",
  "updatedAt": "2026-01-16T08:24:04.296Z",
  "publishedAt": "2024-07-10T12:35:33.563Z",
  "nodes": 17,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2331",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Build your own image search using AI object detection, CDN and ElasticSearch",
    "workflowName": "Build your own image search using AI object detection, CDN and ElasticSearch",
    "description": "This n8n workflow demonstrates how to automate indexing of images to build a object-based image search.\n\nBy utilising a Detr-Resnet-50 Object Classification model, we can identify objects within an image and store these associations in Elasticsearch along with a reference to the image.\n\n## How it works\n\n* An image is imported into the workflow via HTTP request node.\n* The image is then sent to Cloudflare's Worker AI API where the service runs the image through the Detr-Resnet-50 object classification model.\n* The API returns the object associations with their positions in the image, labels and confidence score of the classification.\n* Confidence scores of less the 0.9 are discarded for brevity.\n* The image's URL and its associations are then index in an ElasticSearch server ready for searching.\n\n## Requirements\n* A Cloudflare account with Workers AI enabled to access the object classification model.\n* An ElasticSearch instance to store the image url and related associations.\n\n## Extending this workflow\nFurther enrich your indexed data with additional attributes or metrics relevant to your users.\n\nUse a vectorstore to provide similarity search over the images.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking \"Test workflow\"",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Fetch Source Image",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Split Out Results Only",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Filter Score >= 0.9",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2"
    },
    {
      "name": "Crop Object From Image",
      "type": "n8n-nodes-base.editImage",
      "role": "editImage",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Variables",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.3"
    },
    {
      "name": "Use Detr-Resnet-50 Object Classification",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Upload to Cloudinary",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Create Docs In Elasticsearch",
      "type": "n8n-nodes-base.elasticsearch",
      "role": "elasticsearch",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Fetch Source Image Again",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}