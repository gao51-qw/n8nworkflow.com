{
  "id": 2198,
  "slug": "2198",
  "title": "Compose reply draft in Gmail with OpenAI assistant",
  "description": "This workflow uses OpenAI Assistant to compose draft replies for labeled email messages. It automatically connects the drafts to Gmail threads.\n\nðŸ’¡ You can add knowledge base to your OpenAI Assistant and make your reply drafts very customized (e.g. compose response with product information in response to inquiry from customer).\n\nðŸŽ¬ See this workflow in action [in my YouTube video](https://youtu.be/a8Dhj3Zh9vQ) about automating Gmail. \n\n## How it works?\n\nThe workflow is triggered at regular intervals (default: every 1 minute â€“ you can change this value) to check for messages with a specific label (e.g., \"AI\").\n\nThe content of the retrieved email message is then forwarded to the OpenAI Assistant node, and a reply draft is generated. Next, the response from the Assistant is converted to HTML, and a raw message in RFC standard is composed.\n\nðŸ’¡ You can learn more about composing drafts with the Gmail API in [the official Google documentation](https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/create).\n\nThe raw email message (reply draft) is encoded and attached to the original thread ID. Finally, the trigger label (in this case: \"AI\") is removed to prevent the workflow from looping.\n\n## Set up steps\n\n1. Set credentials for Gmail and OpenAI.\n2. Add new label in Gmail account for messages that should be handled by the workflow (e.g. name it \"AI\").\n3. Select this label in the first and last Gmail nodes in workflow.\n4. Create and configure your OpenAI Assistant. Select your assistant in \"OpenAI Assistant\" node. \n5. Optionally: change trigger interval (by default interval is 1 minute).\n\nIf you like this workflow, please subscribe to [my YouTube channel](https://www.youtube.com/@workfloows/) and/or [my newsletter](https://workfloows.com/).",
  "featuredImage": "/data/workflows/2198/2198.webp",
  "author": {
    "id": 101,
    "slug": "workfloows",
    "name": "Oskar",
    "avatar": ""
  },
  "categories": [
    "Ticket Management",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 19063,
  "downloads": 1906,
  "createdAt": "2024-03-27T09:56:42.423Z",
  "updatedAt": "2026-01-16T08:23:31.748Z",
  "publishedAt": "2024-03-27T09:56:42.423Z",
  "nodes": 23,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2198",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Compose reply draft in Gmail with OpenAI assistant",
    "workflowName": "Compose reply draft in Gmail with OpenAI assistant",
    "description": "This workflow uses OpenAI Assistant to compose draft replies for labeled email messages. It automatically connects the drafts to Gmail threads.\n\nðŸ’¡ You can add knowledge base to your OpenAI Assistant and make your reply drafts very customized (e.g. compose response with product information in response to inquiry from customer).\n\nðŸŽ¬ See this workflow in action [in my YouTube video](https://youtu.be/a8Dhj3Zh9vQ) about automating Gmail. \n\n## How it works?\n\nThe workflow is triggered at regular intervals (default: every 1 minute â€“ you can change this value) to check for messages with a specific label (e.g., \"AI\").\n\nThe content of the retrieved email message is then forwarded to the OpenAI Assistant node, and a reply draft is generated. Next, the response from the Assistant is converted to HTML, and a raw message in RFC standard is composed.\n\nðŸ’¡ You can learn more about composing drafts with the Gmail API in [the official Google documentation](https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/create).\n\nThe raw email message (reply draft) is encoded and attached to the original thread ID. Finally, the trigger label (in this case: \"AI\") is removed to prevent the workflow from looping.\n\n## Set up steps\n\n1. Set credentials for Gmail and OpenAI.\n2. Add new label in Gmail account for messages that should be handled by the workflow (e.g. name it \"AI\").\n3. Select this label in the first and last Gmail nodes in workflow.\n4. Create and configure your OpenAI Assistant. Select your assistant in \"OpenAI Assistant\" node. \n5. Optionally: change trigger interval (by default interval is 1 minute).\n\nIf you like this workflow, please subscribe to [my YouTube channel](https://www.youtube.com/@workfloows/) and/or [my newsletter](https://workfloows.com/).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Remove AI label from email",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Add email draft to thread",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Convert raw to base64",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Build email raw",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Convert response to HTML",
      "type": "n8n-nodes-base.markdown",
      "role": "markdown",
      "configDescription": "Version 1"
    },
    {
      "name": "Map fields for further processing",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Ask OpenAI Assistant",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Get single message content",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Return last message in thread",
      "type": "n8n-nodes-base.limit",
      "role": "limit",
      "configDescription": "Version 1"
    },
    {
      "name": "Get thread messages",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Loop over threads",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Get threads with specific labels",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Schedule trigger (1 min)",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    }
  ]
}