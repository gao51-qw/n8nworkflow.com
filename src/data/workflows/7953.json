{
  "id": 7953,
  "slug": "7953",
  "title": "Kubernetes RCA and alerting using Gemini, Loki, Prometheus, Slack",
  "description": "## Summary\nThis n8n workflow automates Kubernetes root cause analysis (RCA) and incident alerting by integrating with Loki, Prometheus, and Slack. It streamlines log collection, cluster health monitoring, and AI-driven RCA with Gemini, saving DevOps teams hours of manual troubleshooting. Designed for production-grade Kubernetes environments, this plug-and-play workflow delivers actionable insights directly to your Slack channels.\n\n## Who‚Äôs It For\n\nüõ†Ô∏è DevOps Engineers automating Kubernetes monitoring and incident response.\n\nüîç Site Reliability Engineers (SREs) aiming to reduce mean time to resolution (MTTR).\n\nüöÄ Teams using n8n, Slack, Loki, and Prometheus for observability and automation.\n\n## What It Does\n\n- Pulls logs from Loki, filtering for critical errors.\n- Monitors cluster health, checking pending, not ready, or restarting pods.\n- Fetches Prometheus metrics for nodes, namespaces, and services.\n- Generates AI-driven RCA using Google Gemini to analyze logs and metrics.\n- Sends formatted Slack alerts with deduplication and batching for readability.\n- Tracks pod lifecycle events, including crashloop states and restarts.\n\n## How It Works\n\n- Log Collection: The workflow uses an n8n HTTP Request node to pull logs from Loki, filtering for critical errors.\n- Cluster Monitoring: A Kubernetes SSH node checks pod states (terminated or running). If terminated ignore those pods for RCA.\n- Metrics Fetching: Prometheus metrics are retrieved via HTTP Request for nodes and services.\n- RCA Generation: Logs and metrics are merged into structured prompts for Google Gemini AI to produce actionable RCA insights.\n- Kubernetes Enrichment: RCA from Gemini will goes to this node and enriches with Kubernetes documentation and provide the documentation links in RCA\n- Slack Notifications: Alerts are batched, deduplicated, and sent to Slack with clear formatting.\n\n## How to Set Up\n\n- Import the Workflow: Download the .json file and import it into your n8n instance.\n\n### Configure Credentials:\n\n- Add your Loki, Prometheus, and Slack API credentials in the respective nodes (use n8n Credentials Manager if required).\n- Set up Google Gemini AI credentials for RCA generation.\n- Test the Workflow: Run the workflow manually to ensure logs, metrics, and alerts are processed correctly.\n- Schedule Execution: Use n8n‚Äôs Schedule Trigger to run the workflow at desired intervals (e.g., every 5 minutes).\n\n## Requirements\n\nüåê n8 K8s node installed (self-hosted only, see n8n documentation).\n\nüîë Access to Kubernetes clusters and API.\n\nüìä Loki and Prometheus set up for log and metrics collection.\n\nüí¨ Slack workspace with webhook access for notifications.\n\nü§ñ Google Gemini AI API key for RCA generation.\n\n## How to Customize the Workflow\n\n- Adjust Filters: Modify the Loki query in the HTTP Request node to focus on specific error patterns.\n- Change Alert Frequency: Update the Schedule Trigger node for different intervals.\n- Add More Metrics: Extend the Prometheus node to include additional metrics like CPU or memory usage.\n- Customize Slack Alerts: Edit the Slack node to change message formatting or add more channels.\n- Enhance RCA: Adjust the Gemini AI prompt in the Set Fields node for more specific insights.\n\n## üóÇÔ∏è Category\nDevOps / Monitoring & Observability / Kubernetes/ AI\n\n## üè∑Ô∏è Tags\nkubernetes, prometheus, slack, alerting, sre, ops, kube-state-metrics, Gemini, AI\n\n\n## Slack Output\n\n![image.png](fileId:2251)\n\n",
  "featuredImage": "/data/workflows/7953/7953.webp",
  "author": {
    "id": 101,
    "slug": "johnpranay",
    "name": "John Pranay Kumar Reddy",
    "avatar": ""
  },
  "categories": [
    "AI Summarization",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 101,
  "downloads": 10,
  "createdAt": "2025-08-27T14:41:00.607Z",
  "updatedAt": "2026-01-16T08:53:13.682Z",
  "publishedAt": "2025-08-27T14:41:00.607Z",
  "nodes": 36,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7953",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Kubernetes RCA and alerting using Gemini, Loki, Prometheus, Slack",
    "workflowName": "Kubernetes RCA and alerting using Gemini, Loki, Prometheus, Slack",
    "description": "## Summary\nThis n8n workflow automates Kubernetes root cause analysis (RCA) and incident alerting by integrating with Loki, Prometheus, and Slack. It streamlines log collection, cluster health monitoring, and AI-driven RCA with Gemini, saving DevOps teams hours of manual troubleshooting. Designed for production-grade Kubernetes environments, this plug-and-play workflow delivers actionable insights directly to your Slack channels.\n\n## Who‚Äôs It For\n\nüõ†Ô∏è DevOps Engineers automating Kubernetes monitoring and incident response.\n\nüîç Site Reliability Engineers (SREs) aiming to reduce mean time to resolution (MTTR).\n\nüöÄ Teams using n8n, Slack, Loki, and Prometheus for observability and automation.\n\n## What It Does\n\n- Pulls logs from Loki, filtering for critical errors.\n- Monitors cluster health, checking pending, not ready, or restarting pods.\n- Fetches Prometheus metrics for nodes, namespaces, and services.\n- Generates AI-driven RCA using Google Gemini to analyze logs and metrics.\n- Sends formatted Slack alerts with deduplication and batching for readability.\n- Tracks pod lifecycle events, including crashloop states and restarts.\n\n## How It Works\n\n- Log Collection: The workflow uses an n8n HTTP Request node to pull logs from Loki, filtering for critical errors.\n- Cluster Monitoring: A Kubernetes SSH node checks pod states (terminated or running). If terminated ignore those pods for RCA.\n- Metrics Fetching: Prometheus metrics are retrieved via HTTP Request for nodes and services.\n- RCA Generation: Logs and metrics are merged into structured prompts for Google Gemini AI to produce actionable RCA insights.\n- Kubernetes Enrichment: RCA from Gemini will goes to this node and enriches with Kubernetes documentation and provide the documentation links in RCA\n- Slack Notifications: Alerts are batched, deduplicated, and sent to Slack with clear formatting.\n\n## How to Set Up\n\n- Import the Workflow: Download the .json file and import it into your n8n instance.\n\n### Configure Credentials:\n\n- Add your Loki, Prometheus, and Slack API credentials in the respective nodes (use n8n Credentials Manager if required).\n- Set up Google Gemini AI credentials for RCA generation.\n- Test the Workflow: Run the workflow manually to ensure logs, metrics, and alerts are processed correctly.\n- Schedule Execution: Use n8n‚Äôs Schedule Trigger to run the workflow at desired intervals (e.g., every 5 minutes).\n\n## Requirements\n\nüåê n8 K8s node installed (self-hosted only, see n8n documentation).\n\nüîë Access to Kubernetes clusters and API.\n\nüìä Loki and Prometheus set up for log and metrics collection.\n\nüí¨ Slack workspace with webhook access for notifications.\n\nü§ñ Google Gemini AI API key for RCA generation.\n\n## How to Customize the Workflow\n\n- Adjust Filters: Modify the Loki query in the HTTP Request node to focus on specific error patterns.\n- Change Alert Frequency: Update the Schedule Trigger node for different intervals.\n- Add More Metrics: Extend the Prometheus node to include additional metrics like CPU or memory usage.\n- Customize Slack Alerts: Edit the Slack node to change message formatting or add more channels.\n- Enhance RCA: Adjust the Gemini AI prompt in the Set Fields node for more specific insights.\n\n## üóÇÔ∏è Category\nDevOps / Monitoring & Observability / Kubernetes/ AI\n\n## üè∑Ô∏è Tags\nkubernetes, prometheus, slack, alerting, sre, ops, kube-state-metrics, Gemini, AI\n\n\n## Slack Output\n\n![image.png](fileId:2251)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Schedule Trigger1",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Google Gemini1",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "üì§ Send Alerts to Slack",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Kubernetes Documentation",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loki",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Formatting the Output to send to Slack",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "SSH1",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "PromQL: Current endpoints",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "PromQL: Endpoints 5m ago",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Pods Not Ready",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Pod Restart Spike (last 5m)",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Map Prometheus results into namespace/service",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Map Prometheus results into namespace/service1",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Merge2",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Batch",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Pods Pending",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Pods Pending State",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Endpoints",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "If(Excludes Pods which are terminated already)",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Loki Error Logs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Pods Not Ready State",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Termination State",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "CrashLoopBackOff",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Build Prompt for Gemini",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Pod Restart Count State",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    }
  ]
}