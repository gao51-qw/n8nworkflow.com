{
  "id": 5615,
  "slug": "5615",
  "title": "Email-based book recommendations with Ollama LLM and OpenLibrary API",
  "description": "This workflow listens for incoming book request emails, extracts the user's intent using the Ollama LLM, queries book data (title, summary, details) via an API, and sends a personalized recommendation email. Ideal for automated book suggestions using LLMs and structured APIs, great for newsletters, reading clubs, and educational bots.\n\n## How It Works\n\n1. **Email Request:** Triggers the workflow when a new email with a book request is received.\n2. **Analyze Email with Ollama:** Extracts user intent and book preferences using the Ollama LLM.\n3. **Create Book Search Query:** Generates a query based on the analyzed intent.\n4. **Book Search API:** Fetches book data (title, summary, details) from an API.\n5. **Check API Response:** Validates the API response for book availability.\n6. **Handle No Book Found:** Manages cases where no suitable book is found.\n7. **Extract Book Summary:** Pulls the summary from the API response.\n8. **Wait for Summary Response:** Pauses to ensure summary data is ready.\n9. **Retrieve Book Details:** Gathers additional book details.\n10. **Format Book Data:** Structures the book information for the recommendation.\n11. **Enhance Data with Code:** Refines the data using custom code.\n12. **Generate Email Content:** Creates a personalized email recommendation.\n13. **Send Email:** Delivers the recommendation to the user.\n\n## How to Use\n\n- Import the workflow into n8n.\n- Configure email credentials for the Email Request node.\n- Set up Ollama LLM API credentials and endpoint.\n- Configure the Book Search API with appropriate credentials and endpoint.\n- Test with a sample email requesting a book recommendation.\n- Adjust the Generate Email Content node for custom email templates if needed.\n- Ensure the Send Email node is linked to a valid email service.\n\n## Requirements\n\n- Email service API credentials (e.g., Gmail, SMTP)\n- Ollama LLM API access\n- Book Search API credentials\n\n## Customizing This Workflow\n\n1. Modify the Analyze Email with Ollama node to refine intent extraction for specific genres.\n2. Adjust the Book Search API query to target different book databases.\n3. Customize the Generate Email Content node to include additional details like author bios.",
  "featuredImage": "/data/workflows/5615/5615.webp",
  "author": {
    "id": 101,
    "slug": "oneclick-ai",
    "name": "Oneclick AI Squad",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 378,
  "downloads": 37,
  "createdAt": "2025-07-03T02:24:11.108Z",
  "updatedAt": "2026-01-16T08:40:33.203Z",
  "publishedAt": "2025-07-03T02:24:11.108Z",
  "nodes": 21,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5615",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Email-based book recommendations with Ollama LLM and OpenLibrary API",
    "workflowName": "Email-based book recommendations with Ollama LLM and OpenLibrary API",
    "description": "This workflow listens for incoming book request emails, extracts the user's intent using the Ollama LLM, queries book data (title, summary, details) via an API, and sends a personalized recommendation email. Ideal for automated book suggestions using LLMs and structured APIs, great for newsletters, reading clubs, and educational bots.\n\n## How It Works\n\n1. **Email Request:** Triggers the workflow when a new email with a book request is received.\n2. **Analyze Email with Ollama:** Extracts user intent and book preferences using the Ollama LLM.\n3. **Create Book Search Query:** Generates a query based on the analyzed intent.\n4. **Book Search API:** Fetches book data (title, summary, details) from an API.\n5. **Check API Response:** Validates the API response for book availability.\n6. **Handle No Book Found:** Manages cases where no suitable book is found.\n7. **Extract Book Summary:** Pulls the summary from the API response.\n8. **Wait for Summary Response:** Pauses to ensure summary data is ready.\n9. **Retrieve Book Details:** Gathers additional book details.\n10. **Format Book Data:** Structures the book information for the recommendation.\n11. **Enhance Data with Code:** Refines the data using custom code.\n12. **Generate Email Content:** Creates a personalized email recommendation.\n13. **Send Email:** Delivers the recommendation to the user.\n\n## How to Use\n\n- Import the workflow into n8n.\n- Configure email credentials for the Email Request node.\n- Set up Ollama LLM API credentials and endpoint.\n- Configure the Book Search API with appropriate credentials and endpoint.\n- Test with a sample email requesting a book recommendation.\n- Adjust the Generate Email Content node for custom email templates if needed.\n- Ensure the Send Email node is linked to a valid email service.\n\n## Requirements\n\n- Email service API credentials (e.g., Gmail, SMTP)\n- Ollama LLM API access\n- Book Search API credentials\n\n## Customizing This Workflow\n\n1. Modify the Analyze Email with Ollama node to refine intent extraction for specific genres.\n2. Adjust the Book Search API query to target different book databases.\n3. Customize the Generate Email Content node to include additional details like author bios.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Ollama Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "role": "lmChatOllama",
      "configDescription": "Version 1"
    },
    {
      "name": "Email Trigger â€“ Book Request",
      "type": "n8n-nodes-base.emailReadImap",
      "role": "emailReadImap",
      "configDescription": "Version 2"
    },
    {
      "name": "Analyze Email with Ollama",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Create Book Search Query",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 1"
    },
    {
      "name": "Call Book Search API",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Check API Response",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Handle No Book Found",
      "type": "n8n-nodes-base.emailSend",
      "role": "emailSend",
      "configDescription": "Version 1"
    },
    {
      "name": "Check Book Name",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Extract Book Summary",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Wait for Summary Response",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Retrieve Book Details",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Format Book Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 1"
    },
    {
      "name": "Enhance Data with Code",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Generate Email Content",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 1"
    },
    {
      "name": "Send Recommendation Email",
      "type": "n8n-nodes-base.emailSend",
      "role": "emailSend",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}