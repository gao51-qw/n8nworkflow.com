{
  "id": 2485,
  "slug": "2485",
  "title": "Automate droplet snapshots on DigitalOcean",
  "description": "This workflow automates the management of DigitalOcean Droplet snapshots by listing all droplets, filtering based on the number of snapshots, and deleting excess snapshots before creating new ones. It ensures your droplet snapshots stay organized and within a manageable limit, preventing unnecessary storage costs due to an excess of snapshots.\n\n### Who is this for?\nThis workflow is perfect for users managing DigitalOcean Droplets and looking to automate the process of snapshot creation and cleanup to save on storage costs and maintain efficient resource management. It’s useful for DevOps teams, cloud administrators, or any developer leveraging DigitalOcean for their infrastructure.\n\n### What problem is this workflow solving?\nWhen managing multiple DigitalOcean Droplets, snapshots can quickly accumulate, taking up space and increasing storage costs. Manually deleting and creating snapshots can be time-consuming and inefficient. This automation solves this problem by automating the snapshot management process, ensuring that no more than a defined number of snapshots are kept per droplet.\n\n### What this workflow does\n1. **Runs every 48 hours**: The workflow is triggered by a cron node that runs every 48 hours, ensuring timely snapshot management.\n2. **List all droplets**: The workflow retrieves all droplets in the DigitalOcean account.\n3. **Retrieve snapshots**: For each droplet, the workflow retrieves a list of existing snapshots.\n4. **Filter snapshots**: If the number of snapshots exceeds 4, the workflow filters for snapshots that need to be deleted.\n5. **Delete snapshots**: Excess snapshots are automatically deleted based on the filter criteria.\n6. **Create new snapshot**: After cleaning up, the workflow creates a new snapshot for each droplet, ensuring that backups are always up-to-date.\n\n### Setup\n1. **DigitalOcean API Key**: You’ll need to configure the HTTP Request nodes with your DigitalOcean API key. This key is required for authenticating requests to list droplets, retrieve snapshots, delete snapshots, and create new ones.\n2. **Snapshot Threshold**: By default, the workflow is set to keep no more than 4 snapshots per droplet. This can be adjusted by modifying the filter node conditions.\n3. **Set Execution Frequency**: The cron node is set to run every 48 hours, but you can adjust the timing to suit your needs.\n\n### How to customize this workflow\n- **Adjust Snapshot Limit**: Change the value in the filter node if you want to keep more or fewer snapshots.\n- **Modify Run Frequency**: The workflow runs every 48 hours by default. You can change the frequency in the cron node to run more or less often.\n- **Enhance with Notifications**: You can add a notification node (e.g., Slack or email) to alert you when snapshots are deleted or created.\n\n### Workflow Summary\nThis workflow automates the management of DigitalOcean Droplet snapshots by keeping the number of snapshots under a defined limit, deleting the oldest ones, and ensuring new snapshots are created at regular intervals.\n",
  "featuredImage": "/data/workflows/2485/2485.webp",
  "author": {
    "id": 101,
    "slug": "optimus01",
    "name": "Darryn Balanco",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 689,
  "downloads": 68,
  "createdAt": "2024-10-23T13:17:02.170Z",
  "updatedAt": "2026-01-16T08:25:00.461Z",
  "publishedAt": "2024-10-23T13:17:02.170Z",
  "nodes": 17,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2485",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate droplet snapshots on DigitalOcean",
    "workflowName": "Automate droplet snapshots on DigitalOcean",
    "description": "This workflow automates the management of DigitalOcean Droplet snapshots by listing all droplets, filtering based on the number of snapshots, and deleting excess snapshots before creating new ones. It ensures your droplet snapshots stay organized and within a manageable limit, preventing unnecessary storage costs due to an excess of snapshots.\n\n### Who is this for?\nThis workflow is perfect for users managing DigitalOcean Droplets and looking to automate the process of snapshot creation and cleanup to save on storage costs and maintain efficient resource management. It’s useful for DevOps teams, cloud administrators, or any developer leveraging DigitalOcean for their infrastructure.\n\n### What problem is this workflow solving?\nWhen managing multiple DigitalOcean Droplets, snapshots can quickly accumulate, taking up space and increasing storage costs. Manually deleting and creating snapshots can be time-consuming and inefficient. This automation solves this problem by automating the snapshot management process, ensuring that no more than a defined number of snapshots are kept per droplet.\n\n### What this workflow does\n1. **Runs every 48 hours**: The workflow is triggered by a cron node that runs every 48 hours, ensuring timely snapshot management.\n2. **List all droplets**: The workflow retrieves all droplets in the DigitalOcean account.\n3. **Retrieve snapshots**: For each droplet, the workflow retrieves a list of existing snapshots.\n4. **Filter snapshots**: If the number of snapshots exceeds 4, the workflow filters for snapshots that need to be deleted.\n5. **Delete snapshots**: Excess snapshots are automatically deleted based on the filter criteria.\n6. **Create new snapshot**: After cleaning up, the workflow creates a new snapshot for each droplet, ensuring that backups are always up-to-date.\n\n### Setup\n1. **DigitalOcean API Key**: You’ll need to configure the HTTP Request nodes with your DigitalOcean API key. This key is required for authenticating requests to list droplets, retrieve snapshots, delete snapshots, and create new ones.\n2. **Snapshot Threshold**: By default, the workflow is set to keep no more than 4 snapshots per droplet. This can be adjusted by modifying the filter node conditions.\n3. **Set Execution Frequency**: The cron node is set to run every 48 hours, but you can adjust the timing to suit your needs.\n\n### How to customize this workflow\n- **Adjust Snapshot Limit**: Change the value in the filter node if you want to keep more or fewer snapshots.\n- **Modify Run Frequency**: The workflow runs every 48 hours by default. You can change the frequency in the cron node to run more or less often.\n- **Enhance with Notifications**: You can add a notification node (e.g., Slack or email) to alert you when snapshots are deleted or created.\n\n### Workflow Summary\nThis workflow automates the management of DigitalOcean Droplet snapshots by keeping the number of snapshots under a defined limit, deleting the oldest ones, and ensuring new snapshots are created at regular intervals.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Filter",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 1"
    },
    {
      "name": "List Snapshots for a Droplet",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "List All Droplets",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Delete a Snapshot",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Droplet Actions snapshot (n8n.optimus01.co.za)",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Runs every 48hrs",
      "type": "n8n-nodes-base.cron",
      "role": "cron",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}