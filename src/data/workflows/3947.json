{
  "id": 3947,
  "slug": "3947",
  "title": "AI personal assistant with GPT-4o, RAG & voice for WhatsApp using Supabase",
  "description": "### üß† Intelligent AI Assistant with RAG & Voice for WhatsApp ‚Äì Built with GPT-4o & Supabase\n\n---\n\n### üìå About this workflow and its creator\n\nHi! I‚Äôm Amanda, a creator of intelligent automations using n8n and Make. I‚Äôve been building AI-powered workflows for over 2 years, always focused on usability and innovation. This one here is very special to me ‚Äì a truly advanced AI assistant that reads, listens, interprets and responds like a real human ü§ñ‚ú®\n\nThis ready-to-use workflow acts as a powerful AI personal assistant capable of understanding messages via voice, text, documents, or even images. It supports full multi-channel operation (WhatsApp via Evolution API, Instagram, Facebook, and more), and includes advanced RAG capabilities using Supabase + GPT-4o. It‚Äôs designed to be highly extensible, with memory, prompt update tools, and knowledge base management.\n\n---\n\n### ‚öôÔ∏è What this workflow does\n\n- üí¨ Understands user input via text, document, audio or image (voice, OCR, PDF)\n- üé§ Transcribes and interprets voice messages using OpenAI Whisper\n- üß† Understands prompts and user commands using GPT-4o via LangChain agent\n- üóÇÔ∏è Searches knowledge base using RAG + Supabase vector DB\n- üìÑ Accepts documents and automatically indexes them for future questions\n- üßæ Summarizes documents and stores metadata in Supabase\n- üóÉÔ∏è Offers memory support (PostgreSQL chat memory per user session)\n- üìß Sends replies through WhatsApp (Evolution API), Instagram, Facebook, etc.\n- üìÖ Manages schedules (via tool integration with Google Calendar)\n- üì¨ Sends and searches emails (with support tools)\n- üõ† Modular and expandable structure (tools for saving knowledge, deleting, updating prompt)\n\n---\n\n### üîß Setup Instructions\n\n1. **n8n Hosting**  \n   This workflow **requires n8n self-hosted** (or n8n Cloud with custom credentials + community nodes enabled).\n\n2. **Create required databases**  \n   Use the provided SQL queries inside the `setar_supabase_tabelas_vectoriais`, `criar_cerebro`, and `criar_rag_controle` nodes to initialize:\n   - `documents` table for RAG\n   - `cerebro` table for prompt\n   - `memoria_chat` for session memory\n   - `rag_controle` for summaries and indexing\n\n3. **Credentials needed**\n   - OpenAI API (for chat, embeddings and Whisper transcription)\n   - Redis (for managing message buffer)\n   - Supabase (for vector store + metadata)\n   - Postgres (for memory and prompts)\n   - Evolution API (or other messaging platforms)\n\n4. **Webhook**\n   Set the webhook path to receive messages from your Evolution or WhatsApp API provider.\n\n5. **Configure ‚ÄòSet‚Äô node**\n   In the `config` node, adjust:\n   - `adminNumero`: your personal WhatsApp or admin number\n   - `evolutionApiKey`: your private API key\n   - `utilizacaoApenasViaAdmin`: toggle if this should only respond to admin numbers\n\n6. **Tool connections**\n   Ensure the supporting workflows are also imported and connected for:\n   - Emails\n   - Knowledge management\n   - Calendar events\n\n---\n\n### üìé Notes\n\n- This workflow uses LangChain agents, OpenAI GPT-4o, Supabase, Redis, and PostgreSQL.\n- It includes multiple ‚Äústicky notes‚Äù inside the workflow with explanations.\n- Ideal for businesses, consultants, and developers looking to offer an intelligent and extendable AI chatbot experience.\n\n---\n\n## üõç Want to use this on your system?\n‚ù§Ô∏è Buy workflows: [https://iloveflows.com](https://iloveflows.com)  \n‚òÅÔ∏è Use n8n Cloud with my partner link: [https://n8n.partnerlinks.io/amanda](https://n8n.partnerlinks.io/amanda)",
  "featuredImage": "/data/workflows/3947/3947.webp",
  "author": {
    "id": 101,
    "slug": "amanda",
    "name": "Amanda Benks",
    "avatar": ""
  },
  "categories": [
    "Personal Productivity",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 3876,
  "downloads": 387,
  "createdAt": "2025-05-08T20:10:41.254Z",
  "updatedAt": "2026-01-16T08:32:19.129Z",
  "publishedAt": "2025-05-08T20:10:41.254Z",
  "nodes": 76,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3947",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "AI personal assistant with GPT-4o, RAG & voice for WhatsApp using Supabase",
    "workflowName": "AI personal assistant with GPT-4o, RAG & voice for WhatsApp using Supabase",
    "description": "### üß† Intelligent AI Assistant with RAG & Voice for WhatsApp ‚Äì Built with GPT-4o & Supabase\n\n---\n\n### üìå About this workflow and its creator\n\nHi! I‚Äôm Amanda, a creator of intelligent automations using n8n and Make. I‚Äôve been building AI-powered workflows for over 2 years, always focused on usability and innovation. This one here is very special to me ‚Äì a truly advanced AI assistant that reads, listens, interprets and responds like a real human ü§ñ‚ú®\n\nThis ready-to-use workflow acts as a powerful AI personal assistant capable of understanding messages via voice, text, documents, or even images. It supports full multi-channel operation (WhatsApp via Evolution API, Instagram, Facebook, and more), and includes advanced RAG capabilities using Supabase + GPT-4o. It‚Äôs designed to be highly extensible, with memory, prompt update tools, and knowledge base management.\n\n---\n\n### ‚öôÔ∏è What this workflow does\n\n- üí¨ Understands user input via text, document, audio or image (voice, OCR, PDF)\n- üé§ Transcribes and interprets voice messages using OpenAI Whisper\n- üß† Understands prompts and user commands using GPT-4o via LangChain agent\n- üóÇÔ∏è Searches knowledge base using RAG + Supabase vector DB\n- üìÑ Accepts documents and automatically indexes them for future questions\n- üßæ Summarizes documents and stores metadata in Supabase\n- üóÉÔ∏è Offers memory support (PostgreSQL chat memory per user session)\n- üìß Sends replies through WhatsApp (Evolution API), Instagram, Facebook, etc.\n- üìÖ Manages schedules (via tool integration with Google Calendar)\n- üì¨ Sends and searches emails (with support tools)\n- üõ† Modular and expandable structure (tools for saving knowledge, deleting, updating prompt)\n\n---\n\n### üîß Setup Instructions\n\n1. **n8n Hosting**  \n   This workflow **requires n8n self-hosted** (or n8n Cloud with custom credentials + community nodes enabled).\n\n2. **Create required databases**  \n   Use the provided SQL queries inside the `setar_supabase_tabelas_vectoriais`, `criar_cerebro`, and `criar_rag_controle` nodes to initialize:\n   - `documents` table for RAG\n   - `cerebro` table for prompt\n   - `memoria_chat` for session memory\n   - `rag_controle` for summaries and indexing\n\n3. **Credentials needed**\n   - OpenAI API (for chat, embeddings and Whisper transcription)\n   - Redis (for managing message buffer)\n   - Supabase (for vector store + metadata)\n   - Postgres (for memory and prompts)\n   - Evolution API (or other messaging platforms)\n\n4. **Webhook**\n   Set the webhook path to receive messages from your Evolution or WhatsApp API provider.\n\n5. **Configure ‚ÄòSet‚Äô node**\n   In the `config` node, adjust:\n   - `adminNumero`: your personal WhatsApp or admin number\n   - `evolutionApiKey`: your private API key\n   - `utilizacaoApenasViaAdmin`: toggle if this should only respond to admin numbers\n\n6. **Tool connections**\n   Ensure the supporting workflows are also imported and connected for:\n   - Emails\n   - Knowledge management\n   - Calendar events\n\n---\n\n### üìé Notes\n\n- This workflow uses LangChain agents, OpenAI GPT-4o, Supabase, Redis, and PostgreSQL.\n- It includes multiple ‚Äústicky notes‚Äù inside the workflow with explanations.\n- Ideal for businesses, consultants, and developers looking to offer an intelligent and extendable AI chatbot experience.\n\n---\n\n## üõç Want to use this on your system?\n‚ù§Ô∏è Buy workflows: [https://iloveflows.com](https://iloveflows.com)  \n‚òÅÔ∏è Use n8n Cloud with my partner link: [https://n8n.partnerlinks.io/amanda](https://n8n.partnerlinks.io/amanda)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert to File",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "edit1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "edit2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "auth",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Message Delay",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Puxar as Mensagens",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "If1",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Database",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "Lista Mensagens1",
      "type": "n8n-nodes-base.redis",
      "role": "redis",
      "configDescription": "Version 1"
    },
    {
      "name": "Edit Fields2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Important Notes",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.6"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "setar_supabase_tabelas_vectoriais",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "arquivo_id",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "deletar_arquivos_antigos",
      "type": "n8n-nodes-base.supabase",
      "role": "supabase",
      "configDescription": "Version 1"
    },
    {
      "name": "extrair_pdf",
      "type": "n8n-nodes-base.extractFromFile",
      "role": "extractFromFile",
      "configDescription": "Version 1"
    },
    {
      "name": "exportar_texto",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "supabase_vectorstore",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1"
    },
    {
      "name": "agendamentos",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "criar_cerebro",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "puxar_prompt",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Deletar_todas_as_mensagens1",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "convert_to_file",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "base64",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "tipo_arquivo",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge Database Data1",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "resumo",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "criar_rag_controle",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "atualizar_lista_de_arquivos",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "rag_resumos",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Merge Database Data2",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Supabase Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1"
    },
    {
      "name": "excluir_rag_arquivo",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "emails",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "adicionar_conhecimento",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "buscar_conhecimento",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Convert to File1",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "base",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "mensagem_tipo",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.6"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3"
    },
    {
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "atualizar_prompt",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.1"
    },
    {
      "name": "tratamento",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "recepcionista",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.6"
    },
    {
      "name": "classificador_de_intencao",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Merge Database Data3",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "excluir_conhecimento",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "config",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "mensagem_cliente",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "mensagem_cliente_inicial",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "deletar_arquivo",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Postgres Chat Memory1",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "deletar_conhecimento",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.5"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "RAG",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "role": "toolVectorStore",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}