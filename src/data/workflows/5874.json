{
  "id": 5874,
  "slug": "5874",
  "title": "AI privacy-minded router: PII detection for privacy, security, & compliance",
  "description": "## Modern AI systems are powerful but pose privacy risks when handling sensitive data. \n\nOrganizations need AI capabilities while ensuring:\n\n✅ Sensitive data never leaves secure environments\n✅ Compliance with regulations (GDPR, HIPAA, PCI, SOX)\n✅ Real-time decision making about data sensitivity\n✅ Comprehensive audit trails for regulatory review\n\n## The Concept:\n\nIntelligent Data Classification + Smart Routing\n\nThe goal of this concept is to build the foundations of the safe and compliant use of LLMs in Agentic workflows by automatically detecting sensitive data, applying sanitization rules, and intelligently routing requests through secure processing channels.\n\nThis workflow will analyze the user's chat or webhook input and attempt to detect PII using the Enhanced PII Pattern Detector. \n\nIf detected, the workflow will process that input via a series of Compliance, Auditing, and Security steps which log and sanitizes the request prior to any LLM being pinged.\n\n## Why Multi-Tier Routing? \nTraditional systems use binary decisions (sensitive/not sensitive). Our 3-tier approach provides:\n\n✅ **Granular Security**: Critical PII gets maximum protection\n✅ **Performance Optimization**: Clean data gets full cloud capabilities\n✅ **Cost Efficiency**: Expensive local processing only when needed\n✅ **User Experience**: Maintains conversational flow across security levels\n\n## Why Context-Aware Detection?\n\nRegex patterns alone miss contextual sensitivity. \nOur approach:\n\n✅ **Catches Intent**: \"Bank account\" discussion is sensitive even without account numbers\n✅ **Reduces False Negatives**: Medical discussions stay secure even without explicit medical IDs\n✅ **Proactive Protection**: Identifies sensitive contexts before PII is shared\n✅ **Compliance Alignment**: Matches how regulations actually define sensitive data\n\n## Why Risk Scoring vs Binary Classification?\nBinary PII detection creates artificial boundaries. \n\nRisk scoring provides:\n\n✅ **Nuanced Decisions**: Multiple low-risk patterns might aggregate to high risk\n✅ **Adaptive Thresholds**: Organizations can adjust sensitivity based on their needs\n✅ **Better UX**: Users aren't unnecessarily restricted for low-risk scenarios\n✅ **Audit Transparency**: Clear reasoning for every routing decision\n\n## Why Comprehensive Monitoring?\nPrivacy systems require trust and verification:\n\n✅ **Compliance Proof**: Audit trails demonstrate regulatory compliance\n✅ **Performance Optimization**: Identify bottlenecks and improve efficiency\n✅ **Security Validation**: Ensure no sensitive data leakage occurs\n✅ **Operational Insights**: Understand usage patterns and system health\n\n## How to Install:\n\nAll that you will need for this workflow are credentials for your LLM providers such as Ollama, OpenRouter, OpenAI, Anthropic, etc. \n\nThis workflow is customizable and allows the user to define the best LLM and storage/memory solutions for their specific use case. ",
  "featuredImage": "/data/workflows/5874/5874.webp",
  "author": {
    "id": 101,
    "slug": "codetender",
    "name": "Charles",
    "avatar": ""
  },
  "categories": [
    "SecOps",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1593,
  "downloads": 159,
  "createdAt": "2025-07-11T08:44:56.915Z",
  "updatedAt": "2026-01-16T08:41:52.764Z",
  "publishedAt": "2025-07-11T08:44:56.915Z",
  "nodes": 20,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5874",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "AI privacy-minded router: PII detection for privacy, security, & compliance",
    "workflowName": "AI privacy-minded router: PII detection for privacy, security, & compliance",
    "description": "## Modern AI systems are powerful but pose privacy risks when handling sensitive data. \n\nOrganizations need AI capabilities while ensuring:\n\n✅ Sensitive data never leaves secure environments\n✅ Compliance with regulations (GDPR, HIPAA, PCI, SOX)\n✅ Real-time decision making about data sensitivity\n✅ Comprehensive audit trails for regulatory review\n\n## The Concept:\n\nIntelligent Data Classification + Smart Routing\n\nThe goal of this concept is to build the foundations of the safe and compliant use of LLMs in Agentic workflows by automatically detecting sensitive data, applying sanitization rules, and intelligently routing requests through secure processing channels.\n\nThis workflow will analyze the user's chat or webhook input and attempt to detect PII using the Enhanced PII Pattern Detector. \n\nIf detected, the workflow will process that input via a series of Compliance, Auditing, and Security steps which log and sanitizes the request prior to any LLM being pinged.\n\n## Why Multi-Tier Routing? \nTraditional systems use binary decisions (sensitive/not sensitive). Our 3-tier approach provides:\n\n✅ **Granular Security**: Critical PII gets maximum protection\n✅ **Performance Optimization**: Clean data gets full cloud capabilities\n✅ **Cost Efficiency**: Expensive local processing only when needed\n✅ **User Experience**: Maintains conversational flow across security levels\n\n## Why Context-Aware Detection?\n\nRegex patterns alone miss contextual sensitivity. \nOur approach:\n\n✅ **Catches Intent**: \"Bank account\" discussion is sensitive even without account numbers\n✅ **Reduces False Negatives**: Medical discussions stay secure even without explicit medical IDs\n✅ **Proactive Protection**: Identifies sensitive contexts before PII is shared\n✅ **Compliance Alignment**: Matches how regulations actually define sensitive data\n\n## Why Risk Scoring vs Binary Classification?\nBinary PII detection creates artificial boundaries. \n\nRisk scoring provides:\n\n✅ **Nuanced Decisions**: Multiple low-risk patterns might aggregate to high risk\n✅ **Adaptive Thresholds**: Organizations can adjust sensitivity based on their needs\n✅ **Better UX**: Users aren't unnecessarily restricted for low-risk scenarios\n✅ **Audit Transparency**: Clear reasoning for every routing decision\n\n## Why Comprehensive Monitoring?\nPrivacy systems require trust and verification:\n\n✅ **Compliance Proof**: Audit trails demonstrate regulatory compliance\n✅ **Performance Optimization**: Identify bottlenecks and improve efficiency\n✅ **Security Validation**: Ensure no sensitive data leakage occurs\n✅ **Operational Insights**: Understand usage patterns and system health\n\n## How to Install:\n\nAll that you will need for this workflow are credentials for your LLM providers such as Ollama, OpenRouter, OpenAI, Anthropic, etc. \n\nThis workflow is customizable and allows the user to define the best LLM and storage/memory solutions for their specific use case.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Enhanced PII Pattern Analyzer",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Enhanced PII Routing Switch",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Compliance & Audit Logger",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Error Handler & Recovery",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Real-time Monitoring Dashboard",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Ollama Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "role": "lmChatOllama",
      "configDescription": "Version 1"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Agent [Edge]",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "AI Agent [Private]",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}