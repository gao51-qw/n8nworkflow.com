{
  "id": 2740,
  "slug": "2740",
  "title": "Basic automatic Gmail email labelling with OpenAI and Gmail API",
  "description": "## Description\nThis workflow automates email categorization in Gmail using the Gmail API and OpenAI's language model. It periodically checks for new emails, reads their content, and categorizes them based on existing Gmail labels. If no matching label is found, the workflow creates a new label and assigns it to the email.\n\n## Key Features\n- **Polling for Emails**: The workflow triggers every 5 minutes to check for new emails using the Gmail Trigger node.\n- **Reading Labels**: Existing Gmail labels are fetched to determine the most relevant match for email categorization.\n- **Dynamic Labeling**: If no existing label matches, a new label is created dynamically based on the email's content.\n- **OpenAI Integration**: The workflow uses OpenAI's Chat model to analyze email content and suggest or create appropriate labels.\n- **Email Categorization**: Labels are applied to emails, ensuring they are organized in Gmail's structure. The workflow also removes less relevant emails (e.g., ads) from the inbox.\n\n## Nodes in Use\n1. **Gmail Trigger**: Polls Gmail every 5 minutes for new emails.\n2. **Gmail - Read Labels**: Fetches all existing Gmail labels.\n3. **Gmail - Get Message**: Retrieves the full content of a specific email.\n4. **Gmail - Add Label to Message**: Assigns a chosen label to the email.\n5. **Gmail - Create Label**: Creates a new label if necessary.\n6. **OpenAI Chat Model**: Analyzes email content for categorization.\n7. **Memory Buffer**: Retains context for email analysis across multiple iterations.\n8. **Wait Node**: Adds a buffer period to manage email processing.\n\n## Prerequisites\n- **Gmail API Setup**: Ensure Gmail OAuth2 credentials are configured in n8n.\n- **OpenAI API Key**: Configure OpenAI credentials for email analysis.\n- **Labeling Standards**: Maintain a consistent Gmail label structure for better organization.\n\n## Instructions\n1. Add your Gmail API credentials to the Gmail nodes.\n2. Add your OpenAI API credentials to the OpenAI Chat Model node.\n3. Activate the workflow. It will start polling for new emails every 5 minutes.\n4. Monitor and refine the categorization logic if necessary to ensure alignment with Gmail's organizational needs.\n\n## Use Case\nIdeal for individuals or teams handling high email volumes who want to maintain an organized inbox and automate repetitive categorization tasks.\n\nNote: You can improve the prompt to get better results from the agent by giving it more personal rules on how to categorize.",
  "featuredImage": "/data/workflows/2740/2740.webp",
  "author": {
    "id": 101,
    "slug": "mkc",
    "name": "Martijn Kerver",
    "avatar": ""
  },
  "categories": [
    "Personal Productivity",
    "AI Summarization"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 98348,
  "downloads": 9834,
  "createdAt": "2025-01-17T08:51:32.434Z",
  "updatedAt": "2026-01-16T08:26:14.022Z",
  "publishedAt": "2025-01-17T08:51:32.434Z",
  "nodes": 13,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2740",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Basic automatic Gmail email labelling with OpenAI and Gmail API",
    "workflowName": "Basic automatic Gmail email labelling with OpenAI and Gmail API",
    "description": "## Description\nThis workflow automates email categorization in Gmail using the Gmail API and OpenAI's language model. It periodically checks for new emails, reads their content, and categorizes them based on existing Gmail labels. If no matching label is found, the workflow creates a new label and assigns it to the email.\n\n## Key Features\n- **Polling for Emails**: The workflow triggers every 5 minutes to check for new emails using the Gmail Trigger node.\n- **Reading Labels**: Existing Gmail labels are fetched to determine the most relevant match for email categorization.\n- **Dynamic Labeling**: If no existing label matches, a new label is created dynamically based on the email's content.\n- **OpenAI Integration**: The workflow uses OpenAI's Chat model to analyze email content and suggest or create appropriate labels.\n- **Email Categorization**: Labels are applied to emails, ensuring they are organized in Gmail's structure. The workflow also removes less relevant emails (e.g., ads) from the inbox.\n\n## Nodes in Use\n1. **Gmail Trigger**: Polls Gmail every 5 minutes for new emails.\n2. **Gmail - Read Labels**: Fetches all existing Gmail labels.\n3. **Gmail - Get Message**: Retrieves the full content of a specific email.\n4. **Gmail - Add Label to Message**: Assigns a chosen label to the email.\n5. **Gmail - Create Label**: Creates a new label if necessary.\n6. **OpenAI Chat Model**: Analyzes email content for categorization.\n7. **Memory Buffer**: Retains context for email analysis across multiple iterations.\n8. **Wait Node**: Adds a buffer period to manage email processing.\n\n## Prerequisites\n- **Gmail API Setup**: Ensure Gmail OAuth2 credentials are configured in n8n.\n- **OpenAI API Key**: Configure OpenAI credentials for email analysis.\n- **Labeling Standards**: Maintain a consistent Gmail label structure for better organization.\n\n## Instructions\n1. Add your Gmail API credentials to the Gmail nodes.\n2. Add your OpenAI API credentials to the OpenAI Chat Model node.\n3. Activate the workflow. It will start polling for new emails every 5 minutes.\n4. Monitor and refine the categorization logic if necessary to ensure alignment with Gmail's organizational needs.\n\n## Use Case\nIdeal for individuals or teams handling high email volumes who want to maintain an organized inbox and automate repetitive categorization tasks.\n\nNote: You can improve the prompt to get better results from the agent by giving it more personal rules on how to categorize.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Gmail Trigger",
      "type": "n8n-nodes-base.gmailTrigger",
      "role": "gmailTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Gmail - read labels",
      "type": "n8n-nodes-base.gmailTool",
      "role": "gmailTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gmail - get message",
      "type": "n8n-nodes-base.gmailTool",
      "role": "gmailTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gmail - add label to message",
      "type": "n8n-nodes-base.gmailTool",
      "role": "gmailTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gmail - create label",
      "type": "n8n-nodes-base.gmailTool",
      "role": "gmailTool",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gmail labelling agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Window Buffer Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}