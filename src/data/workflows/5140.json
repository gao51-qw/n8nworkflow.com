{
  "id": 5140,
  "slug": "5140",
  "title": "Build and update RAG system with Google Drive, Qdrant, and Gemini Chat",
  "description": "This workflow automates the creation and management of a Retrieval-Augmented Generation (RAG) system using Qdrant as a vector store and Google Drive as the document source. It **enables full or incremental updates to documents** in the Qdrant vector database and integrates with a chatbot using Google Gemini for question answering.\n\nHere is a clear and professional description in English of the n8n workflow **“Create a RAG with Qdrant and update single files”**, including its benefits:\n\n\n---\n\n### **Benefits**\n\n* **Efficient RAG Setup**\n  Seamlessly integrates OpenAI, Qdrant, and Google Drive to create a scalable RAG pipeline.\n\n* **Single File Update**\n  You can replace the vector representation of a single file without reprocessing the entire collection—ideal for maintaining document freshness.\n\n* **Flexible File Source**\n  Works with Google Drive, allowing document management and updates from a familiar interface.\n---\n\n### **How It Works**  \nThis workflow is designed to create a Retrieval-Augmented Generation (RAG) system using Qdrant as a vector store and Google Drive as a document source. It consists of four main phases:  \n\n- **Collection Setup**:  \n  - Creates or clears a Qdrant collection to store vectorized documents.  \n  - Configures the collection with cosine distance metrics and other parameters.  \n\n- **Document Processing**:  \n  - Retrieves files from a specified Google Drive folder.  \n  - Downloads and processes each file (text extraction, chunking, and embedding using OpenAI).  \n  - Stores the embeddings in Qdrant for vector search.  \n\n- **Single-File Update**:  \n  - Allows updating or deleting a specific file in the Qdrant collection by referencing its Google Drive ID.  \n  - Re-embeds the file and updates the vector store.  \n\n- **RAG Querying**:  \n  - Uses a chat trigger to receive user questions.  \n  - Retrieves relevant documents from Qdrant using vector similarity.  \n  - Generates answers using Google Gemini as the language model.  \n\n---\n\n### **Set Up Steps**  \n\n1. **Configure Qdrant**:  \n   - Replace `QDRANTURL` and `COLLECTION` in the \"Create collection\" and \"Clear collection\" HTTP nodes.  \n   - Ensure Qdrant API credentials are correctly set in the credentials section.  \n\n2. **Google Drive Integration**:  \n   - Specify the Google Drive folder ID in the \"Get files\" node.  \n   - Ensure Google Drive OAuth credentials are configured.  \n\n3. **OpenAI and Gemini Keys**:  \n   - Add OpenAI API credentials for embeddings (used in \"Embeddings OpenAI\" nodes).  \n   - Configure Google Gemini credentials for the chat model.  \n\n4. **Single-File Update**:  \n   - Set the `file_id` in the \"Edit Fields3\" node to target a specific Google Drive file for updates.  \n\n5. **Testing**:  \n   - Trigger the workflow manually to populate the Qdrant collection.  \n   - Use the chat interface to test RAG responses.  \n   \n---\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/). ",
  "featuredImage": "/data/workflows/5140/5140.webp",
  "author": {
    "id": 101,
    "slug": "n3witalia",
    "name": "Davide",
    "avatar": ""
  },
  "categories": [
    "Internal Wiki",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 6935,
  "downloads": 693,
  "createdAt": "2025-06-23T08:09:25.952Z",
  "updatedAt": "2026-01-16T08:37:53.239Z",
  "publishedAt": "2025-06-23T08:09:25.952Z",
  "nodes": 29,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5140",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Build and update RAG system with Google Drive, Qdrant, and Gemini Chat",
    "workflowName": "Build and update RAG system with Google Drive, Qdrant, and Gemini Chat",
    "description": "This workflow automates the creation and management of a Retrieval-Augmented Generation (RAG) system using Qdrant as a vector store and Google Drive as the document source. It **enables full or incremental updates to documents** in the Qdrant vector database and integrates with a chatbot using Google Gemini for question answering.\n\nHere is a clear and professional description in English of the n8n workflow **“Create a RAG with Qdrant and update single files”**, including its benefits:\n\n\n---\n\n### **Benefits**\n\n* **Efficient RAG Setup**\n  Seamlessly integrates OpenAI, Qdrant, and Google Drive to create a scalable RAG pipeline.\n\n* **Single File Update**\n  You can replace the vector representation of a single file without reprocessing the entire collection—ideal for maintaining document freshness.\n\n* **Flexible File Source**\n  Works with Google Drive, allowing document management and updates from a familiar interface.\n---\n\n### **How It Works**  \nThis workflow is designed to create a Retrieval-Augmented Generation (RAG) system using Qdrant as a vector store and Google Drive as a document source. It consists of four main phases:  \n\n- **Collection Setup**:  \n  - Creates or clears a Qdrant collection to store vectorized documents.  \n  - Configures the collection with cosine distance metrics and other parameters.  \n\n- **Document Processing**:  \n  - Retrieves files from a specified Google Drive folder.  \n  - Downloads and processes each file (text extraction, chunking, and embedding using OpenAI).  \n  - Stores the embeddings in Qdrant for vector search.  \n\n- **Single-File Update**:  \n  - Allows updating or deleting a specific file in the Qdrant collection by referencing its Google Drive ID.  \n  - Re-embeds the file and updates the vector store.  \n\n- **RAG Querying**:  \n  - Uses a chat trigger to receive user questions.  \n  - Retrieves relevant documents from Qdrant using vector similarity.  \n  - Generates answers using Google Gemini as the language model.  \n\n---\n\n### **Set Up Steps**  \n\n1. **Configure Qdrant**:  \n   - Replace `QDRANTURL` and `COLLECTION` in the \"Create collection\" and \"Clear collection\" HTTP nodes.  \n   - Ensure Qdrant API credentials are correctly set in the credentials section.  \n\n2. **Google Drive Integration**:  \n   - Specify the Google Drive folder ID in the \"Get files\" node.  \n   - Ensure Google Drive OAuth credentials are configured.  \n\n3. **OpenAI and Gemini Keys**:  \n   - Add OpenAI API credentials for embeddings (used in \"Embeddings OpenAI\" nodes).  \n   - Configure Google Gemini credentials for the chat model.  \n\n4. **Single-File Update**:  \n   - Set the `file_id` in the \"Edit Fields3\" node to target a specific Google Drive file for updates.  \n\n5. **Testing**:  \n   - Trigger the workflow manually to populate the Qdrant collection.  \n   - Use the chat interface to test RAG responses.  \n   \n---\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Default Data Loader1",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1"
    },
    {
      "name": "Qdrant Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1"
    },
    {
      "name": "Create collection",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Embeddings OpenAI2",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1"
    },
    {
      "name": "Recursive Character Text Splitter1",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Delete single file",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Clear collection",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Get files",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Download files",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Download file",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Question and Answer Chain",
      "type": "@n8n/n8n-nodes-langchain.chainRetrievalQa",
      "role": "chainRetrievalQa",
      "configDescription": "Version 1.5"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Vector Store Retriever",
      "type": "@n8n/n8n-nodes-langchain.retrieverVectorStore",
      "role": "retrieverVectorStore",
      "configDescription": "Version 1"
    },
    {
      "name": "Qdrant Vector Store1",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Edit Fields3",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Update single file",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}