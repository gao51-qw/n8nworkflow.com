{
  "id": 2605,
  "slug": "2605",
  "title": "Generate leads with Google Maps",
  "description": "This workflow leverages **n8n** to perform automated Google Maps API queries and manage data efficiently in Google Sheets. It's designed to extract specific location data based on a given list of ZIP codes and categories.\n\n---\n\n## Features\n- Queries the Google Maps API for location data using predefined ZIP codes and subcategories.\n- Filters, de-duplicates, and organizes data into structured rows in Google Sheets.\n- Implements **exponential backoff retries** to handle API rate limits.\n- Logs and updates statuses directly in Google Sheets for easy tracking.\n\n---\n\n## Prerequisites\n1. **Google OAuth Credentials**: A configured Google Cloud project for Google Maps API and Sheets API access.\n2. **Google Sheets**: A sheet with ZIP codes and categories defined (e.g., \"AZ Zips\").\n3. **n8n Setup**: A running instance of n8n with credentials configured for Google OAuth.\n\n---\n\n## Setup Instructions\n\n### 1. Prepare Google Sheets\n- Add the ZIP codes to the \"AZ Zips\" sheet.\n- Define subcategories in another sheet (e.g., \"Google Maps Categories\").\n- Provide the sheet's URL in the `Settings` node of the workflow.\n\n### 2. Configure API Access\n- Set up Google OAuth credentials for Maps and Sheets APIs in n8n.\n- Ensure your API key has access to the `places.searchText` endpoint.\n\n### 3. Workflow Customization\n- Modify `textQuery` parameters in the **GMaps API** node to match your query needs.\n- Adjust trigger intervals as required (e.g., manual or scheduled execution).\n\n### 4. Run the Workflow\n- Execute the workflow manually or schedule periodic runs to keep your data updated.\n\n---\n\n## Notes\n- This workflow includes robust error handling to retry failed API calls with exponential backoff.\n- All data is organized and logged directly in Google Sheets for easy reference and updates.\n\nFor more information or issues, feel free to reach out!\n",
  "featuredImage": "/data/workflows/2605/2605.webp",
  "author": {
    "id": 101,
    "slug": "alexk1919",
    "name": "Alex Kim",
    "avatar": ""
  },
  "categories": [
    "Lead Generation"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 147373,
  "downloads": 14737,
  "createdAt": "2024-12-04T22:16:13.814Z",
  "updatedAt": "2026-01-16T08:25:38.518Z",
  "publishedAt": "2024-12-04T22:16:13.814Z",
  "nodes": 42,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2605",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Generate leads with Google Maps",
    "workflowName": "Generate leads with Google Maps",
    "description": "This workflow leverages **n8n** to perform automated Google Maps API queries and manage data efficiently in Google Sheets. It's designed to extract specific location data based on a given list of ZIP codes and categories.\n\n---\n\n## Features\n- Queries the Google Maps API for location data using predefined ZIP codes and subcategories.\n- Filters, de-duplicates, and organizes data into structured rows in Google Sheets.\n- Implements **exponential backoff retries** to handle API rate limits.\n- Logs and updates statuses directly in Google Sheets for easy tracking.\n\n---\n\n## Prerequisites\n1. **Google OAuth Credentials**: A configured Google Cloud project for Google Maps API and Sheets API access.\n2. **Google Sheets**: A sheet with ZIP codes and categories defined (e.g., \"AZ Zips\").\n3. **n8n Setup**: A running instance of n8n with credentials configured for Google OAuth.\n\n---\n\n## Setup Instructions\n\n### 1. Prepare Google Sheets\n- Add the ZIP codes to the \"AZ Zips\" sheet.\n- Define subcategories in another sheet (e.g., \"Google Maps Categories\").\n- Provide the sheet's URL in the `Settings` node of the workflow.\n\n### 2. Configure API Access\n- Set up Google OAuth credentials for Maps and Sheets APIs in n8n.\n- Ensure your API key has access to the `places.searchText` endpoint.\n\n### 3. Workflow Customization\n- Modify `textQuery` parameters in the **GMaps API** node to match your query needs.\n- Adjust trigger intervals as required (e.g., manual or scheduled execution).\n\n### 4. Run the Workflow\n- Execute the workflow manually or schedule periodic runs to keep your data updated.\n\n---\n\n## Notes\n- This workflow includes robust error handling to retry failed API calls with exponential backoff.\n- All data is organized and logged directly in Google Sheets for easy reference and updates.\n\nFor more information or issues, feel free to reach out!",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking \"Execute Workflow\"",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Run workflow every hours",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Check Max Retries1",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Stop and Error1",
      "type": "n8n-nodes-base.stopAndError",
      "role": "stopAndError",
      "configDescription": "Version 1"
    },
    {
      "name": "GMaps API",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Update Status to Success",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Add rows in Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Set Row Number",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Zip",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Set Place ID",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Exponential Backoff",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Remove Duplicates",
      "type": "n8n-nodes-base.removeDuplicates",
      "role": "removeDuplicates",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Check Max Retries",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Stop and Error",
      "type": "n8n-nodes-base.stopAndError",
      "role": "stopAndError",
      "configDescription": "Version 1"
    },
    {
      "name": "Exponential Backoff1",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Wait1",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Settings",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "GS - Get Subcategory",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Subcategory",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "GS - Get Zip Codes",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Place Array",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loop Zips",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Loop Subcats",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "GS - Get Status",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Check Max Retries2",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Stop and Error2",
      "type": "n8n-nodes-base.stopAndError",
      "role": "stopAndError",
      "configDescription": "Version 1"
    },
    {
      "name": "Exponential Backoff2",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Wait2",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Limit",
      "type": "n8n-nodes-base.limit",
      "role": "limit",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note20",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Zips",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Filter Zips",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Filter Subcategories",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "If Empty",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Split Out",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}