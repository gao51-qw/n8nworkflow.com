{
  "id": 2157,
  "slug": "2157",
  "title": "ðŸ¤– Advanced Slackbot with n8n",
  "description": "## Use case\nSlackbots are super powerful. At n8n, we have been using them to get a lot done.. But it can become hard to manage and maintain many different operations that a workflow can do.\n\nThis is the base workflow we use for our most powerful internal Slackbots. They handle a lot from running e2e tests for Github branch to deleting a user. By splitting the workflow into many subworkflows, we are able to handle each command seperately, making it easier to debug as well as support new usecases.\n\nIn this template, you can find eveything to setup your own Slackbot (and I made it simple, there's only one node to configure ðŸ˜‰). After that, you need to build your commands directly. \n\nThis bot can create a new thread on an alerts channel and respond there.\n![Screenshot 20240301 at 07.54.07.png](fileId:769)\n![Screenshot 20240301 at 08.03.33.png](fileId:767)\n\nOr reply directly to the user.\n![Screenshot 20240301 at 07.53.41.png](fileId:766)\n\nIt responds for help request to return a help page.\n![Screenshot 20240301 at 08.16.40.png](fileId:764)\n\nIt automatically handles unknown commands.\n![Screenshot 20240301 at 08.16.54.png](fileId:765)\n\nIt also supports flags and environment variables. For example `/cloudbot-test info mutasem --full-info -e env=prod` would give you the following info, when calling subworkflow.\n![Screenshot 20240301 at 08.34.31.png](fileId:768)\n\n## How to setup\n1. Add Slack command and point it up to the webhook. For example.\n![Screenshot 20240229 at 22.09.40.png](fileId:771)\n2. Add the following to the **Set config** node\n- `alerts_channel` with alerts channel to start threads on\n- `instance_url` with this instance url to make it easy to debug\n- `slack_token` with slack bot token to validate request\n- `slack_secret_signature` with slack secret signature to validate request\n- `help_docs_url` with help url to help users understand the commands \n3. Build other workflows to call and add them to `commands` in **Set Config**. Each command must be mapped to a workflow id with an `Execute Workflow Trigger` node\n4. Activate workflow ðŸš€\n\n## How to adjust\n1. Add your own commands.\n2. Depending on your need, you might need to lock down who can call this.",
  "featuredImage": "/data/workflows/2157/2157.webp",
  "author": {
    "id": 101,
    "slug": "mutasem",
    "name": "Mutasem",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 10688,
  "downloads": 1068,
  "createdAt": "2024-03-01T07:31:03.428Z",
  "updatedAt": "2026-01-16T08:23:20.856Z",
  "publishedAt": "2024-03-01T07:31:03.428Z",
  "nodes": 34,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2157",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "ðŸ¤– Advanced Slackbot with n8n",
    "workflowName": "ðŸ¤– Advanced Slackbot with n8n",
    "description": "## Use case\nSlackbots are super powerful. At n8n, we have been using them to get a lot done.. But it can become hard to manage and maintain many different operations that a workflow can do.\n\nThis is the base workflow we use for our most powerful internal Slackbots. They handle a lot from running e2e tests for Github branch to deleting a user. By splitting the workflow into many subworkflows, we are able to handle each command seperately, making it easier to debug as well as support new usecases.\n\nIn this template, you can find eveything to setup your own Slackbot (and I made it simple, there's only one node to configure ðŸ˜‰). After that, you need to build your commands directly. \n\nThis bot can create a new thread on an alerts channel and respond there.\n![Screenshot 20240301 at 07.54.07.png](fileId:769)\n![Screenshot 20240301 at 08.03.33.png](fileId:767)\n\nOr reply directly to the user.\n![Screenshot 20240301 at 07.53.41.png](fileId:766)\n\nIt responds for help request to return a help page.\n![Screenshot 20240301 at 08.16.40.png](fileId:764)\n\nIt automatically handles unknown commands.\n![Screenshot 20240301 at 08.16.54.png](fileId:765)\n\nIt also supports flags and environment variables. For example `/cloudbot-test info mutasem --full-info -e env=prod` would give you the following info, when calling subworkflow.\n![Screenshot 20240301 at 08.34.31.png](fileId:768)\n\n## How to setup\n1. Add Slack command and point it up to the webhook. For example.\n![Screenshot 20240229 at 22.09.40.png](fileId:771)\n2. Add the following to the **Set config** node\n- `alerts_channel` with alerts channel to start threads on\n- `instance_url` with this instance url to make it easy to debug\n- `slack_token` with slack bot token to validate request\n- `slack_secret_signature` with slack secret signature to validate request\n- `help_docs_url` with help url to help users understand the commands \n3. Build other workflows to call and add them to `commands` in **Set Config**. Each command must be mapped to a workflow id with an `Execute Workflow Trigger` node\n4. Activate workflow ðŸš€\n\n## How to adjust\n1. Add your own commands.\n2. Depending on your need, you might need to lock down who can call this.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Start thread",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2"
    },
    {
      "name": "send help",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate Slack token",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Reply to user that command was received",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "if has workflow",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Set config",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.3"
    },
    {
      "name": "Send debug url",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 2"
    },
    {
      "name": "if create thread",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Alert user that thread was created",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 2"
    },
    {
      "name": "Add debug info",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2"
    },
    {
      "name": "Execute target workflow",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1"
    },
    {
      "name": "Add thread info",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 2"
    },
    {
      "name": "Handle other commands",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3"
    },
    {
      "name": "Set thread info",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 1"
    },
    {
      "name": "Unknown command",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 1"
    },
    {
      "name": "Set vars",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.3"
    },
    {
      "name": "Webhook to call for Slack command",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Reply to user directly",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Command workflow trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "if has flag",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "If matches env variable",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Found user",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 2"
    },
    {
      "name": "Format data into nice structure",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "REPLACE ME WITH TRIGGER",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.3"
    },
    {
      "name": "Delete user here for example",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Get user here for example",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Confirm user was deleted",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2"
    },
    {
      "name": "Replying to thread",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "parse command",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate webhook signature",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    }
  ]
}