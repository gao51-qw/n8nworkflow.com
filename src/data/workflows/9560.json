{
  "id": 9560,
  "slug": "9560",
  "title": "Automatically send WhatsApp discount codes to Shopify customers using Rapiwa",
  "description": "# Automatically Send WhatsApp Discount Codes to Shopify Customers Using Rapiwa\n\n## Who is this for?\nThis n8n workflow **automatically sends WhatsApp promotional messages to top customers** whenever a new discount code is created in Shopify. It’s perfect for store owners, marketers, sales teams, or support agents who want to engage their best customers effortlessly. The workflow fetches customer data, filters high-spending customers, verifies their WhatsApp numbers using the Rapiwa API, sends discount messages to verified contacts, and logs all activity in Google Sheets. Designed for non-technical users who don’t use the official WhatsApp Business API, this automation simplifies customer outreach and tracking without any manual work.\n\n## What this Workflow Does\nThis **n8n workflow** connects with a **Google Sheet** that contains a list of contacts. It reads rows marked for processing, cleans the phone numbers, checks their validity using **Rapiwa's WhatsApp validation API**, sends WhatsApp messages to valid numbers, and updates the status of each row accordingly.\n\n\n\n## Key Features\n- **Runs Every 5 Minutes**: Automatically triggers the workflow\n- **Google Sheets Integration**: Reads and writes data from a specific sheet\n- **Phone Number Validation**: Confirms if a WhatsApp number is active via Rapiwa API\n- **Message Sending**: Sends a message using Rapiwa's `/send-message` endpoint\n- **Status Update**: Sheet is updated with success or failure status\n- **Safe API Usage**: Delays added between requests to prevent rate limits\n- **Batch Limit**: Processes max 60 rows per cycle\n- **Conditional Checks**: Skips rows without a \"check\" value\n\n## Requirements\n- A **Google Sheet** with necessary columns\n- **Rapiwa account** with active subscription (you can free 200 message)\n- Your WhatsApp number connected to Rapiwa\n- Valid **Bearer Token**\n- **n8n Instance** (self-hosted or cloud)\n  - Google Sheets node configured\n  - HTTP Request node access\n\n\n## How to Use\n### Step-by-Step Setup\n\n1. **Webhook**\n   - Receives Shopify Webhook (discount creation) via HTTP POST request.  \nThis is triggered when a discount is created in your Shopify store.\n\n1. **Configure Google Sheets in n8n**\n   - Use the Google Sheets node with OAuth2 access\n\n2. **Get Rapiwa API Token**\n   - Create an account on [Rapiwa](https://rapiwa.com/pricing/)\n   - Connect your WhatsApp number\n   - Copy your **Bearer Token** from the Rapiwa dashboard\n\n3. **Set Up HTTP Request Nodes**\n   - Validate number via: `https://app.rapiwa.com/api/verify-whatsapp`\n   - Send message via: `https://app.rapiwa.com/api/send-message`\n   - Add your bearer token to the headers\n\n---\n\n## Google Sheet Column Structure\n- **A Google Sheet** formatted like this ➤ [Sample](https://docs.google.com/spreadsheets/d/1Zx_WXQW29NsITFPJ-SnjHgOlouvzG_sBNGzSA_B8cSA/edit?usp=sharing)\n\n\n| discount_code   | created_at                | shop_domain             | name           | number        | verify     | status   |\n| -------------------------------------------- | ------- | ------------------------- | ----------------------- | -------------- | ------------- | ---------- | -------- |\n| V8ZGVRDFP5TB | 2025-09-25T05:26:40-04:00 | your_shop_domain | Abdul Mannan    | 8801322827798| unverified | not sent |\n| V8ZGVRDFP5TB | 2025-09-25T05:26:40-04:00 | your_shop_domain | Abdul Mannan         | 8801322827799| verified   | sent     |\n\n\n---\n\n## Support & Help\n- **Rapiwa Website:** [https://rapiwa.com](https://rapiwa.com/)\n- **WhatsApp**: [Chat on WhatsApp](https://wa.me/8801322827799)\n- **Discord**: [SpaGreen Community](https://discord.gg/SsCChWEP)\n- **Facebook Group**: [SpaGreen Support](https://www.facebook.com/groups/spagreenbd)\n- **Website**: [https://spagreen.net](https://spagreen.net)\n- **Developer Portfolio**: [Codecanyon SpaGreen](https://codecanyon.net/user/spagreen/portfolio)\n",
  "featuredImage": "/data/workflows/9560/9560.webp",
  "author": {
    "id": 101,
    "slug": "rapiwa",
    "name": "Rapiwa",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 55,
  "downloads": 5,
  "createdAt": "2025-10-13T07:24:06.233Z",
  "updatedAt": "2026-01-16T09:00:58.284Z",
  "publishedAt": "2025-10-13T07:24:06.233Z",
  "nodes": 17,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9560",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automatically send WhatsApp discount codes to Shopify customers using Rapiwa",
    "workflowName": "Automatically send WhatsApp discount codes to Shopify customers using Rapiwa",
    "description": "# Automatically Send WhatsApp Discount Codes to Shopify Customers Using Rapiwa\n\n## Who is this for?\nThis n8n workflow **automatically sends WhatsApp promotional messages to top customers** whenever a new discount code is created in Shopify. It’s perfect for store owners, marketers, sales teams, or support agents who want to engage their best customers effortlessly. The workflow fetches customer data, filters high-spending customers, verifies their WhatsApp numbers using the Rapiwa API, sends discount messages to verified contacts, and logs all activity in Google Sheets. Designed for non-technical users who don’t use the official WhatsApp Business API, this automation simplifies customer outreach and tracking without any manual work.\n\n## What this Workflow Does\nThis **n8n workflow** connects with a **Google Sheet** that contains a list of contacts. It reads rows marked for processing, cleans the phone numbers, checks their validity using **Rapiwa's WhatsApp validation API**, sends WhatsApp messages to valid numbers, and updates the status of each row accordingly.\n\n\n\n## Key Features\n- **Runs Every 5 Minutes**: Automatically triggers the workflow\n- **Google Sheets Integration**: Reads and writes data from a specific sheet\n- **Phone Number Validation**: Confirms if a WhatsApp number is active via Rapiwa API\n- **Message Sending**: Sends a message using Rapiwa's `/send-message` endpoint\n- **Status Update**: Sheet is updated with success or failure status\n- **Safe API Usage**: Delays added between requests to prevent rate limits\n- **Batch Limit**: Processes max 60 rows per cycle\n- **Conditional Checks**: Skips rows without a \"check\" value\n\n## Requirements\n- A **Google Sheet** with necessary columns\n- **Rapiwa account** with active subscription (you can free 200 message)\n- Your WhatsApp number connected to Rapiwa\n- Valid **Bearer Token**\n- **n8n Instance** (self-hosted or cloud)\n  - Google Sheets node configured\n  - HTTP Request node access\n\n\n## How to Use\n### Step-by-Step Setup\n\n1. **Webhook**\n   - Receives Shopify Webhook (discount creation) via HTTP POST request.  \nThis is triggered when a discount is created in your Shopify store.\n\n1. **Configure Google Sheets in n8n**\n   - Use the Google Sheets node with OAuth2 access\n\n2. **Get Rapiwa API Token**\n   - Create an account on [Rapiwa](https://rapiwa.com/pricing/)\n   - Connect your WhatsApp number\n   - Copy your **Bearer Token** from the Rapiwa dashboard\n\n3. **Set Up HTTP Request Nodes**\n   - Validate number via: `https://app.rapiwa.com/api/verify-whatsapp`\n   - Send message via: `https://app.rapiwa.com/api/send-message`\n   - Add your bearer token to the headers\n\n---\n\n## Google Sheet Column Structure\n- **A Google Sheet** formatted like this ➤ [Sample](https://docs.google.com/spreadsheets/d/1Zx_WXQW29NsITFPJ-SnjHgOlouvzG_sBNGzSA_B8cSA/edit?usp=sharing)\n\n\n| discount_code   | created_at                | shop_domain             | name           | number        | verify     | status   |\n| -------------------------------------------- | ------- | ------------------------- | ----------------------- | -------------- | ------------- | ---------- | -------- |\n| V8ZGVRDFP5TB | 2025-09-25T05:26:40-04:00 | your_shop_domain | Abdul Mannan    | 8801322827798| unverified | not sent |\n| V8ZGVRDFP5TB | 2025-09-25T05:26:40-04:00 | your_shop_domain | Abdul Mannan         | 8801322827799| verified   | sent     |\n\n\n---\n\n## Support & Help\n- **Rapiwa Website:** [https://rapiwa.com](https://rapiwa.com/)\n- **WhatsApp**: [Chat on WhatsApp](https://wa.me/8801322827799)\n- **Discord**: [SpaGreen Community](https://discord.gg/SsCChWEP)\n- **Facebook Group**: [SpaGreen Support](https://www.facebook.com/groups/spagreenbd)\n- **Website**: [https://spagreen.net](https://spagreen.net)\n- **Developer Portfolio**: [Codecanyon SpaGreen](https://codecanyon.net/user/spagreen/portfolio)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Clean WhatsApp Number",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Clean Webhooks Response Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get All Customer Data In Shopify Store",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Clean Customer Data In Shopify Store",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Save data Sheet Unverified & Not sent",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Save data in Sheet Verified & Sent",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Rapiwa",
      "type": "n8n-nodes-rapiwa.rapiwa",
      "role": "rapiwa",
      "configDescription": "Version 1"
    },
    {
      "name": "Rapiwa1",
      "type": "n8n-nodes-rapiwa.rapiwa",
      "role": "rapiwa",
      "configDescription": "Version 1"
    }
  ]
}