{
  "id": 10924,
  "slug": "10924",
  "title": "Voice AI chatbot with OpenAI, RAG (Qdrant) & Guardrails for WordPress",
  "description": "This workflow implements a **complete Voice AI Chatbot system** for **Wordress** that integrates speech recognition, guardrails for safety, retrieval-augmented generation (RAG), Qdrant vector search, and audio responses. It is designed to be connected to a **WordPress Voicebot AI plugin** through a webhook endpoint.\n\n---\n\n### **Key Advantages**\n\n* ✅ Complete Voice AI Pipeline**\nThe workflow handles:\n\t* audio input\n\t* STT\n\t* intelligent processing\n\t* TTS output\n  All within a single automated process.\n\n* ✅ **Safe and Policy-Compliant**\nThanks to the **Guardrails module**, the system automatically:\n\t* detects harmful or disallowed requests\n\t* blocks them\n\t* responds safely\n  This protects both the user and the business.\n\n* ✅ **Contextual and Memory-Based Conversations**\t\nThe **Window Buffer Memory** tied to unique session IDs enables:\n\t* continuous conversation flow\n\t* natural dialogue\n\t* better understanding of context\n\n* ✅ **Company-Specific Knowledge via RAG**\nBy integrating Qdrant as a vector store, the system can:\n\t* retrieve business documentation\n\t* give accurate and up-to-date answers\n\t* support personalized content\nThis makes the chatbot far more powerful than a standard LLM.\n\n* ✅ **Modular and Extensible Architecture**\nBecause everything is modular inside n8n, you can:\n\t* swap OpenAI with other models\n\t* add new tools or knowledge sources\n\t* change prompts or capabilities\n  without redesigning the entire workflow.\n\n* ✅ **Easy WordPress Integration\nThe workflow connects directly to a **WordPress Voicebot plugin**, meaning:\n\t* no custom backend development\n\t* simple deployment\n\t* fast integration for websites\n\n* ✅ **Automatic Indexing of Documents**\nThe second workflow section:\n\t* fetches Google Drive files\n\t* converts them into embeddings\n\t* indexes them into Qdrant\nThis lets you maintain your knowledge base with almost no manual work.\n\n---\n\n### How It Works\n\nThis workflow creates a Wordpress voice-enabled AI chatbot that processes audio inputs and provides contextual responses using RAG (Retrieval-Augmented Generation) from a Qdrant vector database. The system operates as follows:\n\n1. **Audio Processing Pipeline**:\n   - Receives audio input via webhook and converts speech to text using OpenAI's STT (Speech-to-Text)\n   - Applies guardrails to detect inappropriate content or jailbreak attempts using a separate GPT-4.1-mini model\n   - Routes safe queries to the AI agent and blocks unsafe content with a default response\n\n2. **AI Agent with Contextual Memory**:\n   - Uses OpenAI Chat Model with window buffer memory to maintain conversation context\n   - Equips the agent with two tools: Calculator for computations and RAG tool for business knowledge retrieval\n   - The RAG system queries Qdrant vector store containing company documents using OpenAI embeddings\n\n3. **Response Generation**:\n   - Generates appropriate text responses based on query type and available knowledge\n   - Converts approved responses to audio using OpenAI's TTS (Text-to-Speech) with \"onyx\" voice\n   - Returns binary audio responses to the webhook caller\n\n---\n\n### Set Up Steps\n\n1. **Vector Database Preparation**:\n   - Create Qdrant collection via HTTP request with specified vector configuration\n   - Clear existing collection data before adding new documents\n   - Set up Google Drive integration to source documents from specific folders\n\n2. **Document Processing Pipeline**:\n   - Search and retrieve files from Google Drive folder \"Test Negozio\"\n   - Process documents through recursive text splitting (500 chunk size, 50 overlap)\n   - Generate embeddings using OpenAI and store in Qdrant vector store\n   - Implement batch processing with 5-second delays between operations\n\n3. **System Configuration**:\n   - Configure webhook endpoint for receiving audio inputs\n   - Set up multiple OpenAI accounts for different functions (STT, TTS, guardrails, main agent)\n   - Establish Qdrant API connections for vector storage and retrieval\n   - Implement session-based memory management using session IDs from webhook headers\n\n4. **WordPress Integration**:\n   - Install the provided Voicebot AI Agent WordPress plugin\n   - Configure the plugin with the webhook URL to connect to this n8n workflow\n   - The system is now ready to receive audio queries and respond with voice answers\n\nThe workflow handles both real-time voice queries and background document processing, creating a comprehensive voice assistant solution with business-specific knowledge retrieval capabilities.\n\n---\n\n\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/). ",
  "featuredImage": "/data/workflows/10924/10924.webp",
  "author": {
    "id": 101,
    "slug": "n3witalia",
    "name": "Davide",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 650,
  "downloads": 65,
  "createdAt": "2025-11-17T12:59:05.068Z",
  "updatedAt": "2026-01-16T09:06:51.883Z",
  "publishedAt": "2025-11-17T12:59:05.068Z",
  "nodes": 34,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10924",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Voice AI chatbot with OpenAI, RAG (Qdrant) & Guardrails for WordPress",
    "workflowName": "Voice AI chatbot with OpenAI, RAG (Qdrant) & Guardrails for WordPress",
    "description": "This workflow implements a **complete Voice AI Chatbot system** for **Wordress** that integrates speech recognition, guardrails for safety, retrieval-augmented generation (RAG), Qdrant vector search, and audio responses. It is designed to be connected to a **WordPress Voicebot AI plugin** through a webhook endpoint.\n\n---\n\n### **Key Advantages**\n\n* ✅ Complete Voice AI Pipeline**\nThe workflow handles:\n\t* audio input\n\t* STT\n\t* intelligent processing\n\t* TTS output\n  All within a single automated process.\n\n* ✅ **Safe and Policy-Compliant**\nThanks to the **Guardrails module**, the system automatically:\n\t* detects harmful or disallowed requests\n\t* blocks them\n\t* responds safely\n  This protects both the user and the business.\n\n* ✅ **Contextual and Memory-Based Conversations**\t\nThe **Window Buffer Memory** tied to unique session IDs enables:\n\t* continuous conversation flow\n\t* natural dialogue\n\t* better understanding of context\n\n* ✅ **Company-Specific Knowledge via RAG**\nBy integrating Qdrant as a vector store, the system can:\n\t* retrieve business documentation\n\t* give accurate and up-to-date answers\n\t* support personalized content\nThis makes the chatbot far more powerful than a standard LLM.\n\n* ✅ **Modular and Extensible Architecture**\nBecause everything is modular inside n8n, you can:\n\t* swap OpenAI with other models\n\t* add new tools or knowledge sources\n\t* change prompts or capabilities\n  without redesigning the entire workflow.\n\n* ✅ **Easy WordPress Integration\nThe workflow connects directly to a **WordPress Voicebot plugin**, meaning:\n\t* no custom backend development\n\t* simple deployment\n\t* fast integration for websites\n\n* ✅ **Automatic Indexing of Documents**\nThe second workflow section:\n\t* fetches Google Drive files\n\t* converts them into embeddings\n\t* indexes them into Qdrant\nThis lets you maintain your knowledge base with almost no manual work.\n\n---\n\n### How It Works\n\nThis workflow creates a Wordpress voice-enabled AI chatbot that processes audio inputs and provides contextual responses using RAG (Retrieval-Augmented Generation) from a Qdrant vector database. The system operates as follows:\n\n1. **Audio Processing Pipeline**:\n   - Receives audio input via webhook and converts speech to text using OpenAI's STT (Speech-to-Text)\n   - Applies guardrails to detect inappropriate content or jailbreak attempts using a separate GPT-4.1-mini model\n   - Routes safe queries to the AI agent and blocks unsafe content with a default response\n\n2. **AI Agent with Contextual Memory**:\n   - Uses OpenAI Chat Model with window buffer memory to maintain conversation context\n   - Equips the agent with two tools: Calculator for computations and RAG tool for business knowledge retrieval\n   - The RAG system queries Qdrant vector store containing company documents using OpenAI embeddings\n\n3. **Response Generation**:\n   - Generates appropriate text responses based on query type and available knowledge\n   - Converts approved responses to audio using OpenAI's TTS (Text-to-Speech) with \"onyx\" voice\n   - Returns binary audio responses to the webhook caller\n\n---\n\n### Set Up Steps\n\n1. **Vector Database Preparation**:\n   - Create Qdrant collection via HTTP request with specified vector configuration\n   - Clear existing collection data before adding new documents\n   - Set up Google Drive integration to source documents from specific folders\n\n2. **Document Processing Pipeline**:\n   - Search and retrieve files from Google Drive folder \"Test Negozio\"\n   - Process documents through recursive text splitting (500 chunk size, 50 overlap)\n   - Generate embeddings using OpenAI and store in Qdrant vector store\n   - Implement batch processing with 5-second delays between operations\n\n3. **System Configuration**:\n   - Configure webhook endpoint for receiving audio inputs\n   - Set up multiple OpenAI accounts for different functions (STT, TTS, guardrails, main agent)\n   - Establish Qdrant API connections for vector storage and retrieval\n   - Implement session-based memory management using session IDs from webhook headers\n\n4. **WordPress Integration**:\n   - Install the provided Voicebot AI Agent WordPress plugin\n   - Configure the plugin with the webhook URL to connect to this n8n workflow\n   - The system is now ready to receive audio queries and respond with voice answers\n\nThe workflow handles both real-time voice queries and background document processing, creating a comprehensive voice assistant solution with business-specific knowledge retrieval capabilities.\n\n---\n\n\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Window Buffer Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Calculator",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "role": "toolCalculator",
      "configDescription": "Version 1"
    },
    {
      "name": "Qdrant Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.1"
    },
    {
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Guardrails",
      "type": "@n8n/n8n-nodes-langchain.guardrails",
      "role": "guardrails",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.3"
    },
    {
      "name": "RAG",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "role": "toolVectorStore",
      "configDescription": "Version 1"
    },
    {
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Default Data Loader1",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1"
    },
    {
      "name": "Create collection",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Clear collection",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Search files",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Wait 5 sec.",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Insert file",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1"
    },
    {
      "name": "Get files",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Voicebot AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Generate audio (TTS)",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Generate text (STT)",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Default response (TTS)",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Respond default to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}