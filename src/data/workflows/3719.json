{
  "id": 3719,
  "slug": "3719",
  "title": "Extract & classify invoices & receipts with Gmail, OpenAI and Google Drive",
  "description": "### Who is it for?\nAnyone who wants to automatically aggregate their invoices or receipts. Main beneficiaries: small business owners and freelancers.\n\n### How it works\n1.  Creates a folder in Google Drive for uploading invoices and receipts. Responds (Webhook response) with URL to the created folder.\n2.  Gets all emails with attachments from a Gmail mailbox.\n3. (Optional) Filters emails, e.g. exclude emails sent to specific address.\n4.  Filters only PDF attachments.\n5.  Classifies all PDF attachment contents with an AI model (is it a receipt or an invoice?).\n6.  Uploads receipts and invoices to the created Google Drive folder and optionally sends an email with the attachments to, e.g., your accountant.\n\n### Pre-conditions/Requirements\n-   Gmail and Google Drive accounts\n-   A Google Cloud OAuth 2.0 Client ID or a service account with Google Drive and Gmail APIs enabled\n-   OpenAI API account and API key\n\n### Set up steps\n1.  Provide credentials for the nodes: Gmail, Google Drive, OpenAI.\n2.  Configure parameters in the \"Configure\" node. Most importantly:\n    -   \"**sendInvoicesTo**\" for the email address where invoices/receipts should be sent.\n3.  It uses a Webhook node trigger. It expects a body with a schema such as:\n```json\n{\n  \"name\": \"getInvoicesAndReceiptsFromEmails\",\n  \"description\": \"Finds and uploads to Google Drive all receipts and invoices from emails within a specified date range.\",\n  \"parameters\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"startDate\": {\n        \"type\": \"string\",\n        \"format\": \"date-time\",\n        \"description\": \"The start date of the range to search for emails. Must be in ISO 8601 format.\"\n      },\n      \"endDate\": {\n        \"type\": \"string\",\n        \"format\": \"date-time\",\n        \"description\": \"The end date of the range to search for emails. Must be in ISO 8601 format.\"\n      },\n      \"sendEmail\": {\n        \"type\": \"boolean\",\n        \"description\": \"Indicates whether to send an email with all receipts and invoices after processing. Must be true or false.\"\n      }\n    },\n    \"required\": [\n      \"startDate\",\n      \"endDate\"\n    ]\n  }\n}\n```\nExample body:\n```json\n{\n  \"startDate\": \"2025-03-01T00:00:00Z\",\n  \"endDate\": \"2025-04-01T00:00:00Z\",\n  \"sendEmail\": true\n}\n```\n### How to use with AI chat\n\nYou can trigger the workflow with an AI chat that supports tool use, such as [BrowseWiz](https://chromewebstore.google.com/detail/browsewiz-ai-assistant-ai/ioohfnlbpolaalcbppaggpgcgpldohfg). For setup instructions, read [the blog post](https://browsewiz.com/blog/invoice-and-receipt-aggregation-n8n-workflow-and-how-to-add-it-to-browsewiz).",
  "featuredImage": "/data/workflows/3719/3719.webp",
  "author": {
    "id": 101,
    "slug": "devpeer-tom",
    "name": "Tom",
    "avatar": ""
  },
  "categories": [
    "Invoice Processing",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 10390,
  "downloads": 1039,
  "createdAt": "2025-04-26T15:03:19.387Z",
  "updatedAt": "2026-01-16T08:31:17.947Z",
  "publishedAt": "2025-04-26T15:03:19.387Z",
  "nodes": 20,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3719",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Extract & classify invoices & receipts with Gmail, OpenAI and Google Drive",
    "workflowName": "Extract & classify invoices & receipts with Gmail, OpenAI and Google Drive",
    "description": "### Who is it for?\nAnyone who wants to automatically aggregate their invoices or receipts. Main beneficiaries: small business owners and freelancers.\n\n### How it works\n1.  Creates a folder in Google Drive for uploading invoices and receipts. Responds (Webhook response) with URL to the created folder.\n2.  Gets all emails with attachments from a Gmail mailbox.\n3. (Optional) Filters emails, e.g. exclude emails sent to specific address.\n4.  Filters only PDF attachments.\n5.  Classifies all PDF attachment contents with an AI model (is it a receipt or an invoice?).\n6.  Uploads receipts and invoices to the created Google Drive folder and optionally sends an email with the attachments to, e.g., your accountant.\n\n### Pre-conditions/Requirements\n-   Gmail and Google Drive accounts\n-   A Google Cloud OAuth 2.0 Client ID or a service account with Google Drive and Gmail APIs enabled\n-   OpenAI API account and API key\n\n### Set up steps\n1.  Provide credentials for the nodes: Gmail, Google Drive, OpenAI.\n2.  Configure parameters in the \"Configure\" node. Most importantly:\n    -   \"**sendInvoicesTo**\" for the email address where invoices/receipts should be sent.\n3.  It uses a Webhook node trigger. It expects a body with a schema such as:\n```json\n{\n  \"name\": \"getInvoicesAndReceiptsFromEmails\",\n  \"description\": \"Finds and uploads to Google Drive all receipts and invoices from emails within a specified date range.\",\n  \"parameters\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"startDate\": {\n        \"type\": \"string\",\n        \"format\": \"date-time\",\n        \"description\": \"The start date of the range to search for emails. Must be in ISO 8601 format.\"\n      },\n      \"endDate\": {\n        \"type\": \"string\",\n        \"format\": \"date-time\",\n        \"description\": \"The end date of the range to search for emails. Must be in ISO 8601 format.\"\n      },\n      \"sendEmail\": {\n        \"type\": \"boolean\",\n        \"description\": \"Indicates whether to send an email with all receipts and invoices after processing. Must be true or false.\"\n      }\n    },\n    \"required\": [\n      \"startDate\",\n      \"endDate\"\n    ]\n  }\n}\n```\nExample body:\n```json\n{\n  \"startDate\": \"2025-03-01T00:00:00Z\",\n  \"endDate\": \"2025-04-01T00:00:00Z\",\n  \"sendEmail\": true\n}\n```\n### How to use with AI chat\n\nYou can trigger the workflow with an AI chat that supports tool use, such as [BrowseWiz](https://chromewebstore.google.com/detail/browsewiz-ai-assistant-ai/ioohfnlbpolaalcbppaggpgcgpldohfg). For setup instructions, read [the blog post](https://browsewiz.com/blog/invoice-and-receipt-aggregation-n8n-workflow-and-how-to-add-it-to-browsewiz).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "OpenAI",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Configure",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 1"
    },
    {
      "name": "Iterate over email attachments",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Not a PDF",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Is text within token limit?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 2"
    },
    {
      "name": "Is matched",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Upload file to folder",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 2"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Create folder",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Aggregate attachments",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send email with invoices?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Send to my accountant",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Get emails with attachments",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Read PDF email attachments",
      "type": "n8n-nodes-base.readPDF",
      "role": "readPDF",
      "configDescription": "Version 1"
    },
    {
      "name": "Is attachment a PDF?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 1"
    },
    {
      "name": "Optional filter for emails",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}