{
  "id": 8736,
  "slug": "8736",
  "title": "Automate USDC balance between wallet and Aave with 1Shot API & Telegram",
  "description": "![image.png](fileId:2669)\n\n# Automated Savings with 1Shot API and Aave Protocol\n\nWith the increasing popularity of stablecoins like [USDC](https://www.circle.com/), its becoming easier to pay for everyday items with crypto thanks to debit cards from issuers like [MetaMask](https://metamask.io/card). These solutions work by processing payments on traditional payment rails then pulling the stablecoin out of your onchain account to cover the cost of the purchase. \n\nOne downside is that if a stablecoin like USDC is simply sitting in your onchain account, you are missing out on competitive savings rates offered by decentralized protocols like [Aave](https://aave.com/). Often the APY offered by these onchain lending protocols is much higher than those offered by traditional banks while maintaining a low-risk profile for high-quality assets like USDC or [mUSD](https://metamask.io/price/metamask-usd). \n\nIdeally your balance would automatically stay in something like Aave when you don't need it and automatically refill your onchain account used for payments when it gets low. This workflow, powered by [1Shot API](https://1shotapi.com), does just that. It also sends you real time Telegram notifications about your account balance and savings every time your account rebalances. \n\n## Aave Protocol\n\n![image.png](fileId:2748)\n\nThis workflow integrates the [Aave](https://aave.com/) lending protocol to generate savings APY on your excess USDC funds on the [Base](https://www.base.org/) network. When your holdings in your primary [Metamask smart account](https://support.metamask.io/configure/accounts/what-is-a-smart-account/#what-are-metamask-smart-accounts) exceed a threshold you set, it will deposit them into the Aave Lending Pool. This results in your account receiving aBasUSDC, a deposit receipt token used to withdraw your savings at a later time. When your account drops below a refill-threshold you set, it will exchange the aBasUSDC back to USDC and put in back into your primary account so that you can spend it.\n\n## Setup Instructions\n\nThis workflow will automatically balance your USDC funds on Base network so that you keep funds you aren't using in [Aave](https://aave.com/) to earn interest and automatically move funds out of savings back into your wallet when funds get low. \n\n1. Create a free [1Shot API](https://1shotapi.com) account.\n2. Generate an API key & secret and use these to create a credential for the 1Shot API node's.\n3. Click the trigger on the subworkflow to automatically import the required smart contract functions and provision a 1Shot API server wallet on Base that will relay your transactions when you are not online. \n4. Input the contract method IDs from 1Shot API into the \"Savings Config\" node. \n5. Set your saving thresholds in the \"Savings Config\" node.\n6. Create a Telegram bot and use the bot's API key to generate a credential for the Telegram nodes. Get your chat id with the bot and input it into the \"Savings Config\" node. \n7. Configure your desired schedule in the \"Schedule\" trigger node (like every 24 hours)\n8. Activate the workflow.",
  "featuredImage": "/data/workflows/8736/8736.webp",
  "author": {
    "id": 101,
    "slug": "oneshotapi",
    "name": "1Shot API",
    "avatar": ""
  },
  "categories": [
    "Crypto Trading"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 34,
  "downloads": 3,
  "createdAt": "2025-09-19T05:34:04.452Z",
  "updatedAt": "2026-01-16T08:57:26.090Z",
  "publishedAt": "2025-09-19T05:34:04.452Z",
  "nodes": 35,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8736",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate USDC balance between wallet and Aave with 1Shot API & Telegram",
    "workflowName": "Automate USDC balance between wallet and Aave with 1Shot API & Telegram",
    "description": "![image.png](fileId:2669)\n\n# Automated Savings with 1Shot API and Aave Protocol\n\nWith the increasing popularity of stablecoins like [USDC](https://www.circle.com/), its becoming easier to pay for everyday items with crypto thanks to debit cards from issuers like [MetaMask](https://metamask.io/card). These solutions work by processing payments on traditional payment rails then pulling the stablecoin out of your onchain account to cover the cost of the purchase. \n\nOne downside is that if a stablecoin like USDC is simply sitting in your onchain account, you are missing out on competitive savings rates offered by decentralized protocols like [Aave](https://aave.com/). Often the APY offered by these onchain lending protocols is much higher than those offered by traditional banks while maintaining a low-risk profile for high-quality assets like USDC or [mUSD](https://metamask.io/price/metamask-usd). \n\nIdeally your balance would automatically stay in something like Aave when you don't need it and automatically refill your onchain account used for payments when it gets low. This workflow, powered by [1Shot API](https://1shotapi.com), does just that. It also sends you real time Telegram notifications about your account balance and savings every time your account rebalances. \n\n## Aave Protocol\n\n![image.png](fileId:2748)\n\nThis workflow integrates the [Aave](https://aave.com/) lending protocol to generate savings APY on your excess USDC funds on the [Base](https://www.base.org/) network. When your holdings in your primary [Metamask smart account](https://support.metamask.io/configure/accounts/what-is-a-smart-account/#what-are-metamask-smart-accounts) exceed a threshold you set, it will deposit them into the Aave Lending Pool. This results in your account receiving aBasUSDC, a deposit receipt token used to withdraw your savings at a later time. When your account drops below a refill-threshold you set, it will exchange the aBasUSDC back to USDC and put in back into your primary account so that you can spend it.\n\n## Setup Instructions\n\nThis workflow will automatically balance your USDC funds on Base network so that you keep funds you aren't using in [Aave](https://aave.com/) to earn interest and automatically move funds out of savings back into your wallet when funds get low. \n\n1. Create a free [1Shot API](https://1shotapi.com) account.\n2. Generate an API key & secret and use these to create a credential for the 1Shot API node's.\n3. Click the trigger on the subworkflow to automatically import the required smart contract functions and provision a 1Shot API server wallet on Base that will relay your transactions when you are not online. \n4. Input the contract method IDs from 1Shot API into the \"Savings Config\" node. \n5. Set your saving thresholds in the \"Savings Config\" node.\n6. Create a Telegram bot and use the bot's API key to generate a credential for the Telegram nodes. Get your chat id with the bot and input it into the \"Savings Config\" node. \n7. Configure your desired schedule in the \"Schedule\" trigger node (like every 24 hours)\n8. Activate the workflow.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Calculate Excess Funds",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Deposit Confirmation",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Calculate Insufficient Funds",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Withdraw from Aave",
      "type": "n8n-nodes-1shot.oneShotSynch",
      "role": "oneShotSynch",
      "configDescription": "Version 1"
    },
    {
      "name": "Withdraw Confirmation",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Savings Configs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Check User's Aave Savings",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Check User's USDC Balance",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "No Change, Send Account Status",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Insufficient Savings Warning",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Deposit Failure Notification",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Withdraw Failure Notification",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Confirm User's USDC Balance After Withdraw",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Confirm User's Aave Savings After Withdraw",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Confirm User's USDC Balance After Deposit",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Confirm User's Aave Savings After Deposit",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "List wallets",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Wallet ID",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Assure aBasUSDC",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Assure Aave: Pool Proxy (Base)",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Assure USDC (Base)",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Check User Has Sufficient Savings",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Check for Base Wallet",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Create Base wallet",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "USDC Approve",
      "type": "n8n-nodes-1shot.oneShotSynch",
      "role": "oneShotSynch",
      "configDescription": "Version 1"
    },
    {
      "name": "Aave Supply",
      "type": "n8n-nodes-1shot.oneShotSynch",
      "role": "oneShotSynch",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Code in JavaScript",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    }
  ]
}