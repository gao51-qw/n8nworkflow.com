{
  "id": 12246,
  "slug": "12246",
  "title": "Monitor hotel competitor rates and answer WhatsApp Q&A using OpenAI GPT-4.1",
  "description": "## How It Works\n***Top Branch Workflow A***\n\n**1. The Market Intelligence:** \n- **Patrols the Market:** Runs hourly to scrape competitor rates for future days.\n- **Gathers Intel:** If prices spike, it instantly checks event announcements to see if a major event is driving demand.\n- **Crunches Numbers:** Calculates the exact price gap and filters out noise.\n\n**2. The Revenue Manager:** \n- **Sets Strategy:** The AI Agent reviews the price gaps, competitor moves, and event signals.\n- **Reports:** Writes a strategic Executive Summary and sends it to your WhatsApp.\n\n\n***Bottom Branch Workflow B***\n\n**3. The Consultant:** \n - **Recall:** When you ask a question via WhatsApp, the bot retrieves the saved analysis, historical rates, and event schedule.\n  - **Answer:** It acts as an on-demand analyst, conducting further analysis to give an informed answer to questions\n\n\n## Setup Steps\n**1. Config:** Add your hotel + competitor hotels (IDs/names) in the Config node.\n\n**2. Monitor Window:** Set how far ahead you want to monitor (e.g., daysAhead = 30) in the Config node.\n\n**3. Sensitivity:** Set how sensitive alerts should be (e.g., alert only if competitor moves &gt; 10%) in the Significant Competitor Change node.\n\n**4. Connect Credentials:**\n\n- Amadeus (to fetch hotel prices)\n- WhatsApp (to send alerts)\n- Postgres/SQL (to store price snapshots, history, summary)\n- OpenAI (for the AI Agents)\n\n**5. Event Source:** Update the Fetch VCC nodes to scrape your local convention center or event site.\n\n**6. Run a test:**\n\nTrigger Workflow A manually and confirm you receive a WhatsApp alert.\n\nReply to that WhatsApp message to test Workflow B (Q&A).\n\n## Use Cases & Benefits\n**For Revenue Managers:** Automate the \"rate shop\" routine and catch competitor moves without opening a spreadsheet.\n\n**For Sales & Marketing Teams:** Go beyond raw data. Pairing \"what changed\" with \"why changed\" instantly.\n\n**For Hotel Leadership:** Perfect for GMs and division leaders who need instant, decision-ready alerts via WhatsApp.\n\nâš¡ ***Zero-Touch Efficiency:*** Eliminates hours of manual searching by automating rate checks 3x daily. \nðŸ§  ***Contextual Intelligence:*** Tracks price AND explains why it moved by cross-referencing local events. \nðŸ¤– ***Actionable Strategy:*** AI doesn't just report numbers; it recommends specific pricing tactics. \nðŸ“‰ ***Long-Term Vision:*** Builds a permanent database of rate history, enabling the AI to answer complex trend questions over time.\n\n## ðŸ“¬ Want to Customize This?\n[leelin.business@gmail.com](leelin.business@gmail.com)",
  "featuredImage": "/data/workflows/12246/12246.webp",
  "author": {
    "id": 101,
    "slug": "l2l",
    "name": "Lee Lin",
    "avatar": ""
  },
  "categories": [
    "Market Research",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 47,
  "downloads": 4,
  "createdAt": "2025-12-29T02:58:58.642Z",
  "updatedAt": "2026-01-16T09:11:50.560Z",
  "publishedAt": "2025-12-29T02:58:58.642Z",
  "nodes": 48,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/12246",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Monitor hotel competitor rates and answer WhatsApp Q&A using OpenAI GPT-4.1",
    "workflowName": "Monitor hotel competitor rates and answer WhatsApp Q&A using OpenAI GPT-4.1",
    "description": "## How It Works\n***Top Branch Workflow A***\n\n**1. The Market Intelligence:** \n- **Patrols the Market:** Runs hourly to scrape competitor rates for future days.\n- **Gathers Intel:** If prices spike, it instantly checks event announcements to see if a major event is driving demand.\n- **Crunches Numbers:** Calculates the exact price gap and filters out noise.\n\n**2. The Revenue Manager:** \n- **Sets Strategy:** The AI Agent reviews the price gaps, competitor moves, and event signals.\n- **Reports:** Writes a strategic Executive Summary and sends it to your WhatsApp.\n\n\n***Bottom Branch Workflow B***\n\n**3. The Consultant:** \n - **Recall:** When you ask a question via WhatsApp, the bot retrieves the saved analysis, historical rates, and event schedule.\n  - **Answer:** It acts as an on-demand analyst, conducting further analysis to give an informed answer to questions\n\n\n## Setup Steps\n**1. Config:** Add your hotel + competitor hotels (IDs/names) in the Config node.\n\n**2. Monitor Window:** Set how far ahead you want to monitor (e.g., daysAhead = 30) in the Config node.\n\n**3. Sensitivity:** Set how sensitive alerts should be (e.g., alert only if competitor moves &gt; 10%) in the Significant Competitor Change node.\n\n**4. Connect Credentials:**\n\n- Amadeus (to fetch hotel prices)\n- WhatsApp (to send alerts)\n- Postgres/SQL (to store price snapshots, history, summary)\n- OpenAI (for the AI Agents)\n\n**5. Event Source:** Update the Fetch VCC nodes to scrape your local convention center or event site.\n\n**6. Run a test:**\n\nTrigger Workflow A manually and confirm you receive a WhatsApp alert.\n\nReply to that WhatsApp message to test Workflow B (Q&A).\n\n## Use Cases & Benefits\n**For Revenue Managers:** Automate the \"rate shop\" routine and catch competitor moves without opening a spreadsheet.\n\n**For Sales & Marketing Teams:** Go beyond raw data. Pairing \"what changed\" with \"why changed\" instantly.\n\n**For Hotel Leadership:** Perfect for GMs and division leaders who need instant, decision-ready alerts via WhatsApp.\n\nâš¡ ***Zero-Touch Efficiency:*** Eliminates hours of manual searching by automating rate checks 3x daily. \nðŸ§  ***Contextual Intelligence:*** Tracks price AND explains why it moved by cross-referencing local events. \nðŸ¤– ***Actionable Strategy:*** AI doesn't just report numbers; it recommends specific pricing tactics. \nðŸ“‰ ***Long-Term Vision:*** Builds a permanent database of rate history, enabling the AI to answer complex trend questions over time.\n\n## ðŸ“¬ Want to Customize This?\n[leelin.business@gmail.com](leelin.business@gmail.com)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Config",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Generate 30 night windows",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Amadeus OAuth",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Amadeus Hotel Offers",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Prev Snapshot",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "New Snapshot",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Compute Change",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Significant Competitor Change",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Get Our Hotel Rates",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Prefix Our Hotel Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Build VCC URLs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Fetch VCC Month HTML",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Events Extract",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Combine 30-Day Rates",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Get Prev Rates",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Upsert Latest Rates",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Insert History Rates",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Combine New Rates vs Prev Rates",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Combine Competitor Rates vs Our Rates",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Normalize Whatsapp Input",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Prepare AI Agent Input",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Get Hotel_Rates_History",
      "type": "n8n-nodes-base.dataTableTool",
      "role": "dataTableTool",
      "configDescription": "Version 1"
    },
    {
      "name": "WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "role": "whatsAppTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Upsert Hotel Price Alerts",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Alert Summary",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Q&A",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1.1"
    },
    {
      "name": "AI Agent: Q&A",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 3"
    },
    {
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Combine Rates & Events",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Combine Summary & Alert",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "AI Agent: Analyze",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 3"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Daily Market Check",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Extract Event Details",
      "type": "n8n-nodes-base.html",
      "role": "html",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Clean Amadeus Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send WhatsApp Alert",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Filter Text Messages",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.3"
    }
  ]
}