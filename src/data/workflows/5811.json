{
  "id": 5811,
  "slug": "5811",
  "title": "Find leads on Google Maps and reach out automatically (GPT-4 + Airtable + Gmail)",
  "description": "### Who is it for?  \nThis workflow is perfect for **marketers, sales teams, agencies, and local businesses** who want to save time by automating **lead generation from Google Maps**.  \n\nIt‚Äôs ideal for **real estate agencies, restaurants, service providers, and any local niche** that needs a clean database of fresh contacts, including emails, websites, and phone numbers.  \n\n---\n\n## ‚úÖ Prerequisites  \n\nBefore starting, make sure you have:  \n\n- **Apify account** ‚Üí to scrape Google Maps data  \n- **OpenAI API key** ‚Üí for GPT-4 email extraction  \n- **Airtable account & base** ‚Üí for structured lead storage  \n- **Gmail account with OAuth** ‚Üí to send personalized outreach emails  \n\nYour Airtable base should have these columns:  \n\n| Title                   | Street                  | Website            | Phone Number    | Email                  | URL                  |\n|-------------------------|-------------------------|--------------------|-----------------|------------------------|----------------------|\n| Paris Real Estate Agency| 10 Rue de Rivoli, Paris | https://agency.fr  | +33 1 23 45 67  | contact@agency.fr      | maps.google.com/...  |\n\n---\n\n## üè° Example Use Case  \n\nTo keep things clear, we‚Äôll use **real estate agencies in Paris** as an example.  \nBut you can replace this with **restaurants, plumbers, lawyers, or even hamster trainers** (you never know).  \n\n---\n\n## üîÑ How the workflow works  \n\n1. **Scrape Google Maps leads with Apify**  \n2. **Clean & structure the data** (name, phone, website)  \n3. **Visit each website & extract emails with GPT-4**  \n4. **Save all leads into Airtable**  \n5. **Automatically send a personalized email via Gmail**  \n\nThis works for **any industry, keyword, or location**.  \n\n## Step 1 ‚Äì Scraping Google Maps with Apify\n\n![workflown8nleadsbaptistefort.png](fileId:1717)\n\nStart simply:\n\nOpen your n8n workflow and choose the trigger: ‚ÄúExecute Workflow‚Äù (manual trigger).\n\nAdd an HTTP Request node (POST method).\n\nNow, head over to [Apify Google Maps Extractor.](https://apify.com/compass/google-maps-extractor)\n\nFill in the fields according to your needs:\n\nKeyword: e.g., \"real estate agency\" (or restaurant, plumber...)\n\nLocation: \"Paris, France\"\n\nNumber of results: 50 (or more)\n\nOptional: filters (with/without a website, by categories‚Ä¶)\n\nClick Run to test the scraper.\n\nThen **click API ‚Üí select API** endpoints tab.\n\nChoose ‚ÄúRun Actor synchronously and get dataset items‚Äù.\n\n**Copy the URL**, go back to n8n, and paste it into your HTTP Request node (URL field).\n\n![baptistefortautomationleadsn8n.png](fileId:1721)\n\nThen enable:\n\nBody Content Type ‚Üí JSON\n\nSpecify Body Using JSON\n\nGo back to Apify, click the JSON tab, copy everything, and paste it into the **JSON field of your HTTP Request.**\n\nIf you now run your workflow, you'll get a nice structured table filled with Google Maps data. Pretty magical already‚Äîbut we're just getting started!\n\n## Step 2 ‚Äì Cleaning Things Up (Edit Fields)\n\n![n8ncollecteleadsbaptistefort.png](fileId:1722)\n\n\nRaw data is cool, but messy.\n\nAdd an **Edit Fields node next**, using Manual Mapping mode.\n\nHere‚Äôs what you keep (copy-paste friendly):\n\nTitle ‚Üí {{ $json.title }}\n\nAddress ‚Üí {{ $json.address }}\n\nWebsite ‚Üí {{ $json.website }}\n\nPhone ‚Üí {{ $json.phone }}\n\nURL ‚Üí {{ $json.url }}\n\nNow, you have a clean, readable table ready to use.\n\n## Step 3 ‚Äì Handling Each Contact Individually (Loop Over Items)\n\n![baptistefortworkflowleadsn8nautomatisationMALT.png](fileId:1724)\n\nNext, we process each contact one by one.\n\nAdd the **Loop Over Items node:**\n\nSet Batch Size to 20 or more, depending on your needs.\n\nThis node is simple but crucial to avoid traffic jams in the automation.\n\n## Step 4 ‚Äì Isolating Websites (Edit Fields again)\n\n![baptistefortnocodeleadsn8n.png](fileId:1720)\n\nAdd another Edit Fields node (Manual Mapping).\nThis time, keep just:\n\nWebsite ‚Üí {{ $json.website }}\n\nWe've **isolated the websites for the next step**: scraping them one by one.\n\n## Step 5 ‚Äì Scraping Each Website (HTTP Request)\n\n![centralisationleadsn8nbaptistefort.png](fileId:1725)\n\nNow, we send our little robot to visit each website automatically.\n\nAdd another HTTP Request node:\n\nMethod: GET\n\nURL: {{ $json.website }} (from the previous node)\n\nThis returns the raw HTML content of each site. Yes, it's ugly, but we won't handle it manually. We'll leave the **next step to AI!**\n\n## Step 6 ‚Äì Extracting Emails with ChatGPT\n\n![n8nopenaileadsbaptistefort.png](fileId:1719)\n\nWe now use OpenAI (Message a Model) to politely ask GPT to **extract only relevant emails.**\n\nConfigure as follows:\n\nModel: GPT-4-1-mini or higher\n\nOperation: Message a Model\n\nSimplify Output: ON\n\n**Prompt to copy-paste:**\n\n*Look at this website content and extract only the email I can contact this business. In your output, provide only the email and nothing else. Ideally, this email should be of the business owner, so if you have 2 or more options, try for the most authoritative one. If you don't find any email, output 'Null'.*\n\n*Exemplary output of yours:*\n*name@examplewebsite.com*\n\n*{{ $json.data }}*\n\nChatGPT will kindly return the perfect email address (or 'Null' if none is found).\n\n## Step 7 ‚Äì Neatly Store Everything in Airtable\n\n![baptisteforttuton8nleadsautomation.png](fileId:1723)\n\nAlmost done! Add an Airtable ‚Üí Create Record node.\n\n**Fill your Airtable fields like this:**\n\n| **Airtable Field** | **Content**                     | **n8n Variable**                           |\n| ------------------ | ------------------------------- | ------------------------------------------ |\n| Title              | Business name                   | `{{ $('Edit Fields').item.json.Title }}`   |\n| Street             | Full address                    | `{{ $('Edit Fields').item.json.Address }}` |\n| Website            | Website URL                     | `{{ $('Edit Fields').item.json.Website }}` |\n| Phone Number       | Phone number                    | `{{ $('Edit Fields').item.json.Phone }}`   |\n| Email              | Email retrieved by the AI agent | `{{ $json.message.content }}`              |\n| URL                | Google Maps link                | `{{ $('Edit Fields').item.json.URL }}`     |\n\n\nNow, you have a tidy Airtable database filled with fresh leads, ready for action.\n\n## Step 8 ‚Äì Automated Email via Gmail (The Final Touch)\n\n![scraperleadsn8nbaptistefort.png](fileId:1718)\n\nTo finalize the workflow, **add a Gmail ‚Üí Send Email** node after your Airtable node.\n\nHere‚Äôs how to configure this node using the data pulled directly from your Airtable base (from the previous step):\n\nRecipient (To): Retrieve the email stored in Airtable ({{ $json.fields.Email }}).\n\nSubject: Use the company name stored in Airtable ({{ $json.fields.Title }}) to personalize the subject line.\n\nBody: You can include several fields directly from Airtable, such as:\n\nCompany name: \n{{ $json.fields.Title }}\n\nWebsite URL: \n{{ $json.fields.Website }}\n\nPhone number: \n{{ $json.fields[\"Phone Number\"] }}\n\nLink to the Google Maps listing: \n{{ $json.fields.URL }}\n\nAll of this data is available in Airtable because it was automatically inserted in the previous step (Step 7). \n\nThis ensures that each email sent is fully personalized and based on clear, reliable, and structured information.",
  "featuredImage": "/data/workflows/5811/5811.webp",
  "author": {
    "id": 101,
    "slug": "baptistefort",
    "name": "Baptiste Fort",
    "avatar": ""
  },
  "categories": [
    "Lead Generation",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1080,
  "downloads": 108,
  "createdAt": "2025-07-09T08:48:36.876Z",
  "updatedAt": "2026-01-16T08:41:32.344Z",
  "publishedAt": "2025-07-09T08:48:36.876Z",
  "nodes": 19,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5811",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Find leads on Google Maps and reach out automatically (GPT-4 + Airtable + Gmail)",
    "workflowName": "Find leads on Google Maps and reach out automatically (GPT-4 + Airtable + Gmail)",
    "description": "### Who is it for?  \nThis workflow is perfect for **marketers, sales teams, agencies, and local businesses** who want to save time by automating **lead generation from Google Maps**.  \n\nIt‚Äôs ideal for **real estate agencies, restaurants, service providers, and any local niche** that needs a clean database of fresh contacts, including emails, websites, and phone numbers.  \n\n---\n\n## ‚úÖ Prerequisites  \n\nBefore starting, make sure you have:  \n\n- **Apify account** ‚Üí to scrape Google Maps data  \n- **OpenAI API key** ‚Üí for GPT-4 email extraction  \n- **Airtable account & base** ‚Üí for structured lead storage  \n- **Gmail account with OAuth** ‚Üí to send personalized outreach emails  \n\nYour Airtable base should have these columns:  \n\n| Title                   | Street                  | Website            | Phone Number    | Email                  | URL                  |\n|-------------------------|-------------------------|--------------------|-----------------|------------------------|----------------------|\n| Paris Real Estate Agency| 10 Rue de Rivoli, Paris | https://agency.fr  | +33 1 23 45 67  | contact@agency.fr      | maps.google.com/...  |\n\n---\n\n## üè° Example Use Case  \n\nTo keep things clear, we‚Äôll use **real estate agencies in Paris** as an example.  \nBut you can replace this with **restaurants, plumbers, lawyers, or even hamster trainers** (you never know).  \n\n---\n\n## üîÑ How the workflow works  \n\n1. **Scrape Google Maps leads with Apify**  \n2. **Clean & structure the data** (name, phone, website)  \n3. **Visit each website & extract emails with GPT-4**  \n4. **Save all leads into Airtable**  \n5. **Automatically send a personalized email via Gmail**  \n\nThis works for **any industry, keyword, or location**.  \n\n## Step 1 ‚Äì Scraping Google Maps with Apify\n\n![workflown8nleadsbaptistefort.png](fileId:1717)\n\nStart simply:\n\nOpen your n8n workflow and choose the trigger: ‚ÄúExecute Workflow‚Äù (manual trigger).\n\nAdd an HTTP Request node (POST method).\n\nNow, head over to [Apify Google Maps Extractor.](https://apify.com/compass/google-maps-extractor)\n\nFill in the fields according to your needs:\n\nKeyword: e.g., \"real estate agency\" (or restaurant, plumber...)\n\nLocation: \"Paris, France\"\n\nNumber of results: 50 (or more)\n\nOptional: filters (with/without a website, by categories‚Ä¶)\n\nClick Run to test the scraper.\n\nThen **click API ‚Üí select API** endpoints tab.\n\nChoose ‚ÄúRun Actor synchronously and get dataset items‚Äù.\n\n**Copy the URL**, go back to n8n, and paste it into your HTTP Request node (URL field).\n\n![baptistefortautomationleadsn8n.png](fileId:1721)\n\nThen enable:\n\nBody Content Type ‚Üí JSON\n\nSpecify Body Using JSON\n\nGo back to Apify, click the JSON tab, copy everything, and paste it into the **JSON field of your HTTP Request.**\n\nIf you now run your workflow, you'll get a nice structured table filled with Google Maps data. Pretty magical already‚Äîbut we're just getting started!\n\n## Step 2 ‚Äì Cleaning Things Up (Edit Fields)\n\n![n8ncollecteleadsbaptistefort.png](fileId:1722)\n\n\nRaw data is cool, but messy.\n\nAdd an **Edit Fields node next**, using Manual Mapping mode.\n\nHere‚Äôs what you keep (copy-paste friendly):\n\nTitle ‚Üí {{ $json.title }}\n\nAddress ‚Üí {{ $json.address }}\n\nWebsite ‚Üí {{ $json.website }}\n\nPhone ‚Üí {{ $json.phone }}\n\nURL ‚Üí {{ $json.url }}\n\nNow, you have a clean, readable table ready to use.\n\n## Step 3 ‚Äì Handling Each Contact Individually (Loop Over Items)\n\n![baptistefortworkflowleadsn8nautomatisationMALT.png](fileId:1724)\n\nNext, we process each contact one by one.\n\nAdd the **Loop Over Items node:**\n\nSet Batch Size to 20 or more, depending on your needs.\n\nThis node is simple but crucial to avoid traffic jams in the automation.\n\n## Step 4 ‚Äì Isolating Websites (Edit Fields again)\n\n![baptistefortnocodeleadsn8n.png](fileId:1720)\n\nAdd another Edit Fields node (Manual Mapping).\nThis time, keep just:\n\nWebsite ‚Üí {{ $json.website }}\n\nWe've **isolated the websites for the next step**: scraping them one by one.\n\n## Step 5 ‚Äì Scraping Each Website (HTTP Request)\n\n![centralisationleadsn8nbaptistefort.png](fileId:1725)\n\nNow, we send our little robot to visit each website automatically.\n\nAdd another HTTP Request node:\n\nMethod: GET\n\nURL: {{ $json.website }} (from the previous node)\n\nThis returns the raw HTML content of each site. Yes, it's ugly, but we won't handle it manually. We'll leave the **next step to AI!**\n\n## Step 6 ‚Äì Extracting Emails with ChatGPT\n\n![n8nopenaileadsbaptistefort.png](fileId:1719)\n\nWe now use OpenAI (Message a Model) to politely ask GPT to **extract only relevant emails.**\n\nConfigure as follows:\n\nModel: GPT-4-1-mini or higher\n\nOperation: Message a Model\n\nSimplify Output: ON\n\n**Prompt to copy-paste:**\n\n*Look at this website content and extract only the email I can contact this business. In your output, provide only the email and nothing else. Ideally, this email should be of the business owner, so if you have 2 or more options, try for the most authoritative one. If you don't find any email, output 'Null'.*\n\n*Exemplary output of yours:*\n*name@examplewebsite.com*\n\n*{{ $json.data }}*\n\nChatGPT will kindly return the perfect email address (or 'Null' if none is found).\n\n## Step 7 ‚Äì Neatly Store Everything in Airtable\n\n![baptisteforttuton8nleadsautomation.png](fileId:1723)\n\nAlmost done! Add an Airtable ‚Üí Create Record node.\n\n**Fill your Airtable fields like this:**\n\n| **Airtable Field** | **Content**                     | **n8n Variable**                           |\n| ------------------ | ------------------------------- | ------------------------------------------ |\n| Title              | Business name                   | `{{ $('Edit Fields').item.json.Title }}`   |\n| Street             | Full address                    | `{{ $('Edit Fields').item.json.Address }}` |\n| Website            | Website URL                     | `{{ $('Edit Fields').item.json.Website }}` |\n| Phone Number       | Phone number                    | `{{ $('Edit Fields').item.json.Phone }}`   |\n| Email              | Email retrieved by the AI agent | `{{ $json.message.content }}`              |\n| URL                | Google Maps link                | `{{ $('Edit Fields').item.json.URL }}`     |\n\n\nNow, you have a tidy Airtable database filled with fresh leads, ready for action.\n\n## Step 8 ‚Äì Automated Email via Gmail (The Final Touch)\n\n![scraperleadsn8nbaptistefort.png](fileId:1718)\n\nTo finalize the workflow, **add a Gmail ‚Üí Send Email** node after your Airtable node.\n\nHere‚Äôs how to configure this node using the data pulled directly from your Airtable base (from the previous step):\n\nRecipient (To): Retrieve the email stored in Airtable ({{ $json.fields.Email }}).\n\nSubject: Use the company name stored in Airtable ({{ $json.fields.Title }}) to personalize the subject line.\n\nBody: You can include several fields directly from Airtable, such as:\n\nCompany name: \n{{ $json.fields.Title }}\n\nWebsite URL: \n{{ $json.fields.Website }}\n\nPhone number: \n{{ $json.fields[\"Phone Number\"] }}\n\nLink to the Google Maps listing: \n{{ $json.fields.URL }}\n\nAll of this data is available in Airtable because it was automatically inserted in the previous step (Step 7). \n\nThis ensures that each email sent is fully personalized and based on clear, reliable, and structured information.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Fetch Business Data from Google Maps (Apify)",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Clean Google Maps Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Manual Workflow Execution",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Iterate Through Each Business Contact",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Extract Only Website URLs",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Fetch Raw HTML Content from Business Website",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Extract Business Email from Website HTML (GPT-4)",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Save Cleaned Lead Data into Airtable",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Send a message",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}