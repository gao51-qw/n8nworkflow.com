{
  "id": 2879,
  "slug": "2879",
  "title": "Book ghostwriting & research AI agent",
  "description": "**How it Works:**\n\n1.  **Trigger:** The workflow is triggered by a webhook, initiated by an Airtable automation.  This automation sends the Book or Chapter record ID and the desired action (e.g., \"Generate Book Details,\" \"Generate Chapters,\" \"Generate Chapter Research,\" \"Generate Chapter Content\").\n2.  **Action Routing:**  A \"Switch\" node directs the workflow based on the `action` query parameter received from the webhook.  This determines which part of the book creation process will be executed.\n3.  **Data Retrieval:**  The workflow fetches the relevant book or chapter data from Airtable using the provided `recordId`.\n4.  **AI Processing:**\n    *   **Book Details Generation:**  If the action is \"Generate Book Details,\" an AI Agent (powered by a Large Language Model (LLM) like Google Gemini and the Perplexity search tool) researches the book idea.  It focuses on crafting a compelling book description, identifying the target audience, and conducting general book research to maximize bestseller potential.  The research brief is then saved back to Airtable.\n    *   **Chapter Generation:** If the action is \"Generate Chapters,\" an LLM generates 7-10 chapter titles and descriptions based on the book idea and previous research.  A structured output parser ensures the chapter data is in the correct format. The chapters are then split into individual items and saved as separate records in the \"Chapter\" table in Airtable, linked to the main book record.\n    *   **Chapter Research Generation:** If the action is \"Generate Chapter Research,\" another AI Agent conducts in-depth research on a specific chapter, using the Perplexity search tool multiple times. It focuses on finding stories, case studies, historical events, and expert perspectives to make the chapter engaging and credible. The research is saved back to the \"Chapter\" record in Airtable.\n    *   **Chapter Content Generation:** If the action is \"Generate Chapter Content,\" an LLM writes the full content of the chapter, using the research gathered in the previous step, the overall book research, and the chapter description.  The generated content is saved back to the \"Chapter\" record in Airtable.\n5.  **Airtable Updates:**  In each of the AI processing steps, the workflow updates the corresponding Airtable record (either \"Book\" or \"Chapter\") with the generated results (research, chapter details, or content) and sets the \"Action\" field back to \"Idle.\"\n\n**Set Up Steps:**\n\n![image.png](fileId:935)\n\n1.  **Airtable Setup (Estimated time: 10-15 minutes):**\n    *   Copy the Airtable base blueprint: [https://airtable.com/appfkz4KUlKvOjtbp/shra78TlDfqLRdSfT](https://airtable.com/appfkz4KUlKvOjtbp/shra78TlDfqLRdSfT). This will create the \"Book\" and \"Chapter\" tables with the necessary fields.\n    *   In the \"Book\" table, create three Airtable Automations:\n        *   **Trigger:** When a record matches conditions -&gt; `Action` is `Generate Book Details`\n        *   **Action:** Run a script. Use the following script:\n\n            ```javascript\n            let autoRoute = input.config();\n            await fetch(autoRoute.webhookUrl + \"?recordId=\" + autoRoute.recordId + \"&action=\" + autoRoute.action);\n            ```\n        *       In the script action's configuration, add three \"Input variables\":\n                 *   `webhookUrl` (map it to your n8n webhook URL, obtained in the next step)\n                 *   `recordId` (map it to the Airtable record ID)\n                 *  `action` (map it to `Action`)\n        *   Repeat this process to create two more automations in the \"Book\" table, identical except triggered when `Action` is `Generate Chapters`, respectively.\n    *   In the \"Chapter\" table, create two Airtable Automations:\n        *   **Trigger:** When a record matches conditions -&gt; `Action` is `Generate Chapter Research`\n        *   **Action:** Run a script (use the same script as above, with the same input variables).\n        *   Create a second automation, identical except triggered when `Action` is `Generate Chapter Content`.\n\n2.  **n8n Setup (Estimated time: 15-20 minutes):**\n    *   Import the provided JSON workflow into n8n.\n    *   **Webhook Node:**\n        *   Copy the \"Test URL\" from the Webhook node.  This is the `webhookUrl` you'll use in the Airtable automations.  *Important: Once you've tested and are ready to go live, switch to the \"Production URL.\"*\n    *   **Airtable Nodes:**\n        *   Configure *all* Airtable nodes (there are eight).  You'll need to connect your Airtable account using OAuth 2.  Select the correct Base (\"Book Agency \\[v1] Cobuild\" or whatever you named it) and Table (\"Book\" or \"Chapter\") for each node.  The field mappings are already defined in the template, but double-check them.\n    *   **LLM Nodes (Google Gemini & OpenAI):**\n        *   Connect your Google Gemini and OpenAI accounts to the respective LLM nodes. You'll need API keys for both. You may also configure different LLM Models.\n    *  **Perplexity Nodes**\n        *  Connect your Perplexity AI API to the Perplexity nodes. You'll need API keys for that.\n    *   **Activate** the workflow.\n\n3. **Testing (Estimated Time: 5-10 minutes):**\n     * Go to your Airtable \"Book\" table. Create a New Record.\n     *  Fill in the \"Idea\" field with a book concept.\n     *  Change the \"Action\" field to \"Generate Book Details\".\n     *   The Airtable automation should trigger, sending a request to your n8n webhook.\n     *   Monitor the n8n execution log to see the workflow in action.\n      *   Check the Airtable record to see if the \"Research\" field is populated.\n      *  Repeat the testing for `Generate Chapters`, `Generate Chapter Research` and `Generate Chapter Content`.",
  "featuredImage": "/data/workflows/2879/2879.webp",
  "author": {
    "id": 101,
    "slug": "agniiiva",
    "name": "Agniva Mahata",
    "avatar": ""
  },
  "categories": [
    "AI",
    "Content Creation"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 1444,
  "downloads": 144,
  "createdAt": "2025-02-11T07:45:24.545Z",
  "updatedAt": "2026-01-16T08:27:01.062Z",
  "publishedAt": "2025-02-11T07:45:24.545Z",
  "nodes": 24,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2879",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Book ghostwriting & research AI agent",
    "workflowName": "Book ghostwriting & research AI agent",
    "description": "**How it Works:**\n\n1.  **Trigger:** The workflow is triggered by a webhook, initiated by an Airtable automation.  This automation sends the Book or Chapter record ID and the desired action (e.g., \"Generate Book Details,\" \"Generate Chapters,\" \"Generate Chapter Research,\" \"Generate Chapter Content\").\n2.  **Action Routing:**  A \"Switch\" node directs the workflow based on the `action` query parameter received from the webhook.  This determines which part of the book creation process will be executed.\n3.  **Data Retrieval:**  The workflow fetches the relevant book or chapter data from Airtable using the provided `recordId`.\n4.  **AI Processing:**\n    *   **Book Details Generation:**  If the action is \"Generate Book Details,\" an AI Agent (powered by a Large Language Model (LLM) like Google Gemini and the Perplexity search tool) researches the book idea.  It focuses on crafting a compelling book description, identifying the target audience, and conducting general book research to maximize bestseller potential.  The research brief is then saved back to Airtable.\n    *   **Chapter Generation:** If the action is \"Generate Chapters,\" an LLM generates 7-10 chapter titles and descriptions based on the book idea and previous research.  A structured output parser ensures the chapter data is in the correct format. The chapters are then split into individual items and saved as separate records in the \"Chapter\" table in Airtable, linked to the main book record.\n    *   **Chapter Research Generation:** If the action is \"Generate Chapter Research,\" another AI Agent conducts in-depth research on a specific chapter, using the Perplexity search tool multiple times. It focuses on finding stories, case studies, historical events, and expert perspectives to make the chapter engaging and credible. The research is saved back to the \"Chapter\" record in Airtable.\n    *   **Chapter Content Generation:** If the action is \"Generate Chapter Content,\" an LLM writes the full content of the chapter, using the research gathered in the previous step, the overall book research, and the chapter description.  The generated content is saved back to the \"Chapter\" record in Airtable.\n5.  **Airtable Updates:**  In each of the AI processing steps, the workflow updates the corresponding Airtable record (either \"Book\" or \"Chapter\") with the generated results (research, chapter details, or content) and sets the \"Action\" field back to \"Idle.\"\n\n**Set Up Steps:**\n\n![image.png](fileId:935)\n\n1.  **Airtable Setup (Estimated time: 10-15 minutes):**\n    *   Copy the Airtable base blueprint: [https://airtable.com/appfkz4KUlKvOjtbp/shra78TlDfqLRdSfT](https://airtable.com/appfkz4KUlKvOjtbp/shra78TlDfqLRdSfT). This will create the \"Book\" and \"Chapter\" tables with the necessary fields.\n    *   In the \"Book\" table, create three Airtable Automations:\n        *   **Trigger:** When a record matches conditions -&gt; `Action` is `Generate Book Details`\n        *   **Action:** Run a script. Use the following script:\n\n            ```javascript\n            let autoRoute = input.config();\n            await fetch(autoRoute.webhookUrl + \"?recordId=\" + autoRoute.recordId + \"&action=\" + autoRoute.action);\n            ```\n        *       In the script action's configuration, add three \"Input variables\":\n                 *   `webhookUrl` (map it to your n8n webhook URL, obtained in the next step)\n                 *   `recordId` (map it to the Airtable record ID)\n                 *  `action` (map it to `Action`)\n        *   Repeat this process to create two more automations in the \"Book\" table, identical except triggered when `Action` is `Generate Chapters`, respectively.\n    *   In the \"Chapter\" table, create two Airtable Automations:\n        *   **Trigger:** When a record matches conditions -&gt; `Action` is `Generate Chapter Research`\n        *   **Action:** Run a script (use the same script as above, with the same input variables).\n        *   Create a second automation, identical except triggered when `Action` is `Generate Chapter Content`.\n\n2.  **n8n Setup (Estimated time: 15-20 minutes):**\n    *   Import the provided JSON workflow into n8n.\n    *   **Webhook Node:**\n        *   Copy the \"Test URL\" from the Webhook node.  This is the `webhookUrl` you'll use in the Airtable automations.  *Important: Once you've tested and are ready to go live, switch to the \"Production URL.\"*\n    *   **Airtable Nodes:**\n        *   Configure *all* Airtable nodes (there are eight).  You'll need to connect your Airtable account using OAuth 2.  Select the correct Base (\"Book Agency \\[v1] Cobuild\" or whatever you named it) and Table (\"Book\" or \"Chapter\") for each node.  The field mappings are already defined in the template, but double-check them.\n    *   **LLM Nodes (Google Gemini & OpenAI):**\n        *   Connect your Google Gemini and OpenAI accounts to the respective LLM nodes. You'll need API keys for both. You may also configure different LLM Models.\n    *  **Perplexity Nodes**\n        *  Connect your Perplexity AI API to the Perplexity nodes. You'll need API keys for that.\n    *   **Activate** the workflow.\n\n3. **Testing (Estimated Time: 5-10 minutes):**\n     * Go to your Airtable \"Book\" table. Create a New Record.\n     *  Fill in the \"Idea\" field with a book concept.\n     *  Change the \"Action\" field to \"Generate Book Details\".\n     *   The Airtable automation should trigger, sending a request to your n8n webhook.\n     *   Monitor the n8n execution log to see the workflow in action.\n      *   Check the Airtable record to see if the \"Research\" field is populated.\n      *  Repeat the testing for `Generate Chapters`, `Generate Chapter Research` and `Generate Chapter Content`.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Airtable",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Perplexity",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "role": "toolHttpRequest",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Airtable1",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Airtable2",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Basic LLM Chain",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.5"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Split Out",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Airtable3",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Airtable4",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Airtable5",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "AI Agent1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.7"
    },
    {
      "name": "Google Gemini Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Perplexity1",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "role": "toolHttpRequest",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Airtable6",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Airtable7",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Basic LLM Chain1",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.5"
    },
    {
      "name": "Google Gemini Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Airtable8",
      "type": "n8n-nodes-base.airtable",
      "role": "airtable",
      "configDescription": "Version 2.1"
    }
  ]
}