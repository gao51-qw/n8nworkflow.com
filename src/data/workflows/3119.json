{
  "id": 3119,
  "slug": "3119",
  "title": "Create a REST API for PDF digital signatures with webhooks",
  "description": "## Overview\nAn automation workflow that creates a complete REST API for digitally signing PDF documents using n8n webhooks. This service demonstrates how to implement secure document signing functionality through standardized API endpoints with file upload and download capabilities.\n\n## Use Case\nThis workflow is designed for developers and automation specialists who need to implement digital document signing. It's particularly useful for:\n- Integrating PDF signing capabilities into existing document workflows\n- API-based automation of signature processes\n- Creating proof-of-concept implementations for document verification systems\n- Learning n8n's webhook capabilities and file handling techniques\n- Testing PDF signing in development environments before production implementation\n\n## What This Workflow Does\n\n### API-Based Document Management\n- Exposes RESTful webhook endpoints for all document operations\n- Handles multipart/form-data uploads for PDF documents\n- Processes JSON payloads for signing configuration\n- Provides download functionality for completed documents\n\n### Digital Certificate Handling\n- Uploads existing PFX/PKCS#12 digital certificates\n- Generates new certificates with customizable attributes\n- Securely manages certificate storage and access\n- Associates certificates with signing operations\n\n### Cryptographic PDF Signing\n- Applies digital signatures using industry-standard cryptographic methods\n- Embeds signature information within PDF document structure\n- Validates document integrity through cryptographic verification\n- Preserves original document while adding signature elements\n\n### Webhook Integration System\n- Routes different API methods to appropriate handlers\n- Validates request payloads and file content\n- Manages authentication through webhook paths\n- Returns structured responses for integration with other systems\n\n## Technical Architecture\n\n### Components\n1. **API Gateway**: n8n webhook nodes that receive external requests\n2. **Request Router**: Switch nodes that direct operations based on method parameters\n3. **Document Processor**: Function nodes for PDF manipulation and verification\n4. **Certificate Manager**: Specialized nodes for cryptographic key operations\n5. **Storage Interface**: File operation nodes for document persistence\n6. **Response Formatter**: Nodes that structure API responses\n\n### Integration Flow\n```\nClient Request → Webhook Endpoint → Method Router → \nProcessing Engine → Digital Signing → Storage → \nResponse Generation → Client Response\n```\n\n## Setup Instructions\n\n### Prerequisites\n- n8n installation (minimum version 0.214.0)\n- Node.js 14 or higher\n- Required environment variable:\n  ```\n  NODE_FUNCTION_ALLOW_EXTERNAL: \"node-forge,@signpdf/signpdf,@signpdf/signer-p12,@signpdf/placeholder-plain\"\n  ```\n\n### Configuration Steps\n1. **Import Workflow**\n   - Import the workflow JSON into your n8n instance\n   - Activate the workflow to enable the webhooks\n\n2. **Configure Storage**\n   - Set the storage path variables in the workflow\n   - Ensure proper permissions on the storage directories\n\n3. **Test API Endpoints**\n   - Use the included test scripts to verify functionality\n   - Test PDF upload, certificate generation, and signing\n\n4. **Integration**\n   - Document the webhook URLs for integration with other systems\n   - Configure error handling according to your requirements\n\n### Testing Methods\nTest the workflow functionality using various HTTP requests and JSON data:\n- Upload PDF documents to the document processing endpoint\n- Upload or generate digital certificates\n- Execute PDF signing operations\n- Download signed documents from the download endpoint\n\n## Webhook Endpoints\n\nThe workflow exposes two primary webhook endpoints that form a complete API for PDF digital signing operations:\n\n### 1. Document Processing Endpoint (`/webhook/docu-digi-sign`)\n\nThis endpoint handles all document and certificate operations:\n\n**Method: Upload PDF**\n- HTTP: `POST`\n- Content-Type: multipart/form-data\n- Parameters: method, uploadType, fileName, fileData\n\n**Method: Upload Certificate**\n- HTTP: `POST`\n- Content-Type: multipart/form-data\n- Parameters: method, uploadType, fileName, fileData\n\n**Method: Generate Certificate**\n- HTTP: `POST`\n- Content-Type: application/json\n- Parameters: method, subjectCN, issuerCN, serialNumber, validFrom, validTo, password\n\n**Method: Sign PDF**\n- HTTP: `POST`\n- Content-Type: application/json\n- Parameters: method, inputPdf, pfxFile, pfxPassword\n\n### 2. Document Download Endpoint (`/webhook/docu-download`)\n\nThis endpoint handles the retrieval of processed documents:\n\n**Method: Download Signed PDF**\n- HTTP: `GET`\n- Content-Type: application/json\n- Parameters: method, fileType, fileName\n\n## Key Workflow Sections\nThe workflow is organized into logical sections with clear responsibilities:\n- **Request Processing**: Parses incoming webhook data\n- **Method Routing**: Directs requests to appropriate handlers\n- **Document Management**: Handles file operations and storage\n- **Cryptographic Operations**: Manages signing and certificate functions\n- **Response Formatting**: Structures and returns results\n",
  "featuredImage": "/data/workflows/3119/3119.webp",
  "author": {
    "id": 101,
    "slug": "fefehun",
    "name": "Ferenc Erb",
    "avatar": ""
  },
  "categories": [
    "Document Extraction"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 5569,
  "downloads": 556,
  "createdAt": "2025-03-10T08:43:05.527Z",
  "updatedAt": "2026-01-16T08:28:10.179Z",
  "publishedAt": "2025-03-10T08:43:05.527Z",
  "nodes": 32,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3119",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Create a REST API for PDF digital signatures with webhooks",
    "workflowName": "Create a REST API for PDF digital signatures with webhooks",
    "description": "An automation workflow that creates a complete REST API for digitally signing PDF documents using n8n webhooks. This service demonstrates how to implement secure document signing functionality through standardized API endpoints with file upload and download capabilities.\n\n## Use Case\nThis workflow is designed for developers and automation specialists who need to implement digital document signing. It's particularly useful for:\n- Integrating PDF signing capabilities into existing document workflows\n- API-based automation of signature processes\n- Creating proof-of-concept implementations for document verification systems\n- Learning n8n's webhook capabilities and file handling techniques\n- Testing PDF signing in development environments before production implementation\n\n## What This Workflow Does\n\n### API-Based Document Management\n- Exposes RESTful webhook endpoints for all document operations\n- Handles multipart/form-data uploads for PDF documents\n- Processes JSON payloads for signing configuration\n- Provides download functionality for completed documents\n\n### Digital Certificate Handling\n- Uploads existing PFX/PKCS#12 digital certificates\n- Generates new certificates with customizable attributes\n- Securely manages certificate storage and access\n- Associates certificates with signing operations\n\n### Cryptographic PDF Signing\n- Applies digital signatures using industry-standard cryptographic methods\n- Embeds signature information within PDF document structure\n- Validates document integrity through cryptographic verification\n- Preserves original document while adding signature elements\n\n### Webhook Integration System\n- Routes different API methods to appropriate handlers\n- Validates request payloads and file content\n- Manages authentication through webhook paths\n- Returns structured responses for integration with other systems\n\n## Technical Architecture\n\n### Components\n1. **API Gateway**: n8n webhook nodes that receive external requests\n2. **Request Router**: Switch nodes that direct operations based on method parameters\n3. **Document Processor**: Function nodes for PDF manipulation and verification\n4. **Certificate Manager**: Specialized nodes for cryptographic key operations\n5. **Storage Interface**: File operation nodes for document persistence\n6. **Response Formatter**: Nodes that structure API responses\n\n### Integration Flow\n```\nClient Request → Webhook Endpoint → Method Router → \nProcessing Engine → Digital Signing → Storage → \nResponse Generation → Client Response\n```\n\n## Setup Instructions\n\n### Prerequisites\n- n8n installation (minimum version 0.214.0)\n- Node.js 14 or higher\n- Required environment variable:\n  ```\n  NODE_FUNCTION_ALLOW_EXTERNAL: \"node-forge,@signpdf/signpdf,@signpdf/signer-p12,@signpdf/placeholder-plain\"\n  ```\n\n### Configuration Steps\n1. **Import Workflow**\n   - Import the workflow JSON into your n8n instance\n   - Activate the workflow to enable the webhooks\n\n2. **Configure Storage**\n   - Set the storage path variables in the workflow\n   - Ensure proper permissions on the storage directories\n\n3. **Test API Endpoints**\n   - Use the included test scripts to verify functionality\n   - Test PDF upload, certificate generation, and signing\n\n4. **Integration**\n   - Document the webhook URLs for integration with other systems\n   - Configure error handling according to your requirements\n\n### Testing Methods\nTest the workflow functionality using various HTTP requests and JSON data:\n- Upload PDF documents to the document processing endpoint\n- Upload or generate digital certificates\n- Execute PDF signing operations\n- Download signed documents from the download endpoint\n\n## Webhook Endpoints\n\nThe workflow exposes two primary webhook endpoints that form a complete API for PDF digital signing operations:\n\n### 1. Document Processing Endpoint (`/webhook/docu-digi-sign`)\n\nThis endpoint handles all document and certificate operations:\n\n**Method: Upload PDF**\n- HTTP: `POST`\n- Content-Type: multipart/form-data\n- Parameters: method, uploadType, fileName, fileData\n\n**Method: Upload Certificate**\n- HTTP: `POST`\n- Content-Type: multipart/form-data\n- Parameters: method, uploadType, fileName, fileData\n\n**Method: Generate Certificate**\n- HTTP: `POST`\n- Content-Type: application/json\n- Parameters: method, subjectCN, issuerCN, serialNumber, validFrom, validTo, password\n\n**Method: Sign PDF**\n- HTTP: `POST`\n- Content-Type: application/json\n- Parameters: method, inputPdf, pfxFile, pfxPassword\n\n### 2. Document Download Endpoint (`/webhook/docu-download`)\n\nThis endpoint handles the retrieval of processed documents:\n\n**Method: Download Signed PDF**\n- HTTP: `GET`\n- Content-Type: application/json\n- Parameters: method, fileType, fileName\n\n## Key Workflow Sections\nThe workflow is organized into logical sections with clear responsibilities:\n- **Request Processing**: Parses incoming webhook data\n- **Method Routing**: Directs requests to appropriate handlers\n- **Document Management**: Handles file operations and storage\n- **Cryptographic Operations**: Manages signing and certificate functions\n- **Response Formatting**: Structures and returns results",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Validate Key Gen Params",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate PDF Sign Params",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate PDF Upload",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate Key Upload",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Generate Keys",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Sign PDF",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 1"
    },
    {
      "name": "Prepare Success Response",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 1"
    },
    {
      "name": "Switch Operation",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Switch Upload Type",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Prepare input params",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "set file path",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Convert PDF to File",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Write PDF File to Disk",
      "type": "n8n-nodes-base.readWriteFile",
      "role": "readWriteFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Read PDF File from Disk",
      "type": "n8n-nodes-base.readWriteFile",
      "role": "readWriteFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Convert PFX to File",
      "type": "n8n-nodes-base.convertToFile",
      "role": "convertToFile",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Write PFX File to Disk",
      "type": "n8n-nodes-base.readWriteFile",
      "role": "readWriteFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Read PFX File from Disk",
      "type": "n8n-nodes-base.readWriteFile",
      "role": "readWriteFile",
      "configDescription": "Version 1"
    },
    {
      "name": "Check PDF file is OK",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Check PFX file is OK",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "check success",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "set downlowd file info",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Read download file from Disk",
      "type": "n8n-nodes-base.readWriteFile",
      "role": "readWriteFile",
      "configDescription": "Version 1"
    },
    {
      "name": "API POST Endpoint",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 1"
    },
    {
      "name": "API GET Endpoint",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "POST Success Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1"
    },
    {
      "name": "POST Error Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1"
    },
    {
      "name": "GET Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}