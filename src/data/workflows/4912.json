{
  "id": 4912,
  "slug": "4912",
  "title": "Lead workflow: Yelp & Trustpilot scraping + OpenAI analysis via BrightData",
  "description": "# üõí Lead Workflow: Yelp & Trustpilot Scraping + OpenAI Analysis via BrightData\n\n&gt; **Description:** Automated lead generation workflow that scrapes business data from Yelp and Trustpilot based on location and category, analyzes credibility, and sends personalized outreach emails using AI.\n\n&gt; ‚ö†Ô∏è **Important:** This template requires a self-hosted n8n instance to run.\n\n## üìã Overview\n\nThis workflow provides an automated lead generation solution that identifies high-quality prospects from Yelp and Trustpilot, analyzes their credibility through reviews, and sends personalized outreach emails. Perfect for digital marketing agencies, sales teams, and business development professionals.\n\n## ‚ú® Key Features\n\n- **üéØ Smart Location Analysis**  \n  AI breaks down cities into sub-locations for comprehensive coverage\n\n- **üõç Yelp Integration**  \n  Scrapes business details using BrightData's Yelp dataset\n\n- **‚≠ê Trustpilot Verification**  \n  Validates business credibility through review analysis\n\n- **üìä Data Storage**  \n  Automatically saves results to Google Sheets\n\n- **ü§ñ AI-Powered Outreach**  \n  Generates personalized emails using Claude AI\n\n- **üìß Automated Sending**  \n  Sends emails directly through Gmail integration\n\n## üîÑ How It Works\n\n1. **User Input:** Submit location, country, and business category through a form  \n2. **AI Location Analysis:** Gemini AI identifies sub-locations within the specified area  \n3. **Yelp Scraping:** BrightData extracts business information from multiple locations  \n4. **Data Processing:** Cleans and stores business details in Google Sheets  \n5. **Trustpilot Verification:** Scrapes reviews and company details for credibility check  \n6. **Email Generation:** Claude AI creates personalized outreach messages  \n7. **Automated Outreach:** Sends emails to qualified prospects via Gmail\n\n## üìä Data Output\n\n| Field         | Description                      | Example                          |\n|---------------|----------------------------------|----------------------------------|\n| Company Name  | Business name from Yelp/Trustpilot | Best Local Restaurant            |\n| Website       | Company website URL              | https://example-restaurant.com   |\n| Phone Number  | Business contact number          | (555) 123-4567                   |\n| Email         | Business email address           | demo@example.com                 |\n| Address       | Physical business location       | 123 Main St, City, State         |\n| Rating        | Overall business rating          | 4.5/5                            |\n| Categories    | Business categories/tags         | Restaurant, Italian, Fine Dining |\n\n## üöÄ Setup Instructions\n\n**‚è±Ô∏è Estimated Setup Time: 10‚Äì15 minutes**\n\n### Prerequisites\n\n- n8n instance (self-hosted or cloud)\n- Google account with Sheets access\n- BrightData account with Yelp and Trustpilot datasets\n- Google Gemini API access\n- Anthropic API key for Claude\n- Gmail account for sending emails\n\n### Step 1: Import the Workflow\n\n1. Copy the JSON workflow code  \n2. In n8n: **Workflows ‚Üí + Add workflow ‚Üí Import from JSON**  \n3. Paste JSON and click **Import**\n\n### Step 2: Configure Google Sheets Integration\n\n1. Create two Google Sheets:  \n   - Yelp data: `Name, Categories, Website, Address, Phone, URL, Rating`  \n   - Trustpilot data: `Company Name, Email, Phone Number, Address, Rating, Company About`\n2. Copy Sheet IDs from URLs  \n3. In n8n: **Credentials ‚Üí + Add credential ‚Üí Google Sheets OAuth2 API**  \n4. Complete OAuth setup and test connection  \n5. Update all Google Sheets nodes with your Sheet IDs\n\n### Step 3: Configure BrightData\n\n1. Set up BrightData credentials in n8n  \n2. Replace API token with: `BRIGHT_DATA_API_KEY`  \n3. Verify dataset access:  \n   - Yelp dataset: `gd_lgugwl0519h1p14rwk`  \n   - Trustpilot dataset: `gd_lm5zmhwd2sni130p`  \n4. Test connections\n\n### Step 4: Configure AI Models\n\n- **Google Gemini (Location Analysis)**  \n  - Add Google Gemini API credentials  \n  - Configure model: `models/gemini-1.5-flash`\n\n- **Claude AI (Email Generation)**  \n  - Add Anthropic API credentials  \n  - Configure model: `claude-sonnet-4-20250514`\n\n### Step 5: Configure Gmail Integration\n\n1. Set up Gmail OAuth2 credentials in n8n  \n2. Update \"Send Outreach Email\" node  \n3. Test email sending\n\n### Step 6: Test & Activate\n\n1. Activate the workflow  \n2. Test with sample data:  \n   - Country: United States  \n   - Location: Dallas  \n   - Category: Restaurants  \n3. Verify data appears in Google Sheets  \n4. Check that emails are generated and sent\n\n## üìñ Usage Guide\n\n### Starting a Lead Generation Campaign\n\n1. Access the form trigger URL  \n2. Enter your target criteria:  \n   - **Country:** Target country  \n   - **Location:** City or region  \n   - **Category:** Business type (e.g., restaurants)  \n3. Submit the form to start the process\n\n### Monitoring Results\n\n- **Yelp Data Sheet:** View scraped business information  \n- **Trustpilot Sheet:** Review credibility data  \n- **Gmail Sent Items:** Track outreach emails sent\n\n## üîß Customization Options\n\n### Modifying Email Templates\n\nEdit the \"AI Generate Email Content\" node to customize:\n\n- Email tone and style  \n- Services mentioned  \n- Call-to-action messages  \n- Branding elements\n\n### Adjusting Data Filters\n\n- Modify rating thresholds  \n- Set minimum review counts  \n- Add geographic restrictions  \n- Filter by business size\n\n### Scaling the Workflow\n\n- Increase batch sizes  \n- Add delays between requests  \n- Use parallel processing  \n- Add error handling\n\n## üö® Troubleshooting\n\n### Common Issues & Solutions\n\n**1. BrightData Connection Failed**  \n- *Cause:* Invalid API credentials or dataset access  \n- *Solution:* Verify credentials and dataset permissions\n\n**2. No Data Extracted**  \n- *Cause:* Invalid location or changed page structure  \n- *Solution:* Verify location names and test other categories\n\n**3. Gmail Authentication Issues**  \n- *Cause:* Expired OAuth tokens  \n- *Solution:* Re-authenticate and check permissions\n\n**4. AI Model Errors**  \n- *Cause:* API quota exceeded or invalid keys  \n- *Solution:* Check usage limits and API key\n\n### Performance Optimization\n\n- **Rate Limiting:** Add delays  \n- **Error Handling:** Retry failed requests  \n- **Data Validation:** Check for malformed data  \n- **Memory Management:** Process in smaller batches\n\n## üìà Use Cases & Examples\n\n### 1. Digital Marketing Agency Lead Generation\n\n- **Goal:** Find businesses needing marketing  \n- **Target:** Restaurants, retail stores  \n- **Approach:** Focus on good-rated but low-online-presence businesses\n\n### 2. B2B Sales Prospecting\n\n- **Goal:** Find software solution clients  \n- **Target:** Growing businesses  \n- **Approach:** Focus on recent positive reviews\n\n### 3. Partnership Development\n\n- **Goal:** Find complementary businesses  \n- **Target:** Established businesses  \n- **Approach:** Focus on reputation and satisfaction scores\n\n## ‚ö° Performance & Limits\n\n### Expected Performance\n\n- **Processing Time:** 5‚Äì10 minutes/location  \n- **Data Accuracy:** 90%+  \n- **Success Rate:** 85%+  \n- **Daily Capacity:** 100‚Äì500 leads\n\n### Resource Usage\n\n- **API Calls:** ~10‚Äì20 per business  \n- **Storage:** Minimal (Google Sheets)  \n- **Execution Time:** 3‚Äì8 minutes/10 businesses  \n- **Network Usage:** ~5‚Äì10MB/business\n\n## ü§ù Support & Community\n\n### Getting Help\n\n- **n8n Community Forum:** [community.n8n.io](https://community.n8n.io)  \n- **Docs:** [docs.n8n.io](https://docs.n8n.io)  \n- **BrightData Support:** Via dashboard\n\n### Contributing\n\n- Share improvements  \n- Report issues and suggestions  \n- Create industry-specific variations  \n- Document best practices\n\n&gt; üîí **Privacy & Compliance:** Ensure GDPR/CCPA compliance. Always respect robots.txt and terms of service of scraped sites.\n\n---\n\n## üéØ Ready to Generate Leads!\n\nThis workflow provides a complete solution for automated lead generation and outreach. Customize it to fit your needs and start building your pipeline today!\n\nFor any questions or support, please contact:  \nüìß [info@incrementors.com](mailto:info@incrementors.com)  \nor fill out this form: [Contact Us](https://www.incrementors.com/contact-us/)\n\n",
  "featuredImage": "/data/workflows/4912/4912.webp",
  "author": {
    "id": 101,
    "slug": "incrementors",
    "name": "Incrementors",
    "avatar": ""
  },
  "categories": [
    "Lead Generation",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 12579,
  "downloads": 1257,
  "createdAt": "2025-06-13T04:57:33.354Z",
  "updatedAt": "2026-01-16T08:36:52.953Z",
  "publishedAt": "2025-06-13T04:57:33.354Z",
  "nodes": 32,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4912",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Lead workflow: Yelp & Trustpilot scraping + OpenAI analysis via BrightData",
    "workflowName": "Lead workflow: Yelp & Trustpilot scraping + OpenAI analysis via BrightData",
    "description": "# üõí Lead Workflow: Yelp & Trustpilot Scraping + OpenAI Analysis via BrightData\n\n&gt; **Description:** Automated lead generation workflow that scrapes business data from Yelp and Trustpilot based on location and category, analyzes credibility, and sends personalized outreach emails using AI.\n\n&gt; ‚ö†Ô∏è **Important:** This template requires a self-hosted n8n instance to run.\n\n## üìã Overview\n\nThis workflow provides an automated lead generation solution that identifies high-quality prospects from Yelp and Trustpilot, analyzes their credibility through reviews, and sends personalized outreach emails. Perfect for digital marketing agencies, sales teams, and business development professionals.\n\n## ‚ú® Key Features\n\n- **üéØ Smart Location Analysis**  \n  AI breaks down cities into sub-locations for comprehensive coverage\n\n- **üõç Yelp Integration**  \n  Scrapes business details using BrightData's Yelp dataset\n\n- **‚≠ê Trustpilot Verification**  \n  Validates business credibility through review analysis\n\n- **üìä Data Storage**  \n  Automatically saves results to Google Sheets\n\n- **ü§ñ AI-Powered Outreach**  \n  Generates personalized emails using Claude AI\n\n- **üìß Automated Sending**  \n  Sends emails directly through Gmail integration\n\n## üîÑ How It Works\n\n1. **User Input:** Submit location, country, and business category through a form  \n2. **AI Location Analysis:** Gemini AI identifies sub-locations within the specified area  \n3. **Yelp Scraping:** BrightData extracts business information from multiple locations  \n4. **Data Processing:** Cleans and stores business details in Google Sheets  \n5. **Trustpilot Verification:** Scrapes reviews and company details for credibility check  \n6. **Email Generation:** Claude AI creates personalized outreach messages  \n7. **Automated Outreach:** Sends emails to qualified prospects via Gmail\n\n## üìä Data Output\n\n| Field         | Description                      | Example                          |\n|---------------|----------------------------------|----------------------------------|\n| Company Name  | Business name from Yelp/Trustpilot | Best Local Restaurant            |\n| Website       | Company website URL              | https://example-restaurant.com   |\n| Phone Number  | Business contact number          | (555) 123-4567                   |\n| Email         | Business email address           | demo@example.com                 |\n| Address       | Physical business location       | 123 Main St, City, State         |\n| Rating        | Overall business rating          | 4.5/5                            |\n| Categories    | Business categories/tags         | Restaurant, Italian, Fine Dining |\n\n## üöÄ Setup Instructions\n\n**‚è±Ô∏è Estimated Setup Time: 10‚Äì15 minutes**\n\n### Prerequisites\n\n- n8n instance (self-hosted or cloud)\n- Google account with Sheets access\n- BrightData account with Yelp and Trustpilot datasets\n- Google Gemini API access\n- Anthropic API key for Claude\n- Gmail account for sending emails\n\n### Step 1: Import the Workflow\n\n1. Copy the JSON workflow code  \n2. In n8n: **Workflows ‚Üí + Add workflow ‚Üí Import from JSON**  \n3. Paste JSON and click **Import**\n\n### Step 2: Configure Google Sheets Integration\n\n1. Create two Google Sheets:  \n   - Yelp data: `Name, Categories, Website, Address, Phone, URL, Rating`  \n   - Trustpilot data: `Company Name, Email, Phone Number, Address, Rating, Company About`\n2. Copy Sheet IDs from URLs  \n3. In n8n: **Credentials ‚Üí + Add credential ‚Üí Google Sheets OAuth2 API**  \n4. Complete OAuth setup and test connection  \n5. Update all Google Sheets nodes with your Sheet IDs\n\n### Step 3: Configure BrightData\n\n1. Set up BrightData credentials in n8n  \n2. Replace API token with: `BRIGHT_DATA_API_KEY`  \n3. Verify dataset access:  \n   - Yelp dataset: `gd_lgugwl0519h1p14rwk`  \n   - Trustpilot dataset: `gd_lm5zmhwd2sni130p`  \n4. Test connections\n\n### Step 4: Configure AI Models\n\n- **Google Gemini (Location Analysis)**  \n  - Add Google Gemini API credentials  \n  - Configure model: `models/gemini-1.5-flash`\n\n- **Claude AI (Email Generation)**  \n  - Add Anthropic API credentials  \n  - Configure model: `claude-sonnet-4-20250514`\n\n### Step 5: Configure Gmail Integration\n\n1. Set up Gmail OAuth2 credentials in n8n  \n2. Update \"Send Outreach Email\" node  \n3. Test email sending\n\n### Step 6: Test & Activate\n\n1. Activate the workflow  \n2. Test with sample data:  \n   - Country: United States  \n   - Location: Dallas  \n   - Category: Restaurants  \n3. Verify data appears in Google Sheets  \n4. Check that emails are generated and sent\n\n## üìñ Usage Guide\n\n### Starting a Lead Generation Campaign\n\n1. Access the form trigger URL  \n2. Enter your target criteria:  \n   - **Country:** Target country  \n   - **Location:** City or region  \n   - **Category:** Business type (e.g., restaurants)  \n3. Submit the form to start the process\n\n### Monitoring Results\n\n- **Yelp Data Sheet:** View scraped business information  \n- **Trustpilot Sheet:** Review credibility data  \n- **Gmail Sent Items:** Track outreach emails sent\n\n## üîß Customization Options\n\n### Modifying Email Templates\n\nEdit the \"AI Generate Email Content\" node to customize:\n\n- Email tone and style  \n- Services mentioned  \n- Call-to-action messages  \n- Branding elements\n\n### Adjusting Data Filters\n\n- Modify rating thresholds  \n- Set minimum review counts  \n- Add geographic restrictions  \n- Filter by business size\n\n### Scaling the Workflow\n\n- Increase batch sizes  \n- Add delays between requests  \n- Use parallel processing  \n- Add error handling\n\n## üö® Troubleshooting\n\n### Common Issues & Solutions\n\n**1. BrightData Connection Failed**  \n- *Cause:* Invalid API credentials or dataset access  \n- *Solution:* Verify credentials and dataset permissions\n\n**2. No Data Extracted**  \n- *Cause:* Invalid location or changed page structure  \n- *Solution:* Verify location names and test other categories\n\n**3. Gmail Authentication Issues**  \n- *Cause:* Expired OAuth tokens  \n- *Solution:* Re-authenticate and check permissions\n\n**4. AI Model Errors**  \n- *Cause:* API quota exceeded or invalid keys  \n- *Solution:* Check usage limits and API key\n\n### Performance Optimization\n\n- **Rate Limiting:** Add delays  \n- **Error Handling:** Retry failed requests  \n- **Data Validation:** Check for malformed data  \n- **Memory Management:** Process in smaller batches\n\n## üìà Use Cases & Examples\n\n### 1. Digital Marketing Agency Lead Generation\n\n- **Goal:** Find businesses needing marketing  \n- **Target:** Restaurants, retail stores  \n- **Approach:** Focus on good-rated but low-online-presence businesses\n\n### 2. B2B Sales Prospecting\n\n- **Goal:** Find software solution clients  \n- **Target:** Growing businesses  \n- **Approach:** Focus on recent positive reviews\n\n### 3. Partnership Development\n\n- **Goal:** Find complementary businesses  \n- **Target:** Established businesses  \n- **Approach:** Focus on reputation and satisfaction scores\n\n## ‚ö° Performance & Limits\n\n### Expected Performance\n\n- **Processing Time:** 5‚Äì10 minutes/location  \n- **Data Accuracy:** 90%+  \n- **Success Rate:** 85%+  \n- **Daily Capacity:** 100‚Äì500 leads\n\n### Resource Usage\n\n- **API Calls:** ~10‚Äì20 per business  \n- **Storage:** Minimal (Google Sheets)  \n- **Execution Time:** 3‚Äì8 minutes/10 businesses  \n- **Network Usage:** ~5‚Äì10MB/business\n\n## ü§ù Support & Community\n\n### Getting Help\n\n- **n8n Community Forum:** [community.n8n.io](https://community.n8n.io)  \n- **Docs:** [docs.n8n.io](https://docs.n8n.io)  \n- **BrightData Support:** Via dashboard\n\n### Contributing\n\n- Share improvements  \n- Report issues and suggestions  \n- Create industry-specific variations  \n- Document best practices\n\n&gt; üîí **Privacy & Compliance:** Ensure GDPR/CCPA compliance. Always respect robots.txt and terms of service of scraped sites.\n\n---\n\n## üéØ Ready to Generate Leads!\n\nThis workflow provides a complete solution for automated lead generation and outreach. Customize it to fit your needs and start building your pipeline today!\n\nFor any questions or support, please contact:  \nüìß [info@incrementors.com](mailto:info@incrementors.com)  \nor fill out this form: [Contact Us](https://www.incrementors.com/contact-us/)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Form Trigger - Get User Input",
      "type": "n8n-nodes-base.formTrigger",
      "role": "formTrigger",
      "configDescription": "Version 2.2"
    },
    {
      "name": "AI Location Analyzer",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Split Sub-locations",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loop Yelp Locations",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Yelp Scraper",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Check Yelp Scrape Progress",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Wait (1 min) Yelp Completion",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Verify Yelp Ready",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "If Yelp Has Records",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Fetch Yelp Results",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Save Yelp Data to Sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Clean Unique Websites",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Read Yelp Sheet Websites",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Make Trustpilot URLs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Remove Duplicate TP URLs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loop Trustpilot URLs",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Trigger Trustpilot Scraper",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Check Trustpilot Scrape Progress",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Verify Trustpilot Scraper Ready",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Wait (1 min) Trustpilot Completion",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "If Trustpilot Has Records",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Download Trustpilot Data",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Save Trustpilot Data to Sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Read Emails from Trustpilot Sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.6"
    },
    {
      "name": "Get Unique Emails",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "AI Generate Email Content",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Parse Email JSON",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Outreach Email",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Gemini - Location AI Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Claude - Email AI Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "role": "lmChatAnthropic",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}