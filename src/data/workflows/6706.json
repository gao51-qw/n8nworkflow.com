{
  "id": 6706,
  "slug": "6706",
  "title": "Query business data with OpenAI chatbot using RAG and text-to-SQL via Peliqan",
  "description": "![Peliqan n8n chatbot with RAG and Text-To-SQL](https://images.spr.so/cdn-cgi/imagedelivery/j42No7y-dcokJuNgXeA0ig/99465134-7cb5-46cd-a26c-c44c11a3317e/Peliqan_n8n_AI_Agent_template_with_RAG_and_Text_to_SQL/w=1920,quality=90,fit=scale-down)\n\n## How it works\n\nThis template is an end-to-end demo of a chatbot using business data from multiple sources (e.g. Notion, Chargebee, Hubspot etc.) with RAG + SQL.\n\nPeliqan.io is used as a \"cache\" of all business data. Peliqan uses one-click ELT to sync all your business data to its built-in data warehouse, allowing for fast & accurate RAG and \"Text to SQL\" queries.\n\nThe workflow will write source data to Supabase as a vector store, for RAG searches by the chatbot. The source URL (e.g. the URL of a Notion page) is added in metadata.\n\nThe AI Agent will decide for each question to use either RAG or Text-to-SQL or a combination of both.\nText-to-SQL is performed via the Peliqan node, added as a tool to the AI Agent. The question of the user in natural language is converted to an SQL query by the AI Agent. The query is executed by Peliqan.io on the source data and the result is interpreted by the AI Agent.\n\nRAG is typically used to answer knowledge questions, often on non-structured data (Notion pages, Google Drive etc.).\nText-to-SQL is typically used to answer analytical questions, for example \"Show list of customers with number of open support tickets and add customer revenue based on invoiced amounts\".\n\n## Preconditions\n\n* You signed up for a Peliqan.io free trial account\n* You have one or more data sources, e.g. a CRM, ERP, Accounting software, files, Notion, Google Drive etc.\n\n## Set up steps\n\n* Sign up for a free trial on peliqan.io: https://peliqan.io\n* Add one or more sources in Peliqan (e.g. Hubspot, Pipedrive...)\n* Copy your Peliqan API key under settings and use it here to add a Peliqan connection\n* Run the \"RAG\" workflow to feed Supabase, change the name of the table in the Peliqan node \"Get table data\".\n* Update the list of tables & columns that can be used for SQL in the System Message of the AI Agent.\n\nVisit https://peliqan.io/n8n for more information.\n\nDisclaimer: This template contains a community node and therefore only works for n8n self-hosted users.",
  "featuredImage": "/data/workflows/6706/6706.webp",
  "author": {
    "id": 101,
    "slug": "peliqan",
    "name": "Peliqan",
    "avatar": ""
  },
  "categories": [
    "Internal Wiki",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 469,
  "downloads": 46,
  "createdAt": "2025-07-30T15:51:03.110Z",
  "updatedAt": "2026-01-16T08:46:40.826Z",
  "publishedAt": "2025-07-30T15:51:03.110Z",
  "nodes": 19,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6706",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Query business data with OpenAI chatbot using RAG and text-to-SQL via Peliqan",
    "workflowName": "Query business data with OpenAI chatbot using RAG and text-to-SQL via Peliqan",
    "description": "![Peliqan n8n chatbot with RAG and Text-To-SQL](https://images.spr.so/cdn-cgi/imagedelivery/j42No7y-dcokJuNgXeA0ig/99465134-7cb5-46cd-a26c-c44c11a3317e/Peliqan_n8n_AI_Agent_template_with_RAG_and_Text_to_SQL/w=1920,quality=90,fit=scale-down)\n\n## How it works\n\nThis template is an end-to-end demo of a chatbot using business data from multiple sources (e.g. Notion, Chargebee, Hubspot etc.) with RAG + SQL.\n\nPeliqan.io is used as a \"cache\" of all business data. Peliqan uses one-click ELT to sync all your business data to its built-in data warehouse, allowing for fast & accurate RAG and \"Text to SQL\" queries.\n\nThe workflow will write source data to Supabase as a vector store, for RAG searches by the chatbot. The source URL (e.g. the URL of a Notion page) is added in metadata.\n\nThe AI Agent will decide for each question to use either RAG or Text-to-SQL or a combination of both.\nText-to-SQL is performed via the Peliqan node, added as a tool to the AI Agent. The question of the user in natural language is converted to an SQL query by the AI Agent. The query is executed by Peliqan.io on the source data and the result is interpreted by the AI Agent.\n\nRAG is typically used to answer knowledge questions, often on non-structured data (Notion pages, Google Drive etc.).\nText-to-SQL is typically used to answer analytical questions, for example \"Show list of customers with number of open support tickets and add customer revenue based on invoiced amounts\".\n\n## Preconditions\n\n* You signed up for a Peliqan.io free trial account\n* You have one or more data sources, e.g. a CRM, ERP, Accounting software, files, Notion, Google Drive etc.\n\n## Set up steps\n\n* Sign up for a free trial on peliqan.io: https://peliqan.io\n* Add one or more sources in Peliqan (e.g. Hubspot, Pipedrive...)\n* Copy your Peliqan API key under settings and use it here to add a Peliqan connection\n* Run the \"RAG\" workflow to feed Supabase, change the name of the table in the Peliqan node \"Get table data\".\n* Update the list of tables & columns that can be used for SQL in the System Message of the AI Agent.\n\nVisit https://peliqan.io/n8n for more information.\n\nDisclaimer: This template contains a community node and therefore only works for n8n self-hosted users.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.6"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings OpenAI for RAG retrieval",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1"
    },
    {
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1"
    },
    {
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Supabase Vector Store to store vectors for RAG",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1"
    },
    {
      "name": "Get table data",
      "type": "n8n-nodes-peliqan.peliqan",
      "role": "peliqan",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Execute an SQL query via Peliqan",
      "type": "n8n-nodes-peliqan.peliqanTool",
      "role": "peliqanTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Supabase Vector Store for search",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "role": "vectorStoreSupabase",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Embeddings OpenAI for RAG",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1"
    }
  ]
}