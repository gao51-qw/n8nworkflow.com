{
  "id": 8229,
  "slug": "8229",
  "title": "Research business leads with Perplexity AI & save to Google Sheets using OpenAI",
  "description": "Automatically research new leads in your target area, structure the results with AI, and append them into Google Sheets ‚Äî all orchestrated in n8n.\n\n---\n\n## ‚úÖ What this template does\n- Uses **Perplexity** to research businesses (coffee shops in this example) with company name + email  \n- Cleans and structures the output into proper JSON using **OpenAI**  \n- Appends the new leads directly into **Google Sheets**, skipping duplicates  \n\n&gt; **Trigger:** Manual ‚Äî ‚ÄúStart Workflow‚Äù\n\n---\n\n## üë§ Who‚Äôs it for\n- **Sales & marketing teams** who need to prospect local businesses  \n- **Agencies** running outreach campaigns  \n- **Freelancers** and consultants looking to automate lead research  \n\n---\n\n## ‚öôÔ∏è How it works\n1. **Set Location** ‚Üí define your target area (e.g., *Hershey PA*)  \n2. **Get Current Leads** ‚Üí pull existing data from your Google Sheet to avoid duplicates  \n3. **Research Leads** ‚Üí query Perplexity for 20 businesses, excluding already-scraped ones  \n4. **Write JSON** ‚Üí OpenAI converts Perplexity output into structured Company/Email arrays  \n5. **Split & Merge** ‚Üí align Companies with Emails row-by-row  \n6. **Send Leads to Google Sheets** ‚Üí append or update leads in your sheet  \n\n---\n\n## üõ†Ô∏è Setup instructions\nFollow these sticky-note setup steps (already included in the workflow):\n\n### 1) Connect Google Sheets (OAuth2)\n1. In **n8n ‚Üí Credentials ‚Üí New ‚Üí Google Sheets (OAuth2)**  \n2. Sign in with your Google account and grant access  \n3. In the Google Sheets node, select your **Spreadsheet** and **Worksheet**  \n\nExample sheet:  \nhttps://docs.google.com/spreadsheets/d/1MnaU8hSi8PleDNVcNnyJ5CgmDYJSUTsr7X5HIwa-MLk/edit#gid=0  \n\n---\n\n### 2) Connect Perplexity (API Key)\n1. Sign in at https://www.perplexity.ai/account  \n2. Generate an API key: https://docs.perplexity.ai/guides/getting-started  \n3. In **n8n ‚Üí Credentials ‚Üí New ‚Üí Perplexity API**, paste your key  \n\n---\n\n### 3) Connect OpenAI (API Key)\n1. In **n8n ‚Üí Credentials ‚Üí New ‚Üí OpenAI API**  \n2. Paste your **OpenAI API key**  \n3. In the **OpenAI Chat Model** node, select your credential and a **vision-capable model** (e.g., `gpt-4o-mini`, `gpt-4o`)  \n\n---\n\n## üîß Requirements\n- A free **Google account**  \n- An **OpenAI API key** (https://platform.openai.com)  \n- A **Perplexity API key** (https://docs.perplexity.ai)  \n- n8n self-hosted or cloud instance  \n\n---\n\n## üé® How to customize\n- Change the **Search Area** in the `Set Location` node  \n- Modify the **Perplexity system prompt** to target different business types (e.g., gyms, salons, restaurants)  \n- Expand the Google Sheet schema to include more fields (phone, website, etc.)  \n\n---\n\n## üì¨ Contact  \nNeed help customizing this (e.g., filtering by campaign, sending reports by email, or formatting your Google Sheet)?  \n\n- üìß **robert@ynteractive.com**  \n- üîó **[Robert Breen](https://www.linkedin.com/in/robert-breen-29429625/)**  \n- üåê **[ynteractive.com](https://ynteractive.com)**  \n",
  "featuredImage": "/data/workflows/8229/8229.webp",
  "author": {
    "id": 101,
    "slug": "rbreen",
    "name": "Robert Breen",
    "avatar": ""
  },
  "categories": [
    "Lead Generation",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 740,
  "downloads": 74,
  "createdAt": "2025-09-03T17:34:55.588Z",
  "updatedAt": "2026-01-16T08:54:47.352Z",
  "publishedAt": "2025-09-03T17:34:55.588Z",
  "nodes": 18,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8229",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Research business leads with Perplexity AI & save to Google Sheets using OpenAI",
    "workflowName": "Research business leads with Perplexity AI & save to Google Sheets using OpenAI",
    "description": "Automatically research new leads in your target area, structure the results with AI, and append them into Google Sheets ‚Äî all orchestrated in n8n.\n\n---\n\n## ‚úÖ What this template does\n- Uses **Perplexity** to research businesses (coffee shops in this example) with company name + email  \n- Cleans and structures the output into proper JSON using **OpenAI**  \n- Appends the new leads directly into **Google Sheets**, skipping duplicates  \n\n&gt; **Trigger:** Manual ‚Äî ‚ÄúStart Workflow‚Äù\n\n---\n\n## üë§ Who‚Äôs it for\n- **Sales & marketing teams** who need to prospect local businesses  \n- **Agencies** running outreach campaigns  \n- **Freelancers** and consultants looking to automate lead research  \n\n---\n\n## ‚öôÔ∏è How it works\n1. **Set Location** ‚Üí define your target area (e.g., *Hershey PA*)  \n2. **Get Current Leads** ‚Üí pull existing data from your Google Sheet to avoid duplicates  \n3. **Research Leads** ‚Üí query Perplexity for 20 businesses, excluding already-scraped ones  \n4. **Write JSON** ‚Üí OpenAI converts Perplexity output into structured Company/Email arrays  \n5. **Split & Merge** ‚Üí align Companies with Emails row-by-row  \n6. **Send Leads to Google Sheets** ‚Üí append or update leads in your sheet  \n\n---\n\n## üõ†Ô∏è Setup instructions\nFollow these sticky-note setup steps (already included in the workflow):\n\n### 1) Connect Google Sheets (OAuth2)\n1. In **n8n ‚Üí Credentials ‚Üí New ‚Üí Google Sheets (OAuth2)**  \n2. Sign in with your Google account and grant access  \n3. In the Google Sheets node, select your **Spreadsheet** and **Worksheet**  \n\nExample sheet:  \nhttps://docs.google.com/spreadsheets/d/1MnaU8hSi8PleDNVcNnyJ5CgmDYJSUTsr7X5HIwa-MLk/edit#gid=0  \n\n---\n\n### 2) Connect Perplexity (API Key)\n1. Sign in at https://www.perplexity.ai/account  \n2. Generate an API key: https://docs.perplexity.ai/guides/getting-started  \n3. In **n8n ‚Üí Credentials ‚Üí New ‚Üí Perplexity API**, paste your key  \n\n---\n\n### 3) Connect OpenAI (API Key)\n1. In **n8n ‚Üí Credentials ‚Üí New ‚Üí OpenAI API**  \n2. Paste your **OpenAI API key**  \n3. In the **OpenAI Chat Model** node, select your credential and a **vision-capable model** (e.g., `gpt-4o-mini`, `gpt-4o`)  \n\n---\n\n## üîß Requirements\n- A free **Google account**  \n- An **OpenAI API key** (https://platform.openai.com)  \n- A **Perplexity API key** (https://docs.perplexity.ai)  \n- n8n self-hosted or cloud instance  \n\n---\n\n## üé® How to customize\n- Change the **Search Area** in the `Set Location` node  \n- Modify the **Perplexity system prompt** to target different business types (e.g., gyms, salons, restaurants)  \n- Expand the Google Sheet schema to include more fields (phone, website, etc.)  \n\n---\n\n## üì¨ Contact  \nNeed help customizing this (e.g., filtering by campaign, sending reports by email, or formatting your Google Sheet)?  \n\n- üìß **robert@ynteractive.com**  \n- üîó **[Robert Breen](https://www.linkedin.com/in/robert-breen-29429625/)**  \n- üåê **[ynteractive.com](https://ynteractive.com)**",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note59",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note71",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note72",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note69",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Start Workflow",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Location",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Get Current Leads",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Combine Into One",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Set as text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Research Leads",
      "type": "n8n-nodes-base.perplexity",
      "role": "perplexity",
      "configDescription": "Version 1"
    },
    {
      "name": "Write JSON",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Split Companies",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Emails",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge Rows",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Send Leads to Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    }
  ]
}