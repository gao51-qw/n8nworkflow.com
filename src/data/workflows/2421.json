{
  "id": 2421,
  "slug": "2421",
  "title": "Transcribing bank statements to markdown using Gemini Vision AI",
  "description": "This n8n workflow demonstrates an approach to parsing bank statement PDFs with multimodal LLMs as an alternative to traditional OCR. This allows for much more accurate data extraction from the document especially when it comes to tables and complex layouts.\n\nMultimodal Parsing is better than traditiona OCR because:\n* It reduces complexity and overhead by avoiding the need to preprocess the document into text format such as markdown before passing to the LLM.\n* It handles non-standard PDF formats which may produce garbled output via traditional OCR text conversion.\n* It's orders of magnitude cheaper than premium OCR models that still require post-processing cleanup and formatting. LLMs can format to any schema or language you desire!\n\n## How it works\n\nYou can use the example bank statement created specifically for this workflow here: [https://drive.google.com/file/d/1wS9U7MQDthj57CvEcqG_Llkr-ek6RqGA/view?usp=sharing](https://drive.google.com/file/d/1wS9U7MQDthj57CvEcqG_Llkr-ek6RqGA/view?usp=sharing)\n\n* A PDF bank statement is imported via Google Drive. For this demo, I've created a mock bank statement which includes complex table layouts of 5 columns. Typically, OCR will be unable to align the columns correctly and mistake some deposits for withdrawals.\n* Because multimodal LLMs do not accept PDFs directly, well have to convert the PDF to a series of images. We can achieve this by using a tool such as [Stirling PDF](https://github.com/Stirling-Tools/Stirling-PDF/). Stirling PDF is self-hostable which is handy for sensitive data such as bank statements.\n* Stirling PDF will return our PDF as a series of JPGs (one for each page) in a zipped file. We can use n8n's decompress node to extract the images and ensure they are ordered by using the Sort node.\n* Next, we'll resize each page using the Edit Image node to ensure the right balance between resolution limits and processing speed.\n* Each resized page image is then passed into the Basic LLM node which will use our multimodal LLM of choice - Gemini 1.5 Pro. In the LLM node's options, we'll add a \"user message\" of type binary (data) which is how we add our image data as an input.\n* Our prompt will instruct the multimodal LLM to transcribe each page to markdown. Note, you do not need to do this - you can just ask for data points to extract directly! Our goal for this template is to demonstrate the LLMs ability to accurately read the page.\n* Finally, with our markdown version of all pages, we can pass this to another LLM node to extract required data such as deposit line items.\n\n## Requirements\n\n* Google Gemini API for Multimodal LLM.\n* Google Drive access for document storage.\n* [Stirling PDF](https://github.com/Stirling-Tools/Stirling-PDF) instance for PDF to Image conversion\n\n## Customising the workflow\n\n* At time of writing, Gemini 1.5 Pro is the most accurate in text document parsing with a relatively low cost. If you are not using Google Gemini however you can switch to other multimodal LLMs such as OpenAI GPT or Antrophic Claude. \n\n* If you don't need the markdown, simply asking what to extract directly in the LLM's prompt is also acceptable and would save a few extra steps.\n\n* Not parsing any bank statements any time soon? This template also works for Invoices, inventory lists, contracts, legal documents etc.",
  "featuredImage": "/data/workflows/2421/2421.webp",
  "author": {
    "id": 101,
    "slug": "jimleuk",
    "name": "Jimleuk",
    "avatar": ""
  },
  "categories": [
    "Document Extraction",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 16729,
  "downloads": 1672,
  "createdAt": "2024-09-18T15:34:00.441Z",
  "updatedAt": "2026-01-16T08:24:41.253Z",
  "publishedAt": "2024-09-18T15:34:00.441Z",
  "nodes": 20,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/2421",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Transcribing bank statements to markdown using Gemini Vision AI",
    "workflowName": "Transcribing bank statements to markdown using Gemini Vision AI",
    "description": "This n8n workflow demonstrates an approach to parsing bank statement PDFs with multimodal LLMs as an alternative to traditional OCR. This allows for much more accurate data extraction from the document especially when it comes to tables and complex layouts.\n\nMultimodal Parsing is better than traditiona OCR because:\n* It reduces complexity and overhead by avoiding the need to preprocess the document into text format such as markdown before passing to the LLM.\n* It handles non-standard PDF formats which may produce garbled output via traditional OCR text conversion.\n* It's orders of magnitude cheaper than premium OCR models that still require post-processing cleanup and formatting. LLMs can format to any schema or language you desire!\n\n## How it works\n\nYou can use the example bank statement created specifically for this workflow here: [https://drive.google.com/file/d/1wS9U7MQDthj57CvEcqG_Llkr-ek6RqGA/view?usp=sharing](https://drive.google.com/file/d/1wS9U7MQDthj57CvEcqG_Llkr-ek6RqGA/view?usp=sharing)\n\n* A PDF bank statement is imported via Google Drive. For this demo, I've created a mock bank statement which includes complex table layouts of 5 columns. Typically, OCR will be unable to align the columns correctly and mistake some deposits for withdrawals.\n* Because multimodal LLMs do not accept PDFs directly, well have to convert the PDF to a series of images. We can achieve this by using a tool such as [Stirling PDF](https://github.com/Stirling-Tools/Stirling-PDF/). Stirling PDF is self-hostable which is handy for sensitive data such as bank statements.\n* Stirling PDF will return our PDF as a series of JPGs (one for each page) in a zipped file. We can use n8n's decompress node to extract the images and ensure they are ordered by using the Sort node.\n* Next, we'll resize each page using the Edit Image node to ensure the right balance between resolution limits and processing speed.\n* Each resized page image is then passed into the Basic LLM node which will use our multimodal LLM of choice - Gemini 1.5 Pro. In the LLM node's options, we'll add a \"user message\" of type binary (data) which is how we add our image data as an input.\n* Our prompt will instruct the multimodal LLM to transcribe each page to markdown. Note, you do not need to do this - you can just ask for data points to extract directly! Our goal for this template is to demonstrate the LLMs ability to accurately read the page.\n* Finally, with our markdown version of all pages, we can pass this to another LLM node to extract required data such as deposit line items.\n\n## Requirements\n\n* Google Gemini API for Multimodal LLM.\n* Google Drive access for document storage.\n* [Stirling PDF](https://github.com/Stirling-Tools/Stirling-PDF) instance for PDF to Image conversion\n\n## Customising the workflow\n\n* At time of writing, Gemini 1.5 Pro is the most accurate in text document parsing with a relatively low cost. If you are not using Google Gemini however you can switch to other multimodal LLMs such as OpenAI GPT or Antrophic Claude. \n\n* If you don't need the markdown, simply asking what to extract directly in the LLM's prompt is also acceptable and would save a few extra steps.\n\n* Not parsing any bank statements any time soon? This template also works for Invoices, inventory lists, contracts, legal documents etc.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Sort Pages",
      "type": "n8n-nodes-base.sort",
      "role": "sort",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Bank Statement",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Split PDF into Images",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Extract Zip File",
      "type": "n8n-nodes-base.compression",
      "role": "compression",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Images To List",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Resize Images For AI",
      "type": "n8n-nodes-base.editImage",
      "role": "editImage",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Gemini Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Combine All Pages",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Extract All Deposit Table Rows",
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "role": "informationExtractor",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Transcribe to Markdown",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.4"
    }
  ]
}