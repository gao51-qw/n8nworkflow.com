{
  "id": 7134,
  "slug": "7134",
  "title": "Automate email marketing campaigns with NocoDB & Brevo",
  "description": "## **Descriptionüîç**\nThis n8n workflow is a **complete marketing automation system** that connects to your CDP (Customer Data Platform), selects which flows to send, and delivers personalized emails using Brevo. It's modular and extensible ‚Äî you can also add SMS, push notifications, Telegram messages, or other channels.\n\nTo build a full marketing automation system, you need **four key components**:\n\n1. **Workflow Automation** ‚Äì using n8n (this workflow)\n2. **CDP** ‚Äì store and manage user data (e.g., NocoDB, Metabase, Power BI, etc.)\n3. **Database** ‚Äì track transactions, templates, and send statuses (e.g., NocoDB)\n4. **BI / Analytics** ‚Äì monitor performance by flows, journeys, and sent events\n\nThis workflow represents the **Workflow Automation** layer. You can connect it to your own data stack or use the included example databases (`cdp-ecrm`, `n8n-templates-ecrm`, and `n8n-transaction-ecrm`) to get started quickly.\n\n###  üë§ Who‚Äôs it for?\n\n- Growth & CRM teams managing user engagement flows\n- Ecommerce marketers running time-sensitive email journeys\n- Marketing automation pros using low-code CRM stacks\n- Data teams building custom campaign triggers from CDPs\n\n### ‚úÖ Features\n\n- üîÅ Two modular flows: \"Insert user_id\" and \"Sending Email\"\n- üß† Select flow using `flow_id` from templates in NocoDB\n- ‚úèÔ∏è Insert user data into `n8n-transaction-ecrm` with processing status\n- üîç Filter duplicate users by `user_id` to avoid over-sending\n- üìß Validate email fields and flag disposables\n- üì® Send personalized emails using Brevo template parameters\n- üìä Track delivery with `sent_result`, `sent_at`, and status updates\n- üïí Runs every 30 minutes via schedule trigger\n\n### üõ† How to Use\n\n1. **Set your flow**  \n    In the `Setup Flow` node, change the `flow_id` to match a row in your `n8n-templates-ecrm` table.\n    \n2. **Prepare your tables in NocoDB**\n    \n    - `cdp-ecrm`: contains users (`user_id`, `email`, `first_name`, `phone_number`)\n    - `n8n-templates-ecrm`: contains flows with metadata\n    - `n8n-transaction-ecrm`: stores and updates user send status\n    \n3. **Configure credentials**\n    \n    - NocoDB API Token\n    - Brevo (Sendinblue) API Key\n    \n4. **Trigger the flows**\n\n    - Run ‚ÄúInsert user_id‚Äù manually or on a schedule to prepare users\n    - ‚ÄúSending Email‚Äù runs automatically every 30 minutes\n\n### üìå Notes\n\n- Disposable email domains are filtered using regex\n- Status:\n    - `0-processing` ‚Üí just inserted\n    - `1-sending` ‚Üí ready to send\n    - `2-sent` ‚Üí email sent successfully\n    - `3-no-email` ‚Üí missing email address\n    - `4-disposal-email` ‚Üí disposable or banned email   \n- Easily duplicate the \"Insert user_id\" flow to add more campaigns",
  "featuredImage": "/data/workflows/7134/7134.webp",
  "author": {
    "id": 101,
    "slug": "salimi",
    "name": "Nima Salimi",
    "avatar": ""
  },
  "categories": [
    "Social Media"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 987,
  "downloads": 98,
  "createdAt": "2025-08-07T13:18:17.041Z",
  "updatedAt": "2026-01-16T08:48:39.843Z",
  "publishedAt": "2025-08-07T13:18:17.041Z",
  "nodes": 30,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7134",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate email marketing campaigns with NocoDB & Brevo",
    "workflowName": "Automate email marketing campaigns with NocoDB & Brevo",
    "description": "## **Descriptionüîç**\nThis n8n workflow is a **complete marketing automation system** that connects to your CDP (Customer Data Platform), selects which flows to send, and delivers personalized emails using Brevo. It's modular and extensible ‚Äî you can also add SMS, push notifications, Telegram messages, or other channels.\n\nTo build a full marketing automation system, you need **four key components**:\n\n1. **Workflow Automation** ‚Äì using n8n (this workflow)\n2. **CDP** ‚Äì store and manage user data (e.g., NocoDB, Metabase, Power BI, etc.)\n3. **Database** ‚Äì track transactions, templates, and send statuses (e.g., NocoDB)\n4. **BI / Analytics** ‚Äì monitor performance by flows, journeys, and sent events\n\nThis workflow represents the **Workflow Automation** layer. You can connect it to your own data stack or use the included example databases (`cdp-ecrm`, `n8n-templates-ecrm`, and `n8n-transaction-ecrm`) to get started quickly.\n\n###  üë§ Who‚Äôs it for?\n\n- Growth & CRM teams managing user engagement flows\n- Ecommerce marketers running time-sensitive email journeys\n- Marketing automation pros using low-code CRM stacks\n- Data teams building custom campaign triggers from CDPs\n\n### ‚úÖ Features\n\n- üîÅ Two modular flows: \"Insert user_id\" and \"Sending Email\"\n- üß† Select flow using `flow_id` from templates in NocoDB\n- ‚úèÔ∏è Insert user data into `n8n-transaction-ecrm` with processing status\n- üîç Filter duplicate users by `user_id` to avoid over-sending\n- üìß Validate email fields and flag disposables\n- üì® Send personalized emails using Brevo template parameters\n- üìä Track delivery with `sent_result`, `sent_at`, and status updates\n- üïí Runs every 30 minutes via schedule trigger\n\n### üõ† How to Use\n\n1. **Set your flow**  \n    In the `Setup Flow` node, change the `flow_id` to match a row in your `n8n-templates-ecrm` table.\n    \n2. **Prepare your tables in NocoDB**\n    \n    - `cdp-ecrm`: contains users (`user_id`, `email`, `first_name`, `phone_number`)\n    - `n8n-templates-ecrm`: contains flows with metadata\n    - `n8n-transaction-ecrm`: stores and updates user send status\n    \n3. **Configure credentials**\n    \n    - NocoDB API Token\n    - Brevo (Sendinblue) API Key\n    \n4. **Trigger the flows**\n\n    - Run ‚ÄúInsert user_id‚Äù manually or on a schedule to prepare users\n    - ‚ÄúSending Email‚Äù runs automatically every 30 minutes\n\n### üìå Notes\n\n- Disposable email domains are filtered using regex\n- Status:\n    - `0-processing` ‚Üí just inserted\n    - `1-sending` ‚Üí ready to send\n    - `2-sent` ‚Üí email sent successfully\n    - `3-no-email` ‚Üí missing email address\n    - `4-disposal-email` ‚Üí disposable or banned email   \n- Easily duplicate the \"Insert user_id\" flow to add more campaigns",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Setup Flow",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Map Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Filter Template",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.1"
    },
    {
      "name": "IF Template Parameters OK",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.1"
    },
    {
      "name": "IF user_id is not empty",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Change Status to Sending",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "Get all flow templates from NocoDB",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Remove Duplicates",
      "type": "n8n-nodes-base.removeDuplicates",
      "role": "removeDuplicates",
      "configDescription": "Version 2"
    },
    {
      "name": "Add records By Status Processing",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "Insert Data By Status Processing",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "IF Type Email",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Brevo Send Email",
      "type": "n8n-nodes-base.sendInBlue",
      "role": "sendInBlue",
      "configDescription": "Version 1"
    },
    {
      "name": "Update Data",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "Status-no-email",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "Schedule Trigger1",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Insert Data By Status Sending",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "Status-disposal-email",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Get user_id from dcp",
      "type": "n8n-nodes-base.nocoDb",
      "role": "nocoDb",
      "configDescription": "Version 3"
    },
    {
      "name": "If email is not empty",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Disposal Check",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.1"
    }
  ]
}