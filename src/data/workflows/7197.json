{
  "id": 7197,
  "slug": "7197",
  "title": "Chat-based financial analysis of P&L and balance sheets with GPT-4 & PostgreSQL",
  "description": "## ğŸ§¾ Whoâ€™s it for  \nThis workflow is designed for **finance teams**, **accountants**, and **data analysts** ğŸ“Š who want to interact with financial data from **two PostgreSQL databases** â€” one containing **Profit & Loss** data and another containing **Balance Sheet** data â€” using natural language chat.  \nItâ€™s perfect for those who need **quick, AI-powered insights** with the correct database automatically selected based on the question.  \n\n---\n\n## âš™ï¸ How it works / What it does  \n1. **Chat Trigger ğŸ’¬** â€“ Starts the workflow when a chat message is received.  \n2. **AI Agent ğŸ¤–** â€“ Processes the userâ€™s question and decides:  \n   - **Profit & Loss DB** â†’ If the question is about revenue, costs, expenses, or profit.  \n   - **Balance Sheet DB** â†’ If the question is about assets, liabilities, or equity.  \n3. **PostgreSQL Query Nodes ğŸ—„ï¸** â€“  \n   - **P_L_Reports** queries the `financial_agent_pl_reports` table.  \n   - **Balance_Sheets** queries the `financial_agent_balancesheets` table.  \n4. **AI Model (OpenAI) ğŸ§ ** â€“ Uses `gpt-4.1-nano` to interpret results and provide an easy-to-read answer.  \n5. **Memory Buffer ğŸ“** â€“ Keeps recent conversation context for a smoother chat experience.  \n6. **Table Output ğŸ“‹** â€“ Always formats the results as a **clean, readable table** with two decimal precision.  \n\n---\n\n## ğŸ› ï¸ How to set up  \n1. **Prepare Your Databases**  \n   - Feed your Profit & Loss and Balance Sheet data into **PostgreSQL**.  \n   - Ensure the correct table structures are used:  \n     - **financial_agent_pl_reports** â†’ P&L data.  \n     - **financial_agent_balancesheets** â†’ Balance Sheet data.  \n\n2. **Configure the PostgreSQL Nodes**  \n   - Add connection credentials for both databases.  \n   - Link **P_L_Reports** and **Balance_Sheets** nodes to the correct tables.  \n\n3. **Set Up the AI Agent**  \n   - Paste the provided **system message** into the AI Agent node (already configured in your workflow).  \n\n4. **Connect the Nodes**  \n   - Ensure **Chat Trigger â†’ AI Agent â†’ DB Nodes â†’ AI Model** connections match your workflow.  \n\n5. **Deploy**  \n   - Save and activate the workflow.  \n   - Start sending finance-related queries to test.  \n\n---\n\n## ğŸ“‹ Requirements  \n- **n8n** (latest version recommended)  \n- **PostgreSQL databases** with:  \n  - `financial_agent_pl_reports` table (P&L data).  \n  - `financial_agent_balancesheets` table (Balance Sheet data).  \n- **OpenAI API credentials** with access to `gpt-4.1-nano`.  \n- **Active Webhook/Chat Trigger** for receiving queries.  \n\n---\n\n## ğŸ¨ How to customize  \n- **Expand AI Instructions** ğŸ—’ï¸ â€“ Add more rules in the system message for different data sources or formatting styles.  \n- **Change AI Model** ğŸ§  â€“ Switch to a different OpenAI model for faster or more accurate results.  \n- **Add More Databases** ğŸ—„ï¸ â€“ Connect extra financial datasets, e.g., cash flow, sales analytics.  \n- **Enhance Table Styling** ğŸ“Š â€“ Use Markdown or HTML formatting for richer outputs.  \n- **Refine Query Logic** ğŸ” â€“ Modify filtering logic to better match your reporting needs.  \n",
  "featuredImage": "/data/workflows/7197/7197.webp",
  "author": {
    "id": 101,
    "slug": "zain104",
    "name": "Zain Ali",
    "avatar": ""
  },
  "categories": [
    "Document Extraction",
    "Multimodal AI"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 113,
  "downloads": 11,
  "createdAt": "2025-08-09T14:12:26.675Z",
  "updatedAt": "2026-01-16T08:48:59.349Z",
  "publishedAt": "2025-08-09T14:12:26.675Z",
  "nodes": 7,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7197",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Chat-based financial analysis of P&L and balance sheets with GPT-4 & PostgreSQL",
    "workflowName": "Chat-based financial analysis of P&L and balance sheets with GPT-4 & PostgreSQL",
    "description": "## ğŸ§¾ Whoâ€™s it for  \nThis workflow is designed for **finance teams**, **accountants**, and **data analysts** ğŸ“Š who want to interact with financial data from **two PostgreSQL databases** â€” one containing **Profit & Loss** data and another containing **Balance Sheet** data â€” using natural language chat.  \nItâ€™s perfect for those who need **quick, AI-powered insights** with the correct database automatically selected based on the question.  \n\n---\n\n## âš™ï¸ How it works / What it does  \n1. **Chat Trigger ğŸ’¬** â€“ Starts the workflow when a chat message is received.  \n2. **AI Agent ğŸ¤–** â€“ Processes the userâ€™s question and decides:  \n   - **Profit & Loss DB** â†’ If the question is about revenue, costs, expenses, or profit.  \n   - **Balance Sheet DB** â†’ If the question is about assets, liabilities, or equity.  \n3. **PostgreSQL Query Nodes ğŸ—„ï¸** â€“  \n   - **P_L_Reports** queries the `financial_agent_pl_reports` table.  \n   - **Balance_Sheets** queries the `financial_agent_balancesheets` table.  \n4. **AI Model (OpenAI) ğŸ§ ** â€“ Uses `gpt-4.1-nano` to interpret results and provide an easy-to-read answer.  \n5. **Memory Buffer ğŸ“** â€“ Keeps recent conversation context for a smoother chat experience.  \n6. **Table Output ğŸ“‹** â€“ Always formats the results as a **clean, readable table** with two decimal precision.  \n\n---\n\n## ğŸ› ï¸ How to set up  \n1. **Prepare Your Databases**  \n   - Feed your Profit & Loss and Balance Sheet data into **PostgreSQL**.  \n   - Ensure the correct table structures are used:  \n     - **financial_agent_pl_reports** â†’ P&L data.  \n     - **financial_agent_balancesheets** â†’ Balance Sheet data.  \n\n2. **Configure the PostgreSQL Nodes**  \n   - Add connection credentials for both databases.  \n   - Link **P_L_Reports** and **Balance_Sheets** nodes to the correct tables.  \n\n3. **Set Up the AI Agent**  \n   - Paste the provided **system message** into the AI Agent node (already configured in your workflow).  \n\n4. **Connect the Nodes**  \n   - Ensure **Chat Trigger â†’ AI Agent â†’ DB Nodes â†’ AI Model** connections match your workflow.  \n\n5. **Deploy**  \n   - Save and activate the workflow.  \n   - Start sending finance-related queries to test.  \n\n---\n\n## ğŸ“‹ Requirements  \n- **n8n** (latest version recommended)  \n- **PostgreSQL databases** with:  \n  - `financial_agent_pl_reports` table (P&L data).  \n  - `financial_agent_balancesheets` table (Balance Sheet data).  \n- **OpenAI API credentials** with access to `gpt-4.1-nano`.  \n- **Active Webhook/Chat Trigger** for receiving queries.  \n\n---\n\n## ğŸ¨ How to customize  \n- **Expand AI Instructions** ğŸ—’ï¸ â€“ Add more rules in the system message for different data sources or formatting styles.  \n- **Change AI Model** ğŸ§  â€“ Switch to a different OpenAI model for faster or more accurate results.  \n- **Add More Databases** ğŸ—„ï¸ â€“ Connect extra financial datasets, e.g., cash flow, sales analytics.  \n- **Enhance Table Styling** ğŸ“Š â€“ Use Markdown or HTML formatting for richer outputs.  \n- **Refine Query Logic** ğŸ” â€“ Modify filtering logic to better match your reporting needs.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.1"
    },
    {
      "name": "P_L_Reports",
      "type": "n8n-nodes-base.postgresTool",
      "role": "postgresTool",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Balance_Sheets",
      "type": "n8n-nodes-base.postgresTool",
      "role": "postgresTool",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.3"
    }
  ]
}