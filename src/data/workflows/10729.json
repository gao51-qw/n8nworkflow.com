{
  "id": 10729,
  "slug": "10729",
  "title": "Benchmark content safety guardrails with automated test suite & reports",
  "description": "## üõ°Ô∏è Evaluate Guardrails Node Accuracy with Automated Test Suite\n\nThis workflow benchmarks the **n8n Guardrails node** across multiple safety categories -including PII, NSFW, jailbreak attempts, secret keys, and unsafe URLs.  \nIt runs **36 structured test cases**, classifies each as PASS or VIOLATION, calculates accuracy metrics, and emails a detailed HTML report.\n\n\n### üîÑ How it works\n1. The workflow loops through 36 predefined test prompts.  \n2. Each prompt is checked by the **Guardrails node** for violations.  \n3. Results are recorded as PASS or VIOLATION.  \n4. The system calculates metrics (accuracy, precision, recall, F1).  \n5. A formatted Markdown ‚Üí HTML report is generated and sent via Gmail.\n\n### ‚öôÔ∏è Set up steps\n1. Add your **OpenAI** and **Gmail** credentials in n8n.  \n2. Replace `YOUR_MAIL_HERE` in the Gmail node with your own address.  \n3. *(Optional)* Change the model in the **OpenAI Chat Model** node.  \n   - Default: `gpt-4o-mini`  \n   - You can switch to `gpt-5` or another available model if needed.  \n4. Click **Execute Workflow**: test cases will run automatically.  \n5. Check your inbox for the results.\n\n### üß† Who it‚Äôs for\n- AI safety testers and workflow developers  \n- n8n users experimenting with the Guardrails node  \n- Teams validating LLM moderation, filtering, or compliance setups\n\n### üß© Requirements\n- n8n **v1.119+**  \n- Guardrails node enabled  \n- OpenAI credentials (optional but recommended)  \n- Email integration (Gmail or SendGrid)\n\n\n## üí° Why it‚Äôs useful\nUse this test suite to understand how accurately the Guardrails node identifies unsafe content across different categories. The generated metrics help you fine-tune thresholds, compare models, and strengthen AI moderation workflows.\n\n### Example result\n![image.png](fileId:3279)\n![image.png](fileId:3280)",
  "featuredImage": "/data/workflows/10729/10729.webp",
  "author": {
    "id": 101,
    "slug": "patrickn8n",
    "name": "Patrick Siewert",
    "avatar": ""
  },
  "categories": [
    "Engineering",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 364,
  "downloads": 36,
  "createdAt": "2025-11-11T15:36:28.203Z",
  "updatedAt": "2026-01-16T09:06:04.693Z",
  "publishedAt": "2025-11-11T15:36:28.203Z",
  "nodes": 24,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10729",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Benchmark content safety guardrails with automated test suite & reports",
    "workflowName": "Benchmark content safety guardrails with automated test suite & reports",
    "description": "## üõ°Ô∏è Evaluate Guardrails Node Accuracy with Automated Test Suite\n\nThis workflow benchmarks the **n8n Guardrails node** across multiple safety categories -including PII, NSFW, jailbreak attempts, secret keys, and unsafe URLs.  \nIt runs **36 structured test cases**, classifies each as PASS or VIOLATION, calculates accuracy metrics, and emails a detailed HTML report.\n\n\n### üîÑ How it works\n1. The workflow loops through 36 predefined test prompts.  \n2. Each prompt is checked by the **Guardrails node** for violations.  \n3. Results are recorded as PASS or VIOLATION.  \n4. The system calculates metrics (accuracy, precision, recall, F1).  \n5. A formatted Markdown ‚Üí HTML report is generated and sent via Gmail.\n\n### ‚öôÔ∏è Set up steps\n1. Add your **OpenAI** and **Gmail** credentials in n8n.  \n2. Replace `YOUR_MAIL_HERE` in the Gmail node with your own address.  \n3. *(Optional)* Change the model in the **OpenAI Chat Model** node.  \n   - Default: `gpt-4o-mini`  \n   - You can switch to `gpt-5` or another available model if needed.  \n4. Click **Execute Workflow**: test cases will run automatically.  \n5. Check your inbox for the results.\n\n### üß† Who it‚Äôs for\n- AI safety testers and workflow developers  \n- n8n users experimenting with the Guardrails node  \n- Teams validating LLM moderation, filtering, or compliance setups\n\n### üß© Requirements\n- n8n **v1.119+**  \n- Guardrails node enabled  \n- OpenAI credentials (optional but recommended)  \n- Email integration (Gmail or SendGrid)\n\n\n## üí° Why it‚Äôs useful\nUse this test suite to understand how accurately the Guardrails node identifies unsafe content across different categories. The generated metrics help you fine-tune thresholds, compare models, and strengthen AI moderation workflows.\n\n### Example result\n![image.png](fileId:3279)\n![image.png](fileId:3280)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When clicking ‚ÄòExecute workflow‚Äô",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Check Guardrails",
      "type": "@n8n/n8n-nodes-langchain.guardrails",
      "role": "guardrails",
      "configDescription": "Version 1"
    },
    {
      "name": "Format Pass Result",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Format Fail Result",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Combine Result",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Calculate Metrics",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Format Report",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Preserve Original Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send a message",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Set Test Data (code)",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Markdown",
      "type": "n8n-nodes-base.markdown",
      "role": "markdown",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}