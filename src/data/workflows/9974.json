{
  "id": 9974,
  "slug": "9974",
  "title": "Automate HVAC service scheduling with AI agent, Google Calendar and Gmail",
  "description": "**Instant, automated scheduling.** This AI Scheduling Agent manages real-time appointments, availability checks, and rescheduling across Google Calendar and Sheets, eliminating human hold times.\n\n---\n\n### üéØ Problem Statement\n\nTraditional call center or online booking systems often lack the flexibility to handle complex, multi-step customer requests like rescheduling, checking dynamic availability across multiple time slots, or handling context-aware conversational booking. This leads to friction, missed bookings, and high administrative overhead for service companies like HVAC providers.\n\n---\n\n### ‚ú® Solution\n\nThis workflow deploys a sophisticated **AI Scheduling Agent** that acts as a virtual receptionist. It uses the Language Model's (LLM) \"tool-use\" capability to intelligently execute complex, sequential business logic (e.g., check availability _before_ booking, find existing events _before_ rescheduling) and manages the entire lifecycle of a service appointment, from initial inquiry to final confirmation.\n\n---\n\n### ‚öôÔ∏è How It Works (Multi-Step Execution)\n\n1.  **Trigger:** A customer request (e.g., from an external voice or text platform) hits the **Webhook Trigger** with intent details (e.g., tool\\_request: 'reschedule\\_appointment').\n    \n2.  **Agent Logic:** The **Receptionist Agent** uses a strict system prompt and its internal tools to formulate an execution plan. It maintains conversational state via the **simple-memory** node.\n    \n3.  **Tool Execution (Example: Reschedule):** The Agent executes a predefined sequence of private tools:\n    \n    *   **find\\_old\\_event**: Locates the existing booking ID using the customer's email.\n        \n    *   **check\\_calendar**: Verifies the proposed new time is available (2-hour window).\n        \n    *   **reschedule\\_appointment**: Updates the calendar event.\n        \n    *   **log\\_lead**: Updates the central Google Sheet.\n        \n4.  **Synchronous Response:** The Agent sends a confirmation or follow-up question via the **respond\\_to\\_webhook** node.\n    \n5.  **Asynchronous Confirmation:** The **log\\_lead** action triggers a secondary workflow that composes a professional email via a second LLM (**Anthropic**) and sends it to the customer via **Gmail**, followed by an internal alert via **Google Chat**.\n    \n---\n\n### üõ†Ô∏è Setup Steps\n\n1.  **Credentials:**\n    \n    *   **AI/LLM:** Configure credentials for the Language Model used (**OpenAI** or **Gemini**) for the core Agent.\n        \n    *   **Google Services:** Set up OAuth2 credentials for **Google Calendar** (for booking/checking), **Google Sheets** (for logging), and **Gmail** (for customer confirmation).\n        \n2.  **Google Calendar:** Specify the technician's calendar ID (bhuvaneshx13@gmail.com in the template) in all Calendar nodes.\n    \n3.  **Google Sheets:** Create a new Google Sheet to serve as the **Lead Log** and update the Document ID and Sheet Name in the **log\\_lead** and **log\\_lead\\_trigger** nodes.\n    \n4.  **Tool Configuration:** Review and customize the Agent's system prompt in the **Receptionist** node to align time zone rules (currently **Asia/Kolkata - IST**) and business hours (9:00 AM to 6:00 PM) with your operations.\n \n---\n\n### ‚úÖ Benefits\n\n1.  **Increased Efficiency:** Fully automates complex scheduling and rescheduling, freeing up human staff.\n    \n2.  **Contextual Service:** AI handles multi-turn conversations and adheres to strict business rules (e.g., 2-hour slots, maximum tool usage).\n    \n3.  **Data Integrity:** Ensures all bookings are immediately logged to Google Sheets, maintaining a centralized record (CRM).\n    \n4.  **Professional Flow:** Provides immediate confirmation to the customer via email and instant notification to the internal team via chat.\n    \n---\n\n### üöÄ Other Use Cases\n\nThe underlying multi-step, tool-execution pattern is highly versatile and can be adapted for any service industry requiring complex, rules-based scheduling:\n\n*   **Real Estate:** Scheduling property viewings (Check agent availability ‚Üí Book viewing ‚Üí Send directions).\n\n*   **HVAC Services:** Managing maintenance and repair visits (Diagnose issue type ‚Üí Match with qualified technician ‚Üí Check part availability ‚Üí Schedule visit ‚Üí Send service confirmation).\n    \n*   **Medical/Dental:** Booking patient appointments (Check insurance eligibility ‚Üí Check doctor availability ‚Üí Book ‚Üí Send pre-visit forms).\n    \n*   **Legal Services:** Intake for consultations (Collect client issue ‚Üí Check specialist availability ‚Üí Book ‚Üí Send retainer agreement).\n    \n*   **Automotive Repair:** Scheduling service bays (Check bay and mechanic availability ‚Üí Book ‚Üí Update internal service board).",
  "featuredImage": "/data/workflows/9974/9974.webp",
  "author": {
    "id": 101,
    "slug": "bhuvanesh",
    "name": "Bhuvanesh R",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 864,
  "downloads": 86,
  "createdAt": "2025-10-21T09:41:32.806Z",
  "updatedAt": "2026-01-16T09:02:49.783Z",
  "publishedAt": "2025-10-21T09:41:32.806Z",
  "nodes": 30,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9974",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate HVAC service scheduling with AI agent, Google Calendar and Gmail",
    "workflowName": "Automate HVAC service scheduling with AI agent, Google Calendar and Gmail",
    "description": "**Instant, automated scheduling.** This AI Scheduling Agent manages real-time appointments, availability checks, and rescheduling across Google Calendar and Sheets, eliminating human hold times.\n\n---\n\n### üéØ Problem Statement\n\nTraditional call center or online booking systems often lack the flexibility to handle complex, multi-step customer requests like rescheduling, checking dynamic availability across multiple time slots, or handling context-aware conversational booking. This leads to friction, missed bookings, and high administrative overhead for service companies like HVAC providers.\n\n---\n\n### ‚ú® Solution\n\nThis workflow deploys a sophisticated **AI Scheduling Agent** that acts as a virtual receptionist. It uses the Language Model's (LLM) \"tool-use\" capability to intelligently execute complex, sequential business logic (e.g., check availability _before_ booking, find existing events _before_ rescheduling) and manages the entire lifecycle of a service appointment, from initial inquiry to final confirmation.\n\n---\n\n### ‚öôÔ∏è How It Works (Multi-Step Execution)\n\n1.  **Trigger:** A customer request (e.g., from an external voice or text platform) hits the **Webhook Trigger** with intent details (e.g., tool\\_request: 'reschedule\\_appointment').\n    \n2.  **Agent Logic:** The **Receptionist Agent** uses a strict system prompt and its internal tools to formulate an execution plan. It maintains conversational state via the **simple-memory** node.\n    \n3.  **Tool Execution (Example: Reschedule):** The Agent executes a predefined sequence of private tools:\n    \n    *   **find\\_old\\_event**: Locates the existing booking ID using the customer's email.\n        \n    *   **check\\_calendar**: Verifies the proposed new time is available (2-hour window).\n        \n    *   **reschedule\\_appointment**: Updates the calendar event.\n        \n    *   **log\\_lead**: Updates the central Google Sheet.\n        \n4.  **Synchronous Response:** The Agent sends a confirmation or follow-up question via the **respond\\_to\\_webhook** node.\n    \n5.  **Asynchronous Confirmation:** The **log\\_lead** action triggers a secondary workflow that composes a professional email via a second LLM (**Anthropic**) and sends it to the customer via **Gmail**, followed by an internal alert via **Google Chat**.\n    \n---\n\n### üõ†Ô∏è Setup Steps\n\n1.  **Credentials:**\n    \n    *   **AI/LLM:** Configure credentials for the Language Model used (**OpenAI** or **Gemini**) for the core Agent.\n        \n    *   **Google Services:** Set up OAuth2 credentials for **Google Calendar** (for booking/checking), **Google Sheets** (for logging), and **Gmail** (for customer confirmation).\n        \n2.  **Google Calendar:** Specify the technician's calendar ID (bhuvaneshx13@gmail.com in the template) in all Calendar nodes.\n    \n3.  **Google Sheets:** Create a new Google Sheet to serve as the **Lead Log** and update the Document ID and Sheet Name in the **log\\_lead** and **log\\_lead\\_trigger** nodes.\n    \n4.  **Tool Configuration:** Review and customize the Agent's system prompt in the **Receptionist** node to align time zone rules (currently **Asia/Kolkata - IST**) and business hours (9:00 AM to 6:00 PM) with your operations.\n \n---\n\n### ‚úÖ Benefits\n\n1.  **Increased Efficiency:** Fully automates complex scheduling and rescheduling, freeing up human staff.\n    \n2.  **Contextual Service:** AI handles multi-turn conversations and adheres to strict business rules (e.g., 2-hour slots, maximum tool usage).\n    \n3.  **Data Integrity:** Ensures all bookings are immediately logged to Google Sheets, maintaining a centralized record (CRM).\n    \n4.  **Professional Flow:** Provides immediate confirmation to the customer via email and instant notification to the internal team via chat.\n    \n---\n\n### üöÄ Other Use Cases\n\nThe underlying multi-step, tool-execution pattern is highly versatile and can be adapted for any service industry requiring complex, rules-based scheduling:\n\n*   **Real Estate:** Scheduling property viewings (Check agent availability ‚Üí Book viewing ‚Üí Send directions).\n\n*   **HVAC Services:** Managing maintenance and repair visits (Diagnose issue type ‚Üí Match with qualified technician ‚Üí Check part availability ‚Üí Schedule visit ‚Üí Send service confirmation).\n    \n*   **Medical/Dental:** Booking patient appointments (Check insurance eligibility ‚Üí Check doctor availability ‚Üí Book ‚Üí Send pre-visit forms).\n    \n*   **Legal Services:** Intake for consultations (Collect client issue ‚Üí Check specialist availability ‚Üí Book ‚Üí Send retainer agreement).\n    \n*   **Automotive Repair:** Scheduling service bays (Check bay and mechanic availability ‚Üí Book ‚Üí Update internal service board).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "webhook_trigger",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "think",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1"
    },
    {
      "name": "respond_to_webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.4"
    },
    {
      "name": "simple-memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Receptionist",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "check_calendar",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "log_lead",
      "type": "n8n-nodes-base.googleSheetsTool",
      "role": "googleSheetsTool",
      "configDescription": "Version 4.6"
    },
    {
      "name": "log_lead_trigger",
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "role": "googleSheetsTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "find_old_event",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "reschedule_appointment",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Compose a mail",
      "type": "@n8n/n8n-nodes-langchain.anthropic",
      "role": "anthropic",
      "configDescription": "Version 1"
    },
    {
      "name": "booking_confirmation",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "cancel_appointment",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "book_appointment",
      "type": "n8n-nodes-base.googleCalendarTool",
      "role": "googleCalendarTool",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "message_team",
      "type": "n8n-nodes-base.googleChat",
      "role": "googleChat",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}