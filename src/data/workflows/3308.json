{
  "id": 3308,
  "slug": "3308",
  "title": "Push multiple files to GitHub repository via Github REST API",
  "description": "## Introduction\nThis workflow offers a streamlined solution for uploading multiple files to a GitHub repository simultaneously using GitHub's REST API. It addresses a significant limitation of n8n's native GitHub node, which only supports single-file uploads at a time. By leveraging GitHub's Git Data API, this workflow creates a new Git tree containing multiple files, commits this tree, and updates the target branch—all in a single automated process.\n\nThe workflow is particularly valuable for automation scenarios that require batch file operations, such as deploying website updates, publishing documentation, or maintaining configuration files across repositories. It eliminates the need for multiple separate API calls when working with multiple files, making your automation more efficient and less prone to partial update issues.\n\nBy abstracting the complexities of GitHub's Git Data API into a reusable workflow, it provides a practical solution for developers, content managers, and DevOps professionals who need to programmatically manage repository content at scale.\n\n## Who is this for?\nThis workflow is designed for:\n\n- Developers and DevOps engineers who need to automate file updates in GitHub repositories\n- Content managers who regularly publish multiple files to GitHub-hosted websites or documentation\n- Automation specialists looking to integrate GitHub operations into larger workflows\n- Teams using n8n for CI/CD processes who need to push code or configuration changes\n\nUsers should have basic familiarity with GitHub concepts (repositories, branches, commits) and should be comfortable obtaining and using GitHub Personal Access Tokens. While the workflow handles the API complexity, users should understand the fundamentals of version control to effectively utilize and customize it.\n\n## What problem is this workflow solving?\nThis workflow addresses several key challenges:\n\n1. **Limited batch operations**: n8n's native GitHub node only supports uploading one file at a time, making multi-file operations cumbersome and inefficient.\n\n2. **API complexity**: GitHub's Git Data API requires multiple sequential calls with interdependent data to create commits with multiple files, which is complex to implement manually.\n\n3. **Automation bottlenecks**: Without this workflow, automating multi-file updates would require either multiple separate API calls (risking partial updates) or custom scripting outside of n8n.\n\n4. **Consistency issues**: When files need to be updated together (e.g., code and corresponding documentation), this workflow ensures they're committed in a single atomic operation.\n\nBy solving these issues, the workflow enables reliable, atomic updates of multiple files, maintaining repository consistency and simplifying automation processes.\n\n## What this workflow does\n### Overview\nThis workflow uses GitHub's REST API to push multiple files to a repository in a single operation. It follows Git's internal model by:\n1. Retrieving the current state of the repository\n2. Creating a new tree with the files to be added or updated\n3. Creating a new commit with this tree\n4. Updating the branch reference to point to the new commit\n\n### Process\n1. **Initialization**: The workflow starts with a manual trigger and sets up GitHub credentials and repository information.\n\n2. **File Content Definition**: Two \"Set\" nodes define the content for the files to be uploaded.\n\n3. **Repository State Retrieval**: \n   - The workflow fetches the latest commit SHA for the specified branch\n   - It then retrieves the base tree SHA from this commit\n\n4. **Tree Creation**: A new Git tree is created that includes both files (file1.txt and file2.txt), specifying their paths and content.\n\n5. **Commit Creation**: A new commit is created with the specified commit message, referencing the new tree and the parent commit.\n\n6. **Branch Update**: Finally, the branch reference is updated to point to the new commit, making the changes visible in the repository.\n\n## Setup\nTo use this workflow:\n\n1. **Import the workflow**: Download the workflow JSON and import it into your n8n instance.\n\n2. **Create a GitHub Personal Access Token**:\n   - Go to GitHub Settings → Developer Settings → Personal Access Tokens → Fine-grained tokens\n   - Create a new token with \"Contents\" permission (Read and write) for your target repository\n\n3. **Configure the workflow**:\n   - Update the \"Set Github Info\" node with:\n     - Your GitHub Personal Access Token\n     - Your GitHub username\n     - Your repository name\n     - The target branch (default is \"main\")\n     - A commit message\n\n4. **Define file content**:\n   - Modify the \"File 1\" and \"File 2\" nodes with the content you want to upload\n\n5. **Adjust file paths if needed**:\n   - In the \"Create new tree\" node, update the file paths if you want to change where the files are stored in the repository\n\n6. **Save and run the workflow**: Click \"Test workflow\" to execute the process.\n\n## How to customize this workflow to your needs\nThis workflow can be adapted in several ways:\n\n1. **Add more files**: \n   - Create additional \"Set\" nodes for more file content\n   - In the \"Create new tree\" node, add more tree entries following the same pattern (path, mode, type, content)\n\n2. **Change file locations**:\n   - Modify the \"path\" parameters in the \"Create new tree\" node to place files in different directories\n\n3. **Dynamic file content**:\n   - Replace the static content in the \"File\" nodes with data from other sources\n   - Use previous nodes or HTTP requests to generate file content dynamically\n\n4. **Conditional file updates**:\n   - Add IF nodes to determine which files should be updated based on certain conditions\n   - Create separate branches in your workflow for different update scenarios\n\n5. **Scheduled updates**:\n   - Replace the manual trigger with a Schedule node to run the workflow at specific intervals\n   - Combine with other triggers like Webhook or database events to push files when certain events occur\n\n6. **Error handling**:\n   - Add Error Trigger nodes to handle potential API failures\n   - Implement notification nodes to alert you of successful pushes or failures",
  "featuredImage": "/data/workflows/3308/3308.webp",
  "author": {
    "id": 101,
    "slug": "customworkflowsai",
    "name": "Custom Workflows AI",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "intermediate",
  "price": 0,
  "visitors": 1032,
  "downloads": 103,
  "createdAt": "2025-03-24T12:24:08.927Z",
  "updatedAt": "2026-01-16T08:29:08.402Z",
  "publishedAt": "2025-03-24T12:24:08.927Z",
  "nodes": 10,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3308",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Push multiple files to GitHub repository via Github REST API",
    "workflowName": "Push multiple files to GitHub repository via Github REST API",
    "description": "## Introduction\nThis workflow offers a streamlined solution for uploading multiple files to a GitHub repository simultaneously using GitHub's REST API. It addresses a significant limitation of n8n's native GitHub node, which only supports single-file uploads at a time. By leveraging GitHub's Git Data API, this workflow creates a new Git tree containing multiple files, commits this tree, and updates the target branch—all in a single automated process.\n\nThe workflow is particularly valuable for automation scenarios that require batch file operations, such as deploying website updates, publishing documentation, or maintaining configuration files across repositories. It eliminates the need for multiple separate API calls when working with multiple files, making your automation more efficient and less prone to partial update issues.\n\nBy abstracting the complexities of GitHub's Git Data API into a reusable workflow, it provides a practical solution for developers, content managers, and DevOps professionals who need to programmatically manage repository content at scale.\n\n## Who is this for?\nThis workflow is designed for:\n\n- Developers and DevOps engineers who need to automate file updates in GitHub repositories\n- Content managers who regularly publish multiple files to GitHub-hosted websites or documentation\n- Automation specialists looking to integrate GitHub operations into larger workflows\n- Teams using n8n for CI/CD processes who need to push code or configuration changes\n\nUsers should have basic familiarity with GitHub concepts (repositories, branches, commits) and should be comfortable obtaining and using GitHub Personal Access Tokens. While the workflow handles the API complexity, users should understand the fundamentals of version control to effectively utilize and customize it.\n\n## What problem is this workflow solving?\nThis workflow addresses several key challenges:\n\n1. **Limited batch operations**: n8n's native GitHub node only supports uploading one file at a time, making multi-file operations cumbersome and inefficient.\n\n2. **API complexity**: GitHub's Git Data API requires multiple sequential calls with interdependent data to create commits with multiple files, which is complex to implement manually.\n\n3. **Automation bottlenecks**: Without this workflow, automating multi-file updates would require either multiple separate API calls (risking partial updates) or custom scripting outside of n8n.\n\n4. **Consistency issues**: When files need to be updated together (e.g., code and corresponding documentation), this workflow ensures they're committed in a single atomic operation.\n\nBy solving these issues, the workflow enables reliable, atomic updates of multiple files, maintaining repository consistency and simplifying automation processes.\n\n## What this workflow does\n### Overview\nThis workflow uses GitHub's REST API to push multiple files to a repository in a single operation. It follows Git's internal model by:\n1. Retrieving the current state of the repository\n2. Creating a new tree with the files to be added or updated\n3. Creating a new commit with this tree\n4. Updating the branch reference to point to the new commit\n\n### Process\n1. **Initialization**: The workflow starts with a manual trigger and sets up GitHub credentials and repository information.\n\n2. **File Content Definition**: Two \"Set\" nodes define the content for the files to be uploaded.\n\n3. **Repository State Retrieval**: \n   - The workflow fetches the latest commit SHA for the specified branch\n   - It then retrieves the base tree SHA from this commit\n\n4. **Tree Creation**: A new Git tree is created that includes both files (file1.txt and file2.txt), specifying their paths and content.\n\n5. **Commit Creation**: A new commit is created with the specified commit message, referencing the new tree and the parent commit.\n\n6. **Branch Update**: Finally, the branch reference is updated to point to the new commit, making the changes visible in the repository.\n\n## Setup\nTo use this workflow:\n\n1. **Import the workflow**: Download the workflow JSON and import it into your n8n instance.\n\n2. **Create a GitHub Personal Access Token**:\n   - Go to GitHub Settings → Developer Settings → Personal Access Tokens → Fine-grained tokens\n   - Create a new token with \"Contents\" permission (Read and write) for your target repository\n\n3. **Configure the workflow**:\n   - Update the \"Set Github Info\" node with:\n     - Your GitHub Personal Access Token\n     - Your GitHub username\n     - Your repository name\n     - The target branch (default is \"main\")\n     - A commit message\n\n4. **Define file content**:\n   - Modify the \"File 1\" and \"File 2\" nodes with the content you want to upload\n\n5. **Adjust file paths if needed**:\n   - In the \"Create new tree\" node, update the file paths if you want to change where the files are stored in the repository\n\n6. **Save and run the workflow**: Click \"Test workflow\" to execute the process.\n\n## How to customize this workflow to your needs\nThis workflow can be adapted in several ways:\n\n1. **Add more files**: \n   - Create additional \"Set\" nodes for more file content\n   - In the \"Create new tree\" node, add more tree entries following the same pattern (path, mode, type, content)\n\n2. **Change file locations**:\n   - Modify the \"path\" parameters in the \"Create new tree\" node to place files in different directories\n\n3. **Dynamic file content**:\n   - Replace the static content in the \"File\" nodes with data from other sources\n   - Use previous nodes or HTTP requests to generate file content dynamically\n\n4. **Conditional file updates**:\n   - Add IF nodes to determine which files should be updated based on certain conditions\n   - Create separate branches in your workflow for different update scenarios\n\n5. **Scheduled updates**:\n   - Replace the manual trigger with a Schedule node to run the workflow at specific intervals\n   - Combine with other triggers like Webhook or database events to push files when certain events occur\n\n6. **Error handling**:\n   - Add Error Trigger nodes to handle potential API failures\n   - Implement notification nodes to alert you of successful pushes or failures",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Get latest commit SHA",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Get base tree SHA",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Create new tree",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Create commit",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Update branch",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Github Info",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "File 1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "File 2",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    }
  ]
}