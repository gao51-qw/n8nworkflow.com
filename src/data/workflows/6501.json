{
  "id": 6501,
  "slug": "6501",
  "title": "Automatically disable unsold Magento 2 products after 1 year with Gmail approval",
  "description": "### This workflow is designed for Magento 2 merchants who want to automatically identify and deactivate products that haven't been sold in the past 12 months, helping to maintain a clean and optimised catalog. \n\nThis automation includes order analysis, product comparison, management approval, and automated product deactivation, with full reporting and transparency.\n\n#### üîß What It Does\n- 1st of Every Month at 8 AM, it triggers a scheduled cleanup.\n- Calculates the date 12 months ago from the current day.\n- Fetches all Magento 2 orders created in the last 12 months via REST API.\n- Extracts all SKUs of products sold during that period.\n- Fetches the entire product catalog from Magento 2.\n- Compares all products with sold SKUs to determine which products had zero sales in the last year.\n- Prepares an HTML email report (including SKU, Name, Price, Status) of the unsold products.\n- Sends the report to the merchant (e.g., kmyprojects@gmail.com) for approval via interactive email (Approve / Decline).\n- If approved, each product is automatically disabled (status updated to 1) in Magento 2 using the REST API.\n- Aggregates all disabled products and sends a confirmation email with a summary and product table.\n- Ensures safe operations with conditional logic and user review before taking any action.\n\n#### üß† Key Features\n- ‚úÖ Fully automated detection of inactive inventory.\n- ‚úÖ Uses n8n's Gmail Approval Node for human decision-making.\n- ‚úÖ Works with Magento 2‚Äôs REST API and handles large product sets with batching and aggregation.\n- ‚úÖ Includes fail-safe conditional checks (e.g., don‚Äôt run if no orders are found).\n- ‚úÖ Clean HTML email reports with product metadata.\n- ‚úÖ Modular and scalable for different business sizes or intervals.\n\n#### üì¶ Use Case Perfect for:\n\n- Magento 2 store owners or managers\n- Digital operations teams aiming for lean product catalogs\n- Agencies maintaining Magento-based ecommerce stores\n- Any business needing automated product lifecycle management\n\n####  üîê Credentials Required\n- Magento 2 API Bearer Token (for reading orders and updating products)\n- Gmail OAuth2 (for sending approval and summary emails)\n\n####  üõ†Ô∏è Customizable Parameters\n- Trigger interval (currently set to monthly at 8 AM)\n- Email recipients for approval and notifications\n- Product status change (can be extended to delete or archive instead of disabling)\n\n#### üß© Workflow Stack\n- Trigger: Schedule (Monthly)\n- Nodes Used:\n- HTTP Request\n- Code (JavaScript)\n- IF Condition\n- Gmail (Approval & Notification)\n- Split Out / Split in Batches\n- Aggregate\n- Merge",
  "featuredImage": "/data/workflows/6501/6501.webp",
  "author": {
    "id": 101,
    "slug": "kmyprojects",
    "name": "Kanaka Kishore Kandregula",
    "avatar": ""
  },
  "categories": [
    "Document Extraction"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 60,
  "downloads": 6,
  "createdAt": "2025-07-26T23:09:43.744Z",
  "updatedAt": "2026-01-16T08:45:18.392Z",
  "publishedAt": "2025-07-26T23:09:43.744Z",
  "nodes": 22,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/6501",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automatically disable unsold Magento 2 products after 1 year with Gmail approval",
    "workflowName": "Automatically disable unsold Magento 2 products after 1 year with Gmail approval",
    "description": "### This workflow is designed for Magento 2 merchants who want to automatically identify and deactivate products that haven't been sold in the past 12 months, helping to maintain a clean and optimised catalog. \n\nThis automation includes order analysis, product comparison, management approval, and automated product deactivation, with full reporting and transparency.\n\n#### üîß What It Does\n- 1st of Every Month at 8 AM, it triggers a scheduled cleanup.\n- Calculates the date 12 months ago from the current day.\n- Fetches all Magento 2 orders created in the last 12 months via REST API.\n- Extracts all SKUs of products sold during that period.\n- Fetches the entire product catalog from Magento 2.\n- Compares all products with sold SKUs to determine which products had zero sales in the last year.\n- Prepares an HTML email report (including SKU, Name, Price, Status) of the unsold products.\n- Sends the report to the merchant (e.g., kmyprojects@gmail.com) for approval via interactive email (Approve / Decline).\n- If approved, each product is automatically disabled (status updated to 1) in Magento 2 using the REST API.\n- Aggregates all disabled products and sends a confirmation email with a summary and product table.\n- Ensures safe operations with conditional logic and user review before taking any action.\n\n#### üß† Key Features\n- ‚úÖ Fully automated detection of inactive inventory.\n- ‚úÖ Uses n8n's Gmail Approval Node for human decision-making.\n- ‚úÖ Works with Magento 2‚Äôs REST API and handles large product sets with batching and aggregation.\n- ‚úÖ Includes fail-safe conditional checks (e.g., don‚Äôt run if no orders are found).\n- ‚úÖ Clean HTML email reports with product metadata.\n- ‚úÖ Modular and scalable for different business sizes or intervals.\n\n#### üì¶ Use Case Perfect for:\n\n- Magento 2 store owners or managers\n- Digital operations teams aiming for lean product catalogs\n- Agencies maintaining Magento-based ecommerce stores\n- Any business needing automated product lifecycle management\n\n####  üîê Credentials Required\n- Magento 2 API Bearer Token (for reading orders and updating products)\n- Gmail OAuth2 (for sending approval and summary emails)\n\n####  üõ†Ô∏è Customizable Parameters\n- Trigger interval (currently set to monthly at 8 AM)\n- Email recipients for approval and notifications\n- Product status change (can be extended to delete or archive instead of disabling)\n\n#### üß© Workflow Stack\n- Trigger: Schedule (Monthly)\n- Nodes Used:\n- HTTP Request\n- Code (JavaScript)\n- IF Condition\n- Gmail (Approval & Notification)\n- Split Out / Split in Batches\n- Aggregate\n- Merge",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Fetch Orders since 1 year ago",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Calculate date an year ago (ISO)",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Extract Sold SKUs from orders",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Get All Product Skus",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Filter products NOT sold in last year",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Gmail User for Approval",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "If1",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Split Out",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Disable Products",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Send a message",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Built Reporting Email",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Build Decision Email",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}