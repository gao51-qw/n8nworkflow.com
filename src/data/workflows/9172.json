{
  "id": 9172,
  "slug": "9172",
  "title": "Promo seeker: Auto-find promo codes with SerpAPI, Gemini & Telegram",
  "description": "Promo Seeker automatically finds, verifies, and delivers active promo codes to users via Telegram or email using SerpAPI + Gemini (OpenRouter). Saves hours of manual searching and deduplicates results into an n8n Data Table for fast reuse.\n\n## Why Use This Workflow?\n\n**Time Savings:** Reduces manual promo hunting from ~2 hours to ~5 minutes per query.\n\n**Cost Reduction:** Cuts reliance on paid scraping tools or manual services — potential savings of $50–$200/month.\n\n**Error Prevention:** Cross-references sources and enforces a 30‑day recency filter to reduce expired-code hits by ~60% vs single-source checks.\n\n**Scalability:** Handles hundreds of queries per day with Data Table upserts and optional scheduling for continuous discovery.\n\n## Ideal For\n\n- **Marketing / Growth Managers:** Quickly discover competitor or partner discounts to promote in campaigns.\n- **Customer Support / Operations:** Respond to user requests with verified promo codes via Telegram or email.\n- **Affiliate / Content Teams:** Aggregate and maintain a clean promo feed for newsletters or site widgets.\n\n## How It Works\n\n1. **Trigger:** Incoming request via Webhook, Telegram message, Google Form submission, or scheduled run.\n2. **Data Collection:** The LangChain agent uses SerpAPI search results and Gemini (OpenRouter) to locate recent promo codes.\n3. **Processing:** Filter for recency (last 30 days), extract code, value, terms, and expiry.\n4. **Intelligence Layer:** Gemini 2.5 Pro (OpenRouter) + LangChain agent structure and verify results, outputting a standardized JSON.\n5. **Output & Delivery:** If a code exists in the Data Table, notify the requester via Telegram and Gmail; otherwise, return results and upsert them into the Data Table.\n6. **Storage & Logging:** Results stored/upserted in an n8n Data Table to prevent duplicates and enable fast lookups.\n\n## Setup Guide\n\n### Prerequisites\n\n| Requirement | Type | Purpose |\n|-------------|------|---------|\n| n8n instance | Essential | Execute the workflow — import JSON to your n8n instance |\n| SerpAPI account | Essential | Web search results for promo code discovery |\n| OpenRouter (Gemini) account | Essential | Language model (Gemini 2.5 Pro) for extraction and verification |\n| Telegram Bot (BotFather) | Essential | Receive queries and send promo notifications |\n| Gmail OAuth2 | Essential | Send rich email notifications |\n| n8n Data Tables | Essential | Store and deduplicate promo code records |\n\nGet your n8n instance here: n8n instance — import the JSON and begin configuration. (Repeat link for convenience) n8n instance\n\n### Installation Steps\n\n1. Import the JSON workflow into your n8n instance.\n2. Configure credentials (use n8n's Credentials UI — do NOT paste keys into nodes):\n   - SerpAPI: paste your SerpAPI API Key from your SerpAPI dashboard.\n   - OpenRouter API: paste your OpenRouter API Key (for Gemini 2.5 Pro).\n   - Telegram API: create bot via @BotFather, then add Bot Token to Telegram credentials.\n   - Gmail OAuth2: use n8n's Gmail OAuth2 credential flow and authorize the account.\n3. Update environment-specific values:\n   - Webhook path: /v1/promo-seeker (configured in the Webhook node) or replace with your preferred path.\n   - Data Table ID: point to your own Data Table\n   - Form/webhook recipient fields (email/chatId mappings).\n4. Customize settings:\n   - Adjust the LangChain agent prompt (Promo Seeker Agent) for different recency windows or regional focus.\n   - Change max results/limit on the Data Table node (default limit = 3).\n5. Test execution:\n   - Trigger via Telegram or a POST to the webhook with sample payload:\n     ```json\n     { \"platform\":\"example.com\", \"email\":\"you@domain.com\" }\n     ```\n   - Confirm notifications arrive and Data Table rows are upserted.\n\n## Technical Details\n\n### Core Nodes\n\n| Node | Purpose | Key Configuration |\n|------|---------|-------------------|\n| SerpAPI | Fetch web search results | Provide credential; adjust search params in agent prompt |\n| Gemini 2.5Pro (OpenRouter) | Extract & verify promo details | Use OpenRouter credential; model google/gemini-2.5-pro |\n| Promo Seeker Agent (LangChain) | Orchestrates search + parsing | System prompt enforces 30‑day recency & result format |\n| Structured Output Parser | Validates agent output | JSON schema example for platform/code/value/terms/validUntil |\n| Data Table (Get row(s)) | Lookup existing promos | Filters by platform; limit = 3 |\n| If (Code Exist?) | Branching logic | Checks existence of platform field |\n| Data Table (Upsert row(s)) | Insert or update promo | Mapping from agent output to Data Table columns |\n| Telegram Trigger / Telegram | Receive queries & notify users | Webhook-based trigger; parse_mode = HTML for messages |\n| Gmail | Send rich HTML emails | Uses Gmail OAuth2 credential |\n| Webhook / Form Trigger | Alternate inputs | Webhook path /v1/promo-seeker and Form trigger for manual submissions |\n\n### Workflow Logic\n\n- On trigger, the Platform Set node normalizes the incoming query and receiver.\n- Get row(s) checks Data Table for existing promos.\n  - If found: notify via Telegram and send Gmail (email template included).\n  - If not found: the Promo Seeker Agent runs SerpAPI searches, parses structured output, then Upsert row(s) saves results and notifications are sent.\n- Structured Output Parser enforces correct JSON to avoid bad upserts.\n\n## Customization Options\n\n### Basic Adjustments\n- Recency window: change the agent prompt to 7/14/30 days.\n- Result limit: increase Data Table Get limit or change Upsert batch size.\n\n### Advanced Enhancements\n- Add Slack or Microsoft Teams notifications (moderate complexity).\n- Add caching layer (Redis) to reduce repeated SerpAPI calls (advanced).\n- Parallelize searches across multiple search engines (higher API usage & complexity).\n\n## Performance & Optimization\n\n| Metric | Expected Performance | Optimization Tips |\n|--------|----------------------|-------------------|\n| Execution time | 8–30s per new search (depends on SerpAPI + LM response) | Reduce SerpAPI page depth; cache recent results |\n| API calls | 3–10 SerpAPI calls per complex query | Batch queries; use higher-quality search params |\n| Error handling | Agent retries on malformed output | Use retry nodes and set onError strategy for downstream nodes |\n\n## Troubleshooting\n\n| Problem | Cause | Solution |\n|---------|-------|----------|\n| No results returned | Query too vague or rate-limited API | Improve query specificity; check SerpAPI quota |\n| Gmail send fails | OAuth scope not granted or token expired | Reconnect Gmail OAuth2 credential in n8n |\n| Telegram webhook not firing | Incorrect bot token or webhook setup | Recreate Telegram credential and check bot permissions |\n| Duplicate rows | Upsert mapping mismatch | Ensure promoCode mapping in Upsert matches structured output |\n| Agent returns malformed JSON | LM prompt too permissive | Tighten the agent system prompt and validate with Structured Output Parser |\n\n---\n\n**Created by:** [khaisa Studio](https://khaisa.studio)\n**Category:** Marketing Automation\n\n**Tags:** promo-codes, coupons, serpapi, telegram, gmail, openrouter, data-tables\n\nNeed custom workflows or help adapting this template? [Contact us](https://khaisa.studio/contact)\n",
  "featuredImage": "/data/workflows/9172/9172.webp",
  "author": {
    "id": 101,
    "slug": "khmuhtadin",
    "name": "Khairul Muhtadin",
    "avatar": ""
  },
  "categories": [
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 298,
  "downloads": 29,
  "createdAt": "2025-10-02T00:48:31.170Z",
  "updatedAt": "2026-01-16T08:59:20.589Z",
  "publishedAt": "2025-10-02T00:48:31.170Z",
  "nodes": 19,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/9172",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Promo seeker: Auto-find promo codes with SerpAPI, Gemini & Telegram",
    "workflowName": "Promo seeker: Auto-find promo codes with SerpAPI, Gemini & Telegram",
    "description": "Promo Seeker automatically finds, verifies, and delivers active promo codes to users via Telegram or email using SerpAPI + Gemini (OpenRouter). Saves hours of manual searching and deduplicates results into an n8n Data Table for fast reuse.\n\n## Why Use This Workflow?\n\n**Time Savings:** Reduces manual promo hunting from ~2 hours to ~5 minutes per query.\n\n**Cost Reduction:** Cuts reliance on paid scraping tools or manual services — potential savings of $50–$200/month.\n\n**Error Prevention:** Cross-references sources and enforces a 30‑day recency filter to reduce expired-code hits by ~60% vs single-source checks.\n\n**Scalability:** Handles hundreds of queries per day with Data Table upserts and optional scheduling for continuous discovery.\n\n## Ideal For\n\n- **Marketing / Growth Managers:** Quickly discover competitor or partner discounts to promote in campaigns.\n- **Customer Support / Operations:** Respond to user requests with verified promo codes via Telegram or email.\n- **Affiliate / Content Teams:** Aggregate and maintain a clean promo feed for newsletters or site widgets.\n\n## How It Works\n\n1. **Trigger:** Incoming request via Webhook, Telegram message, Google Form submission, or scheduled run.\n2. **Data Collection:** The LangChain agent uses SerpAPI search results and Gemini (OpenRouter) to locate recent promo codes.\n3. **Processing:** Filter for recency (last 30 days), extract code, value, terms, and expiry.\n4. **Intelligence Layer:** Gemini 2.5 Pro (OpenRouter) + LangChain agent structure and verify results, outputting a standardized JSON.\n5. **Output & Delivery:** If a code exists in the Data Table, notify the requester via Telegram and Gmail; otherwise, return results and upsert them into the Data Table.\n6. **Storage & Logging:** Results stored/upserted in an n8n Data Table to prevent duplicates and enable fast lookups.\n\n## Setup Guide\n\n### Prerequisites\n\n| Requirement | Type | Purpose |\n|-------------|------|---------|\n| n8n instance | Essential | Execute the workflow — import JSON to your n8n instance |\n| SerpAPI account | Essential | Web search results for promo code discovery |\n| OpenRouter (Gemini) account | Essential | Language model (Gemini 2.5 Pro) for extraction and verification |\n| Telegram Bot (BotFather) | Essential | Receive queries and send promo notifications |\n| Gmail OAuth2 | Essential | Send rich email notifications |\n| n8n Data Tables | Essential | Store and deduplicate promo code records |\n\nGet your n8n instance here: n8n instance — import the JSON and begin configuration. (Repeat link for convenience) n8n instance\n\n### Installation Steps\n\n1. Import the JSON workflow into your n8n instance.\n2. Configure credentials (use n8n's Credentials UI — do NOT paste keys into nodes):\n   - SerpAPI: paste your SerpAPI API Key from your SerpAPI dashboard.\n   - OpenRouter API: paste your OpenRouter API Key (for Gemini 2.5 Pro).\n   - Telegram API: create bot via @BotFather, then add Bot Token to Telegram credentials.\n   - Gmail OAuth2: use n8n's Gmail OAuth2 credential flow and authorize the account.\n3. Update environment-specific values:\n   - Webhook path: /v1/promo-seeker (configured in the Webhook node) or replace with your preferred path.\n   - Data Table ID: point to your own Data Table\n   - Form/webhook recipient fields (email/chatId mappings).\n4. Customize settings:\n   - Adjust the LangChain agent prompt (Promo Seeker Agent) for different recency windows or regional focus.\n   - Change max results/limit on the Data Table node (default limit = 3).\n5. Test execution:\n   - Trigger via Telegram or a POST to the webhook with sample payload:\n     ```json\n     { \"platform\":\"example.com\", \"email\":\"you@domain.com\" }\n     ```\n   - Confirm notifications arrive and Data Table rows are upserted.\n\n## Technical Details\n\n### Core Nodes\n\n| Node | Purpose | Key Configuration |\n|------|---------|-------------------|\n| SerpAPI | Fetch web search results | Provide credential; adjust search params in agent prompt |\n| Gemini 2.5Pro (OpenRouter) | Extract & verify promo details | Use OpenRouter credential; model google/gemini-2.5-pro |\n| Promo Seeker Agent (LangChain) | Orchestrates search + parsing | System prompt enforces 30‑day recency & result format |\n| Structured Output Parser | Validates agent output | JSON schema example for platform/code/value/terms/validUntil |\n| Data Table (Get row(s)) | Lookup existing promos | Filters by platform; limit = 3 |\n| If (Code Exist?) | Branching logic | Checks existence of platform field |\n| Data Table (Upsert row(s)) | Insert or update promo | Mapping from agent output to Data Table columns |\n| Telegram Trigger / Telegram | Receive queries & notify users | Webhook-based trigger; parse_mode = HTML for messages |\n| Gmail | Send rich HTML emails | Uses Gmail OAuth2 credential |\n| Webhook / Form Trigger | Alternate inputs | Webhook path /v1/promo-seeker and Form trigger for manual submissions |\n\n### Workflow Logic\n\n- On trigger, the Platform Set node normalizes the incoming query and receiver.\n- Get row(s) checks Data Table for existing promos.\n  - If found: notify via Telegram and send Gmail (email template included).\n  - If not found: the Promo Seeker Agent runs SerpAPI searches, parses structured output, then Upsert row(s) saves results and notifications are sent.\n- Structured Output Parser enforces correct JSON to avoid bad upserts.\n\n## Customization Options\n\n### Basic Adjustments\n- Recency window: change the agent prompt to 7/14/30 days.\n- Result limit: increase Data Table Get limit or change Upsert batch size.\n\n### Advanced Enhancements\n- Add Slack or Microsoft Teams notifications (moderate complexity).\n- Add caching layer (Redis) to reduce repeated SerpAPI calls (advanced).\n- Parallelize searches across multiple search engines (higher API usage & complexity).\n\n## Performance & Optimization\n\n| Metric | Expected Performance | Optimization Tips |\n|--------|----------------------|-------------------|\n| Execution time | 8–30s per new search (depends on SerpAPI + LM response) | Reduce SerpAPI page depth; cache recent results |\n| API calls | 3–10 SerpAPI calls per complex query | Batch queries; use higher-quality search params |\n| Error handling | Agent retries on malformed output | Use retry nodes and set onError strategy for downstream nodes |\n\n## Troubleshooting\n\n| Problem | Cause | Solution |\n|---------|-------|----------|\n| No results returned | Query too vague or rate-limited API | Improve query specificity; check SerpAPI quota |\n| Gmail send fails | OAuth scope not granted or token expired | Reconnect Gmail OAuth2 credential in n8n |\n| Telegram webhook not firing | Incorrect bot token or webhook setup | Recreate Telegram credential and check bot permissions |\n| Duplicate rows | Upsert mapping mismatch | Ensure promoCode mapping in Upsert matches structured output |\n| Agent returns malformed JSON | LM prompt too permissive | Tighten the agent system prompt and validate with Structured Output Parser |\n\n---\n\n**Created by:** [khaisa Studio](https://khaisa.studio)\n**Category:** Marketing Automation\n\n**Tags:** promo-codes, coupons, serpapi, telegram, gmail, openrouter, data-tables\n\nNeed custom workflows or help adapting this template? [Contact us](https://khaisa.studio/contact)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "SerpAPI",
      "type": "@n8n/n8n-nodes-langchain.toolSerpApi",
      "role": "toolSerpApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Promo Seeker Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Gemini 2.5Pro",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Platform",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "No Operation, do nothing",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Get row(s)",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Code Exist?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "role": "formTrigger",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Send a message",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Upsert row(s)",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "notify telegram",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}