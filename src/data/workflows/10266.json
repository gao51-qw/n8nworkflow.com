{
  "id": 10266,
  "slug": "10266",
  "title": "Generate personalized cold emails with Anthropic, GPT-4 & Google Sheets",
  "description": "**Your Cold Email is Now Researched.** This pipeline finds specific bottlenecks on prospect websites and instantly crafts an irresistible pitch\n\n---\n\n### üéØ Problem Statement\n\n\nTraditional high-volume cold email outreach is stuck on generic personalization (e.g., \"Love your website!\"). Sales teams, especially those selling high-value **AI Receptionists**, struggle to efficiently find the one **Unique Operational Hook** (like manual scheduling dependency or high call volume) needed to make the pitch relevant. This forces reliance on expensive, slow manual research, leading to low reply rates and inefficient spending on bulk outreach tools.\n\n---\n\n###  ‚ú® Solution\n\nThis workflow deploys a resilient **Dual-AI Personalization Pipeline** that runs on a batch basis. It uses the **Filter (Qualified Leads)** node as a cost-saving **Quality Gate** to prevent processing bad leads. It executes a **Targeted Deep Dive** on successful leads, using **GPT-4** for analytical insight extraction and **Claude Sonnet** for coherent, human-like copy generation. The entire process outputs campaign-ready data directly to **Google Sheets** and sends a critical QA Draft via **Gmail**.\n\n---\n\n### ‚öôÔ∏è How It Works (Multi-Step Execution)\n\n#### 1\\. Ingestion and Cost Control (The Quality Gate)\n\n*   **Trigger and Ingestion:** The workflow starts via a **Manual Trigger**, pulling leads directly from **Get All Leads (Google Sheets)**.\n    \n*   **Cost Filtering:** The **Filter (Qualified Leads)** node removes leads that lack a working email or website URL.\n    \n*   **Execution Isolation:** The **Loop Over Leads** node initiates individual processing. The **Capture Lead Data (Set)** node immediately captures and locks down the original lead context for stability throughout the loop.\n    \n*   **Hybrid Scraping:** The **Scrape Site (HTTP Request)** and **Extract Text & Links (HTML)** nodes execute the **Hybrid Scraping** strategy, simultaneously capturing **website text** and **external links**.\n    \n*   **Data Shaping & Status:** The **Filter Social & Status (Code)** node is the control center. It filters links, bundles the context, and critically, assigns a **status** of 'Success' or 'Scrape Fail'.\n    \n*   **Cost Control Branch:** The **If (IF node)** checks this status. Items with 'Scrape Fail' bypass all AI steps (saving **100% of AI token costs**) and jump directly to **Log Final Result**. Successful items proceed to the AI core.\n    \n\n#### 2\\. Dual-AI Coherence & Dispatch (The Executive Output)\n\n*   **Analytical Synthesis:** The **Summarize Website (OpenAI)** node uses **GPT-4** to synthesize the full context and extract the **Unique Operational Hook** (e.g., manual booking overhead).\n    \n*   **Coherent Copy Generation:** The **Generate Subject & Body (Anthropic)** node uses the **Claude Sonnet** model to generate the subject and the multi-line body, guaranteeing **coherence** by creating both simultaneously in a single JSON output.\n    \n*   **Final Parsing:** The **Parse AI Output (Code)** node reliably strips markdown wrappers and extracts the clean **subject** and **body** strings.\n    \n*   **Final Delivery:** The data is logged via **Log Final Result (Google Sheets)**, and the completed email is sent to the user via **Create a draft (Gmail)** for final **Quality Assurance** before sending.\n    \n---\n\n### üõ†Ô∏è Setup Steps\n\n\nBefore running the workflow, ensure these credentials and data structures are correctly configured:\n\n#### Credentials\n\n*   **Anthropic:** Configure credentials for the Language Model (Claude Sonnet).\n    \n*   **OpenAI:** Configure credentials for the Analytical Model (GPT-4/GPT-4o).\n    \n*   **Google Services:** Set up OAuth2 credentials for **Google Sheets** (Input/Output) and **Gmail** (Draft QA and Completion Alert).\n    \n\n#### Configuration\n\n*   **Google Sheet Setup:** Your input sheet must include the columns **email**, **website\\_url**, and an empty **Icebreaker** column for initial filtering.\n    \n*   **HTTP URL:** Verify that the **Scrape Site** node's URL parameter is set to pull the website URL from the stabilized data structure: ={{ $json.website\\_url }}.\n    \n*   **AI Prompts:** Ensure the Anthropic prompt contains your current Irresistible Sales Offer and the required nested JSON output structure.\n    \n---\n\n### ‚úÖ Benefits\n\n*   **Coherence Guarantee:** A single **Anthropic** node generates both the subject and body, guaranteeing the message is perfectly aligned and hits the same unique insight.\n    \n*   **Maximum Cost Control:** The **IF node** prevents spending tokens on bad or broken websites, making the campaign highly **budget-efficient**.\n    \n*   **Deep Personalization:** Combines **website text** and **social media links**, creating an icebreaker that implies thorough, manual research.\n    \n*   **High Reliability:** Uses robust **Code nodes** for data structuring and parsing, ensuring the workflow runs consistently under real-world conditions without crashing.\n    \n*   **Zero-Risk QA:** The final **Gmail (Create a draft)** step ensures human review of the generated copy before any cold emails are sent out.",
  "featuredImage": "/data/workflows/10266/10266.webp",
  "author": {
    "id": 101,
    "slug": "bhuvanesh",
    "name": "Bhuvanesh R",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 483,
  "downloads": 48,
  "createdAt": "2025-10-29T07:43:11.423Z",
  "updatedAt": "2026-01-16T09:04:11.754Z",
  "publishedAt": "2025-10-29T07:43:11.423Z",
  "nodes": 24,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10266",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Generate personalized cold emails with Anthropic, GPT-4 & Google Sheets",
    "workflowName": "Generate personalized cold emails with Anthropic, GPT-4 & Google Sheets",
    "description": "**Your Cold Email is Now Researched.** This pipeline finds specific bottlenecks on prospect websites and instantly crafts an irresistible pitch\n\n---\n\n### üéØ Problem Statement\n\n\nTraditional high-volume cold email outreach is stuck on generic personalization (e.g., \"Love your website!\"). Sales teams, especially those selling high-value **AI Receptionists**, struggle to efficiently find the one **Unique Operational Hook** (like manual scheduling dependency or high call volume) needed to make the pitch relevant. This forces reliance on expensive, slow manual research, leading to low reply rates and inefficient spending on bulk outreach tools.\n\n---\n\n###  ‚ú® Solution\n\nThis workflow deploys a resilient **Dual-AI Personalization Pipeline** that runs on a batch basis. It uses the **Filter (Qualified Leads)** node as a cost-saving **Quality Gate** to prevent processing bad leads. It executes a **Targeted Deep Dive** on successful leads, using **GPT-4** for analytical insight extraction and **Claude Sonnet** for coherent, human-like copy generation. The entire process outputs campaign-ready data directly to **Google Sheets** and sends a critical QA Draft via **Gmail**.\n\n---\n\n### ‚öôÔ∏è How It Works (Multi-Step Execution)\n\n#### 1\\. Ingestion and Cost Control (The Quality Gate)\n\n*   **Trigger and Ingestion:** The workflow starts via a **Manual Trigger**, pulling leads directly from **Get All Leads (Google Sheets)**.\n    \n*   **Cost Filtering:** The **Filter (Qualified Leads)** node removes leads that lack a working email or website URL.\n    \n*   **Execution Isolation:** The **Loop Over Leads** node initiates individual processing. The **Capture Lead Data (Set)** node immediately captures and locks down the original lead context for stability throughout the loop.\n    \n*   **Hybrid Scraping:** The **Scrape Site (HTTP Request)** and **Extract Text & Links (HTML)** nodes execute the **Hybrid Scraping** strategy, simultaneously capturing **website text** and **external links**.\n    \n*   **Data Shaping & Status:** The **Filter Social & Status (Code)** node is the control center. It filters links, bundles the context, and critically, assigns a **status** of 'Success' or 'Scrape Fail'.\n    \n*   **Cost Control Branch:** The **If (IF node)** checks this status. Items with 'Scrape Fail' bypass all AI steps (saving **100% of AI token costs**) and jump directly to **Log Final Result**. Successful items proceed to the AI core.\n    \n\n#### 2\\. Dual-AI Coherence & Dispatch (The Executive Output)\n\n*   **Analytical Synthesis:** The **Summarize Website (OpenAI)** node uses **GPT-4** to synthesize the full context and extract the **Unique Operational Hook** (e.g., manual booking overhead).\n    \n*   **Coherent Copy Generation:** The **Generate Subject & Body (Anthropic)** node uses the **Claude Sonnet** model to generate the subject and the multi-line body, guaranteeing **coherence** by creating both simultaneously in a single JSON output.\n    \n*   **Final Parsing:** The **Parse AI Output (Code)** node reliably strips markdown wrappers and extracts the clean **subject** and **body** strings.\n    \n*   **Final Delivery:** The data is logged via **Log Final Result (Google Sheets)**, and the completed email is sent to the user via **Create a draft (Gmail)** for final **Quality Assurance** before sending.\n    \n---\n\n### üõ†Ô∏è Setup Steps\n\n\nBefore running the workflow, ensure these credentials and data structures are correctly configured:\n\n#### Credentials\n\n*   **Anthropic:** Configure credentials for the Language Model (Claude Sonnet).\n    \n*   **OpenAI:** Configure credentials for the Analytical Model (GPT-4/GPT-4o).\n    \n*   **Google Services:** Set up OAuth2 credentials for **Google Sheets** (Input/Output) and **Gmail** (Draft QA and Completion Alert).\n    \n\n#### Configuration\n\n*   **Google Sheet Setup:** Your input sheet must include the columns **email**, **website\\_url**, and an empty **Icebreaker** column for initial filtering.\n    \n*   **HTTP URL:** Verify that the **Scrape Site** node's URL parameter is set to pull the website URL from the stabilized data structure: ={{ $json.website\\_url }}.\n    \n*   **AI Prompts:** Ensure the Anthropic prompt contains your current Irresistible Sales Offer and the required nested JSON output structure.\n    \n---\n\n### ‚úÖ Benefits\n\n*   **Coherence Guarantee:** A single **Anthropic** node generates both the subject and body, guaranteeing the message is perfectly aligned and hits the same unique insight.\n    \n*   **Maximum Cost Control:** The **IF node** prevents spending tokens on bad or broken websites, making the campaign highly **budget-efficient**.\n    \n*   **Deep Personalization:** Combines **website text** and **social media links**, creating an icebreaker that implies thorough, manual research.\n    \n*   **High Reliability:** Uses robust **Code nodes** for data structuring and parsing, ensuring the workflow runs consistently under real-world conditions without crashing.\n    \n*   **Zero-Risk QA:** The final **Gmail (Create a draft)** step ensures human review of the generated copy before any cold emails are sent out.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Create a draft",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Get All Leads",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Filter (Qualified Leads)",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Loop Over Leads",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Extract Text & Links",
      "type": "n8n-nodes-base.html",
      "role": "html",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Scrape Site",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Capture Lead Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Filter Social & Status",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Summarize Website",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Merge Summary",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Generate Subject & Body",
      "type": "@n8n/n8n-nodes-langchain.anthropic",
      "role": "anthropic",
      "configDescription": "Version 1"
    },
    {
      "name": "Parse AI Output",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Log Final Result",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Send Team Completion Alert",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}