{
  "id": 7795,
  "slug": "7795",
  "title": "AI-powered WhatsApp customer service with GPT-4, smart routing & knowledge base",
  "description": "# AI-Powered Customer Service Automation with Smart Routing\n![image.png](fileId:2184)\n## How it works\n\n### Core Intelligence Pipeline\n• **Multi-Layer Message Analysis** - Every customer interaction passes through three specialized AI classifiers: privacy detection (identifies sensitive data and security requirements), intent recognition (categorizes requests as purchases, inquiries, complaints, technical support, or order tracking), and sentiment analysis (monitors emotional tone from neutral to critical frustration levels)\n\n• **Dynamic Knowledge Integration** - The system maintains live connections to your company's knowledge base and order management systems, automatically querying relevant information before crafting responses. This ensures accuracy and eliminates outdated information while providing real-time order status updates\n\n• **Conversational Memory & Context** - Advanced chat memory preserves conversation history across sessions, enabling the AI to maintain context, avoid repetitive responses, and build on previous interactions for more natural, human-like conversations\n\n• **Intelligent Response Generation** - The AI agent synthesizes information from multiple sources (knowledge base, order systems, conversation history) while adapting its tone and approach based on detected customer sentiment and privacy requirements\n\n### Smart Escalation System\n• **Automated Triage Classification** - A sophisticated routing engine categorizes each interaction into four escalation levels: Normal (AI-handled routine inquiries), Human Request (explicit agent requests), Critical Complaint (serious issues requiring immediate attention), and Owner Escalation (extreme situations with legal implications or persistent anger)\n\n• **Context-Aware Handoffs** - When escalation is required, the system automatically generates comprehensive situation summaries for human agents, including conversation history, customer sentiment analysis, and specific issue classification\n\n• **Multi-Channel Notifications** - Escalated cases trigger appropriate alerts via email to designated team members based on severity level, ensuring proper resource allocation and response times\n\n### Data Intelligence & Analytics\n• **Comprehensive Interaction Logging** - Every conversation is captured with full context including customer sentiment, intent classification, AI responses, and escalation decisions, creating a rich dataset for performance analysis and system improvement\n\n• **Conversation Context Generation** - For escalated cases, the system automatically produces detailed conversation summaries and context reports to help human agents understand the full situation before taking over\n\n## Set up steps\n\n### Platform Integration (20-30 minutes)\n• **Messaging Platform Connection** - Configure your primary communication channel (supports multiple messaging platforms) with proper API credentials and webhook setup for real-time message processing\n• **AI Service Configuration** - Connect OpenAI API credentials for the language models powering the classification engines and response generation\n• **Database Setup** - Establish connections to your customer database and order management systems for personalized responses and order tracking capabilities\n\n### Knowledge Base Preparation (45-60 minutes)\n• **Company Information Import** - Upload or connect your existing knowledge base, including product catalogs, policy documents, FAQ sections, and troubleshooting guides\n• **Order Database Integration** - Link your order management system to enable real-time order status queries, shipping tracking, and return processing\n• **Response Templates** - Configure standard response patterns and company voice guidelines to ensure consistent brand communication\n\n### Escalation & Routing Setup (15-25 minutes)\n• **Team Structure Configuration** - Define escalation paths and assign notification recipients for different severity levels (standard support, critical complaints, owner-level issues)\n• **Email Integration** - Connect email service for automated escalation notifications with customizable templates for different situation types\n• **Escalation Triggers** - Fine-tune the classification thresholds that determine when conversations require human intervention\n\n### Testing & Optimization (30-45 minutes)\n• **Conversation Flow Testing** - Run comprehensive test scenarios covering various customer intents, sentiment levels, and escalation triggers to validate system responses\n• **Knowledge Base Validation** - Verify that the AI can accurately retrieve and apply information from your knowledge base for common customer queries\n• **Escalation Path Verification** - Test all escalation routes to ensure proper notifications and handoff procedures are functioning correctly\n• **Performance Monitoring Setup** - Configure analytics tracking to monitor response accuracy, escalation rates, and customer satisfaction metrics\n\n### Advanced Configuration (Optional - 30-60 minutes)\n• **Multi-Language Support** - Configure language detection and response capabilities for international customer base\n• **Custom Classification Rules** - Adjust intent and sentiment classification parameters based on your specific business context and customer communication patterns\n• **Integration Extensions** - Connect additional business systems (CRM, billing, inventory) for enhanced customer service capabilities\n\n## Technical Specifications\n\n### AI Models & Processing\n• Powered by GPT-4 family models for natural language understanding and generation\n• Real-time voice transcription capabilities for multi-modal customer interactions\n• Structured output parsing for consistent data classification and routing decisions\n• Context-aware memory management with configurable conversation history retention\n\n### Data Security & Privacy\n• Automatic detection of sensitive information with privacy-first handling protocols\n• Configurable data retention policies and secure storage of conversation logs\n• Customer verification requirements for accessing sensitive account information\n• GDPR-compliant data processing and storage practices\n\n### Scalability & Performance\n• Modular architecture supporting easy integration of additional messaging platforms\n• Database-agnostic design (supports PostgreSQL, Supabase, and other systems)\n• Horizontal scaling capabilities for high-volume customer service operations\n• Real-time processing with minimal latency for immediate customer responses\n\n*Detailed technical implementation guides, API configuration examples, and troubleshooting documentation are embedded within the workflow nodes for development teams.*",
  "featuredImage": "/data/workflows/7795/7795.webp",
  "author": {
    "id": 101,
    "slug": "diagopl",
    "name": "Paul",
    "avatar": ""
  },
  "categories": [
    "AI Chatbot",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 325,
  "downloads": 32,
  "createdAt": "2025-08-24T20:05:27.336Z",
  "updatedAt": "2026-01-16T08:52:25.605Z",
  "publishedAt": "2025-08-24T20:05:27.336Z",
  "nodes": 45,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7795",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "AI-powered WhatsApp customer service with GPT-4, smart routing & knowledge base",
    "workflowName": "AI-powered WhatsApp customer service with GPT-4, smart routing & knowledge base",
    "description": "# AI-Powered Customer Service Automation with Smart Routing\n![image.png](fileId:2184)\n## How it works\n\n### Core Intelligence Pipeline\n• **Multi-Layer Message Analysis** - Every customer interaction passes through three specialized AI classifiers: privacy detection (identifies sensitive data and security requirements), intent recognition (categorizes requests as purchases, inquiries, complaints, technical support, or order tracking), and sentiment analysis (monitors emotional tone from neutral to critical frustration levels)\n\n• **Dynamic Knowledge Integration** - The system maintains live connections to your company's knowledge base and order management systems, automatically querying relevant information before crafting responses. This ensures accuracy and eliminates outdated information while providing real-time order status updates\n\n• **Conversational Memory & Context** - Advanced chat memory preserves conversation history across sessions, enabling the AI to maintain context, avoid repetitive responses, and build on previous interactions for more natural, human-like conversations\n\n• **Intelligent Response Generation** - The AI agent synthesizes information from multiple sources (knowledge base, order systems, conversation history) while adapting its tone and approach based on detected customer sentiment and privacy requirements\n\n### Smart Escalation System\n• **Automated Triage Classification** - A sophisticated routing engine categorizes each interaction into four escalation levels: Normal (AI-handled routine inquiries), Human Request (explicit agent requests), Critical Complaint (serious issues requiring immediate attention), and Owner Escalation (extreme situations with legal implications or persistent anger)\n\n• **Context-Aware Handoffs** - When escalation is required, the system automatically generates comprehensive situation summaries for human agents, including conversation history, customer sentiment analysis, and specific issue classification\n\n• **Multi-Channel Notifications** - Escalated cases trigger appropriate alerts via email to designated team members based on severity level, ensuring proper resource allocation and response times\n\n### Data Intelligence & Analytics\n• **Comprehensive Interaction Logging** - Every conversation is captured with full context including customer sentiment, intent classification, AI responses, and escalation decisions, creating a rich dataset for performance analysis and system improvement\n\n• **Conversation Context Generation** - For escalated cases, the system automatically produces detailed conversation summaries and context reports to help human agents understand the full situation before taking over\n\n## Set up steps\n\n### Platform Integration (20-30 minutes)\n• **Messaging Platform Connection** - Configure your primary communication channel (supports multiple messaging platforms) with proper API credentials and webhook setup for real-time message processing\n• **AI Service Configuration** - Connect OpenAI API credentials for the language models powering the classification engines and response generation\n• **Database Setup** - Establish connections to your customer database and order management systems for personalized responses and order tracking capabilities\n\n### Knowledge Base Preparation (45-60 minutes)\n• **Company Information Import** - Upload or connect your existing knowledge base, including product catalogs, policy documents, FAQ sections, and troubleshooting guides\n• **Order Database Integration** - Link your order management system to enable real-time order status queries, shipping tracking, and return processing\n• **Response Templates** - Configure standard response patterns and company voice guidelines to ensure consistent brand communication\n\n### Escalation & Routing Setup (15-25 minutes)\n• **Team Structure Configuration** - Define escalation paths and assign notification recipients for different severity levels (standard support, critical complaints, owner-level issues)\n• **Email Integration** - Connect email service for automated escalation notifications with customizable templates for different situation types\n• **Escalation Triggers** - Fine-tune the classification thresholds that determine when conversations require human intervention\n\n### Testing & Optimization (30-45 minutes)\n• **Conversation Flow Testing** - Run comprehensive test scenarios covering various customer intents, sentiment levels, and escalation triggers to validate system responses\n• **Knowledge Base Validation** - Verify that the AI can accurately retrieve and apply information from your knowledge base for common customer queries\n• **Escalation Path Verification** - Test all escalation routes to ensure proper notifications and handoff procedures are functioning correctly\n• **Performance Monitoring Setup** - Configure analytics tracking to monitor response accuracy, escalation rates, and customer satisfaction metrics\n\n### Advanced Configuration (Optional - 30-60 minutes)\n• **Multi-Language Support** - Configure language detection and response capabilities for international customer base\n• **Custom Classification Rules** - Adjust intent and sentiment classification parameters based on your specific business context and customer communication patterns\n• **Integration Extensions** - Connect additional business systems (CRM, billing, inventory) for enhanced customer service capabilities\n\n## Technical Specifications\n\n### AI Models & Processing\n• Powered by GPT-4 family models for natural language understanding and generation\n• Real-time voice transcription capabilities for multi-modal customer interactions\n• Structured output parsing for consistent data classification and routing decisions\n• Context-aware memory management with configurable conversation history retention\n\n### Data Security & Privacy\n• Automatic detection of sensitive information with privacy-first handling protocols\n• Configurable data retention policies and secure storage of conversation logs\n• Customer verification requirements for accessing sensitive account information\n• GDPR-compliant data processing and storage practices\n\n### Scalability & Performance\n• Modular architecture supporting easy integration of additional messaging platforms\n• Database-agnostic design (supports PostgreSQL, Supabase, and other systems)\n• Horizontal scaling capabilities for high-volume customer service operations\n• Real-time processing with minimal latency for immediate customer responses\n\n*Detailed technical implementation guides, API configuration examples, and troubleshooting documentation are embedded within the workflow nodes for development teams.*",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Transcribe1",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.6"
    },
    {
      "name": "Merge3",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Aggregate3",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge4",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "OpenAI Chat Model8",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenAI Chat Model10",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "OpenAI Chat Model11",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Think1",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1"
    },
    {
      "name": "Voice or Text",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Structured Output Parser1",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "sentiment classifier",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.6"
    },
    {
      "name": "intent classifier",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.6"
    },
    {
      "name": "Structured Output Parser2",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "privacy classifier",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "role": "chainLlm",
      "configDescription": "Version 1.6"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Knowledge base",
      "type": "n8n-nodes-base.googleDocsTool",
      "role": "googleDocsTool",
      "configDescription": "Version 2"
    },
    {
      "name": "orders database",
      "type": "n8n-nodes-base.googleSheetsTool",
      "role": "googleSheetsTool",
      "configDescription": "Version 4.5"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Historial Chat and feedback",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.5"
    },
    {
      "name": "Text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Normal path / success",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Owner escalation",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Critical complaint.",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Human request.",
      "type": "n8n-nodes-base.gmail",
      "role": "gmail",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "role": "lmChatOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Supabase1",
      "type": "n8n-nodes-base.supabaseTool",
      "role": "supabaseTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Human intervention",
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "role": "textClassifier",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Aliment context for next messages",
      "type": "n8n-nodes-base.supabase",
      "role": "supabase",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Generate conv context",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Customer service AGENT",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.8"
    },
    {
      "name": "WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "role": "whatsAppTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Download media",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    },
    {
      "name": "Send message",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1"
    }
  ]
}