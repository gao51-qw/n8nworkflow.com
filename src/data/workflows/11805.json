{
  "id": 11805,
  "slug": "11805",
  "title": "Recover Shopify abandoned carts with email, SMS, WhatsApp & Facebook retargeting",
  "description": "This workflow is a complete, production-ready solution for recovering abandoned carts in Shopify stores using a multi-channel, multi-touch approach. It automates personalized follow-ups via Email, SMS, and WhatsApp, tracks every customer interaction for multi-touch attribution, and enables advanced retargeting and analytics.\n\n**Key features:**\n- Multi-step, timed recovery sequence (Email → SMS → Email → WhatsApp)\n- Customer segmentation (new, returning, VIP) and A/B testing\n- Dynamic discounting and personalized messaging\n- Touchpoint logging to Google Sheets for attribution analysis\n- Facebook Custom Audience retargeting for unrecovered carts\n- Slack notifications for high-value cart recoveries\n\n---\n\n## What does this workflow do?\n\n1. **Listens for abandoned cart events** from Shopify (or any e-commerce platform) via webhook.\n2. **Normalizes and enriches cart data** by fetching full cart details and customer purchase history.\n3. **Predicts the likely reason for abandonment** (e.g., price sensitivity, checkout complexity, technical issues) using rule-based logic.\n4. **Segments the customer** (new, returning, VIP), assigns an A/B test group, and generates a personalized discount and checkout URL.\n5. **Runs a timed, multi-channel recovery sequence:**\n   - **1 hour after abandonment:** Checks if the order is completed. If not, sends a personalized Email #1 and logs the touchpoint.\n   - **4 hours after abandonment:** Checks again. If not recovered, sends an SMS with a discount code and logs the touchpoint.\n   - **24 hours after abandonment:** Checks again. If not recovered, sends Email #2 (with social proof/urgency) and logs the touchpoint.\n   - **48 hours after abandonment:** Final check. If not recovered, sends a WhatsApp reminder and logs the touchpoint.\n6. **If the cart is still not recovered:** Hashes customer identifiers and adds them to a Facebook Custom Audience for retargeting.\n7. **Logs every touchpoint** (email, SMS, WhatsApp) to a Google Sheet for multi-touch attribution analysis.\n8. **Sends a Slack notification** if a high-value cart is recovered.\n\n---\n\n## Why is this workflow useful?\n\n- **Boosts recovery rates:** By using multiple channels and personalized timing, you maximize the chance of recovering lost sales.\n- **Improves attribution:** Every customer interaction is logged, so you can analyze which channels and messages drive conversions.\n- **Enables advanced retargeting:** Unrecovered carts are automatically added to a Facebook Custom Audience for paid retargeting.\n- **Saves time:** Fully automated, with easy configuration for your store, messaging, and analytics.\n- **Scalable and extensible:** Easily adapt the sequence, add more channels, or integrate with other tools.\n\n---\n\n## How to install and configure\n\n### 1. Prerequisites\n\n- n8n instance (v2.0.2+ recommended)\n- Shopify store with API access\n- Accounts and API credentials for:\n  - SendGrid (email)\n  - Twilio (SMS)\n  - WhatsApp Business API\n  - Google Sheets (service account)\n  - Facebook Graph API (for Custom Audiences)\n  - Slack (for notifications)\n\n### 2. Setup steps\n\n1. **Import the workflow** into your n8n instance.\n2. **Configure the “Workflow Configuration” node:**\n   - Set your Shopify domain, API URLs, Google Sheets ID, and high-value threshold.\n3. **Connect all required credentials** in the respective nodes:\n   - Shopify, SendGrid, Twilio, WhatsApp, Google Sheets, Facebook Graph API, Slack.\n4. **Create a Google Sheet** named “Touchpoints” with columns: `cart_id`, `customer_id`, `touchpoint_type`, `timestamp`, `channel`, `ab_group`.\n5. **Set up the webhook** in your Shopify store (or e-commerce platform) to trigger the workflow on cart abandonment.\n6. **Test the workflow** with a sample abandoned cart event to ensure emails, SMS, WhatsApp, and logging work as expected.\n7. **Enable the workflow** in n8n for live operation.\n\n---\n\n## Node-by-node breakdown\n\n- **Abandoned Cart Webhook:** Receives abandoned cart events.\n- **Workflow Configuration:** Stores global settings (API URLs, Shopify domain, Google Sheets ID, high-value threshold).\n- **Normalize Cart Data:** Cleans and standardizes incoming cart data.\n- **Fetch Cart Details / Fetch Customer History:** Enriches data with full cart and customer info.\n- **Predict Abandonment Reason:** Uses business logic to guess why the cart was abandoned.\n- **Personalization Engine:** Segments the customer, assigns A/B group, calculates discount, and builds checkout URL.\n- **Customer Segment Check / Device Type Check:** Applies routing logic for personalized messaging.\n- **Wait / Check Order Status / Generate & Send Messages:** Timed sequence for Email, SMS, and WhatsApp, with order status checks at each step.\n- **Log Touchpoint (Google Sheets):** Records every message sent for attribution.\n- **Attribution Merge:** Combines all touchpoints into a single journey for analysis.\n- **Hash Customer Data for Facebook / Add to Retargeting Audience:** Adds unrecovered carts to a Facebook Custom Audience.\n- **Check Cart Value Threshold / Notify High-Value Recovery:** Sends Slack alerts for high-value recoveries.\n\n---\n\n## Customization tips\n\n- Adjust wait times and message content to fit your brand and audience.\n- Add or remove channels (e.g., push notifications, phone calls) as needed.\n- Expand the Google Sheet for deeper analytics (e.g., add UTM parameters, campaign IDs).\n- Integrate with your CRM or analytics platform for end-to-end tracking.\n\n---\n\n## Troubleshooting\n\n- Make sure all API credentials are set and tested.\n- Check Google Sheets permissions for the service account.\n- Test each channel (email, SMS, WhatsApp) individually before going live.\n- Review the workflow execution logs in n8n for errors or failed steps.",
  "featuredImage": "/data/workflows/11805/11805.webp",
  "author": {
    "id": 101,
    "slug": "tuguidragos",
    "name": "Țugui Dragoș",
    "avatar": ""
  },
  "categories": [
    "Lead Nurturing",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 467,
  "downloads": 46,
  "createdAt": "2025-12-14T23:19:42.640Z",
  "updatedAt": "2026-01-16T09:10:10.902Z",
  "publishedAt": "2025-12-14T23:19:42.640Z",
  "nodes": 54,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11805",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Recover Shopify abandoned carts with email, SMS, WhatsApp & Facebook retargeting",
    "workflowName": "Recover Shopify abandoned carts with email, SMS, WhatsApp & Facebook retargeting",
    "description": "This workflow is a complete, production-ready solution for recovering abandoned carts in Shopify stores using a multi-channel, multi-touch approach. It automates personalized follow-ups via Email, SMS, and WhatsApp, tracks every customer interaction for multi-touch attribution, and enables advanced retargeting and analytics.\n\n**Key features:**\n- Multi-step, timed recovery sequence (Email → SMS → Email → WhatsApp)\n- Customer segmentation (new, returning, VIP) and A/B testing\n- Dynamic discounting and personalized messaging\n- Touchpoint logging to Google Sheets for attribution analysis\n- Facebook Custom Audience retargeting for unrecovered carts\n- Slack notifications for high-value cart recoveries\n\n---\n\n## What does this workflow do?\n\n1. **Listens for abandoned cart events** from Shopify (or any e-commerce platform) via webhook.\n2. **Normalizes and enriches cart data** by fetching full cart details and customer purchase history.\n3. **Predicts the likely reason for abandonment** (e.g., price sensitivity, checkout complexity, technical issues) using rule-based logic.\n4. **Segments the customer** (new, returning, VIP), assigns an A/B test group, and generates a personalized discount and checkout URL.\n5. **Runs a timed, multi-channel recovery sequence:**\n   - **1 hour after abandonment:** Checks if the order is completed. If not, sends a personalized Email #1 and logs the touchpoint.\n   - **4 hours after abandonment:** Checks again. If not recovered, sends an SMS with a discount code and logs the touchpoint.\n   - **24 hours after abandonment:** Checks again. If not recovered, sends Email #2 (with social proof/urgency) and logs the touchpoint.\n   - **48 hours after abandonment:** Final check. If not recovered, sends a WhatsApp reminder and logs the touchpoint.\n6. **If the cart is still not recovered:** Hashes customer identifiers and adds them to a Facebook Custom Audience for retargeting.\n7. **Logs every touchpoint** (email, SMS, WhatsApp) to a Google Sheet for multi-touch attribution analysis.\n8. **Sends a Slack notification** if a high-value cart is recovered.\n\n---\n\n## Why is this workflow useful?\n\n- **Boosts recovery rates:** By using multiple channels and personalized timing, you maximize the chance of recovering lost sales.\n- **Improves attribution:** Every customer interaction is logged, so you can analyze which channels and messages drive conversions.\n- **Enables advanced retargeting:** Unrecovered carts are automatically added to a Facebook Custom Audience for paid retargeting.\n- **Saves time:** Fully automated, with easy configuration for your store, messaging, and analytics.\n- **Scalable and extensible:** Easily adapt the sequence, add more channels, or integrate with other tools.\n\n---\n\n## How to install and configure\n\n### 1. Prerequisites\n\n- n8n instance (v2.0.2+ recommended)\n- Shopify store with API access\n- Accounts and API credentials for:\n  - SendGrid (email)\n  - Twilio (SMS)\n  - WhatsApp Business API\n  - Google Sheets (service account)\n  - Facebook Graph API (for Custom Audiences)\n  - Slack (for notifications)\n\n### 2. Setup steps\n\n1. **Import the workflow** into your n8n instance.\n2. **Configure the “Workflow Configuration” node:**\n   - Set your Shopify domain, API URLs, Google Sheets ID, and high-value threshold.\n3. **Connect all required credentials** in the respective nodes:\n   - Shopify, SendGrid, Twilio, WhatsApp, Google Sheets, Facebook Graph API, Slack.\n4. **Create a Google Sheet** named “Touchpoints” with columns: `cart_id`, `customer_id`, `touchpoint_type`, `timestamp`, `channel`, `ab_group`.\n5. **Set up the webhook** in your Shopify store (or e-commerce platform) to trigger the workflow on cart abandonment.\n6. **Test the workflow** with a sample abandoned cart event to ensure emails, SMS, WhatsApp, and logging work as expected.\n7. **Enable the workflow** in n8n for live operation.\n\n---\n\n## Node-by-node breakdown\n\n- **Abandoned Cart Webhook:** Receives abandoned cart events.\n- **Workflow Configuration:** Stores global settings (API URLs, Shopify domain, Google Sheets ID, high-value threshold).\n- **Normalize Cart Data:** Cleans and standardizes incoming cart data.\n- **Fetch Cart Details / Fetch Customer History:** Enriches data with full cart and customer info.\n- **Predict Abandonment Reason:** Uses business logic to guess why the cart was abandoned.\n- **Personalization Engine:** Segments the customer, assigns A/B group, calculates discount, and builds checkout URL.\n- **Customer Segment Check / Device Type Check:** Applies routing logic for personalized messaging.\n- **Wait / Check Order Status / Generate & Send Messages:** Timed sequence for Email, SMS, and WhatsApp, with order status checks at each step.\n- **Log Touchpoint (Google Sheets):** Records every message sent for attribution.\n- **Attribution Merge:** Combines all touchpoints into a single journey for analysis.\n- **Hash Customer Data for Facebook / Add to Retargeting Audience:** Adds unrecovered carts to a Facebook Custom Audience.\n- **Check Cart Value Threshold / Notify High-Value Recovery:** Sends Slack alerts for high-value recoveries.\n\n---\n\n## Customization tips\n\n- Adjust wait times and message content to fit your brand and audience.\n- Add or remove channels (e.g., push notifications, phone calls) as needed.\n- Expand the Google Sheet for deeper analytics (e.g., add UTM parameters, campaign IDs).\n- Integrate with your CRM or analytics platform for end-to-end tracking.\n\n---\n\n## Troubleshooting\n\n- Make sure all API credentials are set and tested.\n- Check Google Sheets permissions for the service account.\n- Test each channel (email, SMS, WhatsApp) individually before going live.\n- Review the workflow execution logs in n8n for errors or failed steps.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Abandoned Cart Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Normalize Cart Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Fetch Cart Details",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Fetch Customer History",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Predict Abandonment Reason",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Personalization Engine",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Wait 1 Hour",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Check Order Completed (1h)",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Check Order Status (1h)",
      "type": "n8n-nodes-base.shopify",
      "role": "shopify",
      "configDescription": "Version 1"
    },
    {
      "name": "Generate Email 1 Content",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Email 1",
      "type": "n8n-nodes-base.sendGrid",
      "role": "sendGrid",
      "configDescription": "Version 1"
    },
    {
      "name": "Log Email 1 Touchpoint",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Attribution - Email 1",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Wait Until 4 Hours",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Check Order Status (4h)",
      "type": "n8n-nodes-base.shopify",
      "role": "shopify",
      "configDescription": "Version 1"
    },
    {
      "name": "Check Order Completed (4h)",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Prepare SMS Content",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send SMS with Discount",
      "type": "n8n-nodes-base.twilio",
      "role": "twilio",
      "configDescription": "Version 1"
    },
    {
      "name": "Log SMS Touchpoint",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Wait Until 24 Hours",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Check Order Status (24h)",
      "type": "n8n-nodes-base.shopify",
      "role": "shopify",
      "configDescription": "Version 1"
    },
    {
      "name": "Check Order Completed (24h)",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Generate Email 2 Content",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Email 2",
      "type": "n8n-nodes-base.sendGrid",
      "role": "sendGrid",
      "configDescription": "Version 1"
    },
    {
      "name": "Log Email 2 Touchpoint",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Wait Until 48 Hours",
      "type": "n8n-nodes-base.wait",
      "role": "wait",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Check Order Completed (48h)",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Generate WhatsApp Message",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Send WhatsApp Message",
      "type": "n8n-nodes-base.whatsApp",
      "role": "whatsApp",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Add to Retargeting Audience",
      "type": "n8n-nodes-base.facebookGraphApi",
      "role": "facebookGraphApi",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge Attribution Data",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Notify High-Value Recovery",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Check Cart Value Threshold",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Customer Segment Check",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Device Type Check",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Mark Success - Order Completed (1h)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Mark Success - Order Completed (4h)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Mark Success - Order Completed (24h)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Mark Success - Order Completed (48h)",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Merge Attribution - SMS",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Merge Attribution - Email 2",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Merge Attribution - WhatsApp",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Hash Customer Data for Facebook",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}