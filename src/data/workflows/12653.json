{
  "id": 12653,
  "slug": "12653",
  "title": "Monitor multi-city weather with OpenWeatherMap, GPT-4o-mini, and Discord",
  "description": "\n## Weather Monitoring Across Multiple Cities with OpenWeatherMap, GPT-4o-mini, and Discord\n\nThis workflow provides an automated, intelligent solution for global weather monitoring. It goes beyond simple data fetching by calculating a custom \"Comfort Index\" and using AI to provide human-like briefings and activity recommendations. Whether you are managing remote teams or planning travel, this template centralizes complex environmental data into actionable insights.\n\n## Who’s it for\n- **Remote Team Leads:** Keep an eye on environmental conditions for team members across different time zones.\n- **Frequent Travelers & Event Planners:** Monitor weather risks and comfort levels for multiple destinations simultaneously.\n- **Smart Home/Life Enthusiasts:** Receive daily morning briefings on air quality and weather alerts directly in Discord.\n\n## How it works\n1. **Schedule Trigger:** The workflow runs every 6 hours (customizable) to ensure data is up to date.\n2. **Data Collection:** It loops through a list of cities, fetching current weather, 5-day forecasts, and Air Quality Index (AQI) data via the **OpenWeatherMap node** and **HTTP Request node**.\n3. **Smart Processing:** A **Code node** calculates a \"Comfort Index\" (based on temperature and humidity) and flags specific alerts (e.g., extreme heat, high winds, or poor AQI).\n4. **AI Analysis:** The **OpenAI node** (using GPT-4o-mini) analyzes the aggregated data to compare cities and recommend the best location for outdoor activities.\n5. **Conditional Routing:** An **If node** checks for active weather alerts. Urgent alerts are routed to a specific Discord notification, while routine briefings are sent normally.\n6. **Archiving:** All processed data is appended to **Google Sheets** for historical tracking and future analysis.\n\n## How to set up\n1. **Credentials:** Connect your OpenWeatherMap, OpenAI, Discord (Webhook), and Google Sheets accounts.\n2. **Locations:** Open the **'Set Monitoring Locations'** node and edit the JSON array with the cities, latitudes, and longitudes you wish to track.\n3. **Google Sheets:** Configure the **'Log to Google Sheets'** node with your specific Spreadsheet ID and Sheet Name.\n4. **Discord:** Ensure your Webhook URL is correctly pasted into the **Discord nodes**.\n\n## Requirements\n- **OpenWeatherMap API Key** (Free tier is sufficient).\n- **OpenAI API Key** (Configured for GPT-4o-mini).\n- **Discord Webhook URL**.\n- **Google Sheet** with headers ready for logging.\n\n## How to customize\n- **Adjust Alert Thresholds:** Modify the logic in the 'Process and Analyze Data' Code node to change what triggers a \"High Wind\" or \"Extreme Heat\" alert.\n- **Refine AI Persona:** Edit the System Prompt in the 'AI Weather Analysis' node to change the tone or focus of the weather briefing.\n- **Change Frequency:** Adjust the Schedule Trigger to run once a day or every hour depending on your needs.",
  "featuredImage": "/data/workflows/12653/12653.webp",
  "author": {
    "id": 101,
    "slug": "naoya-495",
    "name": "荒城直也",
    "avatar": ""
  },
  "categories": [
    "Market Research",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 0,
  "downloads": 0,
  "createdAt": "2026-01-12T07:26:54.549Z",
  "updatedAt": "2026-01-16T09:12:51.486Z",
  "publishedAt": "2026-01-12T07:26:54.549Z",
  "nodes": 21,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/12653",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Monitor multi-city weather with OpenWeatherMap, GPT-4o-mini, and Discord",
    "workflowName": "Monitor multi-city weather with OpenWeatherMap, GPT-4o-mini, and Discord",
    "description": "## Weather Monitoring Across Multiple Cities with OpenWeatherMap, GPT-4o-mini, and Discord\n\nThis workflow provides an automated, intelligent solution for global weather monitoring. It goes beyond simple data fetching by calculating a custom \"Comfort Index\" and using AI to provide human-like briefings and activity recommendations. Whether you are managing remote teams or planning travel, this template centralizes complex environmental data into actionable insights.\n\n## Who’s it for\n- **Remote Team Leads:** Keep an eye on environmental conditions for team members across different time zones.\n- **Frequent Travelers & Event Planners:** Monitor weather risks and comfort levels for multiple destinations simultaneously.\n- **Smart Home/Life Enthusiasts:** Receive daily morning briefings on air quality and weather alerts directly in Discord.\n\n## How it works\n1. **Schedule Trigger:** The workflow runs every 6 hours (customizable) to ensure data is up to date.\n2. **Data Collection:** It loops through a list of cities, fetching current weather, 5-day forecasts, and Air Quality Index (AQI) data via the **OpenWeatherMap node** and **HTTP Request node**.\n3. **Smart Processing:** A **Code node** calculates a \"Comfort Index\" (based on temperature and humidity) and flags specific alerts (e.g., extreme heat, high winds, or poor AQI).\n4. **AI Analysis:** The **OpenAI node** (using GPT-4o-mini) analyzes the aggregated data to compare cities and recommend the best location for outdoor activities.\n5. **Conditional Routing:** An **If node** checks for active weather alerts. Urgent alerts are routed to a specific Discord notification, while routine briefings are sent normally.\n6. **Archiving:** All processed data is appended to **Google Sheets** for historical tracking and future analysis.\n\n## How to set up\n1. **Credentials:** Connect your OpenWeatherMap, OpenAI, Discord (Webhook), and Google Sheets accounts.\n2. **Locations:** Open the **'Set Monitoring Locations'** node and edit the JSON array with the cities, latitudes, and longitudes you wish to track.\n3. **Google Sheets:** Configure the **'Log to Google Sheets'** node with your specific Spreadsheet ID and Sheet Name.\n4. **Discord:** Ensure your Webhook URL is correctly pasted into the **Discord nodes**.\n\n## Requirements\n- **OpenWeatherMap API Key** (Free tier is sufficient).\n- **OpenAI API Key** (Configured for GPT-4o-mini).\n- **Discord Webhook URL**.\n- **Google Sheet** with headers ready for logging.\n\n## How to customize\n- **Adjust Alert Thresholds:** Modify the logic in the 'Process and Analyze Data' Code node to change what triggers a \"High Wind\" or \"Extreme Heat\" alert.\n- **Refine AI Persona:** Edit the System Prompt in the 'AI Weather Analysis' node to change the tone or focus of the weather briefing.\n- **Change Frequency:** Adjust the Schedule Trigger to run once a day or every hour depending on your needs.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Main Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Part 1 Sticky",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Part 2 Sticky",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Part 3 Sticky",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Part 4 Sticky",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Set Monitoring Locations",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Split Locations",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Current Weather",
      "type": "n8n-nodes-base.openWeatherMap",
      "role": "openWeatherMap",
      "configDescription": "Version 1"
    },
    {
      "name": "Get 5-Day Forecast",
      "type": "n8n-nodes-base.openWeatherMap",
      "role": "openWeatherMap",
      "configDescription": "Version 1"
    },
    {
      "name": "Get Air Quality Index",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Merge Weather Data",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3"
    },
    {
      "name": "Merge with Air Quality",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3"
    },
    {
      "name": "Process and Analyze Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Aggregate All Locations",
      "type": "n8n-nodes-base.aggregate",
      "role": "aggregate",
      "configDescription": "Version 1"
    },
    {
      "name": "AI Weather Analysis",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Format Weather Report",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Check for Alerts",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Discord Alert",
      "type": "n8n-nodes-base.discord",
      "role": "discord",
      "configDescription": "Version 2"
    },
    {
      "name": "Send Discord Report",
      "type": "n8n-nodes-base.discord",
      "role": "discord",
      "configDescription": "Version 2"
    },
    {
      "name": "Log to Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.5"
    }
  ]
}