{
  "id": 7206,
  "slug": "7206",
  "title": "Multi-chain token swap relayer with Li.Fi",
  "description": "![image.png](fileId:2778)\n\n# Swap Tokens with Li.Fi \n\nThe growing popularity of agentic payments has lead to the development of protocols like [x402](https://x402.org) where agents and humans can pay for internet resources over standard http protocols using stablecoins.\n\nThis workflow lets you run your own swap relayer where callers can provide an [x402-compatible payment header](https://1shotapi.com/tools) and a desired destination network to instantly receive gas tokens. This setup is trust minimized - user's have the following guarantees:\n\n1. They will be the receiver of the swap.\n2. Only the amount of tokens the authorized will be swapped. \n\n## Setup\n\nIn order to run this relayer workflow, you will need an account on [1Shot API](https://1shotapi.com). You must then import the 1Shot Gas Station contract into your business for any chain you wish to support with your relayer.\n\nNext, follow the directions in the worflow sticky notes to update the Payment Configs for the tokens you wish to support swaps for. Lastly, distrubute your webhook api endpoint to your users. \n",
  "featuredImage": "/data/workflows/7206/7206.webp",
  "author": {
    "id": 101,
    "slug": "oneshotapi",
    "name": "1Shot API",
    "avatar": ""
  },
  "categories": [
    "Crypto Trading",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 297,
  "downloads": 29,
  "createdAt": "2025-08-10T03:45:43.121Z",
  "updatedAt": "2026-01-16T08:49:01.937Z",
  "publishedAt": "2025-08-10T03:45:43.121Z",
  "nodes": 20,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7206",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Multi-chain token swap relayer with Li.Fi",
    "workflowName": "Multi-chain token swap relayer with Li.Fi",
    "description": "![image.png](fileId:2778)\n\n# Swap Tokens with Li.Fi \n\nThe growing popularity of agentic payments has lead to the development of protocols like [x402](https://x402.org) where agents and humans can pay for internet resources over standard http protocols using stablecoins.\n\nThis workflow lets you run your own swap relayer where callers can provide an [x402-compatible payment header](https://1shotapi.com/tools) and a desired destination network to instantly receive gas tokens. This setup is trust minimized - user's have the following guarantees:\n\n1. They will be the receiver of the swap.\n2. Only the amount of tokens the authorized will be swapped. \n\n## Setup\n\nIn order to run this relayer workflow, you will need an account on [1Shot API](https://1shotapi.com). You must then import the 1Shot Gas Station contract into your business for any chain you wish to support with your relayer.\n\nNext, follow the directions in the worflow sticky notes to update the Payment Configs for the tokens you wish to support swaps for. Lastly, distrubute your webhook api endpoint to your users.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Response: 200 - Payment Successful",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.3"
    },
    {
      "name": "1Shot API Submit & Wait",
      "type": "n8n-nodes-1shot.oneShotSynch",
      "role": "oneShotSynch",
      "configDescription": "Version 1"
    },
    {
      "name": "On Successful Payment Simulation",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Simulate Payment",
      "type": "n8n-nodes-1shot.oneShot",
      "role": "oneShot",
      "configDescription": "Version 1"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Fetch Li.Fi Quote",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Response: Missing or Invalid Request Body Params",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Response: Failed to Get Quote",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Validate & Verify X-Payment Header",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Payment Token Configs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Validate & Verify POST Body",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Response: No X-Payment Header2",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Response: Verify Failed",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Response: Settle Failed",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.3"
    }
  ]
}