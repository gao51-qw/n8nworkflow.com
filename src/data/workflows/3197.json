{
  "id": 3197,
  "slug": "3197",
  "title": "Deploy Docker n8n, API backend for WHMCS/WISECP",
  "description": "# Setting up n8n workflow\n\n## Overview\n\nThe **Docker n8n WHMCS module** uses a specially designed workflow for **n8n** to automate deployment processes. The workflow provides an API interface for the module, receives specific commands, and connects via SSH to a server with Docker installed to perform predefined actions.\n\n## Prerequisites\n\n- You must have your own **n8n** server.\n- Alternatively, you can use the official **n8n** cloud installations available at: [n8n Official Site](https://n8n.partnerlinks.io/o692v7cg297k)\n\n## Installation Steps\n\n### Install the Required Workflow on n8n\n\nYou have two options:\n\n#### **Option 1: Use the Latest Version from the n8n Marketplace**\n\n- The latest workflow templates for our modules are available on the official n8n marketplace.\n- Visit our profile to access all available templates: [PUQcloud on n8n](https://n8n.io/creators/puqcloud/)\n\n#### **Option 2: Manual Installation**\n\n- Each module version comes with a workflow template file.  \n    [![image-1741970282211.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741970282211.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741970282211.png)\n- You need to manually import this template into your n8n server.  \n    [![image-1741284912356.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741284912356.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741284912356.png)\n\n## n8n Workflow API Backend Setup for WHMCS/WISECP\n\n### Configure API Webhook and SSH Access\n\n- Create a **Basic Auth Credential** for the Webhook API Block in n8n.  \n    [![image-1741285064715.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285064715.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285064715.png)\n    \n    [![image-1741284983806.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741284983806.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741284983806.png)\n    \n    [![image-1741285036996.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285036996.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285036996.png)\n- Create an **SSH Credential** for accessing a server with Docker installed.  \n    [![image-1741285118412.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285118412.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285118412.png)\n    \n    [![image-1741285147192.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285147192.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285147192.png)\n    \n    [![image-1741285198822.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285198822.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285198822.png)\n\n### Modify Template Parameters\n\nIn the **Parameters** block of the template, update the following settings:\n\n[![image-1741285369145.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285369145.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285369145.png)\n\n[![image-1741285412110.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285412110.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285412110.png)\n\n- `server_domain` – Must match the domain of the WHMCS/WISECP Docker server.\n- `clients_dir` – Directory where user data related to Docker and disks will be stored.\n- `mount_dir` – Default mount point for the container disk (recommended not to change).\n\n**Do not modify** the following technical parameters:\n\n- `screen_left`\n- `screen_right`\n\n### **Deploy-docker-compose**\n\nIn the **Deploy-docker-compose** element, you have the ability to modify the Docker Compose configuration, which will be generated in the following scenarios:\n\n- When the service is created\n- When the service is unlocked\n- When the service is updated\n\n[![image-1741875704524.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875704524.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875704524.png)\n\n[![image-1741875734754.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875734754.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875734754.png)\n\n### **nginx**\n\nIn the **nginx** element, you can modify the configuration parameters of the web interface proxy server.\n\n- The **main** section allows you to add custom parameters to the **server** block in the proxy server configuration file.\n- The **main\\_location** section contains settings that will be added to the **location /** block of the proxy server configuration. Here, you can define custom headers and other parameters specific to the root location.\n\n[![image-1741875960357.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875960357.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875960357.png)\n\n[![image-1741875978450.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875978450.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875978450.png)\n\n### **Bash Scripts**\n\nManagement of Docker containers and all related procedures on the server is carried out by executing Bash scripts generated in **n8n**. These scripts return either a JSON response or a string.\n\n- All scripts are located in elements directly connected to the **SSH** element.\n- You have full control over any script and can modify or execute it as needed.\n\n[![image-1741876353319.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741876353319.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741876353319.png)",
  "featuredImage": "/data/workflows/3197/3197.webp",
  "author": {
    "id": 101,
    "slug": "puqcloud",
    "name": "PUQcloud",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 738,
  "downloads": 73,
  "createdAt": "2025-03-17T11:24:50.181Z",
  "updatedAt": "2026-01-16T08:28:39.278Z",
  "publishedAt": "2025-03-17T11:24:50.181Z",
  "nodes": 34,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3197",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Deploy Docker n8n, API backend for WHMCS/WISECP",
    "workflowName": "Deploy Docker n8n, API backend for WHMCS/WISECP",
    "description": "# Setting up n8n workflow\n\n## Overview\n\nThe **Docker n8n WHMCS module** uses a specially designed workflow for **n8n** to automate deployment processes. The workflow provides an API interface for the module, receives specific commands, and connects via SSH to a server with Docker installed to perform predefined actions.\n\n## Prerequisites\n\n- You must have your own **n8n** server.\n- Alternatively, you can use the official **n8n** cloud installations available at: [n8n Official Site](https://n8n.partnerlinks.io/o692v7cg297k)\n\n## Installation Steps\n\n### Install the Required Workflow on n8n\n\nYou have two options:\n\n#### **Option 1: Use the Latest Version from the n8n Marketplace**\n\n- The latest workflow templates for our modules are available on the official n8n marketplace.\n- Visit our profile to access all available templates: [PUQcloud on n8n](https://n8n.io/creators/puqcloud/)\n\n#### **Option 2: Manual Installation**\n\n- Each module version comes with a workflow template file.  \n    [![image-1741970282211.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741970282211.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741970282211.png)\n- You need to manually import this template into your n8n server.  \n    [![image-1741284912356.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741284912356.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741284912356.png)\n\n## n8n Workflow API Backend Setup for WHMCS/WISECP\n\n### Configure API Webhook and SSH Access\n\n- Create a **Basic Auth Credential** for the Webhook API Block in n8n.  \n    [![image-1741285064715.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285064715.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285064715.png)\n    \n    [![image-1741284983806.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741284983806.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741284983806.png)\n    \n    [![image-1741285036996.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285036996.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285036996.png)\n- Create an **SSH Credential** for accessing a server with Docker installed.  \n    [![image-1741285118412.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285118412.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285118412.png)\n    \n    [![image-1741285147192.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285147192.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285147192.png)\n    \n    [![image-1741285198822.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285198822.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285198822.png)\n\n### Modify Template Parameters\n\nIn the **Parameters** block of the template, update the following settings:\n\n[![image-1741285369145.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285369145.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285369145.png)\n\n[![image-1741285412110.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741285412110.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741285412110.png)\n\n- `server_domain` – Must match the domain of the WHMCS/WISECP Docker server.\n- `clients_dir` – Directory where user data related to Docker and disks will be stored.\n- `mount_dir` – Default mount point for the container disk (recommended not to change).\n\n**Do not modify** the following technical parameters:\n\n- `screen_left`\n- `screen_right`\n\n### **Deploy-docker-compose**\n\nIn the **Deploy-docker-compose** element, you have the ability to modify the Docker Compose configuration, which will be generated in the following scenarios:\n\n- When the service is created\n- When the service is unlocked\n- When the service is updated\n\n[![image-1741875704524.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875704524.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875704524.png)\n\n[![image-1741875734754.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875734754.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875734754.png)\n\n### **nginx**\n\nIn the **nginx** element, you can modify the configuration parameters of the web interface proxy server.\n\n- The **main** section allows you to add custom parameters to the **server** block in the proxy server configuration file.\n- The **main\\_location** section contains settings that will be added to the **location /** block of the proxy server configuration. Here, you can define custom headers and other parameters specific to the root location.\n\n[![image-1741875960357.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875960357.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875960357.png)\n\n[![image-1741875978450.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741875978450.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741875978450.png)\n\n### **Bash Scripts**\n\nManagement of Docker containers and all related procedures on the server is carried out by executing Bash scripts generated in **n8n**. These scripts return either a JSON response or a string.\n\n- All scripts are located in elements directly connected to the **SSH** element.\n- You have full control over any script and can modify or execute it as needed.\n\n[![image-1741876353319.png](https://doc.puq.info/uploads/images/gallery/2025-03/scaled-1680-/image-1741876353319.png)](https://doc.puq.info/uploads/images/gallery/2025-03/image-1741876353319.png)",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Parametrs",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "API",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "422-Invalid server domain",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Code1",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "SSH",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Container Actions",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Service Actions",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Container Stats",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "API answer",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Inspect",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Stat",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Start",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Stop",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Test Connection1",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Deploy",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Suspend",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Terminated",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Unsuspend",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Mount Disk",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Unmount Disk",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Log",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "ChangePackage",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "n8n",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Version",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Users",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Change Password",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "If1",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "nginx",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Deploy-docker-compose",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "GET ACL",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "SET ACL",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "GET NET",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    }
  ]
}