{
  "id": 3094,
  "slug": "3094",
  "title": "Bitrix24 AI-Powered RAG Chatbot for Open Line Channels",
  "description": "## Overview\nTransform your Bitrix24 Open Line channels with an intelligent chatbot that leverages Retrieval-Augmented Generation (RAG) technology to provide accurate, document-based responses to customer inquiries in real-time.\n\n## Use Case\nThis workflow is designed for organizations that want to enhance their customer support capabilities in Bitrix24 by providing automated, knowledge-based responses to customer inquiries. It's particularly useful for:\n\n- Customer service teams handling repetitive questions\n- Support departments with extensive documentation\n- Sales teams needing quick access to product information\n- Organizations looking to provide 24/7 customer support\n\n## What This Workflow Does\n\n### Smart Document Processing\n- Automatically processes uploaded PDF documents\n- Splits documents into manageable chunks\n- Generates vector embeddings for semantic understanding\n- Indexes content for efficient retrieval\n\n### AI-Powered Responses\n- Utilizes Google Gemini AI to generate natural language responses\n- Constructs answers based on relevant document content\n- Maintains conversation context for coherent interactions\n- Provides fallback responses when information is not available\n\n### Vector Database Integration\n- Stores document embeddings in Qdrant vector database\n- Enables semantic search beyond simple keyword matching\n- Retrieves the most relevant information for each query\n- Maintains a persistent knowledge base that grows over time\n\n### Webhook Handler\n- Processes incoming messages from Bitrix24 Open Line channels\n- Handles authentication and security validation\n- Routes different types of events to appropriate handlers\n- Manages session and conversation state\n\n### Event Routing\n- Intelligently routes different event types:\n  - `ONIMBOTMESSAGEADD`: Processes new user messages\n  - `ONIMBOTJOINCHAT`: Handles bot joining a conversation\n  - `ONAPPINSTALL`: Manages application installation\n  - `ONIMBOTDELETE`: Handles bot deletion\n\n### Document Management\n- Organizes processed documents in designated folders\n- Tracks document processing status\n- Moves indexed documents to appropriate locations\n- Maintains document metadata for reference\n\n### Interactive Menu\n- Provides menu-based options for common user requests\n- Customizable menu items and responses\n- Easy navigation for users seeking specific information\n- Fallback to operator option when needed\n\n## Technical Architecture\n\n### Components\n1. **Webhook Handler**: Receives and validates incoming requests from Bitrix24\n2. **Credential Manager**: Securely manages authentication tokens and API keys\n3. **Event Router**: Directs events to appropriate processing functions\n4. **Document Processor**: Handles document loading, chunking, and embedding\n5. **Vector Store**: Qdrant database for storing and retrieving document embeddings\n6. **Retrieval System**: Searches for relevant document chunks based on user queries\n7. **LLM Integration**: Google Gemini model for generating natural language responses\n8. **Response Manager**: Formats and sends responses back to Bitrix24\n\n### Integration Points\n- **Bitrix24 API**: For bot registration, message handling, and user interaction\n- **Ollama API**: For generating document embeddings\n- **Qdrant API**: For vector storage and retrieval\n- **Google Gemini API**: For AI-powered response generation\n\n## Setup Instructions\n\n### Prerequisites\n- Active Bitrix24 account with Open Line channels enabled\n- Access to n8n workflow system\n- Ollama API credentials\n- Qdrant vector database access\n- Google Gemini API key\n\n### Configuration Steps\n\n1. **Initial Setup**\n   - Import the workflow into your n8n instance\n   - Configure credentials for all services\n   - Set up webhook endpoints\n\n2. **Bitrix24 Configuration**\n   - Create a new Bitrix24 application\n   - Configure webhook URLs\n   - Set appropriate permissions\n   - Install the application to your Bitrix24 account\n\n3. **Document Storage**\n   - Create a designated folder in Bitrix24 for knowledge base documents\n   - Configure folder paths in the workflow settings\n   - Upload initial documents to be processed\n\n4. **Bot Configuration**\n   - Customize bot name, avatar, and description\n   - Configure welcome messages and menu options\n   - Set up fallback responses\n\n5. **Testing**\n   - Verify successful installation\n   - Test document processing pipeline\n   - Send test queries to evaluate response qu",
  "featuredImage": "/data/workflows/3094/3094.webp",
  "author": {
    "id": 101,
    "slug": "fefehun",
    "name": "Ferenc Erb",
    "avatar": ""
  },
  "categories": [
    "Support Chatbot",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 6436,
  "downloads": 643,
  "createdAt": "2025-03-06T07:00:49.460Z",
  "updatedAt": "2026-01-16T08:28:02.449Z",
  "publishedAt": "2025-03-06T07:00:49.460Z",
  "nodes": 34,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3094",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Bitrix24 AI-Powered RAG Chatbot for Open Line Channels",
    "workflowName": "Bitrix24 AI-Powered RAG Chatbot for Open Line Channels",
    "description": "Transform your Bitrix24 Open Line channels with an intelligent chatbot that leverages Retrieval-Augmented Generation (RAG) technology to provide accurate, document-based responses to customer inquiries in real-time.\n\n## Use Case\nThis workflow is designed for organizations that want to enhance their customer support capabilities in Bitrix24 by providing automated, knowledge-based responses to customer inquiries. It's particularly useful for:\n\n- Customer service teams handling repetitive questions\n- Support departments with extensive documentation\n- Sales teams needing quick access to product information\n- Organizations looking to provide 24/7 customer support\n\n## What This Workflow Does\n\n### Smart Document Processing\n- Automatically processes uploaded PDF documents\n- Splits documents into manageable chunks\n- Generates vector embeddings for semantic understanding\n- Indexes content for efficient retrieval\n\n### AI-Powered Responses\n- Utilizes Google Gemini AI to generate natural language responses\n- Constructs answers based on relevant document content\n- Maintains conversation context for coherent interactions\n- Provides fallback responses when information is not available\n\n### Vector Database Integration\n- Stores document embeddings in Qdrant vector database\n- Enables semantic search beyond simple keyword matching\n- Retrieves the most relevant information for each query\n- Maintains a persistent knowledge base that grows over time\n\n### Webhook Handler\n- Processes incoming messages from Bitrix24 Open Line channels\n- Handles authentication and security validation\n- Routes different types of events to appropriate handlers\n- Manages session and conversation state\n\n### Event Routing\n- Intelligently routes different event types:\n  - `ONIMBOTMESSAGEADD`: Processes new user messages\n  - `ONIMBOTJOINCHAT`: Handles bot joining a conversation\n  - `ONAPPINSTALL`: Manages application installation\n  - `ONIMBOTDELETE`: Handles bot deletion\n\n### Document Management\n- Organizes processed documents in designated folders\n- Tracks document processing status\n- Moves indexed documents to appropriate locations\n- Maintains document metadata for reference\n\n### Interactive Menu\n- Provides menu-based options for common user requests\n- Customizable menu items and responses\n- Easy navigation for users seeking specific information\n- Fallback to operator option when needed\n\n## Technical Architecture\n\n### Components\n1. **Webhook Handler**: Receives and validates incoming requests from Bitrix24\n2. **Credential Manager**: Securely manages authentication tokens and API keys\n3. **Event Router**: Directs events to appropriate processing functions\n4. **Document Processor**: Handles document loading, chunking, and embedding\n5. **Vector Store**: Qdrant database for storing and retrieving document embeddings\n6. **Retrieval System**: Searches for relevant document chunks based on user queries\n7. **LLM Integration**: Google Gemini model for generating natural language responses\n8. **Response Manager**: Formats and sends responses back to Bitrix24\n\n### Integration Points\n- **Bitrix24 API**: For bot registration, message handling, and user interaction\n- **Ollama API**: For generating document embeddings\n- **Qdrant API**: For vector storage and retrieval\n- **Google Gemini API**: For AI-powered response generation\n\n## Setup Instructions\n\n### Prerequisites\n- Active Bitrix24 account with Open Line channels enabled\n- Access to n8n workflow system\n- Ollama API credentials\n- Qdrant vector database access\n- Google Gemini API key\n\n### Configuration Steps\n\n1. **Initial Setup**\n   - Import the workflow into your n8n instance\n   - Configure credentials for all services\n   - Set up webhook endpoints\n\n2. **Bitrix24 Configuration**\n   - Create a new Bitrix24 application\n   - Configure webhook URLs\n   - Set appropriate permissions\n   - Install the application to your Bitrix24 account\n\n3. **Document Storage**\n   - Create a designated folder in Bitrix24 for knowledge base documents\n   - Configure folder paths in the workflow settings\n   - Upload initial documents to be processed\n\n4. **Bot Configuration**\n   - Customize bot name, avatar, and description\n   - Configure welcome messages and menu options\n   - Set up fallback responses\n\n5. **Testing**\n   - Verify successful installation\n   - Test document processing pipeline\n   - Send test queries to evaluate response qu",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Bitrix24 Handler",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 1"
    },
    {
      "name": "Credentials",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Validate Token",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Route Event",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Process Message",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    },
    {
      "name": "Process Join",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    },
    {
      "name": "Process Install",
      "type": "n8n-nodes-base.function",
      "role": "function",
      "configDescription": "Version 1"
    },
    {
      "name": "Register Bot",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Send Message",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Send Join Message",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Process Delete",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Success Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Error Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Merge parameters for Subworkflow",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3"
    },
    {
      "name": "Get a list of available storages",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Get a list of List of Files and Folders",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Get a list of Folders files",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Download file",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1"
    },
    {
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Out folder files and folders",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Filter for files",
      "type": "n8n-nodes-base.filter",
      "role": "filter",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Move files to Vector stored folder",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Qdrant Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1"
    },
    {
      "name": "Embeddings Ollama",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "role": "embeddingsOllama",
      "configDescription": "Version 1"
    },
    {
      "name": "Vector Store Retriever",
      "type": "@n8n/n8n-nodes-langchain.retrieverVectorStore",
      "role": "retrieverVectorStore",
      "configDescription": "Version 1"
    },
    {
      "name": "Question and Answer Chain",
      "type": "@n8n/n8n-nodes-langchain.chainRetrievalQa",
      "role": "chainRetrievalQa",
      "configDescription": "Version 1.4"
    },
    {
      "name": "Prepare output parameters",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Embeddings Ollama1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "role": "embeddingsOllama",
      "configDescription": "Version 1"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Qdrant Vector Store1",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1"
    },
    {
      "name": "Execute subworkflow",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.1"
    }
  ]
}