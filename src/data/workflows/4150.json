{
  "id": 4150,
  "slug": "4150",
  "title": "Route user requests to specialized agents with GPT-4o Mini",
  "description": "This **n8n workflow template** is designed to **route user input to specialized agents** (like a Reminder Agent, Email Agent, etc.) using a **structured output from a language model**. Here's a complete description of what it does and how each part works:\n\n---\n\n### üîÅ **Workflow Purpose:**\n\nThis template receives a user's request via **Webhook**, processes it using an **LLM**, extracts structured data like the agent name and user query, and routes the input to the appropriate sub-workflow (agent) based on the specified agent type.\n\n---\n\n### üß© **Workflow Breakdown:**\n\n#### 1. **Webhook (Trigger)**\n\n* Node: `Webhook`\n* Purpose: Accepts a POST request from any frontend or API source. It contains the **raw user input**.\n\n---\n\n#### 2. **GPT Model (LLM Inference)**\n\n* Node: `GPT 4o Mini`\n* Purpose: Interprets the user input and determines:\n\n  * Which **agent** should handle it (e.g., \"Reminder Agent\", \"Email Agent\", etc.)\n  * The **actual user request** (in structured format)\n\n---\n\n#### 3. **Auto-Fixing Output Parser**\n\n* Node: `Auto-fixing Output Parser`\n* Purpose: Ensures that the output from the LLM matches the expected structure. If there's a mismatch, it automatically corrects it using a re-prompt.\n\n---\n\n#### 4. **Structured Output Parser**\n\n* Node: `Structured Output Parser`\n* Purpose: Converts the language model's response into a **strict JSON structure** with keys like:\n\n  * `\"Agent Name\"`\n  * `\"user input\"`\n  * `\"sessionID\"`\n\n---\n\n#### 5. **Agent Router**\n\n* Node: `Switch (\"Agent Route\")`\n* Purpose: Based on `\"Agent Name\"`, it routes the input to one of the following sub-workflows:\n\n  * üìÖ `Reminder Agent`\n  * üìß `Email Agent`\n  * üßæ `Document Agent`\n  * ü§ù `Meeting Agent`\n\n---\n\n#### 6. **Sub-Workflow Call (Execute Workflow)**\n\nEach agent is implemented as a separate n8n workflow:\n\n* The input is forwarded to the selected agent.\n* For example, if `\"Agent Name\"` is `\"Reminder Agent\"`, the workflow `\"Reminder Agent\"` is called with `\"user input\"`.\n\n---\n\n#### 7. **Webhook Response**\n\n* After the sub-agent workflow finishes, a `Respond to Webhook` node sends the output back as an HTTP response.\n\n---\n\n### ‚úÖ **Key Features:**\n\n* Fully modular and extensible\n* LLM-driven routing using **OpenRouter GPT-4o**\n* Auto-corrects structured output errors\n* Clean separation of concerns (agent logic is decoupled in sub-workflows)\n* Easily add more agents by updating the switch logic\n\n---\n\n### üì¶ **Use Case Examples:**\n\n* User says: ‚ÄúRemind me to call my mom tomorrow.‚Äù\n  ‚Üí Routed to **Reminder Agent**\n\n* User says: ‚ÄúSend an email to the HR team.‚Äù\n  ‚Üí Routed to **Email Agent**\n\n* User says: ‚ÄúSchedule a meeting with John next week.‚Äù\n  ‚Üí Routed to **Meeting Agent**\n\n---",
  "featuredImage": "/data/workflows/4150/4150.webp",
  "author": {
    "id": 101,
    "slug": "itechdp",
    "name": "Dhrumil Patel",
    "avatar": ""
  },
  "categories": [
    "Personal Productivity",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 782,
  "downloads": 78,
  "createdAt": "2025-05-17T14:13:40.939Z",
  "updatedAt": "2026-01-16T08:33:10.253Z",
  "publishedAt": "2025-05-17T14:13:40.939Z",
  "nodes": 16,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/4150",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Route user requests to specialized agents with GPT-4o Mini",
    "workflowName": "Route user requests to specialized agents with GPT-4o Mini",
    "description": "This **n8n workflow template** is designed to **route user input to specialized agents** (like a Reminder Agent, Email Agent, etc.) using a **structured output from a language model**. Here's a complete description of what it does and how each part works:\n\n---\n\n### üîÅ **Workflow Purpose:**\n\nThis template receives a user's request via **Webhook**, processes it using an **LLM**, extracts structured data like the agent name and user query, and routes the input to the appropriate sub-workflow (agent) based on the specified agent type.\n\n---\n\n### üß© **Workflow Breakdown:**\n\n#### 1. **Webhook (Trigger)**\n\n* Node: `Webhook`\n* Purpose: Accepts a POST request from any frontend or API source. It contains the **raw user input**.\n\n---\n\n#### 2. **GPT Model (LLM Inference)**\n\n* Node: `GPT 4o Mini`\n* Purpose: Interprets the user input and determines:\n\n  * Which **agent** should handle it (e.g., \"Reminder Agent\", \"Email Agent\", etc.)\n  * The **actual user request** (in structured format)\n\n---\n\n#### 3. **Auto-Fixing Output Parser**\n\n* Node: `Auto-fixing Output Parser`\n* Purpose: Ensures that the output from the LLM matches the expected structure. If there's a mismatch, it automatically corrects it using a re-prompt.\n\n---\n\n#### 4. **Structured Output Parser**\n\n* Node: `Structured Output Parser`\n* Purpose: Converts the language model's response into a **strict JSON structure** with keys like:\n\n  * `\"Agent Name\"`\n  * `\"user input\"`\n  * `\"sessionID\"`\n\n---\n\n#### 5. **Agent Router**\n\n* Node: `Switch (\"Agent Route\")`\n* Purpose: Based on `\"Agent Name\"`, it routes the input to one of the following sub-workflows:\n\n  * üìÖ `Reminder Agent`\n  * üìß `Email Agent`\n  * üßæ `Document Agent`\n  * ü§ù `Meeting Agent`\n\n---\n\n#### 6. **Sub-Workflow Call (Execute Workflow)**\n\nEach agent is implemented as a separate n8n workflow:\n\n* The input is forwarded to the selected agent.\n* For example, if `\"Agent Name\"` is `\"Reminder Agent\"`, the workflow `\"Reminder Agent\"` is called with `\"user input\"`.\n\n---\n\n#### 7. **Webhook Response**\n\n* After the sub-agent workflow finishes, a `Respond to Webhook` node sends the output back as an HTTP response.\n\n---\n\n### ‚úÖ **Key Features:**\n\n* Fully modular and extensible\n* LLM-driven routing using **OpenRouter GPT-4o**\n* Auto-corrects structured output errors\n* Clean separation of concerns (agent logic is decoupled in sub-workflows)\n* Easily add more agents by updating the switch logic\n\n---\n\n### üì¶ **Use Case Examples:**\n\n* User says: ‚ÄúRemind me to call my mom tomorrow.‚Äù\n  ‚Üí Routed to **Reminder Agent**\n\n* User says: ‚ÄúSend an email to the HR team.‚Äù\n  ‚Üí Routed to **Email Agent**\n\n* User says: ‚ÄúSchedule a meeting with John next week.‚Äù\n  ‚Üí Routed to **Meeting Agent**\n\n---",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Auto-fixing Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "role": "outputParserAutofixing",
      "configDescription": "Version 1"
    },
    {
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "role": "outputParserStructured",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Reminder Agent",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Agent Route",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Output Parser Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "GPT 4o Mini",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "role": "webhook",
      "configDescription": "Version 2"
    },
    {
      "name": "Reminder Agent Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Email Agent Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Email Agent",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 1.8"
    },
    {
      "name": "Meeting Agent",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Meeting Agent Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Document Agent",
      "type": "n8n-nodes-base.executeWorkflow",
      "role": "executeWorkflow",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Document Agent2",
      "type": "n8n-nodes-base.respondToWebhook",
      "role": "respondToWebhook",
      "configDescription": "Version 1.1"
    }
  ]
}