{
  "id": 11270,
  "slug": "11270",
  "title": "Monitor competitor Meta Ads creatives and send alerts with Google Sheets & Telegram",
  "description": "This workflow continuously monitors the Meta Ads Library for new creatives from a specific competitor pages, logs them into Google Sheets, and sends a concise Telegram notification with the number of newly discovered ads. It is built as a safe, idempotent loop that can run on a schedule without creating duplicates in your sheet.\n\n#### **Use Case**\nManually checking the Meta Ads Library for competitor creatives is time‑consuming, and it’s easy to lose track of which ads you’ve already seen. This workflow is ideal if you want to:\n- **Track competitor creatives over time** in a structured Google Sheet.\n- **Avoid duplicates** by matching ads via their unique `id` field.\n- **Get lightweight notifications** in Telegram that tell you *how many* new ads appeared, without spamming you with full ad lists.\n- **Run the process on autopilot** (daily, weekly, etc.) with a single schedule.\n\n#### **How it Works**\n\nThe workflow is organized into three logical blocks:\n\n**1. Fetch Ads & Handle Pagination**\n- **Configuration:** The `Add parameters` Set node stores all key request variables:\n  - `ad_active_status` (e.g. `active`),\n  - `search_page_ids` (competitor page IDs),\n  - `ad_reached_countries`,\n  - `access_token`.\n- **Routing:** `Page or keywords` routes execution into one of two HTTP Request nodes:\n  - `Facebook Ads API by page` — the main branch that queries ads by page ID.\n  - `Facebook Ads API by keywords` — an optional branch for keyword‑based searches.\n- **Normalization:** `Facebook Ads API by ...` returns the raw `ads_archive` response. `Check the pagination` then:\n  - extracts `data` (array of ad objects) into a dedicated field,\n  - reads `paging.next` into `next_url` for pagination.\n- **Pagination Loop:**  \n  - `If` checks whether `next_url` is not empty.  \n  - `Set Next URL` assigns `next_url` to a generic `url` field.  \n  - `Facebook Ads API pagination` requests the next page and feeds it back into `Check the pagination`.  \n  This loop continues until there is no `next_url`, ensuring all pages of the Ads Library response are processed.\n\n**2. De‑duplicate Ads & Log to Google Sheets**\n- **Load Existing IDs:**  \n  - `Read existing IDs` pulls the existing `id` column from your Google Sheet (configured to read a specific column/range).  \n  - `Collect ID list` converts these into a unique, normalized string array `existingIds`, which represents all ads you have already logged.\n- **Attach State:**  \n  - `Attach existing ids` (Merge node) combines, for each execution, the freshly fetched Meta response (`data`) with the historical `existingIds` array from Sheets.\n- **Filter New Creatives:**  \n  - `Filter new creatives` Code node compares each ad’s `id` (string) against the `existingIds` set and builds a new `data` array containing **only ads that are not yet present** in the sheet.  \n  - It also protects against duplicates inside the same batch by tracking seen IDs in a local `Set`.\n- **Write New Ads:**  \n  - `Split Out` expands the filtered `data` array into individual items (one item per new ad).  \n  - `Add to sheet` then performs an `appendOrUpdate` into Google Sheets, mapping core fields such as `id`, `ad_creation_time`, `page_name`, `ad_creative_bodies`, `ad_snapshot_url`, `languages`, `publisher_platforms`, and link fields.  \n  - The column mapping uses `id` as the matching column so that existing rows can be updated if needed.\n\n**3. Count New Ads & Notify in Telegram**\n- **Count:**  \n  - In parallel with the write step, `Split Out` also feeds into `Count new ads`.  \n  - This Code node returns a single summary item with `newCount = items.length`, i.e. the total number of **new** creatives processed in this run.\n- **Guard:**  \n  - `Any new ads?` checks whether `newCount` is greater than `0`. If not, the workflow ends silently and no message is sent, avoiding noise.\n- **Notify:**  \n  - When there are new creatives, `Send a text message` sends a Telegram message to the configured `chatId`.  \n  - The message includes `{{$json.newCount}}` and a fixed link to the Google Sheet, giving you a quick heads‑up without listing individual ads.\n\n---\n\n### **Setup Instructions**\n\nTo use this template, configure the following components.\n\n**1. Credentials**\n- **Meta Ads / HTTP Header Auth:**  \n  - Configure the `Meta Ads` HTTP Header credentials used by:\n    - `Facebook Ads API by page`,\n    - `Facebook Ads API by keywords`,\n    - `Facebook Ads API pagination`.\n- **Google Sheets:**  \n  - Connect your Google account in:\n    - `Read existing IDs`,\n    - `Add to sheet`.\n- **Telegram:**  \n  - Connect your `Telegram account` credentials in `Send a text message`.\n\n**2. The `Add parameters` Node**\nOpen the `Add parameters` Set node and customize:\n- `ad_active_status`: Which ads to monitor (`active`, `all`, etc.).\n- `search_page_ids`: The numeric ID of the competitor Facebook Page you want to track.\n- `ad_reached_countries`: Comma‑separated list of country codes (`US`, `US, CA`, etc.).\n- `access_token`: A valid long‑lived access token with permission to query the Ads Library.\n\n**3. Google Sheets Configuration**\n- **`Read existing IDs`**  \n  - Set `documentId` and `sheetName` to your tracking spreadsheet and sheet (e.g. an `ads` tab).  \n  - Configure the range to read only the column holding the ad `id` values.\n- **`Add to sheet`**  \n  - Point `documentId` and `sheetName` to the same spreadsheet/sheet.  \n  - Make sure your sheet has the columns expected by the node (e.g. `id`, `creation time`, `page`, `title`, `description`, `delivery_start_time`, `snapshot`, `languages`, `platforms`, `link`).  \n  - Confirm that `id` is included in `matchingColumns` so de‑duplication works correctly.\n\n**4. Telegram Configuration**\n- In `Send a text message`, set:\n  - `chatId`: Your target Telegram chat or channel ID.\n  - `text`: Customize the message template as needed, but keep `{{$json.newCount}}` to show the number of new creatives.\n\n**5. Schedule**\n- Open `Schedule Trigger` and configure when you want the workflow to run (e.g. every morning).  \n- Save and activate the workflow.\n\n---\n\n### **Further Ideas & Customization**\n\nThis workflow is a solid foundation for systematic competitor monitoring. You can extend it to:\n- **Track multiple competitors** by turning `search_page_ids` into a list and iterating over it with a loop or separate executions.\n- **Enrich the log with performance data** by creating a second workflow that reads the sheet, pulls spend/impressions/CTR for each logged `ad_id` from Meta, and merges the metrics back.\n- **Add more notification channels** such as Slack or email, or send a weekly summary that aggregates new ads by page, format, or country.\n- **Tag or categorize creatives** (e.g. “video vs image”, “country”, “language”) directly in the sheet to make later analysis easier.\n\n",
  "featuredImage": "/data/workflows/11270/11270.webp",
  "author": {
    "id": 101,
    "slug": "hotgomer",
    "name": "Kirill Khatkevich",
    "avatar": ""
  },
  "categories": [
    "Market Research"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 231,
  "downloads": 23,
  "createdAt": "2025-11-27T01:41:11.737Z",
  "updatedAt": "2026-01-16T09:08:16.018Z",
  "publishedAt": "2025-11-27T01:41:11.737Z",
  "nodes": 34,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/11270",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Monitor competitor Meta Ads creatives and send alerts with Google Sheets & Telegram",
    "workflowName": "Monitor competitor Meta Ads creatives and send alerts with Google Sheets & Telegram",
    "description": "This workflow continuously monitors the Meta Ads Library for new creatives from a specific competitor pages, logs them into Google Sheets, and sends a concise Telegram notification with the number of newly discovered ads. It is built as a safe, idempotent loop that can run on a schedule without creating duplicates in your sheet.\n\n#### **Use Case**\nManually checking the Meta Ads Library for competitor creatives is time‑consuming, and it’s easy to lose track of which ads you’ve already seen. This workflow is ideal if you want to:\n- **Track competitor creatives over time** in a structured Google Sheet.\n- **Avoid duplicates** by matching ads via their unique `id` field.\n- **Get lightweight notifications** in Telegram that tell you *how many* new ads appeared, without spamming you with full ad lists.\n- **Run the process on autopilot** (daily, weekly, etc.) with a single schedule.\n\n#### **How it Works**\n\nThe workflow is organized into three logical blocks:\n\n**1. Fetch Ads & Handle Pagination**\n- **Configuration:** The `Add parameters` Set node stores all key request variables:\n  - `ad_active_status` (e.g. `active`),\n  - `search_page_ids` (competitor page IDs),\n  - `ad_reached_countries`,\n  - `access_token`.\n- **Routing:** `Page or keywords` routes execution into one of two HTTP Request nodes:\n  - `Facebook Ads API by page` — the main branch that queries ads by page ID.\n  - `Facebook Ads API by keywords` — an optional branch for keyword‑based searches.\n- **Normalization:** `Facebook Ads API by ...` returns the raw `ads_archive` response. `Check the pagination` then:\n  - extracts `data` (array of ad objects) into a dedicated field,\n  - reads `paging.next` into `next_url` for pagination.\n- **Pagination Loop:**  \n  - `If` checks whether `next_url` is not empty.  \n  - `Set Next URL` assigns `next_url` to a generic `url` field.  \n  - `Facebook Ads API pagination` requests the next page and feeds it back into `Check the pagination`.  \n  This loop continues until there is no `next_url`, ensuring all pages of the Ads Library response are processed.\n\n**2. De‑duplicate Ads & Log to Google Sheets**\n- **Load Existing IDs:**  \n  - `Read existing IDs` pulls the existing `id` column from your Google Sheet (configured to read a specific column/range).  \n  - `Collect ID list` converts these into a unique, normalized string array `existingIds`, which represents all ads you have already logged.\n- **Attach State:**  \n  - `Attach existing ids` (Merge node) combines, for each execution, the freshly fetched Meta response (`data`) with the historical `existingIds` array from Sheets.\n- **Filter New Creatives:**  \n  - `Filter new creatives` Code node compares each ad’s `id` (string) against the `existingIds` set and builds a new `data` array containing **only ads that are not yet present** in the sheet.  \n  - It also protects against duplicates inside the same batch by tracking seen IDs in a local `Set`.\n- **Write New Ads:**  \n  - `Split Out` expands the filtered `data` array into individual items (one item per new ad).  \n  - `Add to sheet` then performs an `appendOrUpdate` into Google Sheets, mapping core fields such as `id`, `ad_creation_time`, `page_name`, `ad_creative_bodies`, `ad_snapshot_url`, `languages`, `publisher_platforms`, and link fields.  \n  - The column mapping uses `id` as the matching column so that existing rows can be updated if needed.\n\n**3. Count New Ads & Notify in Telegram**\n- **Count:**  \n  - In parallel with the write step, `Split Out` also feeds into `Count new ads`.  \n  - This Code node returns a single summary item with `newCount = items.length`, i.e. the total number of **new** creatives processed in this run.\n- **Guard:**  \n  - `Any new ads?` checks whether `newCount` is greater than `0`. If not, the workflow ends silently and no message is sent, avoiding noise.\n- **Notify:**  \n  - When there are new creatives, `Send a text message` sends a Telegram message to the configured `chatId`.  \n  - The message includes `{{$json.newCount}}` and a fixed link to the Google Sheet, giving you a quick heads‑up without listing individual ads.\n\n---\n\n### **Setup Instructions**\n\nTo use this template, configure the following components.\n\n**1. Credentials**\n- **Meta Ads / HTTP Header Auth:**  \n  - Configure the `Meta Ads` HTTP Header credentials used by:\n    - `Facebook Ads API by page`,\n    - `Facebook Ads API by keywords`,\n    - `Facebook Ads API pagination`.\n- **Google Sheets:**  \n  - Connect your Google account in:\n    - `Read existing IDs`,\n    - `Add to sheet`.\n- **Telegram:**  \n  - Connect your `Telegram account` credentials in `Send a text message`.\n\n**2. The `Add parameters` Node**\nOpen the `Add parameters` Set node and customize:\n- `ad_active_status`: Which ads to monitor (`active`, `all`, etc.).\n- `search_page_ids`: The numeric ID of the competitor Facebook Page you want to track.\n- `ad_reached_countries`: Comma‑separated list of country codes (`US`, `US, CA`, etc.).\n- `access_token`: A valid long‑lived access token with permission to query the Ads Library.\n\n**3. Google Sheets Configuration**\n- **`Read existing IDs`**  \n  - Set `documentId` and `sheetName` to your tracking spreadsheet and sheet (e.g. an `ads` tab).  \n  - Configure the range to read only the column holding the ad `id` values.\n- **`Add to sheet`**  \n  - Point `documentId` and `sheetName` to the same spreadsheet/sheet.  \n  - Make sure your sheet has the columns expected by the node (e.g. `id`, `creation time`, `page`, `title`, `description`, `delivery_start_time`, `snapshot`, `languages`, `platforms`, `link`).  \n  - Confirm that `id` is included in `matchingColumns` so de‑duplication works correctly.\n\n**4. Telegram Configuration**\n- In `Send a text message`, set:\n  - `chatId`: Your target Telegram chat or channel ID.\n  - `text`: Customize the message template as needed, but keep `{{$json.newCount}}` to show the number of new creatives.\n\n**5. Schedule**\n- Open `Schedule Trigger` and configure when you want the workflow to run (e.g. every morning).  \n- Save and activate the workflow.\n\n---\n\n### **Further Ideas & Customization**\n\nThis workflow is a solid foundation for systematic competitor monitoring. You can extend it to:\n- **Track multiple competitors** by turning `search_page_ids` into a list and iterating over it with a loop or separate executions.\n- **Enrich the log with performance data** by creating a second workflow that reads the sheet, pulls spend/impressions/CTR for each logged `ad_id` from Meta, and merges the metrics back.\n- **Add more notification channels** such as Slack or email, or send a weekly summary that aggregates new ads by page, format, or country.\n- **Tag or categorize creatives** (e.g. “video vs image”, “country”, “language”) directly in the sheet to make later analysis easier.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Facebook Ads API by page",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Facebook Ads API by keywords",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Page or keywords",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.3"
    },
    {
      "name": "If",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Check the pagination",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Facebook Ads API pagination",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.3"
    },
    {
      "name": "Set Next URL",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Send a text message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Collect ID list",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Read existing IDs",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Attach existing ids",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Filter new creatives",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Count new ads",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Any new ads?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Add parameters",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Add to sheet",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Split Out",
      "type": "n8n-nodes-base.splitOut",
      "role": "splitOut",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note - Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Send a message",
      "type": "n8n-nodes-base.slack",
      "role": "slack",
      "configDescription": "Version 2.3"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}