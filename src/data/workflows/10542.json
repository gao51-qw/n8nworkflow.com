{
  "id": 10542,
  "slug": "10542",
  "title": "Auto-generate Shopify blog related articles with OpenAI text-embedding-3-small",
  "description": "### ü™ê Use case\n\nAutomatically surface and insert the three most relevant ‚ÄúRelated articles‚Äù at the end of every Shopify blog post to boost session depth, SEO, and reader engagement.\n\n---\n\n### ‚öôÔ∏è What this workflow does\n\n* Pulls all published articles from a selected **Shopify Blog** using the Admin API.\n* Cleans the HTML content (removes existing `.related-articles` blocks) and extracts text for embeddings.\n* Generates **OpenAI embeddings** (`text-embedding-3-small`) and stores them in **n8n Data Tables**.\n* Calculates **semantic similarity** (cosine distance) between articles to identify the top matches.\n* Selects the **Top 3** most relevant related posts for each article (configurable).\n* Dynamically builds a `<div>` HTML section and updates the article on Shopify.\n* Runs on a weekly schedule to keep relations fresh as new content is added.\n\n---\n\n### üß© Setup\n\n1. **Create 3 Data Tables**:\n\n   * `articles`\n   * `article_relations`\n   * `article_related_links_snapshot`\n\n2. **Add credentials**:\n\n   * Shopify Admin API Access Token\n   * OpenAI API Key\n\n3. **Set environment variables** in the *Workflow Configuration* node:\n\n   * `shopifyBlogId`\n   * `shopifyBlogDomain`\n   * `shopifyStoreName`\n   * `shopApiVersion`\n   * `percent_minimum_similarity` (default `70`)\n\n4. *(Optional)* Keep or modify the **Schedule Trigger** (default: every week at 20:00).\n\n---\n\n### üõ†Ô∏è How to adjust this template\n\n* Modify the similarity threshold or number of related posts displayed.\n* Edit the HTML snippet or CSS classes for the related section.\n* Integrate a second OpenAI model to rewrite link titles or summaries for better UX.\n\n---\n\n### üí° Ideal for\n\nShopify content teams and SEO strategists who want **automated, context-aware internal linking** to improve engagement and organic ranking.",
  "featuredImage": "/data/workflows/10542/10542.webp",
  "author": {
    "id": 101,
    "slug": "jojoq42",
    "name": "Geoffroy",
    "avatar": ""
  },
  "categories": [
    "Content Creation",
    "AI Summarization"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 122,
  "downloads": 12,
  "createdAt": "2025-11-05T16:43:56.408Z",
  "updatedAt": "2026-01-16T09:05:25.574Z",
  "publishedAt": "2025-11-05T16:43:56.408Z",
  "nodes": 26,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/10542",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Auto-generate Shopify blog related articles with OpenAI text-embedding-3-small",
    "workflowName": "Auto-generate Shopify blog related articles with OpenAI text-embedding-3-small",
    "description": "### ü™ê Use case\n\nAutomatically surface and insert the three most relevant ‚ÄúRelated articles‚Äù at the end of every Shopify blog post to boost session depth, SEO, and reader engagement.\n\n---\n\n### ‚öôÔ∏è What this workflow does\n\n* Pulls all published articles from a selected **Shopify Blog** using the Admin API.\n* Cleans the HTML content (removes existing `.related-articles` blocks) and extracts text for embeddings.\n* Generates **OpenAI embeddings** (`text-embedding-3-small`) and stores them in **n8n Data Tables**.\n* Calculates **semantic similarity** (cosine distance) between articles to identify the top matches.\n* Selects the **Top 3** most relevant related posts for each article (configurable).\n* Dynamically builds a `<div>` HTML section and updates the article on Shopify.\n* Runs on a weekly schedule to keep relations fresh as new content is added.\n\n---\n\n### üß© Setup\n\n1. **Create 3 Data Tables**:\n\n   * `articles`\n   * `article_relations`\n   * `article_related_links_snapshot`\n\n2. **Add credentials**:\n\n   * Shopify Admin API Access Token\n   * OpenAI API Key\n\n3. **Set environment variables** in the *Workflow Configuration* node:\n\n   * `shopifyBlogId`\n   * `shopifyBlogDomain`\n   * `shopifyStoreName`\n   * `shopApiVersion`\n   * `percent_minimum_similarity` (default `70`)\n\n4. *(Optional)* Keep or modify the **Schedule Trigger** (default: every week at 20:00).\n\n---\n\n### üõ†Ô∏è How to adjust this template\n\n* Modify the similarity threshold or number of related posts displayed.\n* Edit the HTML snippet or CSS classes for the related section.\n* Integrate a second OpenAI model to rewrite link titles or summaries for better UX.\n\n---\n\n### üí° Ideal for\n\nShopify content teams and SEO strategists who want **automated, context-aware internal linking** to improve engagement and organic ranking.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Get articles from shopify",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Clean & Prepare Text",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "OpenAI Get Embeddings",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Set article fields",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Calculate similarities",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Upsert articles",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Upsert article_relations",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Top 3 related articles",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Loop for source articles",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "Get previous related_articles",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Check if article already has related",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Upsert relations",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Prepare HTML for related articles",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Check if related articles are the same",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "No need to change the related section",
      "type": "n8n-nodes-base.noOp",
      "role": "noOp",
      "configDescription": "Version 1"
    },
    {
      "name": "Get related article details",
      "type": "n8n-nodes-base.dataTable",
      "role": "dataTable",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Related IDs",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Insert Related in Article",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Update article with related",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}