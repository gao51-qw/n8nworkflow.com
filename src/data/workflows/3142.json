{
  "id": 3142,
  "slug": "3142",
  "title": "MFA multi-factor authentication (Voice call and Email) with ClickSend and SMTP",
  "description": "This workflow automates the process of sending **voice calls** for verification purposes and combines it with **email verification**. It uses the **ClickSend API** for voice calls and integrates with **SMTP** for email verification. \n\nThis workflow is a powerful tool for automating phone and email verification, ensuring a seamless and secure user verification process.\n\nBelow is a breakdown of the workflow:\n\n---\n\n#### **1. How It Works**\nThe workflow is designed to verify a user's phone number and email address through a combination of voice calls and email verification. Here's how it works:\n\n1. **Form Submission**:\n   - The workflow starts with a **Form Trigger** node, where users submit a form with the following fields:\n     - **To**: The recipient's phone number (including the international prefix, e.g., +1xxxx).\n     - **Voice**: The voice type (male or female).\n     - **Lang**: The language for the voice call (e.g., en-us, it-it, fr-fr, etc.).\n     - **Email**: The recipient's email address.\n     - **Name**: The recipient's name.\n\n2. **Set Voice Code**:\n   - The **Set Voice Code** node defines the verification code that will be spoken during the voice call.\n\n3. **Format Code for Voice**:\n   - The **Code for Voice** node formats the verification code by adding spaces between characters for better clarity during the voice call.\n\n4. **Send Voice Call**:\n   - The call includes the verification code, which is read aloud to the recipient.\n\n5. **Verify Voice Code**:\n   - The **Verify Voice Code** node prompts the user to enter the code they received via the voice call.\n   - The **Is Voice Code Correct?** node checks if the entered code matches the predefined code.\n     - If correct, the workflow proceeds to email verification.\n     - If incorrect, the user is notified of the failure.\n\n6. **Set Email Code**:\n   - The **Set Email Code** node defines the verification code that will be sent via email.\n\n7. **Send Email**:\n   - The **Send Email** node sends an email to the recipient with the verification code using **SMTP**.\n\n8. **Verify Email Code**:\n   - The **Verify Email Code** node prompts the user to enter the code they received via email.\n   - The **Is Email Code Correct?** node checks if the entered code matches the predefined code.\n     - If correct, the user is notified of successful verification.\n     - If incorrect, the user is notified of the failure.\n\n---\n\n#### **2. Set Up Steps**\nTo set up and use this workflow in n8n, follow these steps:\n\n1. **ClickSend API Key**:\n   - Create an account on [ClickSend](https://clicksend.com/?u=586989) and obtain your **API Key**.\n   - In the **Send Voice** node, set up **HTTP Basic Authentication**:\n     - **Username**: Use the username you registered with on ClickSend.\n     - **Password**: Use the **API Key** provided by ClickSend.\n\n2. **SMTP Configuration**:\n   - Set up **SMTP** credentials in n8n for the **Send Email** node.\n   - Ensure the SMTP server is configured to send emails from the specified email address.\n\n3. **Form Configuration**:\n   - The **Form Trigger** node is pre-configured with fields for:\n     - **To**: The recipient's phone number.\n     - **Voice**: Choose between male or female voice.\n     - **Lang**: Select the language for the voice call.\n     - **Email**: The recipient's email address.\n     - **Name**: The recipient's name.\n   - Customize the form fields if needed.\n\n4. **Set Verification Codes**:\n   - In the **Set Voice Code** node, define the verification code that will be spoken during the voice call.\n   - In the **Set Email Code** node, define the verification code that will be sent via email.\n\n5. **Test the Workflow**:\n   - Submit the form with the required details (phone number, voice, language, email, and name).\n   - The workflow will:\n     - Send a voice call with the verification code.\n     - Prompt the user to verify the code.\n     - Send an email with the verification code.\n     - Prompt the user to verify the email code.\n     - Notify the user of success or failure.\n\n---\n\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/). ",
  "featuredImage": "/data/workflows/3142/3142.webp",
  "author": {
    "id": 101,
    "slug": "n3witalia",
    "name": "Davide",
    "avatar": ""
  },
  "categories": [
    "SecOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 2731,
  "downloads": 273,
  "createdAt": "2025-03-12T09:05:27.256Z",
  "updatedAt": "2026-01-16T08:28:16.999Z",
  "publishedAt": "2025-03-12T09:05:27.256Z",
  "nodes": 19,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3142",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "MFA multi-factor authentication (Voice call and Email) with ClickSend and SMTP",
    "workflowName": "MFA multi-factor authentication (Voice call and Email) with ClickSend and SMTP",
    "description": "This workflow automates the process of sending **voice calls** for verification purposes and combines it with **email verification**. It uses the **ClickSend API** for voice calls and integrates with **SMTP** for email verification. \n\nThis workflow is a powerful tool for automating phone and email verification, ensuring a seamless and secure user verification process.\n\nBelow is a breakdown of the workflow:\n\n---\n\n#### **1. How It Works**\nThe workflow is designed to verify a user's phone number and email address through a combination of voice calls and email verification. Here's how it works:\n\n1. **Form Submission**:\n   - The workflow starts with a **Form Trigger** node, where users submit a form with the following fields:\n     - **To**: The recipient's phone number (including the international prefix, e.g., +1xxxx).\n     - **Voice**: The voice type (male or female).\n     - **Lang**: The language for the voice call (e.g., en-us, it-it, fr-fr, etc.).\n     - **Email**: The recipient's email address.\n     - **Name**: The recipient's name.\n\n2. **Set Voice Code**:\n   - The **Set Voice Code** node defines the verification code that will be spoken during the voice call.\n\n3. **Format Code for Voice**:\n   - The **Code for Voice** node formats the verification code by adding spaces between characters for better clarity during the voice call.\n\n4. **Send Voice Call**:\n   - The call includes the verification code, which is read aloud to the recipient.\n\n5. **Verify Voice Code**:\n   - The **Verify Voice Code** node prompts the user to enter the code they received via the voice call.\n   - The **Is Voice Code Correct?** node checks if the entered code matches the predefined code.\n     - If correct, the workflow proceeds to email verification.\n     - If incorrect, the user is notified of the failure.\n\n6. **Set Email Code**:\n   - The **Set Email Code** node defines the verification code that will be sent via email.\n\n7. **Send Email**:\n   - The **Send Email** node sends an email to the recipient with the verification code using **SMTP**.\n\n8. **Verify Email Code**:\n   - The **Verify Email Code** node prompts the user to enter the code they received via email.\n   - The **Is Email Code Correct?** node checks if the entered code matches the predefined code.\n     - If correct, the user is notified of successful verification.\n     - If incorrect, the user is notified of the failure.\n\n---\n\n#### **2. Set Up Steps**\nTo set up and use this workflow in n8n, follow these steps:\n\n1. **ClickSend API Key**:\n   - Create an account on [ClickSend](https://clicksend.com/?u=586989) and obtain your **API Key**.\n   - In the **Send Voice** node, set up **HTTP Basic Authentication**:\n     - **Username**: Use the username you registered with on ClickSend.\n     - **Password**: Use the **API Key** provided by ClickSend.\n\n2. **SMTP Configuration**:\n   - Set up **SMTP** credentials in n8n for the **Send Email** node.\n   - Ensure the SMTP server is configured to send emails from the specified email address.\n\n3. **Form Configuration**:\n   - The **Form Trigger** node is pre-configured with fields for:\n     - **To**: The recipient's phone number.\n     - **Voice**: Choose between male or female voice.\n     - **Lang**: Select the language for the voice call.\n     - **Email**: The recipient's email address.\n     - **Name**: The recipient's name.\n   - Customize the form fields if needed.\n\n4. **Set Verification Codes**:\n   - In the **Set Voice Code** node, define the verification code that will be spoken during the voice call.\n   - In the **Set Email Code** node, define the verification code that will be sent via email.\n\n5. **Test the Workflow**:\n   - Submit the form with the required details (phone number, voice, language, email, and name).\n   - The workflow will:\n     - Send a voice call with the verification code.\n     - Prompt the user to verify the code.\n     - Send an email with the verification code.\n     - Prompt the user to verify the email code.\n     - Notify the user of success or failure.\n\n---\n\n\n### **Need help customizing?**  \n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Send Voice",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "role": "formTrigger",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Send Email",
      "type": "n8n-nodes-base.emailSend",
      "role": "emailSend",
      "configDescription": "Version 2.1"
    },
    {
      "name": "Code for voice",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Set voice code",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Verify voice code",
      "type": "n8n-nodes-base.form",
      "role": "form",
      "configDescription": "Version 1"
    },
    {
      "name": "Fail voice code",
      "type": "n8n-nodes-base.form",
      "role": "form",
      "configDescription": "Version 1"
    },
    {
      "name": "Set email code",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Verify email code",
      "type": "n8n-nodes-base.form",
      "role": "form",
      "configDescription": "Version 1"
    },
    {
      "name": "Is email code correct?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Is voice code correct?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Success",
      "type": "n8n-nodes-base.form",
      "role": "form",
      "configDescription": "Version 1"
    },
    {
      "name": "Fail email code",
      "type": "n8n-nodes-base.form",
      "role": "form",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}