{
  "id": 8789,
  "slug": "8789",
  "title": "Lightweight support desk with Telegram and Postgres database tracking",
  "description": "## Telegram ticket intake and status tracking with Postgres\n\n### Who’s it for\nAnyone running support requests through Telegram, Email, Webhooks, and so on who needs a lightweight ticketing system without paying Zendesk prices. Ideal for small teams, freelancers, or businesses that want tickets logged in a structured database (Postgres) and tracked automatically. I'm using Telegram since it's the most convenient one.\n\n### How it works / What it does\nThis workflow turns (Telegram) into a support desk:\n1. **Receives new requests** via a Telegram bot command.  \n2. **Creates a ticket** in a Postgres database with a correlation ID, requester details, and status.  \n3. **Auto-confirms back to the requester** with the ticket ID.  \n4. **Provides ticket updates** (status changes, resolutions) when queried.  \n5. **Keeps data clean** using dedupe keys and controlled input handling.  \n\n### How to set up\n1. Create a Telegram bot using [@BotFather](https://core.telegram.org/bots#botfather) and grab the token.  \n2. Connect your Postgres database to n8n and create a `tickets` table:  \n\n```sql\nCREATE TABLE tickets (\n  id BIGSERIAL PRIMARY KEY,\n  correlation_id UUID,\n  source TEXT,\n  external_id TEXT,\n  requester_name TEXT,\n  requester_email TEXT,\n  requester_phone TEXT,\n  subject TEXT,\n  description TEXT,\n  status TEXT,\n  priority TEXT,\n  dedupe_key TEXT,\n  chat_id TEXT,\n  created_at TIMESTAMP DEFAULT NOW(),\n  updated_at TIMESTAMP DEFAULT NOW()\n);\n```\n\n3. Add your Telegram and Postgres credentials in n8n (via the **Credentials** tab, not hardcoded).  \n4. Import the workflow JSON and replace the placeholder credentials with yours.  \n5. Test by sending `/new` in Telegram and follow the prompts.\n\n### Requirements\n- n8n (latest version recommended)  \n- Telegram bot token  \n- Postgres instance (local, Docker, or cloud)  \n\n### How to customize the workflow\n- Change database fields if you need more requester info.  \n- Tweak the **Switch node** and **Comands** for multiple status types.  \n- Extend with Slack, Discord, or email nodes for broader notifications.  \n- Integrate with external systems (CRM, project management) by adding more branches.  \n",
  "featuredImage": "/data/workflows/8789/8789.webp",
  "author": {
    "id": 101,
    "slug": "mohammad-1378",
    "name": "Mohammad",
    "avatar": ""
  },
  "categories": [
    "Content Creation",
    "Ticket Management"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 119,
  "downloads": 11,
  "createdAt": "2025-09-20T23:53:10.720Z",
  "updatedAt": "2026-01-16T08:57:40.460Z",
  "publishedAt": "2025-09-20T23:53:10.720Z",
  "nodes": 45,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8789",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Lightweight support desk with Telegram and Postgres database tracking",
    "workflowName": "Lightweight support desk with Telegram and Postgres database tracking",
    "description": "## Telegram ticket intake and status tracking with Postgres\n\n### Who’s it for\nAnyone running support requests through Telegram, Email, Webhooks, and so on who needs a lightweight ticketing system without paying Zendesk prices. Ideal for small teams, freelancers, or businesses that want tickets logged in a structured database (Postgres) and tracked automatically. I'm using Telegram since it's the most convenient one.\n\n### How it works / What it does\nThis workflow turns (Telegram) into a support desk:\n1. **Receives new requests** via a Telegram bot command.  \n2. **Creates a ticket** in a Postgres database with a correlation ID, requester details, and status.  \n3. **Auto-confirms back to the requester** with the ticket ID.  \n4. **Provides ticket updates** (status changes, resolutions) when queried.  \n5. **Keeps data clean** using dedupe keys and controlled input handling.  \n\n### How to set up\n1. Create a Telegram bot using [@BotFather](https://core.telegram.org/bots#botfather) and grab the token.  \n2. Connect your Postgres database to n8n and create a `tickets` table:  \n\n```sql\nCREATE TABLE tickets (\n  id BIGSERIAL PRIMARY KEY,\n  correlation_id UUID,\n  source TEXT,\n  external_id TEXT,\n  requester_name TEXT,\n  requester_email TEXT,\n  requester_phone TEXT,\n  subject TEXT,\n  description TEXT,\n  status TEXT,\n  priority TEXT,\n  dedupe_key TEXT,\n  chat_id TEXT,\n  created_at TIMESTAMP DEFAULT NOW(),\n  updated_at TIMESTAMP DEFAULT NOW()\n);\n```\n\n3. Add your Telegram and Postgres credentials in n8n (via the **Credentials** tab, not hardcoded).  \n4. Import the workflow JSON and replace the placeholder credentials with yours.  \n5. Test by sending `/new` in Telegram and follow the prompts.\n\n### Requirements\n- n8n (latest version recommended)  \n- Telegram bot token  \n- Postgres instance (local, Docker, or cloud)  \n\n### How to customize the workflow\n- Change database fields if you need more requester info.  \n- Tweak the **Switch node** and **Comands** for multiple status types.  \n- Extend with Slack, Discord, or email nodes for broader notifications.  \n- Integrate with external systems (CRM, project management) by adding more branches.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "01 Telegram Trigger: Intake + Status",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "02 Switch: Route by Command",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "03a FN: Normalize + Hash",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "04a DB: Upsert Ticket",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "05a Telegram Ack",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "03b FN: Parse Status Command",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "04b DB: Get Ticket Status",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "05b Telegram: Status Reply",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "03b1 IF: Has Correlation ID",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "05b Telegram: Status Reply (Error)",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Telegram: Invalid Command",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "03c FN: Parse Update Command",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "03c1 IF: Has Correlation ID",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Send a text message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "03c2 IF: Valid Status",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "05c Telegram: Invalid Status",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "04c DB: Update Ticket Status",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "03c0 IF: Is Operator",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "05c0 Telegram: Unauthorized Update Attempt",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "04c1 DB: Get Ticket Owner",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "04b1 IF: Ticket Belongs To User",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "05b1 Telegram: Unauthorized Status Check",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "04c1a IF: Resolved or In Progress",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "05c1a Telegram: Notify Resolved",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "05c1b Telegram: Notify In Progress",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "05c Telegram: Update Confirmation",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "04b0 IF: DB Lookup Failed?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "05b0 Telegram: Status DB Error",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "05c0 IF: Operator Reply Failed?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Telegram: Admin Alert — Operator Reply Failed",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Notify Failed?",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Execute a SQL query",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "04c2 DB: Insert Audit Row",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "04b1 IF: No Ticket Found",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Send a text message1",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "03b IF: Has Valid Correlation ID Format",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Send a text message2",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Welcome Message",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Send a text message3",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Check Admin",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "DB: List Tickets",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Send a text message4",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Code in JavaScript",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}