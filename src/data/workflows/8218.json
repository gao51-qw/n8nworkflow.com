{
  "id": 8218,
  "slug": "8218",
  "title": "Web research assistant: automated search & scraping with Gemini AI and spreadsheet reports",
  "description": "**⚠️ IMPORTANT:** This template requires self-hosted n8n hosting due to the use of community nodes (MCP tools). It will not work on n8n Cloud. Make sure you have access to a self-hosted n8n instance before using this template.\n\n## Overview \n\n![Screenshot 20250905 103811.png](fileId:2317)\n\nThis workflow automation allows a **Google Gemini-powered AI Agent** to orchestrate multi-source web intelligence using **MCP (Model Context Protocol) tools** such as Firecrawl, Brave Search, and Apify.\n\nThe system allows users to interact with the agent in natural language, which then leverages various external data collection tools, processes the results, and automatically organizes them into structured spreadsheets.\n\nWith built-in memory, flexible tool execution, and conversational capabilities, this workflow acts as a **multi-agent research assistant**, capable of retrieving, synthesizing, and delivering actionable insights in real time.\n\n## How the system works\n\n### AI Agent + MCP Pipeline\n\n1. **User Interaction**\n   A chat message is received and forwarded to the AI Agent.\n\n2. **AI Orchestration**\n   The agent, powered by **Google Gemini**, decides which MCP tools to invoke based on the query.\n\n   * **Firecrawl-MCP**: Recursive web crawling and content extraction.\n   * **Brave-MCP**: Real-time web search with structured results.\n   * **Apify-MCP**: Automation of web scraping tasks with scalable execution.\n\n3. **Memory Management**\n   A memory module stores context across conversations, ensuring multi-turn reasoning and task continuity.\n\n4. **Spreadsheet automation**\n   Results are structured in a new, automatically created Google Spreadsheet, enriched with formatting and additional metadata.\n\n5. **Data processing**\n   The workflow generates the spreadsheet content, updates the sheet, and improves results via HTTP requests and field edits.\n\n6. **Delivery of results**\n   Users receive a structured and contextualized dataset ready for review, analysis, or integration into other systems.\n\n## Configuration instructions\n\n**Estimated setup time:** 45 minutes\n\n### Prerequisites\n\n* Self-hosted n8n instance (v0.200.0 or higher recommended)\n* Google Gemini API key\n* MCP-compatible nodes (Firecrawl, Brave, Apify) configured\n* Google Sheets credentials for spreadsheet automation\n\n## Detailed configuration steps\n\n### Step 1: Configuring the AI Agent\n\n* **AI Agent node**: \n  - Select **Google Gemini** as the LLM model\n  - Configure your Google Gemini API key in the n8n credentials\n  - Set the system prompt to guide the agent's behavior\n  - Connect the **Simple Memory** node to enable context tracking\n\n### Step 2: Integrating MCP Tools\n\n* **Firecrawl-MCP Configuration**:\n  - Install the `@n8n/n8n-nodes-firecrawl-mcp` package\n  - Configure your Firecrawl API key\n  - Set crawling parameters (depth, CSS selectors)\n\n* **Brave-MCP configuration**:\n  - Install the `@n8n/n8n-nodes-brave-mcp` package\n  - Add your Brave Search API key\n  - Configure search filters (region, language, SafeSearch)\n\n* **Apify-MCP configuration**:\n  - Install the `@n8n/n8n-nodes-apify-mcp` package\n  - Configure your Apify credentials\n  - Select the appropriate actors for your use cases\n\n### Step 3: Spreadsheet automation\n\n* **“Create Spreadsheet” node**:\n  - Configure Google Sheets authentication (OAuth2 or Service Account)\n  - Set the file name with dynamic timestamps\n  - Specify the destination folder in Google Drive\n\n* **“Generate Spreadsheet Content” node**:\n  - Transform the agent's outputs into tabular format\n  - Define the columns: URL, Title, Description, Source, Timestamp\n  - Configure data formatting (dates, links, metadata)\n\n* **“Update Spreadsheet” node**:\n  - Insert the data into the created sheet\n  - Apply automatic formatting (headers, colors, column widths)\n  - Add summary formulas if necessary\n\n### Step 4: Post-processing and delivery\n\n* **“Data Enrichment Request” node** (formerly “HTTP Request1”):\n  - Configure optional API calls to enrich the data\n  - Add additional metadata (geolocation, sentiment, categorization)\n  - Manage errors and timeouts\n\n* **“Edit Fields” node**:\n  - Refine the final dataset (metadata, tags, filters)\n  - Clean and normalize the data\n  - Prepare the final response for the user\n## Structure of generated Google Sheets\n\n### Default columns\n| Column | Description | Type |\n|---------|-------------|------|\n| **URL** | Data source URL | Hyperlink |\n| **Title** | Page/resource title | Text |\n| **Description** | Description or content excerpt | Long text |\n| **Source** | MCP tool used (Brave/Firecrawl/Apify) | Text |\n| **Timestamp** | Date/time of collection | Date/Time |\n| **Metadata** | Additional data (JSON) | Text |\n\n### Automatic formatting\n* **Headings**: Bold font, colored background\n* **URLs**: Formatted as clickable links\n* **Dates**: Standardized ISO 8601 format\n* **Columns**: Width automatically adjusted to content\n\n## Use cases\n\n### Business and enterprise\n* Competitive analysis combining search, crawling, and structured scraping\n* Market trend research with multi-source aggregation\n* Automated reporting pipelines for business intelligence\n\n### Research and academia\n* Literature discovery across multiple sources\n* Data collection for research projects\n* Automated bibliographic extraction from online sources\n\n### Engineering and development\n* Discovery of APIs and documentation\n* Aggregation of product information from multiple platforms\n* Scalable structured scraping for datasets\n\n### Personal productivity\n* Automated creation of newsletters or knowledge hubs\n* Personal research assistant compiling spreadsheets from various online data\n\n## Key features\n\n### Multi-source intelligence\n* Firecrawl for deep crawling\n* Brave for real-time search\n* Apify for structured web scraping\n\n### AI-driven orchestration\n* Google Gemini for reasoning and tool selection\n* Memory for multi-turn interactions\n* Context-based adaptive workflows\n\n### Structured data output\n* Automatic spreadsheet creation\n* Data enrichment and formatting\n* Ready-to-use datasets for reporting\n\n### Performance and scalability\n* Handles multiple simultaneous tool calls\n* Scalable web data extraction\n* Real-time aggregation from multiple MCPs\n\n### Security and privacy\n* Secure authentication based on API keys\n* Data managed in Google Sheets / n8n\n* Configurable retention and deletion policies\n\n## Technical architecture\n\n### Workflow\nUser query → AI agent (Gemini) → MCP tools (Firecrawl / Brave / Apify) → Aggregated results → Spreadsheet creation → Data processing → Results delivery\n\n## Supported data types\n\n* **Text and metadata** from crawled web pages\n* **Search results** from Brave queries\n* **Structured data** from Apify scrapers\n* **Tabular reports** via Google Sheets\n\n## Integration options\n\n### Chat interfaces\n* Web widget for conversational queries\n* Slack/Teams chatbot integration\n* REST API access points\n\n### Data sources\n* Websites (via Firecrawl/Apify)\n* Search engines (via Brave)\n* APIs (via HTTP Request enrichment)\n\n## Performance specifications\n\n* Query response: &lt; 5 seconds (search tasks)\n* Crawl capacity: Thousands of pages per run\n* Spreadsheet automation: Real-time creation and updates\n* Accuracy: &gt; 90% when using combined sources\n\n## Advanced configuration options\n\n### Customization\n* Set custom prompts for the AI Agent\n* Adjust the spreadsheet schema for reporting needs\n* Configure retries for failed tool runs\n\n### Analytics and monitoring\n* Track tool usage and costs\n* Monitor crawl and search success rates\n* Log queries and outputs for auditing\n\n### Troubleshooting and support\n* **Timeouts:** Manually re-run failed MCP executions\n* **Data gaps:** Validate Firecrawl/Apify selectors\n* **Spreadsheet errors:** Check Google Sheets API quotas\n\n",
  "featuredImage": "/data/workflows/8218/8218.webp",
  "author": {
    "id": 101,
    "slug": "franck-f",
    "name": "franck fambou",
    "avatar": ""
  },
  "categories": [
    "Market Research",
    "AI Chatbot"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 999,
  "downloads": 99,
  "createdAt": "2025-09-03T12:51:06.550Z",
  "updatedAt": "2026-01-16T08:54:43.879Z",
  "publishedAt": "2025-09-03T12:51:06.550Z",
  "nodes": 23,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/8218",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Web research assistant: automated search & scraping with Gemini AI and spreadsheet reports",
    "workflowName": "Web research assistant: automated search & scraping with Gemini AI and spreadsheet reports",
    "description": "**⚠️ IMPORTANT:** This template requires self-hosted n8n hosting due to the use of community nodes (MCP tools). It will not work on n8n Cloud. Make sure you have access to a self-hosted n8n instance before using this template.\n\n## Overview \n\n![Screenshot 20250905 103811.png](fileId:2317)\n\nThis workflow automation allows a **Google Gemini-powered AI Agent** to orchestrate multi-source web intelligence using **MCP (Model Context Protocol) tools** such as Firecrawl, Brave Search, and Apify.\n\nThe system allows users to interact with the agent in natural language, which then leverages various external data collection tools, processes the results, and automatically organizes them into structured spreadsheets.\n\nWith built-in memory, flexible tool execution, and conversational capabilities, this workflow acts as a **multi-agent research assistant**, capable of retrieving, synthesizing, and delivering actionable insights in real time.\n\n## How the system works\n\n### AI Agent + MCP Pipeline\n\n1. **User Interaction**\n   A chat message is received and forwarded to the AI Agent.\n\n2. **AI Orchestration**\n   The agent, powered by **Google Gemini**, decides which MCP tools to invoke based on the query.\n\n   * **Firecrawl-MCP**: Recursive web crawling and content extraction.\n   * **Brave-MCP**: Real-time web search with structured results.\n   * **Apify-MCP**: Automation of web scraping tasks with scalable execution.\n\n3. **Memory Management**\n   A memory module stores context across conversations, ensuring multi-turn reasoning and task continuity.\n\n4. **Spreadsheet automation**\n   Results are structured in a new, automatically created Google Spreadsheet, enriched with formatting and additional metadata.\n\n5. **Data processing**\n   The workflow generates the spreadsheet content, updates the sheet, and improves results via HTTP requests and field edits.\n\n6. **Delivery of results**\n   Users receive a structured and contextualized dataset ready for review, analysis, or integration into other systems.\n\n## Configuration instructions\n\n**Estimated setup time:** 45 minutes\n\n### Prerequisites\n\n* Self-hosted n8n instance (v0.200.0 or higher recommended)\n* Google Gemini API key\n* MCP-compatible nodes (Firecrawl, Brave, Apify) configured\n* Google Sheets credentials for spreadsheet automation\n\n## Detailed configuration steps\n\n### Step 1: Configuring the AI Agent\n\n* **AI Agent node**: \n  - Select **Google Gemini** as the LLM model\n  - Configure your Google Gemini API key in the n8n credentials\n  - Set the system prompt to guide the agent's behavior\n  - Connect the **Simple Memory** node to enable context tracking\n\n### Step 2: Integrating MCP Tools\n\n* **Firecrawl-MCP Configuration**:\n  - Install the `@n8n/n8n-nodes-firecrawl-mcp` package\n  - Configure your Firecrawl API key\n  - Set crawling parameters (depth, CSS selectors)\n\n* **Brave-MCP configuration**:\n  - Install the `@n8n/n8n-nodes-brave-mcp` package\n  - Add your Brave Search API key\n  - Configure search filters (region, language, SafeSearch)\n\n* **Apify-MCP configuration**:\n  - Install the `@n8n/n8n-nodes-apify-mcp` package\n  - Configure your Apify credentials\n  - Select the appropriate actors for your use cases\n\n### Step 3: Spreadsheet automation\n\n* **“Create Spreadsheet” node**:\n  - Configure Google Sheets authentication (OAuth2 or Service Account)\n  - Set the file name with dynamic timestamps\n  - Specify the destination folder in Google Drive\n\n* **“Generate Spreadsheet Content” node**:\n  - Transform the agent's outputs into tabular format\n  - Define the columns: URL, Title, Description, Source, Timestamp\n  - Configure data formatting (dates, links, metadata)\n\n* **“Update Spreadsheet” node**:\n  - Insert the data into the created sheet\n  - Apply automatic formatting (headers, colors, column widths)\n  - Add summary formulas if necessary\n\n### Step 4: Post-processing and delivery\n\n* **“Data Enrichment Request” node** (formerly “HTTP Request1”):\n  - Configure optional API calls to enrich the data\n  - Add additional metadata (geolocation, sentiment, categorization)\n  - Manage errors and timeouts\n\n* **“Edit Fields” node**:\n  - Refine the final dataset (metadata, tags, filters)\n  - Clean and normalize the data\n  - Prepare the final response for the user\n## Structure of generated Google Sheets\n\n### Default columns\n| Column | Description | Type |\n|---------|-------------|------|\n| **URL** | Data source URL | Hyperlink |\n| **Title** | Page/resource title | Text |\n| **Description** | Description or content excerpt | Long text |\n| **Source** | MCP tool used (Brave/Firecrawl/Apify) | Text |\n| **Timestamp** | Date/time of collection | Date/Time |\n| **Metadata** | Additional data (JSON) | Text |\n\n### Automatic formatting\n* **Headings**: Bold font, colored background\n* **URLs**: Formatted as clickable links\n* **Dates**: Standardized ISO 8601 format\n* **Columns**: Width automatically adjusted to content\n\n## Use cases\n\n### Business and enterprise\n* Competitive analysis combining search, crawling, and structured scraping\n* Market trend research with multi-source aggregation\n* Automated reporting pipelines for business intelligence\n\n### Research and academia\n* Literature discovery across multiple sources\n* Data collection for research projects\n* Automated bibliographic extraction from online sources\n\n### Engineering and development\n* Discovery of APIs and documentation\n* Aggregation of product information from multiple platforms\n* Scalable structured scraping for datasets\n\n### Personal productivity\n* Automated creation of newsletters or knowledge hubs\n* Personal research assistant compiling spreadsheets from various online data\n\n## Key features\n\n### Multi-source intelligence\n* Firecrawl for deep crawling\n* Brave for real-time search\n* Apify for structured web scraping\n\n### AI-driven orchestration\n* Google Gemini for reasoning and tool selection\n* Memory for multi-turn interactions\n* Context-based adaptive workflows\n\n### Structured data output\n* Automatic spreadsheet creation\n* Data enrichment and formatting\n* Ready-to-use datasets for reporting\n\n### Performance and scalability\n* Handles multiple simultaneous tool calls\n* Scalable web data extraction\n* Real-time aggregation from multiple MCPs\n\n### Security and privacy\n* Secure authentication based on API keys\n* Data managed in Google Sheets / n8n\n* Configurable retention and deletion policies\n\n## Technical architecture\n\n### Workflow\nUser query → AI agent (Gemini) → MCP tools (Firecrawl / Brave / Apify) → Aggregated results → Spreadsheet creation → Data processing → Results delivery\n\n## Supported data types\n\n* **Text and metadata** from crawled web pages\n* **Search results** from Brave queries\n* **Structured data** from Apify scrapers\n* **Tabular reports** via Google Sheets\n\n## Integration options\n\n### Chat interfaces\n* Web widget for conversational queries\n* Slack/Teams chatbot integration\n* REST API access points\n\n### Data sources\n* Websites (via Firecrawl/Apify)\n* Search engines (via Brave)\n* APIs (via HTTP Request enrichment)\n\n## Performance specifications\n\n* Query response: &lt; 5 seconds (search tasks)\n* Crawl capacity: Thousands of pages per run\n* Spreadsheet automation: Real-time creation and updates\n* Accuracy: &gt; 90% when using combined sources\n\n## Advanced configuration options\n\n### Customization\n* Set custom prompts for the AI Agent\n* Adjust the spreadsheet schema for reporting needs\n* Configure retries for failed tool runs\n\n### Analytics and monitoring\n* Track tool usage and costs\n* Monitor crawl and search success rates\n* Log queries and outputs for auditing\n\n### Troubleshooting and support\n* **Timeouts:** Manually re-run failed MCP executions\n* **Data gaps:** Validate Firecrawl/Apify selectors\n* **Spreadsheet errors:** Check Google Sheets API quotas",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Firecrawl list",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Firecrawl execute",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Brave list",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Brave execute",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Apify list",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Apify execute",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "role": "mcpClientTool",
      "configDescription": "Version 1"
    },
    {
      "name": "Data Enrichment Request",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Gemini Research Orchestrator",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Create Research Report",
      "type": "n8n-nodes-base.googleSheets",
      "role": "googleSheets",
      "configDescription": "Version 4.7"
    },
    {
      "name": "Format Research Data",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "Populate Research Report",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Finalize Output Data",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}