{
  "id": 7882,
  "slug": "7882",
  "title": "Process documents & build semantic search with OpenAI, Gemini & Qdrant",
  "description": "## üéØ Overview\n\nThis n8n workflow automates the process of ingesting documents from multiple sources (Google Drive and web forms) into a Qdrant vector database for semantic search capabilities. It handles batch processing, document analysis, embedding generation, and vector storage - all while maintaining proper error handling and execution tracking.\n\n## üöÄ Key Features\n\n- **Dual Input Sources**: Accepts files from both Google Drive folders and web form uploads\n- **Batch Processing**: Processes files one at a time to prevent memory issues and ensure reliability\n- **AI-Powered Analysis**: Uses Google Gemini to extract metadata and understand document context\n- **Vector Embeddings**: Generates OpenAI embeddings for semantic search capabilities\n- **Automated Cleanup**: Optionally deletes processed files from Google Drive (configurable)\n- **Loop Processing**: Handles multiple files efficiently with Split In Batches nodes\n- **Interactive Chat Interface**: Built-in chatbot for testing semantic search queries against indexed documents\n\n## üìã Use Cases\n\n- **Knowledge Base Creation**: Build searchable document repositories for organizations\n- **Document Compliance**: Process and index legal/regulatory documents (like Fair Work documents)\n- **Content Management**: Automatically categorize and store uploaded documents\n- **Research Libraries**: Create semantic search capabilities for research papers or reports\n- **Customer Support**: Enable instant answers to policy and documentation questions via chat interface\n\n## üîß Workflow Components\n\n### Input Methods\n\n1. **Google Drive Integration**\n   - Monitors a specific folder for new files\n   - Processes existing files in batch mode\n   - Supports automatic file conversion to PDF\n\n2. **Web Form Upload**\n   - Public-facing form for document submission\n   - Accepts PDF, DOCX, DOC, and CSV files\n   - Processes multiple file uploads in a single submission\n\n### Processing Pipeline\n\n1. **File Splitting**: Separates multiple uploads into individual items\n2. **Document Analysis**: Google Gemini extracts document understanding\n3. **Text Extraction**: Converts documents to plain text\n4. **Embedding Generation**: Creates vector embeddings via OpenAI\n5. **Vector Storage**: Inserts documents with embeddings into Qdrant\n6. **Loop Control**: Manages batch processing with proper state handling\n\n### Key Nodes\n\n- **Split In Batches**: Processes files one at a time with `reset: false` to maintain state\n- **Google Gemini**: Analyzes documents for context and metadata\n- **Langchain Vector Store**: Handles Qdrant insertion with embeddings\n- **HTTP Request**: Direct API calls for custom operations\n- **Chat Interface**: Interactive chatbot for testing vector search queries\n\n## üõ†Ô∏è Technical Implementation\n\n### Batch Processing Logic\n\nThe workflow uses a clever looping mechanism:\n- `Split In Batches` with `batchSize: 1` ensures single-file processing\n- `reset: false` maintains loop state across iterations\n- Loop continues until all files are processed\n\n### Error Handling\n\n- All nodes include `continueOnFail` options where appropriate\n- Execution logs are preserved for debugging\n- File deletion only occurs after successful insertion\n\n### Data Flow\n\n```\nForm Upload ‚Üí Split Files ‚Üí Batch Loop ‚Üí Analyze ‚Üí Insert ‚Üí Loop Back\nGoogle Drive ‚Üí List Files ‚Üí Batch Loop ‚Üí Download ‚Üí Analyze ‚Üí Insert ‚Üí Delete ‚Üí Loop Back\n```\n\n## üìä Performance Considerations\n\n- **Processing Time**: ~20-30 seconds per file\n- **Batch Size**: Set to 1 for reliability (configurable)\n- **Memory Usage**: Optimized for files under 10MB\n- **API Costs**: Uses OpenAI embeddings (text-embedding-3-large model)\n\n## üîê Required Credentials\n\n1. **Google Drive OAuth2**: For file access and management\n2. **OpenAI API**: For embedding generation\n3. **Qdrant API**: For vector database operations\n4. **Google Gemini API**: For document analysis\n\n## üí° Implementation Tips\n\n1. **Start Small**: Test with a few files before processing large batches\n2. **Monitor Costs**: Track OpenAI API usage for embedding generation\n3. **Backup First**: Consider archiving instead of deleting processed files\n4. **Check Collections**: Ensure Qdrant collection exists before running\n\n## üé® Customization Options\n\n- **Change Embedding Model**: Switch to `text-embedding-3-small` for cost savings\n- **Adjust Chunk Size**: Modify text splitting parameters for different document types\n- **Add Metadata**: Extend the Gemini prompt to extract specific fields\n- **Archive vs Delete**: Replace delete operation with move to \"processed\" folder\n\n## üìà Real-World Application\n\nThis workflow was developed to process business documents and legal agreements, making them searchable through semantic queries. It's particularly useful for organizations dealing with large volumes of regulatory documentation that need to be quickly accessible and searchable.\n\n### Chat Interface Testing\n\nThe integrated chatbot interface allows users to:\n- Query processed documents using natural language\n- Test semantic search capabilities in real-time\n- Verify document indexing and retrieval accuracy\n- Ask questions about specific topics (e.g., \"What are the pay rates for junior employees?\")\n- Get instant AI-powered responses based on the indexed content\n\n## üåü Benefits\n\n- **Automation**: Eliminates manual document processing\n- **Scalability**: Handles individual files or bulk uploads\n- **Intelligence**: AI-powered understanding of document content\n- **Flexibility**: Multiple input sources and processing options\n- **Reliability**: Robust error handling and state management\n\n## üë®‚Äçüíª About the Creator\n\n**Jeremy Dawes** is the CEO of [Jezweb](https://www.jezweb.com.au), specializing in AI and automation deployment solutions. This workflow represents practical, production-ready automation that solves real business challenges while maintaining simplicity and reliability.\n\n## üìù Notes\n\n- The workflow intelligently handles the n8n form upload pattern where multiple files create a single item with multiple binary properties (Files_0, Files_1, etc.)\n- The Split In Batches pattern with `reset: false` is crucial for proper loop execution\n- Direct API integration provides more control than pure Langchain implementations\n\n## üîó Resources\n\n- [Qdrant Documentation](https://qdrant.tech/documentation/)\n- [OpenAI Embeddings](https://platform.openai.com/docs/guides/embeddings)\n- [n8n Documentation](https://docs.n8n.io/)\n- [Jezweb](https://www.jezweb.com.au) - AI & Automation Solutions\n\n---\n\n*This workflow demonstrates practical automation that bridges document management with modern AI capabilities, creating intelligent document processing systems that scale with your needs.*",
  "featuredImage": "/data/workflows/7882/7882.webp",
  "author": {
    "id": 101,
    "slug": "jez",
    "name": "Jez",
    "avatar": ""
  },
  "categories": [
    "AI RAG",
    "Multimodal AI"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 856,
  "downloads": 85,
  "createdAt": "2025-08-26T06:39:37.815Z",
  "updatedAt": "2026-01-16T08:52:50.055Z",
  "publishedAt": "2025-08-26T06:39:37.815Z",
  "nodes": 35,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/7882",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Process documents & build semantic search with OpenAI, Gemini & Qdrant",
    "workflowName": "Process documents & build semantic search with OpenAI, Gemini & Qdrant",
    "description": "This n8n workflow automates the process of ingesting documents from multiple sources (Google Drive and web forms) into a Qdrant vector database for semantic search capabilities. It handles batch processing, document analysis, embedding generation, and vector storage - all while maintaining proper error handling and execution tracking.\n\n## üöÄ Key Features\n\n- **Dual Input Sources**: Accepts files from both Google Drive folders and web form uploads\n- **Batch Processing**: Processes files one at a time to prevent memory issues and ensure reliability\n- **AI-Powered Analysis**: Uses Google Gemini to extract metadata and understand document context\n- **Vector Embeddings**: Generates OpenAI embeddings for semantic search capabilities\n- **Automated Cleanup**: Optionally deletes processed files from Google Drive (configurable)\n- **Loop Processing**: Handles multiple files efficiently with Split In Batches nodes\n- **Interactive Chat Interface**: Built-in chatbot for testing semantic search queries against indexed documents\n\n## üìã Use Cases\n\n- **Knowledge Base Creation**: Build searchable document repositories for organizations\n- **Document Compliance**: Process and index legal/regulatory documents (like Fair Work documents)\n- **Content Management**: Automatically categorize and store uploaded documents\n- **Research Libraries**: Create semantic search capabilities for research papers or reports\n- **Customer Support**: Enable instant answers to policy and documentation questions via chat interface\n\n## üîß Workflow Components\n\n### Input Methods\n\n1. **Google Drive Integration**\n   - Monitors a specific folder for new files\n   - Processes existing files in batch mode\n   - Supports automatic file conversion to PDF\n\n2. **Web Form Upload**\n   - Public-facing form for document submission\n   - Accepts PDF, DOCX, DOC, and CSV files\n   - Processes multiple file uploads in a single submission\n\n### Processing Pipeline\n\n1. **File Splitting**: Separates multiple uploads into individual items\n2. **Document Analysis**: Google Gemini extracts document understanding\n3. **Text Extraction**: Converts documents to plain text\n4. **Embedding Generation**: Creates vector embeddings via OpenAI\n5. **Vector Storage**: Inserts documents with embeddings into Qdrant\n6. **Loop Control**: Manages batch processing with proper state handling\n\n### Key Nodes\n\n- **Split In Batches**: Processes files one at a time with `reset: false` to maintain state\n- **Google Gemini**: Analyzes documents for context and metadata\n- **Langchain Vector Store**: Handles Qdrant insertion with embeddings\n- **HTTP Request**: Direct API calls for custom operations\n- **Chat Interface**: Interactive chatbot for testing vector search queries\n\n## üõ†Ô∏è Technical Implementation\n\n### Batch Processing Logic\n\nThe workflow uses a clever looping mechanism:\n- `Split In Batches` with `batchSize: 1` ensures single-file processing\n- `reset: false` maintains loop state across iterations\n- Loop continues until all files are processed\n\n### Error Handling\n\n- All nodes include `continueOnFail` options where appropriate\n- Execution logs are preserved for debugging\n- File deletion only occurs after successful insertion\n\n### Data Flow\n\n```\nForm Upload ‚Üí Split Files ‚Üí Batch Loop ‚Üí Analyze ‚Üí Insert ‚Üí Loop Back\nGoogle Drive ‚Üí List Files ‚Üí Batch Loop ‚Üí Download ‚Üí Analyze ‚Üí Insert ‚Üí Delete ‚Üí Loop Back\n```\n\n## üìä Performance Considerations\n\n- **Processing Time**: ~20-30 seconds per file\n- **Batch Size**: Set to 1 for reliability (configurable)\n- **Memory Usage**: Optimized for files under 10MB\n- **API Costs**: Uses OpenAI embeddings (text-embedding-3-large model)\n\n## üîê Required Credentials\n\n1. **Google Drive OAuth2**: For file access and management\n2. **OpenAI API**: For embedding generation\n3. **Qdrant API**: For vector database operations\n4. **Google Gemini API**: For document analysis\n\n## üí° Implementation Tips\n\n1. **Start Small**: Test with a few files before processing large batches\n2. **Monitor Costs**: Track OpenAI API usage for embedding generation\n3. **Backup First**: Consider archiving instead of deleting processed files\n4. **Check Collections**: Ensure Qdrant collection exists before running\n\n## üé® Customization Options\n\n- **Change Embedding Model**: Switch to `text-embedding-3-small` for cost savings\n- **Adjust Chunk Size**: Modify text splitting parameters for different document types\n- **Add Metadata**: Extend the Gemini prompt to extract specific fields\n- **Archive vs Delete**: Replace delete operation with move to \"processed\" folder\n\n## üìà Real-World Application\n\nThis workflow was developed to process business documents and legal agreements, making them searchable through semantic queries. It's particularly useful for organizations dealing with large volumes of regulatory documentation that need to be quickly accessible and searchable.\n\n### Chat Interface Testing\n\nThe integrated chatbot interface allows users to:\n- Query processed documents using natural language\n- Test semantic search capabilities in real-time\n- Verify document indexing and retrieval accuracy\n- Ask questions about specific topics (e.g., \"What are the pay rates for junior employees?\")\n- Get instant AI-powered responses based on the indexed content\n\n## üåü Benefits\n\n- **Automation**: Eliminates manual document processing\n- **Scalability**: Handles individual files or bulk uploads\n- **Intelligence**: AI-powered understanding of document content\n- **Flexibility**: Multiple input sources and processing options\n- **Reliability**: Robust error handling and state management\n\n## üë®‚Äçüíª About the Creator\n\n**Jeremy Dawes** is the CEO of [Jezweb](https://www.jezweb.com.au), specializing in AI and automation deployment solutions. This workflow represents practical, production-ready automation that solves real business challenges while maintaining simplicity and reliability.\n\n## üìù Notes\n\n- The workflow intelligently handles the n8n form upload pattern where multiple files create a single item with multiple binary properties (Files_0, Files_1, etc.)\n- The Split In Batches pattern with `reset: false` is crucial for proper loop execution\n- Direct API integration provides more control than pure Langchain implementations\n\n## üîó Resources\n\n- [Qdrant Documentation](https://qdrant.tech/documentation/)\n- [OpenAI Embeddings](https://platform.openai.com/docs/guides/embeddings)\n- [n8n Documentation](https://docs.n8n.io/)\n- [Jezweb](https://www.jezweb.com.au) - AI & Automation Solutions\n\n---\n\n*This workflow demonstrates practical automation that bridges document management with modern AI capabilities, creating intelligent document processing systems that scale with your needs.*",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Download File",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "Insert to Qdrant",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Delete File",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "üîµ Workflow Overview",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü° Trigger Configuration",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü¢ Batch Processing Logic",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üî¥ DELETE WARNING",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü¢ Document Pipeline",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü° Setup Requirements",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü£ Performance Tips",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü† Troubleshooting",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü£ Alternative Approaches",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "üü° Setup Requirements1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Insert to Qdrant1",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Embeddings OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Data Loader for Google Drive Files",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Data Loader for Form Files",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "role": "documentDefaultDataLoader",
      "configDescription": "Version 1.1"
    },
    {
      "name": "File Upload Form",
      "type": "n8n-nodes-base.formTrigger",
      "role": "formTrigger",
      "configDescription": "Version 2.2"
    },
    {
      "name": "üü¢ Batch Processing Logic1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Recursive Character Text Splitter 1",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Recursive Character Text Splitter 2",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "role": "textSplitterRecursiveCharacterTextSplitter",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Form Batches",
      "type": "n8n-nodes-base.splitInBatches",
      "role": "splitInBatches",
      "configDescription": "Version 3"
    },
    {
      "name": "List Files in Google Drive Folder",
      "type": "n8n-nodes-base.googleDrive",
      "role": "googleDrive",
      "configDescription": "Version 3"
    },
    {
      "name": "New File In Google Drive Folder",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "role": "googleDriveTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Split Form Files",
      "type": "n8n-nodes-base.code",
      "role": "code",
      "configDescription": "Version 2"
    },
    {
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "role": "chatTrigger",
      "configDescription": "Version 1.3"
    },
    {
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Qdrant Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "role": "vectorStoreQdrant",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Embeddings OpenAI2",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "role": "embeddingsOpenAi",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "role": "lmChatGoogleGemini",
      "configDescription": "Version 1"
    },
    {
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "role": "memoryBufferWindow",
      "configDescription": "Version 1.3"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Manually Trigger Workflow",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.2"
    }
  ]
}