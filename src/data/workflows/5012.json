{
  "id": 5012,
  "slug": "5012",
  "title": "Natural language database queries with dual-agent AI & PostgreSQL integration",
  "description": "\n**AI Database Assistant with Smart Query's & PostgreSQL Integration**\n\n# Description:\n\nğŸš€ **Transform Your Database into an Intelligent AI Assistant**\n\nThis workflow creates a **smart database assistant** that safely handles natural language queries without crashing your system. Features dual-agent architecture with built-in query limits and PostgreSQL optimization â€“ perfect for commercial applications!\n\nâœ… **Ideal for:**\n* SaaS developers building database search features ğŸ”\n* Database administrators providing safe AI access ğŸ›¡ï¸\n* Business teams needing user-friendly data queries ğŸ“Š\n* Anyone wanting ChatGPT-like database interaction ğŸ¤–\n\n## ğŸ”§ How It Works\n1ï¸âƒ£ **User asks a question** â€“ \"Show me top 10 popular products\"\n2ï¸âƒ£ **Main AI Agent** â€“ Interprets the request and ensures safety limits\n3ï¸âƒ£ **SQL Sub-Agent** â€“ Generates precise PostgreSQL queries\n4ï¸âƒ£ **Database executes** â€“ Returns formatted, limited results safely\n\n## âš¡ Setup Instructions\n\n### 1ï¸âƒ£ Prepare Your Database\n* Ensure **PostgreSQL** is accessible from n8n\n* Note your table structure and column names\n* Set up database connection credentials\n\n### 2ï¸âƒ£ Customize the Templates\n* Replace `[YOUR_TABLE_NAME]` with your actual table name\n* Update `[YOUR_FIELDS]` with your column names\n* Modify examples to match your use case\n* **Important**: Keep all LIMIT clauses intact!\n\n### 3ï¸âƒ£ Configure the Agents\n* Copy **Main Agent** system message to your primary AI node\n* Copy **Sub-Agent** system message to your SQL generator node\n* Connect the sub-workflow between both agents\n\n### 4ï¸âƒ£ Test & Deploy\n* Test with sample queries like \"Show me 5 recent items\"\n* Verify query limits work (max 50 results)\n* Deploy and monitor performance\n\n## ğŸ¯ Why Use This Workflow?\nâœ”ï¸ **System Protection** â€“ Built-in limits prevent crashes from large queries\nâœ”ï¸ **Natural Language** â€“ Users ask questions in plain English\nâœ”ï¸ **Commercial Ready** â€“ Generic templates work with any database\nâœ”ï¸ **Dual-Agent Safety** â€“ Smart interpretation + precise SQL generation\nâœ”ï¸ **PostgreSQL Optimized** â€“ Handles complex schemas and data types\n\n## ğŸš¨ Critical Features\n* **Query Limits**: Default 10, maximum 50 results (can be modified)\n* **Error Prevention**: No unlimited data retrieval\n* **Smart Routing**: Natural language â†’ Safe SQL â†’ Formatted results\n* **Customizable**: Works with any PostgreSQL database schema\n\nğŸ”— **Start building your AI database assistant today â€“ safe, smart, and scalable!**",
  "featuredImage": "/data/workflows/5012/5012.webp",
  "author": {
    "id": 101,
    "slug": "diagopl",
    "name": "Paul",
    "avatar": ""
  },
  "categories": [
    "Engineering",
    "AI RAG"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 7504,
  "downloads": 750,
  "createdAt": "2025-06-17T21:17:10.100Z",
  "updatedAt": "2026-01-16T08:37:12.344Z",
  "publishedAt": "2025-06-17T21:17:10.100Z",
  "nodes": 22,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/5012",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Natural language database queries with dual-agent AI & PostgreSQL integration",
    "workflowName": "Natural language database queries with dual-agent AI & PostgreSQL integration",
    "description": "**AI Database Assistant with Smart Query's & PostgreSQL Integration**\n\n# Description:\n\nğŸš€ **Transform Your Database into an Intelligent AI Assistant**\n\nThis workflow creates a **smart database assistant** that safely handles natural language queries without crashing your system. Features dual-agent architecture with built-in query limits and PostgreSQL optimization â€“ perfect for commercial applications!\n\nâœ… **Ideal for:**\n* SaaS developers building database search features ğŸ”\n* Database administrators providing safe AI access ğŸ›¡ï¸\n* Business teams needing user-friendly data queries ğŸ“Š\n* Anyone wanting ChatGPT-like database interaction ğŸ¤–\n\n## ğŸ”§ How It Works\n1ï¸âƒ£ **User asks a question** â€“ \"Show me top 10 popular products\"\n2ï¸âƒ£ **Main AI Agent** â€“ Interprets the request and ensures safety limits\n3ï¸âƒ£ **SQL Sub-Agent** â€“ Generates precise PostgreSQL queries\n4ï¸âƒ£ **Database executes** â€“ Returns formatted, limited results safely\n\n## âš¡ Setup Instructions\n\n### 1ï¸âƒ£ Prepare Your Database\n* Ensure **PostgreSQL** is accessible from n8n\n* Note your table structure and column names\n* Set up database connection credentials\n\n### 2ï¸âƒ£ Customize the Templates\n* Replace `[YOUR_TABLE_NAME]` with your actual table name\n* Update `[YOUR_FIELDS]` with your column names\n* Modify examples to match your use case\n* **Important**: Keep all LIMIT clauses intact!\n\n### 3ï¸âƒ£ Configure the Agents\n* Copy **Main Agent** system message to your primary AI node\n* Copy **Sub-Agent** system message to your SQL generator node\n* Connect the sub-workflow between both agents\n\n### 4ï¸âƒ£ Test & Deploy\n* Test with sample queries like \"Show me 5 recent items\"\n* Verify query limits work (max 50 results)\n* Deploy and monitor performance\n\n## ğŸ¯ Why Use This Workflow?\nâœ”ï¸ **System Protection** â€“ Built-in limits prevent crashes from large queries\nâœ”ï¸ **Natural Language** â€“ Users ask questions in plain English\nâœ”ï¸ **Commercial Ready** â€“ Generic templates work with any database\nâœ”ï¸ **Dual-Agent Safety** â€“ Smart interpretation + precise SQL generation\nâœ”ï¸ **PostgreSQL Optimized** â€“ Handles complex schemas and data types\n\n## ğŸš¨ Critical Features\n* **Query Limits**: Default 10, maximum 50 results (can be modified)\n* **Error Prevention**: No unlimited data retrieval\n* **Smart Routing**: Natural language â†’ Safe SQL â†’ Formatted results\n* **Customizable**: Works with any PostgreSQL database schema\n\nğŸ”— **Start building your AI database assistant today â€“ safe, smart, and scalable!**",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "role": "executeWorkflowTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Query agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "Think",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1"
    },
    {
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "role": "memoryPostgresChat",
      "configDescription": "Version 1.3"
    },
    {
      "name": "OpenRouter Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "role": "lmChatOpenRouter",
      "configDescription": "Version 1"
    },
    {
      "name": "Think1",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "role": "toolThink",
      "configDescription": "Version 1"
    },
    {
      "name": "Download File1",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Transcribe1",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "role": "openAi",
      "configDescription": "Version 1.6"
    },
    {
      "name": "Telegram Trigger1",
      "type": "n8n-nodes-base.telegramTrigger",
      "role": "telegramTrigger",
      "configDescription": "Version 1.1"
    },
    {
      "name": "Voice or Text",
      "type": "n8n-nodes-base.switch",
      "role": "switch",
      "configDescription": "Version 3.2"
    },
    {
      "name": "Text",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Main agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "role": "agent",
      "configDescription": "Version 2"
    },
    {
      "name": "SEND MESSAGE",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "CALL QUERY AGENT",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "role": "toolWorkflow",
      "configDescription": "Version 2.2"
    },
    {
      "name": "ACCES DATABASE WITH DYNAMIC QUERYS",
      "type": "n8n-nodes-base.postgres",
      "role": "postgres",
      "configDescription": "Version 2.6"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    }
  ]
}