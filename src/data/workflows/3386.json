{
  "id": 3386,
  "slug": "3386",
  "title": "Automate docker container updates with Telegram approval system",
  "description": "#### Who is this for?\nThis workflow is for DevOps engineers, system administrators, and Docker users who want to automate the process of checking for updates, verifying them, and applying updates to their Docker-based deployment in a controlled manner.\nFor example, this workflow is used to update the n8n Docker image.\n\n#### What does this workflow do?\n- Fetches the latest Docker image version from GitHub.\n- Compares it with the currently running version on the server.\n- Sends a Telegram message requesting confirmation if an update is available.\n- If confirmed, pulls the latest n8n Docker image, updates the container, and restarts it.\n- Sends a Telegram message confirming the update is completed.\n- Schedules automatic checks, Uses a cron trigger in n8n to check for updates at regular intervals.\n\n\n#### Setup\n- Ensure n8n is installed and running in a Docker container.\n- Create a Telegram bot using BotFather.\n- Set up Telegram credentials. \n- Set up SSH credentials (ensure the SSH user has sudo access).\n- Obtain the bot token and chat ID.\n- Set the Default variable node\n   - telegram-id (You can find it by messaging @get_id_bot).\n   - n8n-container-name (Specify the name of the n8n container.)\n   - working-directory (The directory where your docker-compose.yml is).\n - You can use a manual trigger or a schedule trigger to update (for n8n, I use Cron every 3 days to check for a new version).\n\n#### How to customize this workflow\n- Change the update mechanism: Modify the Docker commands if using a different container runtime or orchestration tool.\n- Modify the confirmation flow: Add extra validation steps, such as checking for breaking changes before updating.\n- Use a different notification method: Replace Telegram with Slack, email, or another notification service.\n\n",
  "featuredImage": "/data/workflows/3386/3386.webp",
  "author": {
    "id": 101,
    "slug": "j4b3r",
    "name": "Jaber Zare",
    "avatar": ""
  },
  "categories": [
    "DevOps"
  ],
  "complexityLevel": "advanced",
  "price": 0,
  "visitors": 3075,
  "downloads": 307,
  "createdAt": "2025-03-31T15:35:34.305Z",
  "updatedAt": "2026-01-16T08:29:28.710Z",
  "publishedAt": "2025-03-31T15:35:34.305Z",
  "nodes": 27,
  "version": "1.0.0",
  "sourceUrl": "https://n8n.io/workflows/3386",
  "disclaimer": "This workflow is provided as-is. Please review and test before using in production.",
  "overview": {
    "title": "Automate docker container updates with Telegram approval system",
    "workflowName": "Automate docker container updates with Telegram approval system",
    "description": "#### Who is this for?\nThis workflow is for DevOps engineers, system administrators, and Docker users who want to automate the process of checking for updates, verifying them, and applying updates to their Docker-based deployment in a controlled manner.\nFor example, this workflow is used to update the n8n Docker image.\n\n#### What does this workflow do?\n- Fetches the latest Docker image version from GitHub.\n- Compares it with the currently running version on the server.\n- Sends a Telegram message requesting confirmation if an update is available.\n- If confirmed, pulls the latest n8n Docker image, updates the container, and restarts it.\n- Sends a Telegram message confirming the update is completed.\n- Schedules automatic checks, Uses a cron trigger in n8n to check for updates at regular intervals.\n\n\n#### Setup\n- Ensure n8n is installed and running in a Docker container.\n- Create a Telegram bot using BotFather.\n- Set up Telegram credentials. \n- Set up SSH credentials (ensure the SSH user has sudo access).\n- Obtain the bot token and chat ID.\n- Set the Default variable node\n   - telegram-id (You can find it by messaging @get_id_bot).\n   - n8n-container-name (Specify the name of the n8n container.)\n   - working-directory (The directory where your docker-compose.yml is).\n - You can use a manual trigger or a schedule trigger to update (for n8n, I use Cron every 3 days to check for a new version).\n\n#### How to customize this workflow\n- Change the update mechanism: Modify the Docker commands if using a different container runtime or orchestration tool.\n- Modify the confirmation flow: Add extra validation steps, such as checking for breaking changes before updating.\n- Use a different notification method: Replace Telegram with Slack, email, or another notification service.",
    "features": [],
    "useCases": []
  },
  "logicalBlocks": [],
  "nodeDetails": [
    {
      "name": "Pull n8n Image",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "docker compose pull",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "check n8n installed version",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "role": "manualTrigger",
      "configDescription": "Version 1"
    },
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "role": "scheduleTrigger",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "docker compose up",
      "type": "n8n-nodes-base.ssh",
      "role": "ssh",
      "configDescription": "Version 1"
    },
    {
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "role": "stickyNote",
      "configDescription": "Version 1"
    },
    {
      "name": "Set Default variable",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Github HTTP Request",
      "type": "n8n-nodes-base.httpRequest",
      "role": "httpRequest",
      "configDescription": "Version 4.2"
    },
    {
      "name": "Merge Results",
      "type": "n8n-nodes-base.merge",
      "role": "merge",
      "configDescription": "Version 3.1"
    },
    {
      "name": "Edit Version String",
      "type": "n8n-nodes-base.set",
      "role": "set",
      "configDescription": "Version 3.4"
    },
    {
      "name": "Comapre Two Input",
      "type": "n8n-nodes-base.if",
      "role": "if",
      "configDescription": "Version 2.2"
    },
    {
      "name": "Telegram Notif",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Telegram Approve",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    },
    {
      "name": "Telegram Notif1",
      "type": "n8n-nodes-base.telegram",
      "role": "telegram",
      "configDescription": "Version 1.2"
    }
  ]
}