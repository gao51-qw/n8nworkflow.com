---
/**
 * 工作流网格容器组件
 * 提供响应式网格布局来展示工作流卡片
 */

import WorkflowCard from './WorkflowCard.astro';
import type { Workflow } from '../../lib/types/workflow';

interface Props {
  workflows: Workflow[];
  columns?: 1 | 2 | 3 | 4;
  class?: string;
}

const { workflows, columns = 3, class: className = '' } = Astro.props;

// 根据列数生成网格类
const gridClasses = {
  1: 'grid-cols-1',
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4',
};

const gridClass = gridClasses[columns];
---

{workflows.length > 0 ? (
  <div
    id="workflows-grid"
    class={`grid ${gridClass} gap-6 ${className}`}
  >
    {workflows.map((workflow, index) => (
      <WorkflowCard workflow={workflow} lazy={index >= 6} />
    ))}
  </div>
) : (
  <!-- 空状态 -->
  <div class="flex flex-col items-center justify-center py-16 px-4">
    <svg
      class="w-24 h-24 text-gray-300 dark:text-gray-600 mb-4"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="1.5"
        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
      />
    </svg>
    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
      No workflows found
    </h3>
    <p class="text-gray-600 dark:text-gray-400 text-center max-w-md">
      We couldn't find any workflows matching your criteria. Try adjusting your filters or check back later.
    </p>
    <a
      href="/"
      class="mt-6 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors"
    >
      Browse all workflows
    </a>
  </div>
)}
